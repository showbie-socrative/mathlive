{"version":3,"file":"mathlive.mjs","sources":["../src/common/types.ts","../src/core/font-metrics-data.ts","../src/core/font-metrics.ts","../src/core/mathstyle.ts","../src/core/context.ts","../src/core/svg-span.ts","../src/core/modes-utils.ts","../src/core/span.ts","../src/core/definitions-utils.ts","../src/core/definitions-accents.ts","../src/core/definitions-enclose.ts","../src/core/definitions-environments.ts","../src/core/definitions-extensible-symbols.ts","../src/core/definitions-functions.ts","../src/core/color.ts","../src/core/definitions-styling.ts","../src/core/definitions-symbols.ts","../src/core/delimiters.ts","../src/core/atom-to-latex.ts","../src/core/atom-utils.ts","../src/core/grapheme-splitter.ts","../src/core/lexer.ts","../src/core/atom-genfrac.ts","../src/core/atom-array.ts","../src/core/atom-overunder.ts","../src/core/atom-accent.ts","../src/core/atom-enclose.ts","../src/core/atom-box.ts","../src/core/atom-op.ts","../src/core/atom-line.ts","../src/core/atom-leftright.ts","../src/core/atom-surd.ts","../src/core/modes-math.ts","../src/core/modes-text.ts","../src/core/parser.ts","../src/editor/model-utils.ts","../src/editor/path.ts","../src/editor/model-array-utils.ts","../src/editor/model-class.ts","../src/editor/model-listeners.ts","../src/editor/model-selection.ts","../src/editor/keyboard-layout.ts","../src/editor/keybindings-definitions.ts","../src/editor/keybindings.ts","../src/editor/mathfield-utils.ts","../src/editor/mathfield-buttons.ts","../src/editor/popover.ts","../src/editor/model-command-mode.ts","../src/addons/math-ml.ts","../src/editor/mathfield-render.ts","../src/editor/commands.ts","../src/editor/model-array.ts","../src/editor/model-delete.ts","../src/editor/shortcuts-definitions.ts","../src/editor/shortcuts.ts","../src/editor/parse-math-string.ts","../src/editor/model-smartfence.ts","../src/editor/model-styling.ts","../src/editor/model-insert.ts","../src/editor/model-commands.ts","../src/editor/keyboard.ts","../src/editor/undo.ts","../src/editor/atom-to-ascii-math.ts","../src/editor/l10n-strings.ts","../src/editor/l10n.ts","../src/editor/autocomplete.ts","../src/editor/atom-to-speakable-text.ts","../src/editor/speech.ts","../src/editor/a11y.ts","../src/editor/config.ts","../src/editor/mathfield-smartmode.ts","../src/editor/mathfield-keyboard-input.ts","../src/editor/mathfield-commands.ts","../src/editor/mathfield-styling.ts","../src/editor/mathfield-clipboard.ts","../src/editor/mathfield-pointer-input.ts","../src/editor/virtual-keyboard-utils.ts","../src/editor/virtual-keyboard-commands.ts","../src/addons/math-json.ts","../src/editor/mathfield-class.ts","../src/addons/auto-render.ts","../src/addons/debug.ts","../src/editor/speech-read-aloud.ts","../src/addons/definitions-metadata.ts","../src/mathlive.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n\nexport function isArray(x: any): x is any[] {\n    return Array.isArray(x);\n}\n\nexport function isString(x: any): x is string {\n    return typeof x === 'string';\n}\n\nexport function isNumber(x: any): x is number {\n    return typeof x === 'number' && !Number.isNaN(x);\n}\n\nexport function isFunction(x: any): x is (...args: any[]) => void {\n    return typeof x === 'function';\n}\n","export default {\n    'AMS-Regular': {\n        '65': [0, 0.68889, 0, 0],\n        '66': [0, 0.68889, 0, 0],\n        '67': [0, 0.68889, 0, 0],\n        '68': [0, 0.68889, 0, 0],\n        '69': [0, 0.68889, 0, 0],\n        '70': [0, 0.68889, 0, 0],\n        '71': [0, 0.68889, 0, 0],\n        '72': [0, 0.68889, 0, 0],\n        '73': [0, 0.68889, 0, 0],\n        '74': [0.16667, 0.68889, 0, 0],\n        '75': [0, 0.68889, 0, 0],\n        '76': [0, 0.68889, 0, 0],\n        '77': [0, 0.68889, 0, 0],\n        '78': [0, 0.68889, 0, 0],\n        '79': [0.16667, 0.68889, 0, 0],\n        '80': [0, 0.68889, 0, 0],\n        '81': [0.16667, 0.68889, 0, 0],\n        '82': [0, 0.68889, 0, 0],\n        '83': [0, 0.68889, 0, 0],\n        '84': [0, 0.68889, 0, 0],\n        '85': [0, 0.68889, 0, 0],\n        '86': [0, 0.68889, 0, 0],\n        '87': [0, 0.68889, 0, 0],\n        '88': [0, 0.68889, 0, 0],\n        '89': [0, 0.68889, 0, 0],\n        '90': [0, 0.68889, 0, 0],\n        '107': [0, 0.68889, 0, 0],\n        '165': [0, 0.675, 0.025, 0],\n        '174': [0.15559, 0.69224, 0, 0],\n        '240': [0, 0.68889, 0, 0],\n        '295': [0, 0.68889, 0, 0],\n        '710': [0, 0.825, 0, 0],\n        '732': [0, 0.9, 0, 0],\n        '770': [0, 0.825, 0, 0],\n        '771': [0, 0.9, 0, 0],\n        '989': [0.08167, 0.58167, 0, 0],\n        '1008': [0, 0.43056, 0.04028, 0],\n        '8245': [0, 0.54986, 0, 0],\n        '8463': [0, 0.68889, 0, 0],\n        '8487': [0, 0.68889, 0, 0],\n        '8498': [0, 0.68889, 0, 0],\n        '8502': [0, 0.68889, 0, 0],\n        '8503': [0, 0.68889, 0, 0],\n        '8504': [0, 0.68889, 0, 0],\n        '8513': [0, 0.68889, 0, 0],\n        '8592': [-0.03598, 0.46402, 0, 0],\n        '8594': [-0.03598, 0.46402, 0, 0],\n        '8602': [-0.13313, 0.36687, 0, 0],\n        '8603': [-0.13313, 0.36687, 0, 0],\n        '8606': [0.01354, 0.52239, 0, 0],\n        '8608': [0.01354, 0.52239, 0, 0],\n        '8610': [0.01354, 0.52239, 0, 0],\n        '8611': [0.01354, 0.52239, 0, 0],\n        '8619': [0, 0.54986, 0, 0],\n        '8620': [0, 0.54986, 0, 0],\n        '8621': [-0.13313, 0.37788, 0, 0],\n        '8622': [-0.13313, 0.36687, 0, 0],\n        '8624': [0, 0.69224, 0, 0],\n        '8625': [0, 0.69224, 0, 0],\n        '8630': [0, 0.43056, 0, 0],\n        '8631': [0, 0.43056, 0, 0],\n        '8634': [0.08198, 0.58198, 0, 0],\n        '8635': [0.08198, 0.58198, 0, 0],\n        '8638': [0.19444, 0.69224, 0, 0],\n        '8639': [0.19444, 0.69224, 0, 0],\n        '8642': [0.19444, 0.69224, 0, 0],\n        '8643': [0.19444, 0.69224, 0, 0],\n        '8644': [0.1808, 0.675, 0, 0],\n        '8646': [0.1808, 0.675, 0, 0],\n        '8647': [0.1808, 0.675, 0, 0],\n        '8648': [0.19444, 0.69224, 0, 0],\n        '8649': [0.1808, 0.675, 0, 0],\n        '8650': [0.19444, 0.69224, 0, 0],\n        '8651': [0.01354, 0.52239, 0, 0],\n        '8652': [0.01354, 0.52239, 0, 0],\n        '8653': [-0.13313, 0.36687, 0, 0],\n        '8654': [-0.13313, 0.36687, 0, 0],\n        '8655': [-0.13313, 0.36687, 0, 0],\n        '8666': [0.13667, 0.63667, 0, 0],\n        '8667': [0.13667, 0.63667, 0, 0],\n        '8669': [-0.13313, 0.37788, 0, 0],\n        '8672': [-0.064, 0.437, 0, 0],\n        '8674': [-0.064, 0.437, 0, 0],\n        '8705': [0, 0.825, 0, 0],\n        '8708': [0, 0.68889, 0, 0],\n        '8709': [0.08167, 0.58167, 0, 0],\n        '8717': [0, 0.43056, 0, 0],\n        '8722': [-0.03598, 0.46402, 0, 0],\n        '8724': [0.08198, 0.69224, 0, 0],\n        '8726': [0.08167, 0.58167, 0, 0],\n        '8733': [0, 0.69224, 0, 0],\n        '8736': [0, 0.69224, 0, 0],\n        '8737': [0, 0.69224, 0, 0],\n        '8738': [0.03517, 0.52239, 0, 0],\n        '8739': [0.08167, 0.58167, 0, 0],\n        '8740': [0.25142, 0.74111, 0, 0],\n        '8741': [0.08167, 0.58167, 0, 0],\n        '8742': [0.25142, 0.74111, 0, 0],\n        '8756': [0, 0.69224, 0, 0],\n        '8757': [0, 0.69224, 0, 0],\n        '8764': [-0.13313, 0.36687, 0, 0],\n        '8765': [-0.13313, 0.37788, 0, 0],\n        '8769': [-0.13313, 0.36687, 0, 0],\n        '8770': [-0.03625, 0.46375, 0, 0],\n        '8774': [0.30274, 0.79383, 0, 0],\n        '8776': [-0.01688, 0.48312, 0, 0],\n        '8778': [0.08167, 0.58167, 0, 0],\n        '8782': [0.06062, 0.54986, 0, 0],\n        '8783': [0.06062, 0.54986, 0, 0],\n        '8785': [0.08198, 0.58198, 0, 0],\n        '8786': [0.08198, 0.58198, 0, 0],\n        '8787': [0.08198, 0.58198, 0, 0],\n        '8790': [0, 0.69224, 0, 0],\n        '8791': [0.22958, 0.72958, 0, 0],\n        '8796': [0.08198, 0.91667, 0, 0],\n        '8806': [0.25583, 0.75583, 0, 0],\n        '8807': [0.25583, 0.75583, 0, 0],\n        '8808': [0.25142, 0.75726, 0, 0],\n        '8809': [0.25142, 0.75726, 0, 0],\n        '8812': [0.25583, 0.75583, 0, 0],\n        '8814': [0.20576, 0.70576, 0, 0],\n        '8815': [0.20576, 0.70576, 0, 0],\n        '8816': [0.30274, 0.79383, 0, 0],\n        '8817': [0.30274, 0.79383, 0, 0],\n        '8818': [0.22958, 0.72958, 0, 0],\n        '8819': [0.22958, 0.72958, 0, 0],\n        '8822': [0.1808, 0.675, 0, 0],\n        '8823': [0.1808, 0.675, 0, 0],\n        '8828': [0.13667, 0.63667, 0, 0],\n        '8829': [0.13667, 0.63667, 0, 0],\n        '8830': [0.22958, 0.72958, 0, 0],\n        '8831': [0.22958, 0.72958, 0, 0],\n        '8832': [0.20576, 0.70576, 0, 0],\n        '8833': [0.20576, 0.70576, 0, 0],\n        '8840': [0.30274, 0.79383, 0, 0],\n        '8841': [0.30274, 0.79383, 0, 0],\n        '8842': [0.13597, 0.63597, 0, 0],\n        '8843': [0.13597, 0.63597, 0, 0],\n        '8847': [0.03517, 0.54986, 0, 0],\n        '8848': [0.03517, 0.54986, 0, 0],\n        '8858': [0.08198, 0.58198, 0, 0],\n        '8859': [0.08198, 0.58198, 0, 0],\n        '8861': [0.08198, 0.58198, 0, 0],\n        '8862': [0, 0.675, 0, 0],\n        '8863': [0, 0.675, 0, 0],\n        '8864': [0, 0.675, 0, 0],\n        '8865': [0, 0.675, 0, 0],\n        '8872': [0, 0.69224, 0, 0],\n        '8873': [0, 0.69224, 0, 0],\n        '8874': [0, 0.69224, 0, 0],\n        '8876': [0, 0.68889, 0, 0],\n        '8877': [0, 0.68889, 0, 0],\n        '8878': [0, 0.68889, 0, 0],\n        '8879': [0, 0.68889, 0, 0],\n        '8882': [0.03517, 0.54986, 0, 0],\n        '8883': [0.03517, 0.54986, 0, 0],\n        '8884': [0.13667, 0.63667, 0, 0],\n        '8885': [0.13667, 0.63667, 0, 0],\n        '8888': [0, 0.54986, 0, 0],\n        '8890': [0.19444, 0.43056, 0, 0],\n        '8891': [0.19444, 0.69224, 0, 0],\n        '8892': [0.19444, 0.69224, 0, 0],\n        '8901': [0, 0.54986, 0, 0],\n        '8903': [0.08167, 0.58167, 0, 0],\n        '8905': [0.08167, 0.58167, 0, 0],\n        '8906': [0.08167, 0.58167, 0, 0],\n        '8907': [0, 0.69224, 0, 0],\n        '8908': [0, 0.69224, 0, 0],\n        '8909': [-0.03598, 0.46402, 0, 0],\n        '8910': [0, 0.54986, 0, 0],\n        '8911': [0, 0.54986, 0, 0],\n        '8912': [0.03517, 0.54986, 0, 0],\n        '8913': [0.03517, 0.54986, 0, 0],\n        '8914': [0, 0.54986, 0, 0],\n        '8915': [0, 0.54986, 0, 0],\n        '8916': [0, 0.69224, 0, 0],\n        '8918': [0.0391, 0.5391, 0, 0],\n        '8919': [0.0391, 0.5391, 0, 0],\n        '8920': [0.03517, 0.54986, 0, 0],\n        '8921': [0.03517, 0.54986, 0, 0],\n        '8922': [0.38569, 0.88569, 0, 0],\n        '8923': [0.38569, 0.88569, 0, 0],\n        '8926': [0.13667, 0.63667, 0, 0],\n        '8927': [0.13667, 0.63667, 0, 0],\n        '8928': [0.30274, 0.79383, 0, 0],\n        '8929': [0.30274, 0.79383, 0, 0],\n        '8934': [0.23222, 0.74111, 0, 0],\n        '8935': [0.23222, 0.74111, 0, 0],\n        '8936': [0.23222, 0.74111, 0, 0],\n        '8937': [0.23222, 0.74111, 0, 0],\n        '8938': [0.20576, 0.70576, 0, 0],\n        '8939': [0.20576, 0.70576, 0, 0],\n        '8940': [0.30274, 0.79383, 0, 0],\n        '8941': [0.30274, 0.79383, 0, 0],\n        '8994': [0.19444, 0.69224, 0, 0],\n        '8995': [0.19444, 0.69224, 0, 0],\n        '9416': [0.15559, 0.69224, 0, 0],\n        '9484': [0, 0.69224, 0, 0],\n        '9488': [0, 0.69224, 0, 0],\n        '9492': [0, 0.37788, 0, 0],\n        '9496': [0, 0.37788, 0, 0],\n        '9585': [0.19444, 0.68889, 0, 0],\n        '9586': [0.19444, 0.74111, 0, 0],\n        '9632': [0, 0.675, 0, 0],\n        '9633': [0, 0.675, 0, 0],\n        '9650': [0, 0.54986, 0, 0],\n        '9651': [0, 0.54986, 0, 0],\n        '9654': [0.03517, 0.54986, 0, 0],\n        '9660': [0, 0.54986, 0, 0],\n        '9661': [0, 0.54986, 0, 0],\n        '9664': [0.03517, 0.54986, 0, 0],\n        '9674': [0.11111, 0.69224, 0, 0],\n        '9733': [0.19444, 0.69224, 0, 0],\n        '10003': [0, 0.69224, 0, 0],\n        '10016': [0, 0.69224, 0, 0],\n        '10731': [0.11111, 0.69224, 0, 0],\n        '10846': [0.19444, 0.75583, 0, 0],\n        '10877': [0.13667, 0.63667, 0, 0],\n        '10878': [0.13667, 0.63667, 0, 0],\n        '10885': [0.25583, 0.75583, 0, 0],\n        '10886': [0.25583, 0.75583, 0, 0],\n        '10887': [0.13597, 0.63597, 0, 0],\n        '10888': [0.13597, 0.63597, 0, 0],\n        '10889': [0.26167, 0.75726, 0, 0],\n        '10890': [0.26167, 0.75726, 0, 0],\n        '10891': [0.48256, 0.98256, 0, 0],\n        '10892': [0.48256, 0.98256, 0, 0],\n        '10901': [0.13667, 0.63667, 0, 0],\n        '10902': [0.13667, 0.63667, 0, 0],\n        '10933': [0.25142, 0.75726, 0, 0],\n        '10934': [0.25142, 0.75726, 0, 0],\n        '10935': [0.26167, 0.75726, 0, 0],\n        '10936': [0.26167, 0.75726, 0, 0],\n        '10937': [0.26167, 0.75726, 0, 0],\n        '10938': [0.26167, 0.75726, 0, 0],\n        '10949': [0.25583, 0.75583, 0, 0],\n        '10950': [0.25583, 0.75583, 0, 0],\n        '10955': [0.28481, 0.79383, 0, 0],\n        '10956': [0.28481, 0.79383, 0, 0],\n        '57350': [0.08167, 0.58167, 0, 0],\n        '57351': [0.08167, 0.58167, 0, 0],\n        '57352': [0.08167, 0.58167, 0, 0],\n        '57353': [0, 0.43056, 0.04028, 0],\n        '57356': [0.25142, 0.75726, 0, 0],\n        '57357': [0.25142, 0.75726, 0, 0],\n        '57358': [0.41951, 0.91951, 0, 0],\n        '57359': [0.30274, 0.79383, 0, 0],\n        '57360': [0.30274, 0.79383, 0, 0],\n        '57361': [0.41951, 0.91951, 0, 0],\n        '57366': [0.25142, 0.75726, 0, 0],\n        '57367': [0.25142, 0.75726, 0, 0],\n        '57368': [0.25142, 0.75726, 0, 0],\n        '57369': [0.25142, 0.75726, 0, 0],\n        '57370': [0.13597, 0.63597, 0, 0],\n        '57371': [0.13597, 0.63597, 0, 0],\n    },\n    'Caligraphic-Regular': {\n        '48': [0, 0.43056, 0, 0],\n        '49': [0, 0.43056, 0, 0],\n        '50': [0, 0.43056, 0, 0],\n        '51': [0.19444, 0.43056, 0, 0],\n        '52': [0.19444, 0.43056, 0, 0],\n        '53': [0.19444, 0.43056, 0, 0],\n        '54': [0, 0.64444, 0, 0],\n        '55': [0.19444, 0.43056, 0, 0],\n        '56': [0, 0.64444, 0, 0],\n        '57': [0.19444, 0.43056, 0, 0],\n        '65': [0, 0.68333, 0, 0.19445],\n        '66': [0, 0.68333, 0.03041, 0.13889],\n        '67': [0, 0.68333, 0.05834, 0.13889],\n        '68': [0, 0.68333, 0.02778, 0.08334],\n        '69': [0, 0.68333, 0.08944, 0.11111],\n        '70': [0, 0.68333, 0.09931, 0.11111],\n        '71': [0.09722, 0.68333, 0.0593, 0.11111],\n        '72': [0, 0.68333, 0.00965, 0.11111],\n        '73': [0, 0.68333, 0.07382, 0],\n        '74': [0.09722, 0.68333, 0.18472, 0.16667],\n        '75': [0, 0.68333, 0.01445, 0.05556],\n        '76': [0, 0.68333, 0, 0.13889],\n        '77': [0, 0.68333, 0, 0.13889],\n        '78': [0, 0.68333, 0.14736, 0.08334],\n        '79': [0, 0.68333, 0.02778, 0.11111],\n        '80': [0, 0.68333, 0.08222, 0.08334],\n        '81': [0.09722, 0.68333, 0, 0.11111],\n        '82': [0, 0.68333, 0, 0.08334],\n        '83': [0, 0.68333, 0.075, 0.13889],\n        '84': [0, 0.68333, 0.25417, 0],\n        '85': [0, 0.68333, 0.09931, 0.08334],\n        '86': [0, 0.68333, 0.08222, 0],\n        '87': [0, 0.68333, 0.08222, 0.08334],\n        '88': [0, 0.68333, 0.14643, 0.13889],\n        '89': [0.09722, 0.68333, 0.08222, 0.08334],\n        '90': [0, 0.68333, 0.07944, 0.13889],\n    },\n    'Fraktur-Regular': {\n        '33': [0, 0.69141, 0, 0],\n        '34': [0, 0.69141, 0, 0],\n        '38': [0, 0.69141, 0, 0],\n        '39': [0, 0.69141, 0, 0],\n        '40': [0.24982, 0.74947, 0, 0],\n        '41': [0.24982, 0.74947, 0, 0],\n        '42': [0, 0.62119, 0, 0],\n        '43': [0.08319, 0.58283, 0, 0],\n        '44': [0, 0.10803, 0, 0],\n        '45': [0.08319, 0.58283, 0, 0],\n        '46': [0, 0.10803, 0, 0],\n        '47': [0.24982, 0.74947, 0, 0],\n        '48': [0, 0.47534, 0, 0],\n        '49': [0, 0.47534, 0, 0],\n        '50': [0, 0.47534, 0, 0],\n        '51': [0.18906, 0.47534, 0, 0],\n        '52': [0.18906, 0.47534, 0, 0],\n        '53': [0.18906, 0.47534, 0, 0],\n        '54': [0, 0.69141, 0, 0],\n        '55': [0.18906, 0.47534, 0, 0],\n        '56': [0, 0.69141, 0, 0],\n        '57': [0.18906, 0.47534, 0, 0],\n        '58': [0, 0.47534, 0, 0],\n        '59': [0.12604, 0.47534, 0, 0],\n        '61': [-0.13099, 0.36866, 0, 0],\n        '63': [0, 0.69141, 0, 0],\n        '65': [0, 0.69141, 0, 0],\n        '66': [0, 0.69141, 0, 0],\n        '67': [0, 0.69141, 0, 0],\n        '68': [0, 0.69141, 0, 0],\n        '69': [0, 0.69141, 0, 0],\n        '70': [0.12604, 0.69141, 0, 0],\n        '71': [0, 0.69141, 0, 0],\n        '72': [0.06302, 0.69141, 0, 0],\n        '73': [0, 0.69141, 0, 0],\n        '74': [0.12604, 0.69141, 0, 0],\n        '75': [0, 0.69141, 0, 0],\n        '76': [0, 0.69141, 0, 0],\n        '77': [0, 0.69141, 0, 0],\n        '78': [0, 0.69141, 0, 0],\n        '79': [0, 0.69141, 0, 0],\n        '80': [0.18906, 0.69141, 0, 0],\n        '81': [0.03781, 0.69141, 0, 0],\n        '82': [0, 0.69141, 0, 0],\n        '83': [0, 0.69141, 0, 0],\n        '84': [0, 0.69141, 0, 0],\n        '85': [0, 0.69141, 0, 0],\n        '86': [0, 0.69141, 0, 0],\n        '87': [0, 0.69141, 0, 0],\n        '88': [0, 0.69141, 0, 0],\n        '89': [0.18906, 0.69141, 0, 0],\n        '90': [0.12604, 0.69141, 0, 0],\n        '91': [0.24982, 0.74947, 0, 0],\n        '93': [0.24982, 0.74947, 0, 0],\n        '94': [0, 0.69141, 0, 0],\n        '97': [0, 0.47534, 0, 0],\n        '98': [0, 0.69141, 0, 0],\n        '99': [0, 0.47534, 0, 0],\n        '100': [0, 0.62119, 0, 0],\n        '101': [0, 0.47534, 0, 0],\n        '102': [0.18906, 0.69141, 0, 0],\n        '103': [0.18906, 0.47534, 0, 0],\n        '104': [0.18906, 0.69141, 0, 0],\n        '105': [0, 0.69141, 0, 0],\n        '106': [0, 0.69141, 0, 0],\n        '107': [0, 0.69141, 0, 0],\n        '108': [0, 0.69141, 0, 0],\n        '109': [0, 0.47534, 0, 0],\n        '110': [0, 0.47534, 0, 0],\n        '111': [0, 0.47534, 0, 0],\n        '112': [0.18906, 0.52396, 0, 0],\n        '113': [0.18906, 0.47534, 0, 0],\n        '114': [0, 0.47534, 0, 0],\n        '115': [0, 0.47534, 0, 0],\n        '116': [0, 0.62119, 0, 0],\n        '117': [0, 0.47534, 0, 0],\n        '118': [0, 0.52396, 0, 0],\n        '119': [0, 0.52396, 0, 0],\n        '120': [0.18906, 0.47534, 0, 0],\n        '121': [0.18906, 0.47534, 0, 0],\n        '122': [0.18906, 0.47534, 0, 0],\n        '8216': [0, 0.69141, 0, 0],\n        '8217': [0, 0.69141, 0, 0],\n        '58112': [0, 0.62119, 0, 0],\n        '58113': [0, 0.62119, 0, 0],\n        '58114': [0.18906, 0.69141, 0, 0],\n        '58115': [0.18906, 0.69141, 0, 0],\n        '58116': [0.18906, 0.47534, 0, 0],\n        '58117': [0, 0.69141, 0, 0],\n        '58118': [0, 0.62119, 0, 0],\n        '58119': [0, 0.47534, 0, 0],\n    },\n    'Main-Bold': {\n        '33': [0, 0.69444, 0, 0],\n        '34': [0, 0.69444, 0, 0],\n        '35': [0.19444, 0.69444, 0, 0],\n        '36': [0.05556, 0.75, 0, 0],\n        '37': [0.05556, 0.75, 0, 0],\n        '38': [0, 0.69444, 0, 0],\n        '39': [0, 0.69444, 0, 0],\n        '40': [0.25, 0.75, 0, 0],\n        '41': [0.25, 0.75, 0, 0],\n        '42': [0, 0.75, 0, 0],\n        '43': [0.13333, 0.63333, 0, 0],\n        '44': [0.19444, 0.15556, 0, 0],\n        '45': [0, 0.44444, 0, 0],\n        '46': [0, 0.15556, 0, 0],\n        '47': [0.25, 0.75, 0, 0],\n        '48': [0, 0.64444, 0, 0],\n        '49': [0, 0.64444, 0, 0],\n        '50': [0, 0.64444, 0, 0],\n        '51': [0, 0.64444, 0, 0],\n        '52': [0, 0.64444, 0, 0],\n        '53': [0, 0.64444, 0, 0],\n        '54': [0, 0.64444, 0, 0],\n        '55': [0, 0.64444, 0, 0],\n        '56': [0, 0.64444, 0, 0],\n        '57': [0, 0.64444, 0, 0],\n        '58': [0, 0.44444, 0, 0],\n        '59': [0.19444, 0.44444, 0, 0],\n        '60': [0.08556, 0.58556, 0, 0],\n        '61': [-0.10889, 0.39111, 0, 0],\n        '62': [0.08556, 0.58556, 0, 0],\n        '63': [0, 0.69444, 0, 0],\n        '64': [0, 0.69444, 0, 0],\n        '65': [0, 0.68611, 0, 0],\n        '66': [0, 0.68611, 0, 0],\n        '67': [0, 0.68611, 0, 0],\n        '68': [0, 0.68611, 0, 0],\n        '69': [0, 0.68611, 0, 0],\n        '70': [0, 0.68611, 0, 0],\n        '71': [0, 0.68611, 0, 0],\n        '72': [0, 0.68611, 0, 0],\n        '73': [0, 0.68611, 0, 0],\n        '74': [0, 0.68611, 0, 0],\n        '75': [0, 0.68611, 0, 0],\n        '76': [0, 0.68611, 0, 0],\n        '77': [0, 0.68611, 0, 0],\n        '78': [0, 0.68611, 0, 0],\n        '79': [0, 0.68611, 0, 0],\n        '80': [0, 0.68611, 0, 0],\n        '81': [0.19444, 0.68611, 0, 0],\n        '82': [0, 0.68611, 0, 0],\n        '83': [0, 0.68611, 0, 0],\n        '84': [0, 0.68611, 0, 0],\n        '85': [0, 0.68611, 0, 0],\n        '86': [0, 0.68611, 0.01597, 0],\n        '87': [0, 0.68611, 0.01597, 0],\n        '88': [0, 0.68611, 0, 0],\n        '89': [0, 0.68611, 0.02875, 0],\n        '90': [0, 0.68611, 0, 0],\n        '91': [0.25, 0.75, 0, 0],\n        '92': [0.25, 0.75, 0, 0],\n        '93': [0.25, 0.75, 0, 0],\n        '94': [0, 0.69444, 0, 0],\n        '95': [0.31, 0.13444, 0.03194, 0],\n        '97': [0, 0.44444, 0, 0],\n        '98': [0, 0.69444, 0, 0],\n        '99': [0, 0.44444, 0, 0],\n        '100': [0, 0.69444, 0, 0],\n        '101': [0, 0.44444, 0, 0],\n        '102': [0, 0.69444, 0.10903, 0],\n        '103': [0.19444, 0.44444, 0.01597, 0],\n        '104': [0, 0.69444, 0, 0],\n        '105': [0, 0.69444, 0, 0],\n        '106': [0.19444, 0.69444, 0, 0],\n        '107': [0, 0.69444, 0, 0],\n        '108': [0, 0.69444, 0, 0],\n        '109': [0, 0.44444, 0, 0],\n        '110': [0, 0.44444, 0, 0],\n        '111': [0, 0.44444, 0, 0],\n        '112': [0.19444, 0.44444, 0, 0],\n        '113': [0.19444, 0.44444, 0, 0],\n        '114': [0, 0.44444, 0, 0],\n        '115': [0, 0.44444, 0, 0],\n        '116': [0, 0.63492, 0, 0],\n        '117': [0, 0.44444, 0, 0],\n        '118': [0, 0.44444, 0.01597, 0],\n        '119': [0, 0.44444, 0.01597, 0],\n        '120': [0, 0.44444, 0, 0],\n        '121': [0.19444, 0.44444, 0.01597, 0],\n        '122': [0, 0.44444, 0, 0],\n        '123': [0.25, 0.75, 0, 0],\n        '124': [0.25, 0.75, 0, 0],\n        '125': [0.25, 0.75, 0, 0],\n        '126': [0.35, 0.34444, 0, 0],\n        '168': [0, 0.69444, 0, 0],\n        '172': [0, 0.44444, 0, 0],\n        '176': [0, 0.69444, 0, 0],\n        '177': [0.13333, 0.63333, 0, 0],\n        '184': [0.17014, 0, 0, 0],\n        '198': [0, 0.68611, 0, 0],\n        '215': [0.13333, 0.63333, 0, 0],\n        '216': [0.04861, 0.73472, 0, 0],\n        '223': [0, 0.69444, 0, 0],\n        '230': [0, 0.44444, 0, 0],\n        '247': [0.13333, 0.63333, 0, 0],\n        '248': [0.09722, 0.54167, 0, 0],\n        '305': [0, 0.44444, 0, 0],\n        '338': [0, 0.68611, 0, 0],\n        '339': [0, 0.44444, 0, 0],\n        '567': [0.19444, 0.44444, 0, 0],\n        '710': [0, 0.69444, 0, 0],\n        '711': [0, 0.63194, 0, 0],\n        '713': [0, 0.59611, 0, 0],\n        '714': [0, 0.69444, 0, 0],\n        '715': [0, 0.69444, 0, 0],\n        '728': [0, 0.69444, 0, 0],\n        '729': [0, 0.69444, 0, 0],\n        '730': [0, 0.69444, 0, 0],\n        '732': [0, 0.69444, 0, 0],\n        '733': [0, 0.69444, 0, 0],\n        '915': [0, 0.68611, 0, 0],\n        '916': [0, 0.68611, 0, 0],\n        '920': [0, 0.68611, 0, 0],\n        '923': [0, 0.68611, 0, 0],\n        '926': [0, 0.68611, 0, 0],\n        '928': [0, 0.68611, 0, 0],\n        '931': [0, 0.68611, 0, 0],\n        '933': [0, 0.68611, 0, 0],\n        '934': [0, 0.68611, 0, 0],\n        '936': [0, 0.68611, 0, 0],\n        '937': [0, 0.68611, 0, 0],\n        '8211': [0, 0.44444, 0.03194, 0],\n        '8212': [0, 0.44444, 0.03194, 0],\n        '8216': [0, 0.69444, 0, 0],\n        '8217': [0, 0.69444, 0, 0],\n        '8220': [0, 0.69444, 0, 0],\n        '8221': [0, 0.69444, 0, 0],\n        '8224': [0.19444, 0.69444, 0, 0],\n        '8225': [0.19444, 0.69444, 0, 0],\n        '8242': [0, 0.55556, 0, 0],\n        '8407': [0, 0.72444, 0.15486, 0],\n        '8463': [0, 0.69444, 0, 0],\n        '8465': [0, 0.69444, 0, 0],\n        '8467': [0, 0.69444, 0, 0],\n        '8472': [0.19444, 0.44444, 0, 0],\n        '8476': [0, 0.69444, 0, 0],\n        '8501': [0, 0.69444, 0, 0],\n        '8592': [-0.10889, 0.39111, 0, 0],\n        '8593': [0.19444, 0.69444, 0, 0],\n        '8594': [-0.10889, 0.39111, 0, 0],\n        '8595': [0.19444, 0.69444, 0, 0],\n        '8596': [-0.10889, 0.39111, 0, 0],\n        '8597': [0.25, 0.75, 0, 0],\n        '8598': [0.19444, 0.69444, 0, 0],\n        '8599': [0.19444, 0.69444, 0, 0],\n        '8600': [0.19444, 0.69444, 0, 0],\n        '8601': [0.19444, 0.69444, 0, 0],\n        '8636': [-0.10889, 0.39111, 0, 0],\n        '8637': [-0.10889, 0.39111, 0, 0],\n        '8640': [-0.10889, 0.39111, 0, 0],\n        '8641': [-0.10889, 0.39111, 0, 0],\n        '8656': [-0.10889, 0.39111, 0, 0],\n        '8657': [0.19444, 0.69444, 0, 0],\n        '8658': [-0.10889, 0.39111, 0, 0],\n        '8659': [0.19444, 0.69444, 0, 0],\n        '8660': [-0.10889, 0.39111, 0, 0],\n        '8661': [0.25, 0.75, 0, 0],\n        '8704': [0, 0.69444, 0, 0],\n        '8706': [0, 0.69444, 0.06389, 0],\n        '8707': [0, 0.69444, 0, 0],\n        '8709': [0.05556, 0.75, 0, 0],\n        '8711': [0, 0.68611, 0, 0],\n        '8712': [0.08556, 0.58556, 0, 0],\n        '8715': [0.08556, 0.58556, 0, 0],\n        '8722': [0.13333, 0.63333, 0, 0],\n        '8723': [0.13333, 0.63333, 0, 0],\n        '8725': [0.25, 0.75, 0, 0],\n        '8726': [0.25, 0.75, 0, 0],\n        '8727': [-0.02778, 0.47222, 0, 0],\n        '8728': [-0.02639, 0.47361, 0, 0],\n        '8729': [-0.02639, 0.47361, 0, 0],\n        '8730': [0.18, 0.82, 0, 0],\n        '8733': [0, 0.44444, 0, 0],\n        '8734': [0, 0.44444, 0, 0],\n        '8736': [0, 0.69224, 0, 0],\n        '8739': [0.25, 0.75, 0, 0],\n        '8741': [0.25, 0.75, 0, 0],\n        '8743': [0, 0.55556, 0, 0],\n        '8744': [0, 0.55556, 0, 0],\n        '8745': [0, 0.55556, 0, 0],\n        '8746': [0, 0.55556, 0, 0],\n        '8747': [0.19444, 0.69444, 0.12778, 0],\n        '8764': [-0.10889, 0.39111, 0, 0],\n        '8768': [0.19444, 0.69444, 0, 0],\n        '8771': [0.00222, 0.50222, 0, 0],\n        '8776': [0.02444, 0.52444, 0, 0],\n        '8781': [0.00222, 0.50222, 0, 0],\n        '8801': [0.00222, 0.50222, 0, 0],\n        '8804': [0.19667, 0.69667, 0, 0],\n        '8805': [0.19667, 0.69667, 0, 0],\n        '8810': [0.08556, 0.58556, 0, 0],\n        '8811': [0.08556, 0.58556, 0, 0],\n        '8826': [0.08556, 0.58556, 0, 0],\n        '8827': [0.08556, 0.58556, 0, 0],\n        '8834': [0.08556, 0.58556, 0, 0],\n        '8835': [0.08556, 0.58556, 0, 0],\n        '8838': [0.19667, 0.69667, 0, 0],\n        '8839': [0.19667, 0.69667, 0, 0],\n        '8846': [0, 0.55556, 0, 0],\n        '8849': [0.19667, 0.69667, 0, 0],\n        '8850': [0.19667, 0.69667, 0, 0],\n        '8851': [0, 0.55556, 0, 0],\n        '8852': [0, 0.55556, 0, 0],\n        '8853': [0.13333, 0.63333, 0, 0],\n        '8854': [0.13333, 0.63333, 0, 0],\n        '8855': [0.13333, 0.63333, 0, 0],\n        '8856': [0.13333, 0.63333, 0, 0],\n        '8857': [0.13333, 0.63333, 0, 0],\n        '8866': [0, 0.69444, 0, 0],\n        '8867': [0, 0.69444, 0, 0],\n        '8868': [0, 0.69444, 0, 0],\n        '8869': [0, 0.69444, 0, 0],\n        '8900': [-0.02639, 0.47361, 0, 0],\n        '8901': [-0.02639, 0.47361, 0, 0],\n        '8902': [-0.02778, 0.47222, 0, 0],\n        '8968': [0.25, 0.75, 0, 0],\n        '8969': [0.25, 0.75, 0, 0],\n        '8970': [0.25, 0.75, 0, 0],\n        '8971': [0.25, 0.75, 0, 0],\n        '8994': [-0.13889, 0.36111, 0, 0],\n        '8995': [-0.13889, 0.36111, 0, 0],\n        '9651': [0.19444, 0.69444, 0, 0],\n        '9657': [-0.02778, 0.47222, 0, 0],\n        '9661': [0.19444, 0.69444, 0, 0],\n        '9667': [-0.02778, 0.47222, 0, 0],\n        '9711': [0.19444, 0.69444, 0, 0],\n        '9824': [0.12963, 0.69444, 0, 0],\n        '9825': [0.12963, 0.69444, 0, 0],\n        '9826': [0.12963, 0.69444, 0, 0],\n        '9827': [0.12963, 0.69444, 0, 0],\n        '9837': [0, 0.75, 0, 0],\n        '9838': [0.19444, 0.69444, 0, 0],\n        '9839': [0.19444, 0.69444, 0, 0],\n        '10216': [0.25, 0.75, 0, 0],\n        '10217': [0.25, 0.75, 0, 0],\n        '10815': [0, 0.68611, 0, 0],\n        '10927': [0.19667, 0.69667, 0, 0],\n        '10928': [0.19667, 0.69667, 0, 0],\n        '57376': [0.19444, 0.69444, 0, 0],\n    },\n    'Main-BoldItalic': {\n        '33': [0, 0.69444, 0.11417, 0],\n        '34': [0, 0.69444, 0.07939, 0],\n        '35': [0.19444, 0.69444, 0.06833, 0],\n        '37': [0.05556, 0.75, 0.12861, 0],\n        '38': [0, 0.69444, 0.08528, 0],\n        '39': [0, 0.69444, 0.12945, 0],\n        '40': [0.25, 0.75, 0.15806, 0],\n        '41': [0.25, 0.75, 0.03306, 0],\n        '42': [0, 0.75, 0.14333, 0],\n        '43': [0.10333, 0.60333, 0.03306, 0],\n        '44': [0.19444, 0.14722, 0, 0],\n        '45': [0, 0.44444, 0.02611, 0],\n        '46': [0, 0.14722, 0, 0],\n        '47': [0.25, 0.75, 0.15806, 0],\n        '48': [0, 0.64444, 0.13167, 0],\n        '49': [0, 0.64444, 0.13167, 0],\n        '50': [0, 0.64444, 0.13167, 0],\n        '51': [0, 0.64444, 0.13167, 0],\n        '52': [0.19444, 0.64444, 0.13167, 0],\n        '53': [0, 0.64444, 0.13167, 0],\n        '54': [0, 0.64444, 0.13167, 0],\n        '55': [0.19444, 0.64444, 0.13167, 0],\n        '56': [0, 0.64444, 0.13167, 0],\n        '57': [0, 0.64444, 0.13167, 0],\n        '58': [0, 0.44444, 0.06695, 0],\n        '59': [0.19444, 0.44444, 0.06695, 0],\n        '61': [-0.10889, 0.39111, 0.06833, 0],\n        '63': [0, 0.69444, 0.11472, 0],\n        '64': [0, 0.69444, 0.09208, 0],\n        '65': [0, 0.68611, 0, 0],\n        '66': [0, 0.68611, 0.0992, 0],\n        '67': [0, 0.68611, 0.14208, 0],\n        '68': [0, 0.68611, 0.09062, 0],\n        '69': [0, 0.68611, 0.11431, 0],\n        '70': [0, 0.68611, 0.12903, 0],\n        '71': [0, 0.68611, 0.07347, 0],\n        '72': [0, 0.68611, 0.17208, 0],\n        '73': [0, 0.68611, 0.15681, 0],\n        '74': [0, 0.68611, 0.145, 0],\n        '75': [0, 0.68611, 0.14208, 0],\n        '76': [0, 0.68611, 0, 0],\n        '77': [0, 0.68611, 0.17208, 0],\n        '78': [0, 0.68611, 0.17208, 0],\n        '79': [0, 0.68611, 0.09062, 0],\n        '80': [0, 0.68611, 0.0992, 0],\n        '81': [0.19444, 0.68611, 0.09062, 0],\n        '82': [0, 0.68611, 0.02559, 0],\n        '83': [0, 0.68611, 0.11264, 0],\n        '84': [0, 0.68611, 0.12903, 0],\n        '85': [0, 0.68611, 0.17208, 0],\n        '86': [0, 0.68611, 0.18625, 0],\n        '87': [0, 0.68611, 0.18625, 0],\n        '88': [0, 0.68611, 0.15681, 0],\n        '89': [0, 0.68611, 0.19803, 0],\n        '90': [0, 0.68611, 0.14208, 0],\n        '91': [0.25, 0.75, 0.1875, 0],\n        '93': [0.25, 0.75, 0.09972, 0],\n        '94': [0, 0.69444, 0.06709, 0],\n        '95': [0.31, 0.13444, 0.09811, 0],\n        '97': [0, 0.44444, 0.09426, 0],\n        '98': [0, 0.69444, 0.07861, 0],\n        '99': [0, 0.44444, 0.05222, 0],\n        '100': [0, 0.69444, 0.10861, 0],\n        '101': [0, 0.44444, 0.085, 0],\n        '102': [0.19444, 0.69444, 0.21778, 0],\n        '103': [0.19444, 0.44444, 0.105, 0],\n        '104': [0, 0.69444, 0.09426, 0],\n        '105': [0, 0.69326, 0.11387, 0],\n        '106': [0.19444, 0.69326, 0.1672, 0],\n        '107': [0, 0.69444, 0.11111, 0],\n        '108': [0, 0.69444, 0.10861, 0],\n        '109': [0, 0.44444, 0.09426, 0],\n        '110': [0, 0.44444, 0.09426, 0],\n        '111': [0, 0.44444, 0.07861, 0],\n        '112': [0.19444, 0.44444, 0.07861, 0],\n        '113': [0.19444, 0.44444, 0.105, 0],\n        '114': [0, 0.44444, 0.11111, 0],\n        '115': [0, 0.44444, 0.08167, 0],\n        '116': [0, 0.63492, 0.09639, 0],\n        '117': [0, 0.44444, 0.09426, 0],\n        '118': [0, 0.44444, 0.11111, 0],\n        '119': [0, 0.44444, 0.11111, 0],\n        '120': [0, 0.44444, 0.12583, 0],\n        '121': [0.19444, 0.44444, 0.105, 0],\n        '122': [0, 0.44444, 0.13889, 0],\n        '126': [0.35, 0.34444, 0.11472, 0],\n        '163': [0, 0.69444, 0, 0],\n        '168': [0, 0.69444, 0.11473, 0],\n        '176': [0, 0.69444, 0, 0],\n        '184': [0.17014, 0, 0, 0],\n        '198': [0, 0.68611, 0.11431, 0],\n        '216': [0.04861, 0.73472, 0.09062, 0],\n        '223': [0.19444, 0.69444, 0.09736, 0],\n        '230': [0, 0.44444, 0.085, 0],\n        '248': [0.09722, 0.54167, 0.09458, 0],\n        '305': [0, 0.44444, 0.09426, 0],\n        '338': [0, 0.68611, 0.11431, 0],\n        '339': [0, 0.44444, 0.085, 0],\n        '567': [0.19444, 0.44444, 0.04611, 0],\n        '710': [0, 0.69444, 0.06709, 0],\n        '711': [0, 0.63194, 0.08271, 0],\n        '713': [0, 0.59444, 0.10444, 0],\n        '714': [0, 0.69444, 0.08528, 0],\n        '715': [0, 0.69444, 0, 0],\n        '728': [0, 0.69444, 0.10333, 0],\n        '729': [0, 0.69444, 0.12945, 0],\n        '730': [0, 0.69444, 0, 0],\n        '732': [0, 0.69444, 0.11472, 0],\n        '733': [0, 0.69444, 0.11472, 0],\n        '915': [0, 0.68611, 0.12903, 0],\n        '916': [0, 0.68611, 0, 0],\n        '920': [0, 0.68611, 0.09062, 0],\n        '923': [0, 0.68611, 0, 0],\n        '926': [0, 0.68611, 0.15092, 0],\n        '928': [0, 0.68611, 0.17208, 0],\n        '931': [0, 0.68611, 0.11431, 0],\n        '933': [0, 0.68611, 0.10778, 0],\n        '934': [0, 0.68611, 0.05632, 0],\n        '936': [0, 0.68611, 0.10778, 0],\n        '937': [0, 0.68611, 0.0992, 0],\n        '8211': [0, 0.44444, 0.09811, 0],\n        '8212': [0, 0.44444, 0.09811, 0],\n        '8216': [0, 0.69444, 0.12945, 0],\n        '8217': [0, 0.69444, 0.12945, 0],\n        '8220': [0, 0.69444, 0.16772, 0],\n        '8221': [0, 0.69444, 0.07939, 0],\n    },\n    'Main-Italic': {\n        '33': [0, 0.69444, 0.12417, 0],\n        '34': [0, 0.69444, 0.06961, 0],\n        '35': [0.19444, 0.69444, 0.06616, 0],\n        '37': [0.05556, 0.75, 0.13639, 0],\n        '38': [0, 0.69444, 0.09694, 0],\n        '39': [0, 0.69444, 0.12417, 0],\n        '40': [0.25, 0.75, 0.16194, 0],\n        '41': [0.25, 0.75, 0.03694, 0],\n        '42': [0, 0.75, 0.14917, 0],\n        '43': [0.05667, 0.56167, 0.03694, 0],\n        '44': [0.19444, 0.10556, 0, 0],\n        '45': [0, 0.43056, 0.02826, 0],\n        '46': [0, 0.10556, 0, 0],\n        '47': [0.25, 0.75, 0.16194, 0],\n        '48': [0, 0.64444, 0.13556, 0],\n        '49': [0, 0.64444, 0.13556, 0],\n        '50': [0, 0.64444, 0.13556, 0],\n        '51': [0, 0.64444, 0.13556, 0],\n        '52': [0.19444, 0.64444, 0.13556, 0],\n        '53': [0, 0.64444, 0.13556, 0],\n        '54': [0, 0.64444, 0.13556, 0],\n        '55': [0.19444, 0.64444, 0.13556, 0],\n        '56': [0, 0.64444, 0.13556, 0],\n        '57': [0, 0.64444, 0.13556, 0],\n        '58': [0, 0.43056, 0.0582, 0],\n        '59': [0.19444, 0.43056, 0.0582, 0],\n        '61': [-0.13313, 0.36687, 0.06616, 0],\n        '63': [0, 0.69444, 0.1225, 0],\n        '64': [0, 0.69444, 0.09597, 0],\n        '65': [0, 0.68333, 0, 0],\n        '66': [0, 0.68333, 0.10257, 0],\n        '67': [0, 0.68333, 0.14528, 0],\n        '68': [0, 0.68333, 0.09403, 0],\n        '69': [0, 0.68333, 0.12028, 0],\n        '70': [0, 0.68333, 0.13305, 0],\n        '71': [0, 0.68333, 0.08722, 0],\n        '72': [0, 0.68333, 0.16389, 0],\n        '73': [0, 0.68333, 0.15806, 0],\n        '74': [0, 0.68333, 0.14028, 0],\n        '75': [0, 0.68333, 0.14528, 0],\n        '76': [0, 0.68333, 0, 0],\n        '77': [0, 0.68333, 0.16389, 0],\n        '78': [0, 0.68333, 0.16389, 0],\n        '79': [0, 0.68333, 0.09403, 0],\n        '80': [0, 0.68333, 0.10257, 0],\n        '81': [0.19444, 0.68333, 0.09403, 0],\n        '82': [0, 0.68333, 0.03868, 0],\n        '83': [0, 0.68333, 0.11972, 0],\n        '84': [0, 0.68333, 0.13305, 0],\n        '85': [0, 0.68333, 0.16389, 0],\n        '86': [0, 0.68333, 0.18361, 0],\n        '87': [0, 0.68333, 0.18361, 0],\n        '88': [0, 0.68333, 0.15806, 0],\n        '89': [0, 0.68333, 0.19383, 0],\n        '90': [0, 0.68333, 0.14528, 0],\n        '91': [0.25, 0.75, 0.1875, 0],\n        '93': [0.25, 0.75, 0.10528, 0],\n        '94': [0, 0.69444, 0.06646, 0],\n        '95': [0.31, 0.12056, 0.09208, 0],\n        '97': [0, 0.43056, 0.07671, 0],\n        '98': [0, 0.69444, 0.06312, 0],\n        '99': [0, 0.43056, 0.05653, 0],\n        '100': [0, 0.69444, 0.10333, 0],\n        '101': [0, 0.43056, 0.07514, 0],\n        '102': [0.19444, 0.69444, 0.21194, 0],\n        '103': [0.19444, 0.43056, 0.08847, 0],\n        '104': [0, 0.69444, 0.07671, 0],\n        '105': [0, 0.65536, 0.1019, 0],\n        '106': [0.19444, 0.65536, 0.14467, 0],\n        '107': [0, 0.69444, 0.10764, 0],\n        '108': [0, 0.69444, 0.10333, 0],\n        '109': [0, 0.43056, 0.07671, 0],\n        '110': [0, 0.43056, 0.07671, 0],\n        '111': [0, 0.43056, 0.06312, 0],\n        '112': [0.19444, 0.43056, 0.06312, 0],\n        '113': [0.19444, 0.43056, 0.08847, 0],\n        '114': [0, 0.43056, 0.10764, 0],\n        '115': [0, 0.43056, 0.08208, 0],\n        '116': [0, 0.61508, 0.09486, 0],\n        '117': [0, 0.43056, 0.07671, 0],\n        '118': [0, 0.43056, 0.10764, 0],\n        '119': [0, 0.43056, 0.10764, 0],\n        '120': [0, 0.43056, 0.12042, 0],\n        '121': [0.19444, 0.43056, 0.08847, 0],\n        '122': [0, 0.43056, 0.12292, 0],\n        '126': [0.35, 0.31786, 0.11585, 0],\n        '163': [0, 0.69444, 0, 0],\n        '168': [0, 0.66786, 0.10474, 0],\n        '176': [0, 0.69444, 0, 0],\n        '184': [0.17014, 0, 0, 0],\n        '198': [0, 0.68333, 0.12028, 0],\n        '216': [0.04861, 0.73194, 0.09403, 0],\n        '223': [0.19444, 0.69444, 0.10514, 0],\n        '230': [0, 0.43056, 0.07514, 0],\n        '248': [0.09722, 0.52778, 0.09194, 0],\n        '305': [0, 0.43056, 0, 0.02778],\n        '338': [0, 0.68333, 0.12028, 0],\n        '339': [0, 0.43056, 0.07514, 0],\n        '567': [0.19444, 0.43056, 0, 0.08334],\n        '710': [0, 0.69444, 0.06646, 0],\n        '711': [0, 0.62847, 0.08295, 0],\n        '713': [0, 0.56167, 0.10333, 0],\n        '714': [0, 0.69444, 0.09694, 0],\n        '715': [0, 0.69444, 0, 0],\n        '728': [0, 0.69444, 0.10806, 0],\n        '729': [0, 0.66786, 0.11752, 0],\n        '730': [0, 0.69444, 0, 0],\n        '732': [0, 0.66786, 0.11585, 0],\n        '733': [0, 0.69444, 0.1225, 0],\n        '915': [0, 0.68333, 0.13305, 0],\n        '916': [0, 0.68333, 0, 0],\n        '920': [0, 0.68333, 0.09403, 0],\n        '923': [0, 0.68333, 0, 0],\n        '926': [0, 0.68333, 0.15294, 0],\n        '928': [0, 0.68333, 0.16389, 0],\n        '931': [0, 0.68333, 0.12028, 0],\n        '933': [0, 0.68333, 0.11111, 0],\n        '934': [0, 0.68333, 0.05986, 0],\n        '936': [0, 0.68333, 0.11111, 0],\n        '937': [0, 0.68333, 0.10257, 0],\n        '8211': [0, 0.43056, 0.09208, 0],\n        '8212': [0, 0.43056, 0.09208, 0],\n        '8216': [0, 0.69444, 0.12417, 0],\n        '8217': [0, 0.69444, 0.12417, 0],\n        '8220': [0, 0.69444, 0.1685, 0],\n        '8221': [0, 0.69444, 0.06961, 0],\n        '8463': [0, 0.68889, 0, 0],\n    },\n    'Main-Regular': {\n        '32': [0, 0, 0, 0],\n        '33': [0, 0.69444, 0, 0],\n        '34': [0, 0.69444, 0, 0],\n        '35': [0.19444, 0.69444, 0, 0],\n        '36': [0.05556, 0.75, 0, 0],\n        '37': [0.05556, 0.75, 0, 0],\n        '38': [0, 0.69444, 0, 0],\n        '39': [0, 0.69444, 0, 0],\n        '40': [0.25, 0.75, 0, 0],\n        '41': [0.25, 0.75, 0, 0],\n        '42': [0, 0.75, 0, 0],\n        '43': [0.08333, 0.58333, 0, 0],\n        '44': [0.19444, 0.10556, 0, 0],\n        '45': [0, 0.43056, 0, 0],\n        '46': [0, 0.10556, 0, 0],\n        '47': [0.25, 0.75, 0, 0],\n        '48': [0, 0.64444, 0, 0],\n        '49': [0, 0.64444, 0, 0],\n        '50': [0, 0.64444, 0, 0],\n        '51': [0, 0.64444, 0, 0],\n        '52': [0, 0.64444, 0, 0],\n        '53': [0, 0.64444, 0, 0],\n        '54': [0, 0.64444, 0, 0],\n        '55': [0, 0.64444, 0, 0],\n        '56': [0, 0.64444, 0, 0],\n        '57': [0, 0.64444, 0, 0],\n        '58': [0, 0.43056, 0, 0],\n        '59': [0.19444, 0.43056, 0, 0],\n        '60': [0.0391, 0.5391, 0, 0],\n        '61': [-0.13313, 0.36687, 0, 0],\n        '62': [0.0391, 0.5391, 0, 0],\n        '63': [0, 0.69444, 0, 0],\n        '64': [0, 0.69444, 0, 0],\n        '65': [0, 0.68333, 0, 0],\n        '66': [0, 0.68333, 0, 0],\n        '67': [0, 0.68333, 0, 0],\n        '68': [0, 0.68333, 0, 0],\n        '69': [0, 0.68333, 0, 0],\n        '70': [0, 0.68333, 0, 0],\n        '71': [0, 0.68333, 0, 0],\n        '72': [0, 0.68333, 0, 0],\n        '73': [0, 0.68333, 0, 0],\n        '74': [0, 0.68333, 0, 0],\n        '75': [0, 0.68333, 0, 0],\n        '76': [0, 0.68333, 0, 0],\n        '77': [0, 0.68333, 0, 0],\n        '78': [0, 0.68333, 0, 0],\n        '79': [0, 0.68333, 0, 0],\n        '80': [0, 0.68333, 0, 0],\n        '81': [0.19444, 0.68333, 0, 0],\n        '82': [0, 0.68333, 0, 0],\n        '83': [0, 0.68333, 0, 0],\n        '84': [0, 0.68333, 0, 0],\n        '85': [0, 0.68333, 0, 0],\n        '86': [0, 0.68333, 0.01389, 0],\n        '87': [0, 0.68333, 0.01389, 0],\n        '88': [0, 0.68333, 0, 0],\n        '89': [0, 0.68333, 0.025, 0],\n        '90': [0, 0.68333, 0, 0],\n        '91': [0.25, 0.75, 0, 0],\n        '92': [0.25, 0.75, 0, 0],\n        '93': [0.25, 0.75, 0, 0],\n        '94': [0, 0.69444, 0, 0],\n        '95': [0.31, 0.12056, 0.02778, 0],\n        '97': [0, 0.43056, 0, 0],\n        '98': [0, 0.69444, 0, 0],\n        '99': [0, 0.43056, 0, 0],\n        '100': [0, 0.69444, 0, 0],\n        '101': [0, 0.43056, 0, 0],\n        '102': [0, 0.69444, 0.07778, 0],\n        '103': [0.19444, 0.43056, 0.01389, 0],\n        '104': [0, 0.69444, 0, 0],\n        '105': [0, 0.66786, 0, 0],\n        '106': [0.19444, 0.66786, 0, 0],\n        '107': [0, 0.69444, 0, 0],\n        '108': [0, 0.69444, 0, 0],\n        '109': [0, 0.43056, 0, 0],\n        '110': [0, 0.43056, 0, 0],\n        '111': [0, 0.43056, 0, 0],\n        '112': [0.19444, 0.43056, 0, 0],\n        '113': [0.19444, 0.43056, 0, 0],\n        '114': [0, 0.43056, 0, 0],\n        '115': [0, 0.43056, 0, 0],\n        '116': [0, 0.61508, 0, 0],\n        '117': [0, 0.43056, 0, 0],\n        '118': [0, 0.43056, 0.01389, 0],\n        '119': [0, 0.43056, 0.01389, 0],\n        '120': [0, 0.43056, 0, 0],\n        '121': [0.19444, 0.43056, 0.01389, 0],\n        '122': [0, 0.43056, 0, 0],\n        '123': [0.25, 0.75, 0, 0],\n        '124': [0.25, 0.75, 0, 0],\n        '125': [0.25, 0.75, 0, 0],\n        '126': [0.35, 0.31786, 0, 0],\n        '160': [0, 0, 0, 0],\n        '167': [0.19444, 0.69444, 0, 0],\n        '168': [0, 0.66786, 0, 0],\n        '172': [0, 0.43056, 0, 0],\n        '176': [0, 0.69444, 0, 0],\n        '177': [0.08333, 0.58333, 0, 0],\n        '182': [0.19444, 0.69444, 0, 0],\n        '184': [0.17014, 0, 0, 0],\n        '198': [0, 0.68333, 0, 0],\n        '215': [0.08333, 0.58333, 0, 0],\n        '216': [0.04861, 0.73194, 0, 0],\n        '223': [0, 0.69444, 0, 0],\n        '230': [0, 0.43056, 0, 0],\n        '247': [0.08333, 0.58333, 0, 0],\n        '248': [0.09722, 0.52778, 0, 0],\n        '305': [0, 0.43056, 0, 0],\n        '338': [0, 0.68333, 0, 0],\n        '339': [0, 0.43056, 0, 0],\n        '567': [0.19444, 0.43056, 0, 0],\n        '710': [0, 0.69444, 0, 0],\n        '711': [0, 0.62847, 0, 0],\n        '713': [0, 0.56778, 0, 0],\n        '714': [0, 0.69444, 0, 0],\n        '715': [0, 0.69444, 0, 0],\n        '728': [0, 0.69444, 0, 0],\n        '729': [0, 0.66786, 0, 0],\n        '730': [0, 0.69444, 0, 0],\n        '732': [0, 0.66786, 0, 0],\n        '733': [0, 0.69444, 0, 0],\n        '915': [0, 0.68333, 0, 0],\n        '916': [0, 0.68333, 0, 0],\n        '920': [0, 0.68333, 0, 0],\n        '923': [0, 0.68333, 0, 0],\n        '926': [0, 0.68333, 0, 0],\n        '928': [0, 0.68333, 0, 0],\n        '931': [0, 0.68333, 0, 0],\n        '933': [0, 0.68333, 0, 0],\n        '934': [0, 0.68333, 0, 0],\n        '936': [0, 0.68333, 0, 0],\n        '937': [0, 0.68333, 0, 0],\n        '8211': [0, 0.43056, 0.02778, 0],\n        '8212': [0, 0.43056, 0.02778, 0],\n        '8216': [0, 0.69444, 0, 0],\n        '8217': [0, 0.69444, 0, 0],\n        '8220': [0, 0.69444, 0, 0],\n        '8221': [0, 0.69444, 0, 0],\n        '8224': [0.19444, 0.69444, 0, 0],\n        '8225': [0.19444, 0.69444, 0, 0],\n        '8230': [0, 0.12, 0, 0],\n        '8242': [0, 0.55556, 0, 0],\n        '8407': [0, 0.71444, 0.15382, 0],\n        '8463': [0, 0.68889, 0, 0],\n        '8465': [0, 0.69444, 0, 0],\n        '8467': [0, 0.69444, 0, 0.11111],\n        '8472': [0.19444, 0.43056, 0, 0.11111],\n        '8476': [0, 0.69444, 0, 0],\n        '8501': [0, 0.69444, 0, 0],\n        '8592': [-0.13313, 0.36687, 0, 0],\n        '8593': [0.19444, 0.69444, 0, 0],\n        '8594': [-0.13313, 0.36687, 0, 0],\n        '8595': [0.19444, 0.69444, 0, 0],\n        '8596': [-0.13313, 0.36687, 0, 0],\n        '8597': [0.25, 0.75, 0, 0],\n        '8598': [0.19444, 0.69444, 0, 0],\n        '8599': [0.19444, 0.69444, 0, 0],\n        '8600': [0.19444, 0.69444, 0, 0],\n        '8601': [0.19444, 0.69444, 0, 0],\n        '8614': [0.011, 0.511, 0, 0],\n        '8617': [0.011, 0.511, 0, 0],\n        '8618': [0.011, 0.511, 0, 0],\n        '8636': [-0.13313, 0.36687, 0, 0],\n        '8637': [-0.13313, 0.36687, 0, 0],\n        '8640': [-0.13313, 0.36687, 0, 0],\n        '8641': [-0.13313, 0.36687, 0, 0],\n        '8652': [0.011, 0.671, 0, 0],\n        '8656': [-0.13313, 0.36687, 0, 0],\n        '8657': [0.19444, 0.69444, 0, 0],\n        '8658': [-0.13313, 0.36687, 0, 0],\n        '8659': [0.19444, 0.69444, 0, 0],\n        '8660': [-0.13313, 0.36687, 0, 0],\n        '8661': [0.25, 0.75, 0, 0],\n        '8704': [0, 0.69444, 0, 0],\n        '8706': [0, 0.69444, 0.05556, 0.08334],\n        '8707': [0, 0.69444, 0, 0],\n        '8709': [0.05556, 0.75, 0, 0],\n        '8711': [0, 0.68333, 0, 0],\n        '8712': [0.0391, 0.5391, 0, 0],\n        '8715': [0.0391, 0.5391, 0, 0],\n        '8722': [0.08333, 0.58333, 0, 0],\n        '8723': [0.08333, 0.58333, 0, 0],\n        '8725': [0.25, 0.75, 0, 0],\n        '8726': [0.25, 0.75, 0, 0],\n        '8727': [-0.03472, 0.46528, 0, 0],\n        '8728': [-0.05555, 0.44445, 0, 0],\n        '8729': [-0.05555, 0.44445, 0, 0],\n        '8730': [0.2, 0.8, 0, 0],\n        '8733': [0, 0.43056, 0, 0],\n        '8734': [0, 0.43056, 0, 0],\n        '8736': [0, 0.69224, 0, 0],\n        '8739': [0.25, 0.75, 0, 0],\n        '8741': [0.25, 0.75, 0, 0],\n        '8743': [0, 0.55556, 0, 0],\n        '8744': [0, 0.55556, 0, 0],\n        '8745': [0, 0.55556, 0, 0],\n        '8746': [0, 0.55556, 0, 0],\n        '8747': [0.19444, 0.69444, 0.11111, 0],\n        '8764': [-0.13313, 0.36687, 0, 0],\n        '8768': [0.19444, 0.69444, 0, 0],\n        '8771': [-0.03625, 0.46375, 0, 0],\n        '8773': [-0.022, 0.589, 0, 0],\n        '8776': [-0.01688, 0.48312, 0, 0],\n        '8781': [-0.03625, 0.46375, 0, 0],\n        '8784': [-0.133, 0.67, 0, 0],\n        '8801': [-0.03625, 0.46375, 0, 0],\n        '8804': [0.13597, 0.63597, 0, 0],\n        '8805': [0.13597, 0.63597, 0, 0],\n        '8810': [0.0391, 0.5391, 0, 0],\n        '8811': [0.0391, 0.5391, 0, 0],\n        '8826': [0.0391, 0.5391, 0, 0],\n        '8827': [0.0391, 0.5391, 0, 0],\n        '8834': [0.0391, 0.5391, 0, 0],\n        '8835': [0.0391, 0.5391, 0, 0],\n        '8838': [0.13597, 0.63597, 0, 0],\n        '8839': [0.13597, 0.63597, 0, 0],\n        '8846': [0, 0.55556, 0, 0],\n        '8849': [0.13597, 0.63597, 0, 0],\n        '8850': [0.13597, 0.63597, 0, 0],\n        '8851': [0, 0.55556, 0, 0],\n        '8852': [0, 0.55556, 0, 0],\n        '8853': [0.08333, 0.58333, 0, 0],\n        '8854': [0.08333, 0.58333, 0, 0],\n        '8855': [0.08333, 0.58333, 0, 0],\n        '8856': [0.08333, 0.58333, 0, 0],\n        '8857': [0.08333, 0.58333, 0, 0],\n        '8866': [0, 0.69444, 0, 0],\n        '8867': [0, 0.69444, 0, 0],\n        '8868': [0, 0.69444, 0, 0],\n        '8869': [0, 0.69444, 0, 0],\n        '8872': [0.249, 0.75, 0, 0],\n        '8900': [-0.05555, 0.44445, 0, 0],\n        '8901': [-0.05555, 0.44445, 0, 0],\n        '8902': [-0.03472, 0.46528, 0, 0],\n        '8904': [0.005, 0.505, 0, 0],\n        '8942': [0.03, 0.9, 0, 0],\n        '8943': [-0.19, 0.31, 0, 0],\n        '8945': [-0.1, 0.82, 0, 0],\n        '8968': [0.25, 0.75, 0, 0],\n        '8969': [0.25, 0.75, 0, 0],\n        '8970': [0.25, 0.75, 0, 0],\n        '8971': [0.25, 0.75, 0, 0],\n        '8994': [-0.14236, 0.35764, 0, 0],\n        '8995': [-0.14236, 0.35764, 0, 0],\n        '9136': [0.244, 0.744, 0, 0],\n        '9137': [0.244, 0.744, 0, 0],\n        '9651': [0.19444, 0.69444, 0, 0],\n        '9657': [-0.03472, 0.46528, 0, 0],\n        '9661': [0.19444, 0.69444, 0, 0],\n        '9667': [-0.03472, 0.46528, 0, 0],\n        '9711': [0.19444, 0.69444, 0, 0],\n        '9824': [0.12963, 0.69444, 0, 0],\n        '9825': [0.12963, 0.69444, 0, 0],\n        '9826': [0.12963, 0.69444, 0, 0],\n        '9827': [0.12963, 0.69444, 0, 0],\n        '9837': [0, 0.75, 0, 0],\n        '9838': [0.19444, 0.69444, 0, 0],\n        '9839': [0.19444, 0.69444, 0, 0],\n        '10216': [0.25, 0.75, 0, 0],\n        '10217': [0.25, 0.75, 0, 0],\n        '10222': [0.244, 0.744, 0, 0],\n        '10223': [0.244, 0.744, 0, 0],\n        '10229': [0.011, 0.511, 0, 0],\n        '10230': [0.011, 0.511, 0, 0],\n        '10231': [0.011, 0.511, 0, 0],\n        '10232': [0.024, 0.525, 0, 0],\n        '10233': [0.024, 0.525, 0, 0],\n        '10234': [0.024, 0.525, 0, 0],\n        '10236': [0.011, 0.511, 0, 0],\n        '10815': [0, 0.68333, 0, 0],\n        '10927': [0.13597, 0.63597, 0, 0],\n        '10928': [0.13597, 0.63597, 0, 0],\n        '57376': [0.19444, 0.69444, 0, 0],\n    },\n    'Math-BoldItalic': {\n        '65': [0, 0.68611, 0, 0],\n        '66': [0, 0.68611, 0.04835, 0],\n        '67': [0, 0.68611, 0.06979, 0],\n        '68': [0, 0.68611, 0.03194, 0],\n        '69': [0, 0.68611, 0.05451, 0],\n        '70': [0, 0.68611, 0.15972, 0],\n        '71': [0, 0.68611, 0, 0],\n        '72': [0, 0.68611, 0.08229, 0],\n        '73': [0, 0.68611, 0.07778, 0],\n        '74': [0, 0.68611, 0.10069, 0],\n        '75': [0, 0.68611, 0.06979, 0],\n        '76': [0, 0.68611, 0, 0],\n        '77': [0, 0.68611, 0.11424, 0],\n        '78': [0, 0.68611, 0.11424, 0],\n        '79': [0, 0.68611, 0.03194, 0],\n        '80': [0, 0.68611, 0.15972, 0],\n        '81': [0.19444, 0.68611, 0, 0],\n        '82': [0, 0.68611, 0.00421, 0],\n        '83': [0, 0.68611, 0.05382, 0],\n        '84': [0, 0.68611, 0.15972, 0],\n        '85': [0, 0.68611, 0.11424, 0],\n        '86': [0, 0.68611, 0.25555, 0],\n        '87': [0, 0.68611, 0.15972, 0],\n        '88': [0, 0.68611, 0.07778, 0],\n        '89': [0, 0.68611, 0.25555, 0],\n        '90': [0, 0.68611, 0.06979, 0],\n        '97': [0, 0.44444, 0, 0],\n        '98': [0, 0.69444, 0, 0],\n        '99': [0, 0.44444, 0, 0],\n        '100': [0, 0.69444, 0, 0],\n        '101': [0, 0.44444, 0, 0],\n        '102': [0.19444, 0.69444, 0.11042, 0],\n        '103': [0.19444, 0.44444, 0.03704, 0],\n        '104': [0, 0.69444, 0, 0],\n        '105': [0, 0.69326, 0, 0],\n        '106': [0.19444, 0.69326, 0.0622, 0],\n        '107': [0, 0.69444, 0.01852, 0],\n        '108': [0, 0.69444, 0.0088, 0],\n        '109': [0, 0.44444, 0, 0],\n        '110': [0, 0.44444, 0, 0],\n        '111': [0, 0.44444, 0, 0],\n        '112': [0.19444, 0.44444, 0, 0],\n        '113': [0.19444, 0.44444, 0.03704, 0],\n        '114': [0, 0.44444, 0.03194, 0],\n        '115': [0, 0.44444, 0, 0],\n        '116': [0, 0.63492, 0, 0],\n        '117': [0, 0.44444, 0, 0],\n        '118': [0, 0.44444, 0.03704, 0],\n        '119': [0, 0.44444, 0.02778, 0],\n        '120': [0, 0.44444, 0, 0],\n        '121': [0.19444, 0.44444, 0.03704, 0],\n        '122': [0, 0.44444, 0.04213, 0],\n        '915': [0, 0.68611, 0.15972, 0],\n        '916': [0, 0.68611, 0, 0],\n        '920': [0, 0.68611, 0.03194, 0],\n        '923': [0, 0.68611, 0, 0],\n        '926': [0, 0.68611, 0.07458, 0],\n        '928': [0, 0.68611, 0.08229, 0],\n        '931': [0, 0.68611, 0.05451, 0],\n        '933': [0, 0.68611, 0.15972, 0],\n        '934': [0, 0.68611, 0, 0],\n        '936': [0, 0.68611, 0.11653, 0],\n        '937': [0, 0.68611, 0.04835, 0],\n        '945': [0, 0.44444, 0, 0],\n        '946': [0.19444, 0.69444, 0.03403, 0],\n        '947': [0.19444, 0.44444, 0.06389, 0],\n        '948': [0, 0.69444, 0.03819, 0],\n        '949': [0, 0.44444, 0, 0],\n        '950': [0.19444, 0.69444, 0.06215, 0],\n        '951': [0.19444, 0.44444, 0.03704, 0],\n        '952': [0, 0.69444, 0.03194, 0],\n        '953': [0, 0.44444, 0, 0],\n        '954': [0, 0.44444, 0, 0],\n        '955': [0, 0.69444, 0, 0],\n        '956': [0.19444, 0.44444, 0, 0],\n        '957': [0, 0.44444, 0.06898, 0],\n        '958': [0.19444, 0.69444, 0.03021, 0],\n        '959': [0, 0.44444, 0, 0],\n        '960': [0, 0.44444, 0.03704, 0],\n        '961': [0.19444, 0.44444, 0, 0],\n        '962': [0.09722, 0.44444, 0.07917, 0],\n        '963': [0, 0.44444, 0.03704, 0],\n        '964': [0, 0.44444, 0.13472, 0],\n        '965': [0, 0.44444, 0.03704, 0],\n        '966': [0.19444, 0.44444, 0, 0],\n        '967': [0.19444, 0.44444, 0, 0],\n        '968': [0.19444, 0.69444, 0.03704, 0],\n        '969': [0, 0.44444, 0.03704, 0],\n        '977': [0, 0.69444, 0, 0],\n        '981': [0.19444, 0.69444, 0, 0],\n        '982': [0, 0.44444, 0.03194, 0],\n        '1009': [0.19444, 0.44444, 0, 0],\n        '1013': [0, 0.44444, 0, 0],\n    },\n    'Math-Italic': {\n        '65': [0, 0.68333, 0, 0.13889],\n        '66': [0, 0.68333, 0.05017, 0.08334],\n        '67': [0, 0.68333, 0.07153, 0.08334],\n        '68': [0, 0.68333, 0.02778, 0.05556],\n        '69': [0, 0.68333, 0.05764, 0.08334],\n        '70': [0, 0.68333, 0.13889, 0.08334],\n        '71': [0, 0.68333, 0, 0.08334],\n        '72': [0, 0.68333, 0.08125, 0.05556],\n        '73': [0, 0.68333, 0.07847, 0.11111],\n        '74': [0, 0.68333, 0.09618, 0.16667],\n        '75': [0, 0.68333, 0.07153, 0.05556],\n        '76': [0, 0.68333, 0, 0.02778],\n        '77': [0, 0.68333, 0.10903, 0.08334],\n        '78': [0, 0.68333, 0.10903, 0.08334],\n        '79': [0, 0.68333, 0.02778, 0.08334],\n        '80': [0, 0.68333, 0.13889, 0.08334],\n        '81': [0.19444, 0.68333, 0, 0.08334],\n        '82': [0, 0.68333, 0.00773, 0.08334],\n        '83': [0, 0.68333, 0.05764, 0.08334],\n        '84': [0, 0.68333, 0.13889, 0.08334],\n        '85': [0, 0.68333, 0.10903, 0.02778],\n        '86': [0, 0.68333, 0.22222, 0],\n        '87': [0, 0.68333, 0.13889, 0],\n        '88': [0, 0.68333, 0.07847, 0.08334],\n        '89': [0, 0.68333, 0.22222, 0],\n        '90': [0, 0.68333, 0.07153, 0.08334],\n        '97': [0, 0.43056, 0, 0],\n        '98': [0, 0.69444, 0, 0],\n        '99': [0, 0.43056, 0, 0.05556],\n        '100': [0, 0.69444, 0, 0.16667],\n        '101': [0, 0.43056, 0, 0.05556],\n        '102': [0.19444, 0.69444, 0.10764, 0.16667],\n        '103': [0.19444, 0.43056, 0.03588, 0.02778],\n        '104': [0, 0.69444, 0, 0],\n        '105': [0, 0.65952, 0, 0],\n        '106': [0.19444, 0.65952, 0.05724, 0],\n        '107': [0, 0.69444, 0.03148, 0],\n        '108': [0, 0.69444, 0.01968, 0.08334],\n        '109': [0, 0.43056, 0, 0],\n        '110': [0, 0.43056, 0, 0],\n        '111': [0, 0.43056, 0, 0.05556],\n        '112': [0.19444, 0.43056, 0, 0.08334],\n        '113': [0.19444, 0.43056, 0.03588, 0.08334],\n        '114': [0, 0.43056, 0.02778, 0.05556],\n        '115': [0, 0.43056, 0, 0.05556],\n        '116': [0, 0.61508, 0, 0.08334],\n        '117': [0, 0.43056, 0, 0.02778],\n        '118': [0, 0.43056, 0.03588, 0.02778],\n        '119': [0, 0.43056, 0.02691, 0.08334],\n        '120': [0, 0.43056, 0, 0.02778],\n        '121': [0.19444, 0.43056, 0.03588, 0.05556],\n        '122': [0, 0.43056, 0.04398, 0.05556],\n        '915': [0, 0.68333, 0.13889, 0.08334],\n        '916': [0, 0.68333, 0, 0.16667],\n        '920': [0, 0.68333, 0.02778, 0.08334],\n        '923': [0, 0.68333, 0, 0.16667],\n        '926': [0, 0.68333, 0.07569, 0.08334],\n        '928': [0, 0.68333, 0.08125, 0.05556],\n        '931': [0, 0.68333, 0.05764, 0.08334],\n        '933': [0, 0.68333, 0.13889, 0.05556],\n        '934': [0, 0.68333, 0, 0.08334],\n        '936': [0, 0.68333, 0.11, 0.05556],\n        '937': [0, 0.68333, 0.05017, 0.08334],\n        '945': [0, 0.43056, 0.0037, 0.02778],\n        '946': [0.19444, 0.69444, 0.05278, 0.08334],\n        '947': [0.19444, 0.43056, 0.05556, 0],\n        '948': [0, 0.69444, 0.03785, 0.05556],\n        '949': [0, 0.43056, 0, 0.08334],\n        '950': [0.19444, 0.69444, 0.07378, 0.08334],\n        '951': [0.19444, 0.43056, 0.03588, 0.05556],\n        '952': [0, 0.69444, 0.02778, 0.08334],\n        '953': [0, 0.43056, 0, 0.05556],\n        '954': [0, 0.43056, 0, 0],\n        '955': [0, 0.69444, 0, 0],\n        '956': [0.19444, 0.43056, 0, 0.02778],\n        '957': [0, 0.43056, 0.06366, 0.02778],\n        '958': [0.19444, 0.69444, 0.04601, 0.11111],\n        '959': [0, 0.43056, 0, 0.05556],\n        '960': [0, 0.43056, 0.03588, 0],\n        '961': [0.19444, 0.43056, 0, 0.08334],\n        '962': [0.09722, 0.43056, 0.07986, 0.08334],\n        '963': [0, 0.43056, 0.03588, 0],\n        '964': [0, 0.43056, 0.1132, 0.02778],\n        '965': [0, 0.43056, 0.03588, 0.02778],\n        '966': [0.19444, 0.43056, 0, 0.08334],\n        '967': [0.19444, 0.43056, 0, 0.05556],\n        '968': [0.19444, 0.69444, 0.03588, 0.11111],\n        '969': [0, 0.43056, 0.03588, 0],\n        '977': [0, 0.69444, 0, 0.08334],\n        '981': [0.19444, 0.69444, 0, 0.08334],\n        '982': [0, 0.43056, 0.02778, 0],\n        '1009': [0.19444, 0.43056, 0, 0.08334],\n        '1013': [0, 0.43056, 0, 0.05556],\n    },\n    'SansSerif-Bold': {\n        '33': [0, 0.69444, 0, 0],\n        '34': [0, 0.69444, 0, 0],\n        '35': [0.19444, 0.69444, 0, 0],\n        '36': [0.05556, 0.75, 0, 0],\n        '37': [0.05556, 0.75, 0, 0],\n        '38': [0, 0.69444, 0, 0],\n        '39': [0, 0.69444, 0, 0],\n        '40': [0.25, 0.75, 0, 0],\n        '41': [0.25, 0.75, 0, 0],\n        '42': [0, 0.75, 0, 0],\n        '43': [0.11667, 0.61667, 0, 0],\n        '44': [0.10556, 0.13056, 0, 0],\n        '45': [0, 0.45833, 0, 0],\n        '46': [0, 0.13056, 0, 0],\n        '47': [0.25, 0.75, 0, 0],\n        '48': [0, 0.69444, 0, 0],\n        '49': [0, 0.69444, 0, 0],\n        '50': [0, 0.69444, 0, 0],\n        '51': [0, 0.69444, 0, 0],\n        '52': [0, 0.69444, 0, 0],\n        '53': [0, 0.69444, 0, 0],\n        '54': [0, 0.69444, 0, 0],\n        '55': [0, 0.69444, 0, 0],\n        '56': [0, 0.69444, 0, 0],\n        '57': [0, 0.69444, 0, 0],\n        '58': [0, 0.45833, 0, 0],\n        '59': [0.10556, 0.45833, 0, 0],\n        '61': [-0.09375, 0.40625, 0, 0],\n        '63': [0, 0.69444, 0, 0],\n        '64': [0, 0.69444, 0, 0],\n        '65': [0, 0.69444, 0, 0],\n        '66': [0, 0.69444, 0, 0],\n        '67': [0, 0.69444, 0, 0],\n        '68': [0, 0.69444, 0, 0],\n        '69': [0, 0.69444, 0, 0],\n        '70': [0, 0.69444, 0, 0],\n        '71': [0, 0.69444, 0, 0],\n        '72': [0, 0.69444, 0, 0],\n        '73': [0, 0.69444, 0, 0],\n        '74': [0, 0.69444, 0, 0],\n        '75': [0, 0.69444, 0, 0],\n        '76': [0, 0.69444, 0, 0],\n        '77': [0, 0.69444, 0, 0],\n        '78': [0, 0.69444, 0, 0],\n        '79': [0, 0.69444, 0, 0],\n        '80': [0, 0.69444, 0, 0],\n        '81': [0.10556, 0.69444, 0, 0],\n        '82': [0, 0.69444, 0, 0],\n        '83': [0, 0.69444, 0, 0],\n        '84': [0, 0.69444, 0, 0],\n        '85': [0, 0.69444, 0, 0],\n        '86': [0, 0.69444, 0.01528, 0],\n        '87': [0, 0.69444, 0.01528, 0],\n        '88': [0, 0.69444, 0, 0],\n        '89': [0, 0.69444, 0.0275, 0],\n        '90': [0, 0.69444, 0, 0],\n        '91': [0.25, 0.75, 0, 0],\n        '93': [0.25, 0.75, 0, 0],\n        '94': [0, 0.69444, 0, 0],\n        '95': [0.35, 0.10833, 0.03056, 0],\n        '97': [0, 0.45833, 0, 0],\n        '98': [0, 0.69444, 0, 0],\n        '99': [0, 0.45833, 0, 0],\n        '100': [0, 0.69444, 0, 0],\n        '101': [0, 0.45833, 0, 0],\n        '102': [0, 0.69444, 0.07639, 0],\n        '103': [0.19444, 0.45833, 0.01528, 0],\n        '104': [0, 0.69444, 0, 0],\n        '105': [0, 0.69444, 0, 0],\n        '106': [0.19444, 0.69444, 0, 0],\n        '107': [0, 0.69444, 0, 0],\n        '108': [0, 0.69444, 0, 0],\n        '109': [0, 0.45833, 0, 0],\n        '110': [0, 0.45833, 0, 0],\n        '111': [0, 0.45833, 0, 0],\n        '112': [0.19444, 0.45833, 0, 0],\n        '113': [0.19444, 0.45833, 0, 0],\n        '114': [0, 0.45833, 0.01528, 0],\n        '115': [0, 0.45833, 0, 0],\n        '116': [0, 0.58929, 0, 0],\n        '117': [0, 0.45833, 0, 0],\n        '118': [0, 0.45833, 0.01528, 0],\n        '119': [0, 0.45833, 0.01528, 0],\n        '120': [0, 0.45833, 0, 0],\n        '121': [0.19444, 0.45833, 0.01528, 0],\n        '122': [0, 0.45833, 0, 0],\n        '126': [0.35, 0.34444, 0, 0],\n        '168': [0, 0.69444, 0, 0],\n        '176': [0, 0.69444, 0, 0],\n        '180': [0, 0.69444, 0, 0],\n        '184': [0.17014, 0, 0, 0],\n        '305': [0, 0.45833, 0, 0],\n        '567': [0.19444, 0.45833, 0, 0],\n        '710': [0, 0.69444, 0, 0],\n        '711': [0, 0.63542, 0, 0],\n        '713': [0, 0.63778, 0, 0],\n        '728': [0, 0.69444, 0, 0],\n        '729': [0, 0.69444, 0, 0],\n        '730': [0, 0.69444, 0, 0],\n        '732': [0, 0.69444, 0, 0],\n        '733': [0, 0.69444, 0, 0],\n        '915': [0, 0.69444, 0, 0],\n        '916': [0, 0.69444, 0, 0],\n        '920': [0, 0.69444, 0, 0],\n        '923': [0, 0.69444, 0, 0],\n        '926': [0, 0.69444, 0, 0],\n        '928': [0, 0.69444, 0, 0],\n        '931': [0, 0.69444, 0, 0],\n        '933': [0, 0.69444, 0, 0],\n        '934': [0, 0.69444, 0, 0],\n        '936': [0, 0.69444, 0, 0],\n        '937': [0, 0.69444, 0, 0],\n        '8211': [0, 0.45833, 0.03056, 0],\n        '8212': [0, 0.45833, 0.03056, 0],\n        '8216': [0, 0.69444, 0, 0],\n        '8217': [0, 0.69444, 0, 0],\n        '8220': [0, 0.69444, 0, 0],\n        '8221': [0, 0.69444, 0, 0],\n    },\n    'SansSerif-Italic': {\n        '33': [0, 0.69444, 0.05733, 0],\n        '34': [0, 0.69444, 0.00316, 0],\n        '35': [0.19444, 0.69444, 0.05087, 0],\n        '36': [0.05556, 0.75, 0.11156, 0],\n        '37': [0.05556, 0.75, 0.03126, 0],\n        '38': [0, 0.69444, 0.03058, 0],\n        '39': [0, 0.69444, 0.07816, 0],\n        '40': [0.25, 0.75, 0.13164, 0],\n        '41': [0.25, 0.75, 0.02536, 0],\n        '42': [0, 0.75, 0.11775, 0],\n        '43': [0.08333, 0.58333, 0.02536, 0],\n        '44': [0.125, 0.08333, 0, 0],\n        '45': [0, 0.44444, 0.01946, 0],\n        '46': [0, 0.08333, 0, 0],\n        '47': [0.25, 0.75, 0.13164, 0],\n        '48': [0, 0.65556, 0.11156, 0],\n        '49': [0, 0.65556, 0.11156, 0],\n        '50': [0, 0.65556, 0.11156, 0],\n        '51': [0, 0.65556, 0.11156, 0],\n        '52': [0, 0.65556, 0.11156, 0],\n        '53': [0, 0.65556, 0.11156, 0],\n        '54': [0, 0.65556, 0.11156, 0],\n        '55': [0, 0.65556, 0.11156, 0],\n        '56': [0, 0.65556, 0.11156, 0],\n        '57': [0, 0.65556, 0.11156, 0],\n        '58': [0, 0.44444, 0.02502, 0],\n        '59': [0.125, 0.44444, 0.02502, 0],\n        '61': [-0.13, 0.37, 0.05087, 0],\n        '63': [0, 0.69444, 0.11809, 0],\n        '64': [0, 0.69444, 0.07555, 0],\n        '65': [0, 0.69444, 0, 0],\n        '66': [0, 0.69444, 0.08293, 0],\n        '67': [0, 0.69444, 0.11983, 0],\n        '68': [0, 0.69444, 0.07555, 0],\n        '69': [0, 0.69444, 0.11983, 0],\n        '70': [0, 0.69444, 0.13372, 0],\n        '71': [0, 0.69444, 0.11983, 0],\n        '72': [0, 0.69444, 0.08094, 0],\n        '73': [0, 0.69444, 0.13372, 0],\n        '74': [0, 0.69444, 0.08094, 0],\n        '75': [0, 0.69444, 0.11983, 0],\n        '76': [0, 0.69444, 0, 0],\n        '77': [0, 0.69444, 0.08094, 0],\n        '78': [0, 0.69444, 0.08094, 0],\n        '79': [0, 0.69444, 0.07555, 0],\n        '80': [0, 0.69444, 0.08293, 0],\n        '81': [0.125, 0.69444, 0.07555, 0],\n        '82': [0, 0.69444, 0.08293, 0],\n        '83': [0, 0.69444, 0.09205, 0],\n        '84': [0, 0.69444, 0.13372, 0],\n        '85': [0, 0.69444, 0.08094, 0],\n        '86': [0, 0.69444, 0.1615, 0],\n        '87': [0, 0.69444, 0.1615, 0],\n        '88': [0, 0.69444, 0.13372, 0],\n        '89': [0, 0.69444, 0.17261, 0],\n        '90': [0, 0.69444, 0.11983, 0],\n        '91': [0.25, 0.75, 0.15942, 0],\n        '93': [0.25, 0.75, 0.08719, 0],\n        '94': [0, 0.69444, 0.0799, 0],\n        '95': [0.35, 0.09444, 0.08616, 0],\n        '97': [0, 0.44444, 0.00981, 0],\n        '98': [0, 0.69444, 0.03057, 0],\n        '99': [0, 0.44444, 0.08336, 0],\n        '100': [0, 0.69444, 0.09483, 0],\n        '101': [0, 0.44444, 0.06778, 0],\n        '102': [0, 0.69444, 0.21705, 0],\n        '103': [0.19444, 0.44444, 0.10836, 0],\n        '104': [0, 0.69444, 0.01778, 0],\n        '105': [0, 0.67937, 0.09718, 0],\n        '106': [0.19444, 0.67937, 0.09162, 0],\n        '107': [0, 0.69444, 0.08336, 0],\n        '108': [0, 0.69444, 0.09483, 0],\n        '109': [0, 0.44444, 0.01778, 0],\n        '110': [0, 0.44444, 0.01778, 0],\n        '111': [0, 0.44444, 0.06613, 0],\n        '112': [0.19444, 0.44444, 0.0389, 0],\n        '113': [0.19444, 0.44444, 0.04169, 0],\n        '114': [0, 0.44444, 0.10836, 0],\n        '115': [0, 0.44444, 0.0778, 0],\n        '116': [0, 0.57143, 0.07225, 0],\n        '117': [0, 0.44444, 0.04169, 0],\n        '118': [0, 0.44444, 0.10836, 0],\n        '119': [0, 0.44444, 0.10836, 0],\n        '120': [0, 0.44444, 0.09169, 0],\n        '121': [0.19444, 0.44444, 0.10836, 0],\n        '122': [0, 0.44444, 0.08752, 0],\n        '126': [0.35, 0.32659, 0.08826, 0],\n        '168': [0, 0.67937, 0.06385, 0],\n        '176': [0, 0.69444, 0, 0],\n        '184': [0.17014, 0, 0, 0],\n        '305': [0, 0.44444, 0.04169, 0],\n        '567': [0.19444, 0.44444, 0.04169, 0],\n        '710': [0, 0.69444, 0.0799, 0],\n        '711': [0, 0.63194, 0.08432, 0],\n        '713': [0, 0.60889, 0.08776, 0],\n        '714': [0, 0.69444, 0.09205, 0],\n        '715': [0, 0.69444, 0, 0],\n        '728': [0, 0.69444, 0.09483, 0],\n        '729': [0, 0.67937, 0.07774, 0],\n        '730': [0, 0.69444, 0, 0],\n        '732': [0, 0.67659, 0.08826, 0],\n        '733': [0, 0.69444, 0.09205, 0],\n        '915': [0, 0.69444, 0.13372, 0],\n        '916': [0, 0.69444, 0, 0],\n        '920': [0, 0.69444, 0.07555, 0],\n        '923': [0, 0.69444, 0, 0],\n        '926': [0, 0.69444, 0.12816, 0],\n        '928': [0, 0.69444, 0.08094, 0],\n        '931': [0, 0.69444, 0.11983, 0],\n        '933': [0, 0.69444, 0.09031, 0],\n        '934': [0, 0.69444, 0.04603, 0],\n        '936': [0, 0.69444, 0.09031, 0],\n        '937': [0, 0.69444, 0.08293, 0],\n        '8211': [0, 0.44444, 0.08616, 0],\n        '8212': [0, 0.44444, 0.08616, 0],\n        '8216': [0, 0.69444, 0.07816, 0],\n        '8217': [0, 0.69444, 0.07816, 0],\n        '8220': [0, 0.69444, 0.14205, 0],\n        '8221': [0, 0.69444, 0.00316, 0],\n    },\n    'SansSerif-Regular': {\n        '33': [0, 0.69444, 0, 0],\n        '34': [0, 0.69444, 0, 0],\n        '35': [0.19444, 0.69444, 0, 0],\n        '36': [0.05556, 0.75, 0, 0],\n        '37': [0.05556, 0.75, 0, 0],\n        '38': [0, 0.69444, 0, 0],\n        '39': [0, 0.69444, 0, 0],\n        '40': [0.25, 0.75, 0, 0],\n        '41': [0.25, 0.75, 0, 0],\n        '42': [0, 0.75, 0, 0],\n        '43': [0.08333, 0.58333, 0, 0],\n        '44': [0.125, 0.08333, 0, 0],\n        '45': [0, 0.44444, 0, 0],\n        '46': [0, 0.08333, 0, 0],\n        '47': [0.25, 0.75, 0, 0],\n        '48': [0, 0.65556, 0, 0],\n        '49': [0, 0.65556, 0, 0],\n        '50': [0, 0.65556, 0, 0],\n        '51': [0, 0.65556, 0, 0],\n        '52': [0, 0.65556, 0, 0],\n        '53': [0, 0.65556, 0, 0],\n        '54': [0, 0.65556, 0, 0],\n        '55': [0, 0.65556, 0, 0],\n        '56': [0, 0.65556, 0, 0],\n        '57': [0, 0.65556, 0, 0],\n        '58': [0, 0.44444, 0, 0],\n        '59': [0.125, 0.44444, 0, 0],\n        '61': [-0.13, 0.37, 0, 0],\n        '63': [0, 0.69444, 0, 0],\n        '64': [0, 0.69444, 0, 0],\n        '65': [0, 0.69444, 0, 0],\n        '66': [0, 0.69444, 0, 0],\n        '67': [0, 0.69444, 0, 0],\n        '68': [0, 0.69444, 0, 0],\n        '69': [0, 0.69444, 0, 0],\n        '70': [0, 0.69444, 0, 0],\n        '71': [0, 0.69444, 0, 0],\n        '72': [0, 0.69444, 0, 0],\n        '73': [0, 0.69444, 0, 0],\n        '74': [0, 0.69444, 0, 0],\n        '75': [0, 0.69444, 0, 0],\n        '76': [0, 0.69444, 0, 0],\n        '77': [0, 0.69444, 0, 0],\n        '78': [0, 0.69444, 0, 0],\n        '79': [0, 0.69444, 0, 0],\n        '80': [0, 0.69444, 0, 0],\n        '81': [0.125, 0.69444, 0, 0],\n        '82': [0, 0.69444, 0, 0],\n        '83': [0, 0.69444, 0, 0],\n        '84': [0, 0.69444, 0, 0],\n        '85': [0, 0.69444, 0, 0],\n        '86': [0, 0.69444, 0.01389, 0],\n        '87': [0, 0.69444, 0.01389, 0],\n        '88': [0, 0.69444, 0, 0],\n        '89': [0, 0.69444, 0.025, 0],\n        '90': [0, 0.69444, 0, 0],\n        '91': [0.25, 0.75, 0, 0],\n        '93': [0.25, 0.75, 0, 0],\n        '94': [0, 0.69444, 0, 0],\n        '95': [0.35, 0.09444, 0.02778, 0],\n        '97': [0, 0.44444, 0, 0],\n        '98': [0, 0.69444, 0, 0],\n        '99': [0, 0.44444, 0, 0],\n        '100': [0, 0.69444, 0, 0],\n        '101': [0, 0.44444, 0, 0],\n        '102': [0, 0.69444, 0.06944, 0],\n        '103': [0.19444, 0.44444, 0.01389, 0],\n        '104': [0, 0.69444, 0, 0],\n        '105': [0, 0.67937, 0, 0],\n        '106': [0.19444, 0.67937, 0, 0],\n        '107': [0, 0.69444, 0, 0],\n        '108': [0, 0.69444, 0, 0],\n        '109': [0, 0.44444, 0, 0],\n        '110': [0, 0.44444, 0, 0],\n        '111': [0, 0.44444, 0, 0],\n        '112': [0.19444, 0.44444, 0, 0],\n        '113': [0.19444, 0.44444, 0, 0],\n        '114': [0, 0.44444, 0.01389, 0],\n        '115': [0, 0.44444, 0, 0],\n        '116': [0, 0.57143, 0, 0],\n        '117': [0, 0.44444, 0, 0],\n        '118': [0, 0.44444, 0.01389, 0],\n        '119': [0, 0.44444, 0.01389, 0],\n        '120': [0, 0.44444, 0, 0],\n        '121': [0.19444, 0.44444, 0.01389, 0],\n        '122': [0, 0.44444, 0, 0],\n        '126': [0.35, 0.32659, 0, 0],\n        '168': [0, 0.67937, 0, 0],\n        '176': [0, 0.69444, 0, 0],\n        '184': [0.17014, 0, 0, 0],\n        '305': [0, 0.44444, 0, 0],\n        '567': [0.19444, 0.44444, 0, 0],\n        '710': [0, 0.69444, 0, 0],\n        '711': [0, 0.63194, 0, 0],\n        '713': [0, 0.60889, 0, 0],\n        '714': [0, 0.69444, 0, 0],\n        '715': [0, 0.69444, 0, 0],\n        '728': [0, 0.69444, 0, 0],\n        '729': [0, 0.67937, 0, 0],\n        '730': [0, 0.69444, 0, 0],\n        '732': [0, 0.67659, 0, 0],\n        '733': [0, 0.69444, 0, 0],\n        '915': [0, 0.69444, 0, 0],\n        '916': [0, 0.69444, 0, 0],\n        '920': [0, 0.69444, 0, 0],\n        '923': [0, 0.69444, 0, 0],\n        '926': [0, 0.69444, 0, 0],\n        '928': [0, 0.69444, 0, 0],\n        '931': [0, 0.69444, 0, 0],\n        '933': [0, 0.69444, 0, 0],\n        '934': [0, 0.69444, 0, 0],\n        '936': [0, 0.69444, 0, 0],\n        '937': [0, 0.69444, 0, 0],\n        '8211': [0, 0.44444, 0.02778, 0],\n        '8212': [0, 0.44444, 0.02778, 0],\n        '8216': [0, 0.69444, 0, 0],\n        '8217': [0, 0.69444, 0, 0],\n        '8220': [0, 0.69444, 0, 0],\n        '8221': [0, 0.69444, 0, 0],\n    },\n    'Script-Regular': {\n        '65': [0, 0.7, 0.22925, 0],\n        '66': [0, 0.7, 0.04087, 0],\n        '67': [0, 0.7, 0.1689, 0],\n        '68': [0, 0.7, 0.09371, 0],\n        '69': [0, 0.7, 0.18583, 0],\n        '70': [0, 0.7, 0.13634, 0],\n        '71': [0, 0.7, 0.17322, 0],\n        '72': [0, 0.7, 0.29694, 0],\n        '73': [0, 0.7, 0.19189, 0],\n        '74': [0.27778, 0.7, 0.19189, 0],\n        '75': [0, 0.7, 0.31259, 0],\n        '76': [0, 0.7, 0.19189, 0],\n        '77': [0, 0.7, 0.15981, 0],\n        '78': [0, 0.7, 0.3525, 0],\n        '79': [0, 0.7, 0.08078, 0],\n        '80': [0, 0.7, 0.08078, 0],\n        '81': [0, 0.7, 0.03305, 0],\n        '82': [0, 0.7, 0.06259, 0],\n        '83': [0, 0.7, 0.19189, 0],\n        '84': [0, 0.7, 0.29087, 0],\n        '85': [0, 0.7, 0.25815, 0],\n        '86': [0, 0.7, 0.27523, 0],\n        '87': [0, 0.7, 0.27523, 0],\n        '88': [0, 0.7, 0.26006, 0],\n        '89': [0, 0.7, 0.2939, 0],\n        '90': [0, 0.7, 0.24037, 0],\n    },\n    'Size1-Regular': {\n        '40': [0.35001, 0.85, 0, 0],\n        '41': [0.35001, 0.85, 0, 0],\n        '47': [0.35001, 0.85, 0, 0],\n        '91': [0.35001, 0.85, 0, 0],\n        '92': [0.35001, 0.85, 0, 0],\n        '93': [0.35001, 0.85, 0, 0],\n        '123': [0.35001, 0.85, 0, 0],\n        '125': [0.35001, 0.85, 0, 0],\n        '710': [0, 0.72222, 0, 0],\n        '732': [0, 0.72222, 0, 0],\n        '770': [0, 0.72222, 0, 0],\n        '771': [0, 0.72222, 0, 0],\n        '8214': [-0.00099, 0.601, 0, 0],\n        '8593': [1e-5, 0.6, 0, 0],\n        '8595': [1e-5, 0.6, 0, 0],\n        '8657': [1e-5, 0.6, 0, 0],\n        '8659': [1e-5, 0.6, 0, 0],\n        '8719': [0.25001, 0.75, 0, 0],\n        '8720': [0.25001, 0.75, 0, 0],\n        '8721': [0.25001, 0.75, 0, 0],\n        '8730': [0.35001, 0.85, 0, 0],\n        '8739': [-0.00599, 0.606, 0, 0],\n        '8741': [-0.00599, 0.606, 0, 0],\n        '8747': [0.30612, 0.805, 0.19445, 0],\n        '8748': [0.306, 0.805, 0.19445, 0],\n        '8749': [0.306, 0.805, 0.19445, 0],\n        '8750': [0.30612, 0.805, 0.19445, 0],\n        '8896': [0.25001, 0.75, 0, 0],\n        '8897': [0.25001, 0.75, 0, 0],\n        '8898': [0.25001, 0.75, 0, 0],\n        '8899': [0.25001, 0.75, 0, 0],\n        '8968': [0.35001, 0.85, 0, 0],\n        '8969': [0.35001, 0.85, 0, 0],\n        '8970': [0.35001, 0.85, 0, 0],\n        '8971': [0.35001, 0.85, 0, 0],\n        '9168': [-0.00099, 0.601, 0, 0],\n        '10216': [0.35001, 0.85, 0, 0],\n        '10217': [0.35001, 0.85, 0, 0],\n        '10752': [0.25001, 0.75, 0, 0],\n        '10753': [0.25001, 0.75, 0, 0],\n        '10754': [0.25001, 0.75, 0, 0],\n        '10756': [0.25001, 0.75, 0, 0],\n        '10758': [0.25001, 0.75, 0, 0],\n    },\n    'Size2-Regular': {\n        '40': [0.65002, 1.15, 0, 0],\n        '41': [0.65002, 1.15, 0, 0],\n        '47': [0.65002, 1.15, 0, 0],\n        '91': [0.65002, 1.15, 0, 0],\n        '92': [0.65002, 1.15, 0, 0],\n        '93': [0.65002, 1.15, 0, 0],\n        '123': [0.65002, 1.15, 0, 0],\n        '125': [0.65002, 1.15, 0, 0],\n        '710': [0, 0.75, 0, 0],\n        '732': [0, 0.75, 0, 0],\n        '770': [0, 0.75, 0, 0],\n        '771': [0, 0.75, 0, 0],\n        '8719': [0.55001, 1.05, 0, 0],\n        '8720': [0.55001, 1.05, 0, 0],\n        '8721': [0.55001, 1.05, 0, 0],\n        '8730': [0.65002, 1.15, 0, 0],\n        '8747': [0.86225, 1.36, 0.44445, 0],\n        '8748': [0.862, 1.36, 0.44445, 0],\n        '8749': [0.862, 1.36, 0.44445, 0],\n        '8750': [0.86225, 1.36, 0.44445, 0],\n        '8896': [0.55001, 1.05, 0, 0],\n        '8897': [0.55001, 1.05, 0, 0],\n        '8898': [0.55001, 1.05, 0, 0],\n        '8899': [0.55001, 1.05, 0, 0],\n        '8968': [0.65002, 1.15, 0, 0],\n        '8969': [0.65002, 1.15, 0, 0],\n        '8970': [0.65002, 1.15, 0, 0],\n        '8971': [0.65002, 1.15, 0, 0],\n        '10216': [0.65002, 1.15, 0, 0],\n        '10217': [0.65002, 1.15, 0, 0],\n        '10752': [0.55001, 1.05, 0, 0],\n        '10753': [0.55001, 1.05, 0, 0],\n        '10754': [0.55001, 1.05, 0, 0],\n        '10756': [0.55001, 1.05, 0, 0],\n        '10758': [0.55001, 1.05, 0, 0],\n    },\n    'Size3-Regular': {\n        '40': [0.95003, 1.45, 0, 0],\n        '41': [0.95003, 1.45, 0, 0],\n        '47': [0.95003, 1.45, 0, 0],\n        '91': [0.95003, 1.45, 0, 0],\n        '92': [0.95003, 1.45, 0, 0],\n        '93': [0.95003, 1.45, 0, 0],\n        '123': [0.95003, 1.45, 0, 0],\n        '125': [0.95003, 1.45, 0, 0],\n        '710': [0, 0.75, 0, 0],\n        '732': [0, 0.75, 0, 0],\n        '770': [0, 0.75, 0, 0],\n        '771': [0, 0.75, 0, 0],\n        '8730': [0.95003, 1.45, 0, 0],\n        '8968': [0.95003, 1.45, 0, 0],\n        '8969': [0.95003, 1.45, 0, 0],\n        '8970': [0.95003, 1.45, 0, 0],\n        '8971': [0.95003, 1.45, 0, 0],\n        '10216': [0.95003, 1.45, 0, 0],\n        '10217': [0.95003, 1.45, 0, 0],\n    },\n    'Size4-Regular': {\n        '40': [1.25003, 1.75, 0, 0],\n        '41': [1.25003, 1.75, 0, 0],\n        '47': [1.25003, 1.75, 0, 0],\n        '91': [1.25003, 1.75, 0, 0],\n        '92': [1.25003, 1.75, 0, 0],\n        '93': [1.25003, 1.75, 0, 0],\n        '123': [1.25003, 1.75, 0, 0],\n        '125': [1.25003, 1.75, 0, 0],\n        '710': [0, 0.825, 0, 0],\n        '732': [0, 0.825, 0, 0],\n        '770': [0, 0.825, 0, 0],\n        '771': [0, 0.825, 0, 0],\n        '8730': [1.25003, 1.75, 0, 0],\n        '8968': [1.25003, 1.75, 0, 0],\n        '8969': [1.25003, 1.75, 0, 0],\n        '8970': [1.25003, 1.75, 0, 0],\n        '8971': [1.25003, 1.75, 0, 0],\n        '9115': [0.64502, 1.155, 0, 0],\n        '9116': [1e-5, 0.6, 0, 0],\n        '9117': [0.64502, 1.155, 0, 0],\n        '9118': [0.64502, 1.155, 0, 0],\n        '9119': [1e-5, 0.6, 0, 0],\n        '9120': [0.64502, 1.155, 0, 0],\n        '9121': [0.64502, 1.155, 0, 0],\n        '9122': [-0.00099, 0.601, 0, 0],\n        '9123': [0.64502, 1.155, 0, 0],\n        '9124': [0.64502, 1.155, 0, 0],\n        '9125': [-0.00099, 0.601, 0, 0],\n        '9126': [0.64502, 1.155, 0, 0],\n        '9127': [1e-5, 0.9, 0, 0],\n        '9128': [0.65002, 1.15, 0, 0],\n        '9129': [0.90001, 0, 0, 0],\n        '9130': [0, 0.3, 0, 0],\n        '9131': [1e-5, 0.9, 0, 0],\n        '9132': [0.65002, 1.15, 0, 0],\n        '9133': [0.90001, 0, 0, 0],\n        '9143': [0.88502, 0.915, 0, 0],\n        '10216': [1.25003, 1.75, 0, 0],\n        '10217': [1.25003, 1.75, 0, 0],\n        '57344': [-0.00499, 0.605, 0, 0],\n        '57345': [-0.00499, 0.605, 0, 0],\n        '57680': [0, 0.12, 0, 0],\n        '57681': [0, 0.12, 0, 0],\n        '57682': [0, 0.12, 0, 0],\n        '57683': [0, 0.12, 0, 0],\n    },\n    'Typewriter-Regular': {\n        '32': [0, 0, 0, 0],\n        '33': [0, 0.61111, 0, 0],\n        '34': [0, 0.61111, 0, 0],\n        '35': [0, 0.61111, 0, 0],\n        '36': [0.08333, 0.69444, 0, 0],\n        '37': [0.08333, 0.69444, 0, 0],\n        '38': [0, 0.61111, 0, 0],\n        '39': [0, 0.61111, 0, 0],\n        '40': [0.08333, 0.69444, 0, 0],\n        '41': [0.08333, 0.69444, 0, 0],\n        '42': [0, 0.52083, 0, 0],\n        '43': [-0.08056, 0.53055, 0, 0],\n        '44': [0.13889, 0.125, 0, 0],\n        '45': [-0.08056, 0.53055, 0, 0],\n        '46': [0, 0.125, 0, 0],\n        '47': [0.08333, 0.69444, 0, 0],\n        '48': [0, 0.61111, 0, 0],\n        '49': [0, 0.61111, 0, 0],\n        '50': [0, 0.61111, 0, 0],\n        '51': [0, 0.61111, 0, 0],\n        '52': [0, 0.61111, 0, 0],\n        '53': [0, 0.61111, 0, 0],\n        '54': [0, 0.61111, 0, 0],\n        '55': [0, 0.61111, 0, 0],\n        '56': [0, 0.61111, 0, 0],\n        '57': [0, 0.61111, 0, 0],\n        '58': [0, 0.43056, 0, 0],\n        '59': [0.13889, 0.43056, 0, 0],\n        '60': [-0.05556, 0.55556, 0, 0],\n        '61': [-0.19549, 0.41562, 0, 0],\n        '62': [-0.05556, 0.55556, 0, 0],\n        '63': [0, 0.61111, 0, 0],\n        '64': [0, 0.61111, 0, 0],\n        '65': [0, 0.61111, 0, 0],\n        '66': [0, 0.61111, 0, 0],\n        '67': [0, 0.61111, 0, 0],\n        '68': [0, 0.61111, 0, 0],\n        '69': [0, 0.61111, 0, 0],\n        '70': [0, 0.61111, 0, 0],\n        '71': [0, 0.61111, 0, 0],\n        '72': [0, 0.61111, 0, 0],\n        '73': [0, 0.61111, 0, 0],\n        '74': [0, 0.61111, 0, 0],\n        '75': [0, 0.61111, 0, 0],\n        '76': [0, 0.61111, 0, 0],\n        '77': [0, 0.61111, 0, 0],\n        '78': [0, 0.61111, 0, 0],\n        '79': [0, 0.61111, 0, 0],\n        '80': [0, 0.61111, 0, 0],\n        '81': [0.13889, 0.61111, 0, 0],\n        '82': [0, 0.61111, 0, 0],\n        '83': [0, 0.61111, 0, 0],\n        '84': [0, 0.61111, 0, 0],\n        '85': [0, 0.61111, 0, 0],\n        '86': [0, 0.61111, 0, 0],\n        '87': [0, 0.61111, 0, 0],\n        '88': [0, 0.61111, 0, 0],\n        '89': [0, 0.61111, 0, 0],\n        '90': [0, 0.61111, 0, 0],\n        '91': [0.08333, 0.69444, 0, 0],\n        '92': [0.08333, 0.69444, 0, 0],\n        '93': [0.08333, 0.69444, 0, 0],\n        '94': [0, 0.61111, 0, 0],\n        '95': [0.09514, 0, 0, 0],\n        '96': [0, 0.61111, 0, 0],\n        '97': [0, 0.43056, 0, 0],\n        '98': [0, 0.61111, 0, 0],\n        '99': [0, 0.43056, 0, 0],\n        '100': [0, 0.61111, 0, 0],\n        '101': [0, 0.43056, 0, 0],\n        '102': [0, 0.61111, 0, 0],\n        '103': [0.22222, 0.43056, 0, 0],\n        '104': [0, 0.61111, 0, 0],\n        '105': [0, 0.61111, 0, 0],\n        '106': [0.22222, 0.61111, 0, 0],\n        '107': [0, 0.61111, 0, 0],\n        '108': [0, 0.61111, 0, 0],\n        '109': [0, 0.43056, 0, 0],\n        '110': [0, 0.43056, 0, 0],\n        '111': [0, 0.43056, 0, 0],\n        '112': [0.22222, 0.43056, 0, 0],\n        '113': [0.22222, 0.43056, 0, 0],\n        '114': [0, 0.43056, 0, 0],\n        '115': [0, 0.43056, 0, 0],\n        '116': [0, 0.55358, 0, 0],\n        '117': [0, 0.43056, 0, 0],\n        '118': [0, 0.43056, 0, 0],\n        '119': [0, 0.43056, 0, 0],\n        '120': [0, 0.43056, 0, 0],\n        '121': [0.22222, 0.43056, 0, 0],\n        '122': [0, 0.43056, 0, 0],\n        '123': [0.08333, 0.69444, 0, 0],\n        '124': [0.08333, 0.69444, 0, 0],\n        '125': [0.08333, 0.69444, 0, 0],\n        '126': [0, 0.61111, 0, 0],\n        '127': [0, 0.61111, 0, 0],\n        '160': [0, 0, 0, 0],\n        '176': [0, 0.61111, 0, 0],\n        '184': [0.19445, 0, 0, 0],\n        '305': [0, 0.43056, 0, 0],\n        '567': [0.22222, 0.43056, 0, 0],\n        '711': [0, 0.56597, 0, 0],\n        '713': [0, 0.56555, 0, 0],\n        '714': [0, 0.61111, 0, 0],\n        '715': [0, 0.61111, 0, 0],\n        '728': [0, 0.61111, 0, 0],\n        '730': [0, 0.61111, 0, 0],\n        '770': [0, 0.61111, 0, 0],\n        '771': [0, 0.61111, 0, 0],\n        '776': [0, 0.61111, 0, 0],\n        '915': [0, 0.61111, 0, 0],\n        '916': [0, 0.61111, 0, 0],\n        '920': [0, 0.61111, 0, 0],\n        '923': [0, 0.61111, 0, 0],\n        '926': [0, 0.61111, 0, 0],\n        '928': [0, 0.61111, 0, 0],\n        '931': [0, 0.61111, 0, 0],\n        '933': [0, 0.61111, 0, 0],\n        '934': [0, 0.61111, 0, 0],\n        '936': [0, 0.61111, 0, 0],\n        '937': [0, 0.61111, 0, 0],\n        '8216': [0, 0.61111, 0, 0],\n        '8217': [0, 0.61111, 0, 0],\n        '8242': [0, 0.61111, 0, 0],\n        '9251': [0.11111, 0.21944, 0, 0],\n    },\n};\n","/**\n * This module contains metrics regarding fonts and individual symbols. The sigma\n * and xi variables, as well as the METRICS_MAP map contain data extracted from\n * TeX, TeX font metrics, and the TTF files. These data are then exposed via the\n * `metrics` variable and the getCharacterMetrics function.\n */\nimport METRICS_MAP from './font-metrics-data';\n\n// This METRICS_MAP contains a mapping from font name and character code to character\n// metrics, including height, depth, italic correction, and skew (kern from the\n// character to the corresponding \\skewchar)\n// This map is generated via `make metrics`. It should not be changed manually.\n\ninterface CharacterMetrics {\n    defaultMetrics: boolean;\n    depth: number;\n    height: number;\n    italic: number;\n    skew: number;\n}\n// const hangulRegex = /[\\uAC00-\\uD7AF]/;\n\n// This regex combines\n// - Hiragana: [\\u3040-\\u309F]\n// - Katakana: [\\u30A0-\\u30FF]\n// - CJK ideograms: [\\u4E00-\\u9FAF]\n// - Hangul syllables: [\\uAC00-\\uD7AF]\n// Notably missing are half width Katakana and Romaji glyphs.\nconst cjkRegex = /[\\u3040-\\u309F]|[\\u30A0-\\u30FF]|[\\u4E00-\\u9FAF]|[\\uAC00-\\uD7AF]/;\n\n/*\n *\n * In TeX, there are actually three sets of dimensions, one for each of\n * textstyle, scriptstyle, and scriptscriptstyle.  These are provided in the\n * the arrays below, in that order.\n *\n * The font metrics are stored in fonts cmsy10, cmsy7, and cmsy5 respectively.\n * This was determined by running the following script:\n *``` bash\n      latex -interaction=nonstopmode \\\n      '\\documentclass{article}\\usepackage{amsmath}\\begin{document}' \\\n      '$a$ \\expandafter\\show\\the\\textfont2' \\\n      '\\expandafter\\show\\the\\scriptfont2' \\\n      '\\expandafter\\show\\the\\scriptscriptfont2' \\\n      '\\stop'\n  ```\n * The metrics themselves were retrieved using the following commands:\n * ``` bash\n      tftopl cmsy10\n      tftopl cmsy7\n      tftopl cmsy5\n    ```\n *\n * The output of each of these commands is quite lengthy.  The only part we\n * care about is the FONTDIMEN section. Each value is measured in EMs.\n * @memberof module:fontMetrics\n */\nexport const SIGMAS = {\n    slant: [0.25, 0.25, 0.25], // sigma1\n    space: [0.0, 0.0, 0.0], // sigma2\n    stretch: [0.0, 0.0, 0.0], // sigma3\n    shrink: [0.0, 0.0, 0.0], // sigma4\n    xHeight: [0.431, 0.431, 0.431], // sigma5\n    quad: [1.0, 1.171, 1.472], // sigma6\n    extraSpace: [0.0, 0.0, 0.0], // sigma7\n    num1: [0.677, 0.732, 0.925], // sigma8\n    num2: [0.394, 0.384, 0.387], // sigma9\n    num3: [0.444, 0.471, 0.504], // sigma10\n    denom1: [0.686, 0.752, 1.025], // sigma11\n    denom2: [0.345, 0.344, 0.532], // sigma12\n    sup1: [0.413, 0.503, 0.504], // sigma13\n    sup2: [0.363, 0.431, 0.404], // sigma14\n    sup3: [0.289, 0.286, 0.294], // sigma15\n    sub1: [0.15, 0.143, 0.2], // sigma16\n    sub2: [0.247, 0.286, 0.4], // sigma17\n    supDrop: [0.386, 0.353, 0.494], // sigma18\n    subDrop: [0.05, 0.071, 0.1], // sigma19\n    delim1: [2.39, 1.7, 1.98], // sigma20\n    delim2: [1.01, 1.157, 1.42], // sigma21\n    axisHeight: [0.25, 0.25, 0.25], // sigma22\n};\n\n// These font metrics are extracted from TeX by using\n// \\font\\a=cmex10\n// \\showthe\\fontdimenX\\a\n// where X is the corresponding variable number. These correspond to the font\n// parameters of the extension fonts (family 3). See the TeXbook, page 433\n// const xi1 = 0; // Slant per pt\n// const xi2 = 0; // Interword space\n// const xi3 = 0; // Interword stretch\n// const xi4 = 0; // Interword shrink\n// const xi5 = 0.431; // x-height\n// const xi6 = 1; // Quad width\n// const xi7 = 0; // Extra space\nconst xi8 = 0.04; // Default rule thickness, TexBook p.390\nconst xi9 = 0.111;\nconst xi10 = 0.166;\nconst xi11 = 0.2;\nconst xi12 = 0.6;\nconst xi13 = 0.1;\n// Note: xi14: offset from baseline for superscript TexBook p. 179\n// Note: xi16: offset from baseline for subscript\n\n// This value determines how large a pt is, for metrics which are defined in\n// terms of pts.\n// This value is also used in katex.less; if you change it make sure the values\n// match.\nconst ptPerEm = 10.0;\n\n/*\n * This is just a mapping from common names to real metrics\n */\nexport const METRICS = {\n    defaultRuleThickness: xi8,\n    bigOpSpacing1: xi9,\n    bigOpSpacing2: xi10,\n    bigOpSpacing3: xi11,\n    bigOpSpacing4: xi12,\n    bigOpSpacing5: xi13,\n    ptPerEm: ptPerEm,\n    pxPerEm: (ptPerEm * 4.0) / 3.0, // A CSS pt is fixed at 1.333px\n    doubleRuleSep: 2.0 / ptPerEm, // The space between adjacent `|` columns in an array definition. From\n    // article.cls.txt:455\n    arraycolsep: 5.0 / ptPerEm,\n    baselineskip: 12.0 / ptPerEm,\n    arrayrulewidth: 0.4 / ptPerEm,\n    fboxsep: 3 / ptPerEm, // From letter.dtx:1626\n    fboxrule: 0.4 / ptPerEm, // From letter.dtx:1627\n};\n\n// These are very rough approximations.  We default to Times New Roman which\n// should have Latin-1 and Cyrillic characters, but may not depending on the\n// operating system.  The metrics do not account for extra height from the\n// accents.  In the case of Cyrillic characters which have both ascenders and\n// descenders we prefer approximations with ascenders, primarily to prevent\n// the fraction bar or root line from intersecting the glyph.\n// TODO(kevinb) allow union of multiple glyph metrics for better accuracy.\nconst extraCharacterMap = {\n    '\\u00a0': '\\u0020', // NON-BREAKING SPACE is like space\n    '\\u200b': '\\u0020', // ZERO WIDTH SPACE is like space\n    // Latin-1\n    Å: 'A',\n    Ç: 'C',\n    Ð: 'D',\n    Þ: 'o',\n    å: 'a',\n    ç: 'c',\n    ð: 'd',\n    þ: 'o',\n\n    // Cyrillic\n    А: 'A',\n    Б: 'B',\n    В: 'B',\n    Г: 'F',\n    Д: 'A',\n    Е: 'E',\n    Ж: 'K',\n    З: '3',\n    И: 'N',\n    Й: 'N',\n    К: 'K',\n    Л: 'N',\n    М: 'M',\n    Н: 'H',\n    О: 'O',\n    П: 'N',\n    Р: 'P',\n    С: 'C',\n    Т: 'T',\n    У: 'y',\n    Ф: 'O',\n    Х: 'X',\n    Ц: 'U',\n    Ч: 'h',\n    Ш: 'W',\n    Щ: 'W',\n    Ъ: 'B',\n    Ы: 'X',\n    Ь: 'B',\n    Э: '3',\n    Ю: 'X',\n    Я: 'R',\n    а: 'a',\n    б: 'b',\n    в: 'a',\n    г: 'r',\n    д: 'y',\n    е: 'e',\n    ж: 'm',\n    з: 'e',\n    и: 'n',\n    й: 'n',\n    к: 'n',\n    л: 'n',\n    м: 'm',\n    н: 'n',\n    о: 'o',\n    п: 'n',\n    р: 'p',\n    с: 'c',\n    т: 'o',\n    у: 'y',\n    ф: 'b',\n    х: 'x',\n    ц: 'n',\n    ч: 'n',\n    ш: 'w',\n    щ: 'w',\n    ъ: 'a',\n    ы: 'm',\n    ь: 'a',\n    э: 'e',\n    ю: 'm',\n    я: 'r',\n};\n\n/**\n * This function is a convenience function for looking up information in the\n * METRICS_MAP table. It takes a character as a string, and a font name.\n *\n * Note: the `width` property may be undefined if fontMetricsData.js wasn't\n * built using `Make extended_metrics`.\n * @param fontName e.g. 'Main-Regular', 'Typewriter-Regular', etc...\n */\nexport function getCharacterMetrics(\n    character: string,\n    fontName: string\n): CharacterMetrics {\n    // console.assert(character.length === 1);\n    console.assert(METRICS_MAP[fontName], 'Unknown font \"' + fontName + '\"');\n\n    let ch = character.charCodeAt(0);\n\n    if (character[0] in extraCharacterMap) {\n        ch = extraCharacterMap[character[0]].charCodeAt(0);\n    } else if (cjkRegex.test(character[0])) {\n        ch = 77; // 'M'.charCodeAt(0);\n    }\n    const metrics = METRICS_MAP[fontName][ch];\n\n    if (!metrics) {\n        // console.warn(\n        //     'No metrics for ' +\n        //     '\"' + character + '\" (U+' + ('000000' + ch.toString(16)).substr(-6) + ')' +\n        //     ' in font \"' + fontName + '\"');\n        // Assume default values.\n        // depth + height should be less than 1.0 em\n        if (ch === 11034) {\n            // Placeholder character\n            return {\n                defaultMetrics: true,\n                depth: 0,\n                height: 1.0,\n                italic: 0,\n                skew: 0,\n            };\n        }\n        return {\n            defaultMetrics: true,\n            depth: 0.2,\n            height: 0.7,\n            italic: 0,\n            skew: 0,\n        };\n    }\n\n    return {\n        defaultMetrics: false,\n        depth: metrics[0],\n        height: metrics[1],\n        italic: metrics[2],\n        skew: metrics[3],\n    };\n}\n\n/**\n *\n * @param value If value is a string, it may be suffixed\n * with a unit, which will override the `unit` paramter\n */\nexport function convertDimenToEm(\n    value: number | string,\n    unit: string,\n    precision = NaN\n): number {\n    if (typeof value === 'string') {\n        const m = value.match(/([-+]?[0-9.]*)\\s*([a-zA-Z]+)/);\n        if (!m) {\n            value = parseFloat(value);\n        } else {\n            value = parseFloat(m[1]);\n            unit = m[2].toLowerCase();\n        }\n    }\n\n    // If the units are missing, TeX assumes 'pt'\n    const f =\n        {\n            pt: 1.0,\n            mm: 7227 / 2540,\n            cm: 7227 / 254,\n            ex: 35271 / 8192,\n            px: 3.0 / 4.0,\n            em: METRICS.ptPerEm,\n            bp: 803 / 800,\n            dd: 1238 / 1157,\n            pc: 12.0,\n            in: 72.27,\n            mu: 10 / 18,\n        }[unit] || 1.0;\n\n    if (isFinite(precision)) {\n        const factor = Math.pow(10, precision);\n        return Math.round((value / METRICS.ptPerEm) * f * factor) / factor;\n    }\n\n    return (value / METRICS.ptPerEm) * f;\n}\n\nexport function convertDimenToPx(value: string | number, unit: string): number {\n    return convertDimenToEm(value, unit) * (4.0 / 3.0) * METRICS.ptPerEm;\n}\n","/**\n * This file contains information and classes for the 'math styles' used by TeX,\n * which are specific layout\n * algorithms for math. They get progressively smaller and tighter:\n * - displaystyle is used for expressions laid out on their own (in a block)\n * - textstyle is for expressions displayed on a line (usually wiht some text\n * around)\n * - scriptstyle is for expressions displayed as a superscript for example\n * - scriptscriptstyle is for expressions displayed as a superscript of a superscript\n * - the 'cramped' variations are used in various places, for examples a subscript\n * is using the 'scriptstyle', but cramped (so it's a bit more tight than a\n * superscript which is just using the 'scriptstyle')\n *\n * See Texbook, p.441:\n *\n * A math list is a sequence of items of the various kinds listed in Chapter 17,\n * and TEX typesets a formula by converting a math list to a horizontal list.\n * When such typesetting begins, TEX has two other pieces of information in\n * addition to the math list itself. (a) The starting style tells what style\n * should be used for the math list, unless another style is specified by a\n * style item. For example, the starting style for a displayed formula is D,\n * but for an equation in the text or an equation number it is T; and for a\n * subformula it can be any one of the eight styles defined in Chapter 17.\n *\n * We shall use C to stand for the current style, and we shall say that the\n * math list is being typeset in style C. (b) The typesetting is done either\n * with or without penalties. Formulas in the text of a paragraph are converted\n * to horizontal lists in which additional penalty items are inserted after\n * binary operations and relations, in order to aid in line breaking. Such\n * penalties are not inserted in other cases, because they would serve no\n * useful function.\n *\n * The eight styles are considered to be D > D′ > T > T′ > S > S′ > SS > SS′,\n * in decreasing order. Thus, C ≤ S means that the current style is S, S , SS,\n * or SS . Style C′ means the current style with a prime added if one isn’t\n * there; for example, we have C =T if and only if C = T or C = T'.\n * Style C↑ is the superscript style for C; this means style S if C is D or T,\n * style S′ if C is D′ or T′, style SS if C is S or SS,\n * and style SS if C is S or SS.\n * Finally, style C↓ is the subscript style, which is (C↑) .\n */\n\nimport { SIGMAS } from './font-metrics';\ninterface Metrics {\n    slant: number;\n    space: number;\n    stretch: number;\n    shrink: number;\n    xHeight: number;\n    quad: number;\n    extraSpace: number;\n    num1: number; // 8\n    num2: number; // 9\n    num3: number; // 10\n    denom1: number; // 11\n    denom2: number; // 12\n    sup1: number;\n    sup2: number;\n    sup3: number;\n    sub1: number;\n    sub2: number;\n    supDrop: number;\n    subDrop: number;\n    delim1: number;\n    delim2: number;\n    axisHeight: number;\n    emPerEx?: number;\n} // @revisit: belongs in ./font-metrics\n\n// IDs of the different MATHSTYLES\nconst D = 0; // displaystyle\nconst Dc = 1; // displaystyle, cramped\nconst T = 2; // textstyle\nconst Tc = 3;\nconst S = 4; // scriptstyle\nconst Sc = 5;\nconst SS = 6; // scriptscriptstyle\nconst SSc = 7;\n\n/**\n * @property {number} id unique id for the style\n * @property {number} size (which is the same for cramped and uncramped version\n * of a style)\n * @property {number}  multiplier, size multiplier which gives the size difference between\n * a style and textstyle.\n * @property {boolean}  cramped flag\n */\nexport class Mathstyle {\n    id: number;\n    size: number;\n    cramped: boolean;\n    sizeMultiplier: number; // @revisit...? Same as multiplier\n    metrics: Metrics;\n\n    constructor(\n        id: number,\n        size: number,\n        multiplier: number,\n        cramped: boolean\n    ) {\n        this.id = id;\n        this.size = size;\n        this.cramped = cramped;\n        this.sizeMultiplier = multiplier;\n        this.metrics = Object.keys(SIGMAS).reduce((acc, x) => {\n            return { ...acc, [x]: SIGMAS[x][this.size] };\n        }, {}) as Metrics;\n        this.metrics.emPerEx =\n            SIGMAS.xHeight[this.size] / SIGMAS.quad[this.size];\n    }\n    /**\n     * Get the style of a superscript given a base in the current style.\n     */\n    sup(): Mathstyle {\n        return MATHSTYLES[[S, Sc, S, Sc, SS, SSc, SS, SSc][this.id]];\n    }\n    /**\n     * Get the style of a subscript given a base in the current style.\n     */\n    sub(): Mathstyle {\n        return MATHSTYLES[[Sc, Sc, Sc, Sc, SSc, SSc, SSc, SSc][this.id]];\n    }\n    /**\n     * Get the style of a fraction numerator given the fraction in the current\n     * style.\n     */\n    fracNum(): Mathstyle {\n        return MATHSTYLES[[T, Tc, S, Sc, SS, SSc, SS, SSc][this.id]];\n    }\n    /**\n     * Get the style of a fraction denominator given the fraction in the current\n     * style.\n     */\n    fracDen(): Mathstyle {\n        return MATHSTYLES[[Tc, Tc, Sc, Sc, SSc, SSc, SSc, SSc][this.id]];\n    }\n    /**\n     * Get the cramped version of a style (in particular, cramping a cramped style\n     * doesn't change the style).\n     */\n    cramp(): Mathstyle {\n        return MATHSTYLES[[Dc, Dc, Tc, Tc, Sc, Sc, SSc, SSc][this.id]];\n    }\n    /**\n     * CSS class name, for example `displaystyle cramped`\n     */\n    cls(): string {\n        return [\n            'displaystyle textstyle', // @revisit. Should just be 'displaystyle'\n            'textstyle',\n            'scriptstyle',\n            'scriptscriptstyle',\n        ][this.size]; // @revisit: use this.id to include 'cramped' variants\n    }\n    /**\n     * CSS class name to adjust from one style to another, like 'reset-textstyle'\n     */\n    adjustTo(newStyle: Mathstyle): string {\n        // @revisit the values used here\n        let result = [\n            [\n                '', // 'reset-textstyle displaystyle textstyle',\n                '', // 'reset-textstyle textstyle',\n                'reset-textstyle scriptstyle',\n                'reset-textstyle scriptscriptstyle',\n            ],\n\n            [\n                'reset-textstyle displaystyle textstyle',\n                '', // 'reset-textstyle textstyle',\n                'reset-textstyle scriptstyle',\n                'reset-textstyle scriptscriptstyle',\n            ],\n\n            [\n                'reset-scriptstyle textstyle displaystyle',\n                'reset-scriptstyle textstyle',\n                '', // 'reset-scriptstyle scriptstyle',\n                'reset-scriptstyle scriptscriptstyle',\n            ],\n\n            [\n                'reset-scriptscriptstyle textstyle displaystyle', // @revisit. Should not have 'textstyle'\n                'reset-scriptscriptstyle textstyle',\n                'reset-scriptscriptstyle scriptstyle',\n                '', // 'reset-scriptscriptstyle scriptscriptstyle'\n            ],\n        ][this.size][newStyle.size];\n        if (result.length > 0) result = ' ' + result;\n        return result;\n    }\n    /**\n     * Return if this style is tightly spaced (scriptstyle/scriptscriptstyle)\n     */\n    isTight(): boolean {\n        return this.size >= 2;\n    }\n}\n\nexport const MATHSTYLES: {\n    [key: number]: Mathstyle;\n    displaystyle?: Mathstyle;\n    textstyle?: Mathstyle;\n    scriptstyle?: Mathstyle;\n    scriptscriptstyle?: Mathstyle;\n} = {\n    0: new Mathstyle(D, 0, 1.0, false),\n    1: new Mathstyle(Dc, 0, 1.0, true),\n    2: new Mathstyle(T, 1, 1.0, false),\n    3: new Mathstyle(Tc, 1, 1.0, true),\n    4: new Mathstyle(S, 2, 0.7, false),\n    5: new Mathstyle(Sc, 2, 0.7, true),\n    6: new Mathstyle(SS, 3, 0.5, false),\n    7: new Mathstyle(SSc, 3, 0.5, true),\n};\n\n// Aliases\nMATHSTYLES.displaystyle = MATHSTYLES[0];\nMATHSTYLES.textstyle = MATHSTYLES[2];\nMATHSTYLES.scriptstyle = MATHSTYLES[4];\nMATHSTYLES.scriptscriptstyle = MATHSTYLES[6];\n","import { MacroDictionary, ParseMode } from '../public/core';\nimport { Mathstyle, MATHSTYLES } from './mathstyle';\n\nexport type ParseModePrivate =\n    | ParseMode\n    | (\n          | ''\n          | 'auto'\n          | 'bbox'\n          | 'color'\n          | 'colspec'\n          | 'delim'\n          | 'dimen'\n          | 'number'\n          | 'skip'\n          | 'string'\n      );\n\nexport interface ContextInterface {\n    macros?: MacroDictionary;\n    atomIdsSettings?: {\n        overrideID?: string;\n        groupNumbers: boolean;\n        seed: string | number;\n    };\n    mathstyle?: Mathstyle;\n    parentMathstyle?: Mathstyle;\n    size?: string; // @revisit: set explicit possible values, e.g. 'size5', etc...\n    parentSize?: string;\n    letterShapeStyle?: 'tex' | 'french' | 'iso' | 'upright' | 'auto';\n    opacity?: number;\n    color?: string;\n    smartFence?: boolean;\n}\n\n/**\n * This structure contains the rendering context of the current parse level.\n *\n * It also holds information about the parent context to handle scaling\n * adjustments.\n *\n * When a new scope is entered, a clone of the context is created with `.clone()`\n * so that any further changes remain local to the scope.\n *\n * A scope is defined for example by:\n * - an explicit group enclosed in braces `{...}`\n * - a semi-simple group enclosed in `\\bgroup...\\endgroup`\n * - an environment delimited by `\\begin{<envname>}...\\end{<envname>}`\n *\n * @property {Mathstyle} mathstyle\n * @property {number} opacity\n * @property {number} size\n * @property {object} atomIdsSettings - If not undefined, unique IDs should be\n * generated for each span so they can be mapped back to an atom.\n * The `seed` field should be a number to generate a specific range of\n * IDs or the string \"random\" to generate a random number.\n * Optionally, if a `groupNumbers` property is set to true, an additional\n * span will enclose strings of digits. This is used by read aloud to properly\n * pronounce (and highlight) numbers in expressions.\n * @property {Mathstyle} parentMathstyle\n * @property {number} parentSize\n * @property {object} macros A macros dictionary\n * @property {string} color\n */\nexport class Context implements ContextInterface {\n    macros: MacroDictionary;\n    atomIdsSettings?: {\n        overrideID?: string;\n        groupNumbers: boolean;\n        seed: string | number;\n    };\n    mathstyle: Mathstyle;\n    parentMathstyle?: Mathstyle;\n    size?: string; // @revisit: set explicit possible values, e.g. 'size5', etc...\n    parentSize?: string;\n    letterShapeStyle: 'tex' | 'french' | 'iso' | 'upright' | 'auto';\n    opacity?: number;\n    color?: string;\n    smartFence?: boolean;\n\n    constructor(from: ContextInterface) {\n        this.macros = from.macros ?? {};\n        this.atomIdsSettings = from.atomIdsSettings;\n\n        this.mathstyle = from.mathstyle || MATHSTYLES.displaystyle;\n\n        this.letterShapeStyle = from.letterShapeStyle || 'tex';\n\n        this.size = from.size || 'size5'; // medium size\n\n        this.parentMathstyle = from.parentMathstyle || this.mathstyle;\n        this.parentSize = from.parentSize || this.size;\n\n        this.opacity = from.opacity;\n        this.smartFence = from.smartFence;\n    }\n\n    /**\n     * Returns a new context with the same properties as 'this',\n     * except for the ones provided in `override`\n     */\n    clone(override: ContextInterface = {}): Context {\n        const result = new Context(this);\n        if (override) {\n            // `'auto'` (or undefined) to indicate that the mathstyle should in\n            // fact not be changed. This is used when specifying the mathstyle\n            // for some environments.\n            Object.assign(result, override);\n            if (!override.mathstyle) {\n                result.mathstyle = this.mathstyle;\n            } else {\n                result.parentMathstyle = this.mathstyle;\n                result.parentSize = this.size;\n                if (typeof override.mathstyle === 'string') {\n                    result.mathstyle = MATHSTYLES[override.mathstyle];\n                }\n            }\n        }\n        return result;\n    }\n\n    /**\n     * Change the mathstyle of this context\n     * @param value - `'auto'` to indicate that the mathstyle should in\n     * fact not be changed. This is used when specifying the mathstyle for some\n     * environments.\n     */\n    setMathstyle(value: string): void {\n        if (value && value !== 'auto') {\n            this.mathstyle = MATHSTYLES[value];\n        }\n    }\n    cramp(): Context {\n        return this.clone({ mathstyle: this.mathstyle.cramp() });\n    }\n    sup(): Context {\n        return this.clone({ mathstyle: this.mathstyle.sup() });\n    }\n    sub(): Context {\n        return this.clone({ mathstyle: this.mathstyle.sub() });\n    }\n}\n","const SVG_BODY = {\n    // Adapted from https://github.com/KaTeX/KaTeX/blob/master/src/stretchy.js\n\n    overrightarrow: [['rightarrow'], 0.888, 522, 'xMaxYMin'],\n    overleftarrow: [['leftarrow'], 0.888, 522, 'xMinYMin'],\n    underrightarrow: [['rightarrow'], 0.888, 522, 'xMaxYMin'],\n    underleftarrow: [['leftarrow'], 0.888, 522, 'xMinYMin'],\n    xrightarrow: [['rightarrow'], 1.469, 522, 'xMaxYMin'],\n    xleftarrow: [['leftarrow'], 1.469, 522, 'xMinYMin'],\n    Overrightarrow: [['doublerightarrow'], 0.888, 560, 'xMaxYMin'],\n    xRightarrow: [['doublerightarrow'], 1.526, 560, 'xMaxYMin'],\n    xLeftarrow: [['doubleleftarrow'], 1.526, 560, 'xMinYMin'],\n    overleftharpoon: [['leftharpoon'], 0.888, 522, 'xMinYMin'],\n    xleftharpoonup: [['leftharpoon'], 0.888, 522, 'xMinYMin'],\n    xleftharpoondown: [['leftharpoondown'], 0.888, 522, 'xMinYMin'],\n    overrightharpoon: [['rightharpoon'], 0.888, 522, 'xMaxYMin'],\n    xrightharpoonup: [['rightharpoon'], 0.888, 522, 'xMaxYMin'],\n    xrightharpoondown: [['rightharpoondown'], 0.888, 522, 'xMaxYMin'],\n    xlongequal: [['longequal'], 0.888, 334, 'xMinYMin'],\n    xtwoheadleftarrow: [['twoheadleftarrow'], 0.888, 334, 'xMinYMin'],\n    xtwoheadrightarrow: [['twoheadrightarrow'], 0.888, 334, 'xMaxYMin'],\n\n    overleftrightarrow: [['leftarrow', 'rightarrow'], 0.888, 522],\n    overbrace: [['leftbrace', 'midbrace', 'rightbrace'], 1.6, 548],\n    underbrace: [\n        ['leftbraceunder', 'midbraceunder', 'rightbraceunder'],\n        1.6,\n        548,\n    ],\n    underleftrightarrow: [['leftarrow', 'rightarrow'], 0.888, 522],\n    xleftrightarrow: [['leftarrow', 'rightarrow'], 1.75, 522],\n    xLeftrightarrow: [['doubleleftarrow', 'doublerightarrow'], 1.75, 560],\n    xrightleftharpoons: [\n        ['leftharpoondownplus', 'rightharpoonplus'],\n        1.75,\n        716,\n    ],\n    xleftrightharpoons: [\n        ['leftharpoonplus', 'rightharpoondownplus'],\n        1.75,\n        716,\n    ],\n    xhookleftarrow: [['leftarrow', 'righthook'], 1.08, 522],\n    xhookrightarrow: [['lefthook', 'rightarrow'], 1.08, 522],\n    overlinesegment: [['leftlinesegment', 'rightlinesegment'], 0.888, 522],\n    underlinesegment: [['leftlinesegment', 'rightlinesegment'], 0.888, 522],\n    overgroup: [['leftgroup', 'rightgroup'], 0.888, 342],\n    undergroup: [['leftgroupunder', 'rightgroupunder'], 0.888, 342],\n    xmapsto: [['leftmapsto', 'rightarrow'], 1.5, 522],\n    xtofrom: [['leftToFrom', 'rightToFrom'], 1.75, 528],\n\n    // The next three arrows are from the mhchem package.\n    // In mhchem.sty, min-length is 2.0em. But these arrows might appear in the\n    // document as \\xrightarrow or \\xrightleftharpoons. Those have\n    // min-length = 1.75em, so we set min-length on these next three to match.\n    xrightleftarrows: [['baraboveleftarrow', 'rightarrowabovebar'], 1.75, 901],\n    xrightequilibrium: [\n        ['baraboveshortleftharpoon', 'rightharpoonaboveshortbar'],\n        1.75,\n        716,\n    ],\n    xleftequilibrium: [\n        ['shortbaraboveleftharpoon', 'shortrightharpoonabovebar'],\n        1.75,\n        716,\n    ],\n};\n\n// While the images above are sliced, \"accents\" are stretched\n// The variants (xxx1, xxx2, etc...) are used depending on the length\n// (in number of characters) of the base.\nconst SVG_ACCENTS = {\n    // viewBoxWidth, viewBoxHeight, height\n    widehat1: [1062, 239, 0.24],\n    widehat2: [2364, 300, 0.3],\n    widehat3: [2364, 360, 0.36],\n    widehat4: [2364, 420, 0.42],\n    widecheck1: [1062, 239, 0.24],\n    widecheck2: [2364, 300, 0.3],\n    widecheck3: [2364, 360, 0.36],\n    widecheck4: [2364, 420, 0.42],\n    widetilde1: [600, 260, 0.26],\n    widetilde2: [1033, 286, 0.286],\n    widetilde3: [2339, 306, 0.306],\n    widetilde4: [2340, 312, 0.34],\n};\n\n// From https://github.com/KaTeX/KaTeX/blob/master/src/svgGeometry.js\n\nconst PATHS = {\n    // The doubleleftarrow geometry is from glyph U+21D0 in the font KaTeX Main\n    doubleleftarrow: `M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z`,\n\n    // doublerightarrow is from glyph U+21D2 in font KaTeX Main\n    doublerightarrow: `M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,\n\n    // leftarrow is from glyph U+2190 in font KaTeX Main\n    leftarrow: `M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z`,\n\n    // overbrace is from glyphs U+23A9/23A8/23A7 in font KaTeX_Size4-Regular\n    leftbrace: `M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,\n\n    leftbraceunder: `M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,\n\n    // overgroup is from the MnSymbol package (public domain)\n    leftgroup: `M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z`,\n\n    leftgroupunder: `M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z`,\n\n    // Harpoons are from glyph U+21BD in font KaTeX Main\n    leftharpoon: `M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,\n\n    leftharpoonplus: `M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z`,\n\n    leftharpoondown: `M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,\n\n    leftharpoondownplus: `M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,\n\n    // hook is from glyph U+21A9 in font KaTeX Main\n    lefthook: `M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z`,\n\n    leftlinesegment: `M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z`,\n\n    leftmapsto: `M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z`,\n\n    // tofrom is from glyph U+21C4 in font KaTeX AMS Regular\n    leftToFrom: `M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,\n\n    longequal: `M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z`,\n\n    midbrace: `M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,\n\n    midbraceunder: `M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,\n\n    oiintSize1: `M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,\n\n    oiintSize2: `M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z`,\n\n    oiiintSize1: `M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,\n\n    oiiintSize2: `M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,\n\n    rightarrow: `M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z`,\n\n    rightbrace: `M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,\n\n    rightbraceunder: `M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,\n\n    rightgroup: `M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z`,\n\n    rightgroupunder: `M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,\n\n    rightharpoon: `M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z`,\n\n    rightharpoonplus: `M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,\n\n    rightharpoondown: `M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,\n\n    rightharpoondownplus: `M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z`,\n\n    righthook: `M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,\n\n    rightlinesegment: `M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,\n\n    rightToFrom: `M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,\n\n    // twoheadleftarrow is from glyph U+219E in font KaTeX AMS Regular\n    twoheadleftarrow: `M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,\n\n    twoheadrightarrow: `M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,\n\n    // tilde1 is a modified version of a glyph from the MnSymbol package\n    widetilde1: `M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z`,\n\n    // ditto tilde2, tilde3, & tilde4\n    widetilde2: `M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,\n\n    widetilde3: `M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z`,\n\n    widetilde4: `M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z`,\n\n    // vec is from glyph U+20D7 in font KaTeX Main\n    vec: `M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z`,\n\n    // widehat1 is a modified version of a glyph from the MnSymbol package\n    widehat1: `M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,\n\n    // ditto widehat2, widehat3, & widehat4\n    widehat2: `M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,\n\n    widehat3: `M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,\n\n    widehat4: `M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,\n\n    // widecheck paths are all inverted versions of widehat\n    widecheck1: `M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,\n\n    widecheck2: `M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,\n\n    widecheck3: `M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,\n\n    widecheck4: `M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,\n\n    // The next ten paths support reaction arrows from the mhchem package.\n\n    // Arrows for \\ce{<-->} are offset from xAxis by 0.22ex, per mhchem in LaTeX\n    // baraboveleftarrow is mostly from from glyph U+2190 in font KaTeX Main\n    baraboveleftarrow: `M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,\n\n    // rightarrowabovebar is mostly from glyph U+2192, KaTeX Main\n    rightarrowabovebar: `M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,\n\n    // The short left harpoon has 0.5em (i.e. 500 units) kern on the left end.\n    // Ref from mhchem.sty: \\rlap{\\raisebox{-.22ex}{$\\kern0.5em\n    baraboveshortleftharpoon: `M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,\n\n    rightharpoonaboveshortbar: `M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,\n\n    shortbaraboveleftharpoon: `M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,\n\n    shortrightharpoonabovebar: `M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`,\n};\n\n/**\n * Generate the HTML markup to represent a SVG span.\n *\n */\nexport function svgBodyToMarkup(svgBodyName: string): string {\n    if (SVG_ACCENTS[svgBodyName]) {\n        const height = SVG_ACCENTS[svgBodyName][2];\n        const result =\n            `<span class=\"stretchy\" style=\"height:${height}em\">` +\n            `<svg width=\"100%\" height=\"${height}em\"` +\n            `viewBox=\"0 0 ${SVG_ACCENTS[svgBodyName][0]} ${SVG_ACCENTS[svgBodyName][1]}\"` +\n            `preserveAspectRatio=\"none\">` +\n            `<path d=\"${PATHS[svgBodyName]}\"></path>` +\n            `</svg></span>`;\n        return `<span style=\"height:${height}em;min-width:0\">${result}</span>`;\n    }\n\n    const [paths, minWidth, viewBoxHeight, align] = SVG_BODY[svgBodyName];\n    let widthClasses: string[];\n    let aligns: string[];\n    const height = viewBoxHeight / 1000;\n    if (paths.length === 3) {\n        widthClasses = ['slice-1-of-3', 'slice-2-of-3', 'slice-3-of-3'];\n        aligns = ['xMinYMin', 'xMidYMin', 'xMaxYMin'];\n    } else if (paths.length === 2) {\n        widthClasses = ['slice-1-of-2', 'slice-2-of-2'];\n        aligns = ['xMinYMin', 'xMaxYMin'];\n    } else {\n        widthClasses = ['slice-1-of-1'];\n        aligns = [align];\n    }\n    const body = paths\n        .map(\n            (path: string | number, i: string | number) =>\n                `<span class=\"${widthClasses[i]}\" style=\"height:${height}em\">` +\n                `<svg width=\"400em\" height=\"${height}em\"` +\n                `viewBox=\"0 0 400000 ${viewBoxHeight}\"` +\n                `preserveAspectRatio=\"${aligns[i]} slice\">` +\n                `<path d=\"${PATHS[path]}\"></path>` +\n                `</svg></span>`\n        )\n        .join('');\n    return `<span style=\"height:${height}em;min-width:${minWidth}em;display:inline-block;\">${body}</span>`;\n}\n\nexport function svgBodyHeight(svgBodyName: string): number {\n    if (SVG_BODY[svgBodyName]) {\n        return SVG_BODY[svgBodyName][2] / 1000;\n    }\n    return SVG_ACCENTS[svgBodyName][2];\n}\n","import { ErrorListener, Style, MacroDictionary } from '../public/core';\n\nimport type { Span } from './span';\nimport type { Token } from './lexer';\nimport type { Atom } from './atom';\nimport type { ParseModePrivate } from './context';\n\nexport interface ParseTokensOptions {\n    args: (string | Atom[])[];\n    macros: MacroDictionary;\n    smartFence: boolean;\n    style: Style;\n    parse: (\n        mode: ParseModePrivate,\n        tokens: Token[],\n        options: ParseTokensOptions\n    ) => [Atom[], Token[]];\n}\n\nexport function joinLatex(segments: string[]): string {\n    let sep = '';\n    let result = '';\n    for (const segment of segments) {\n        if (/[a-zA-Z*]/.test(segment[0])) {\n            // If the segment begins with a char that *could* be in a command\n            // name... insert a separator (if one was needed for the previous segment)\n            result += sep;\n        }\n        // If the segment ends in a command...\n        if (/\\\\[a-zA-Z]+\\*?$/.test(segment)) {\n            // ... potentially add a space before the next segment\n            sep = ' ';\n        } else {\n            sep = '';\n        }\n        result += segment;\n    }\n    return result;\n}\n\n/*\n * Return an array of runs (array of atoms with the same value\n *   for the specified property)\n */\nexport function getPropertyRuns(atoms: Atom[], property: string): Atom[][] {\n    const result = [];\n    let run = [];\n    let currentValue: string;\n    atoms.forEach((atom: Atom) => {\n        if (atom.type !== 'first') {\n            let value: string;\n            if (property === 'variant') {\n                value = atom.variant;\n                if (atom.variantStyle && atom.variantStyle !== 'up') {\n                    value += '-' + atom.variantStyle;\n                }\n            } else {\n                value = atom[property];\n            }\n            // If the value of this atom is different from the\n            // current value, start a new run\n            if (value !== currentValue) {\n                if (run.length > 0) result.push(run);\n                run = [atom];\n                currentValue = value;\n            } else {\n                // Same value, add it to the current run\n                run.push(atom);\n            }\n        }\n    });\n\n    // Push whatever is left\n    if (run.length > 0) result.push(run);\n    return result;\n}\n\nexport const MODES_REGISTRY = {};\n\nexport function register(\n    name: string,\n    definition: {\n        emitLatexRun: (\n            context: Atom,\n            run: Atom[],\n            expandMacro: boolean\n        ) => string;\n        applyStyle: (span: Span, style: Style) => string;\n        parse?: (\n            tokens: Token[],\n            error: ErrorListener,\n            options: ParseTokensOptions\n        ) => Atom[];\n    }\n): void {\n    MODES_REGISTRY[name] = { ...definition };\n}\n\nexport function emitLatexRun(\n    parent: Atom,\n    run: Atom[],\n    expandMacro: boolean\n): string {\n    if (\n        MODES_REGISTRY[run[0].mode] &&\n        MODES_REGISTRY[run[0].mode].emitLatexRun\n    ) {\n        return MODES_REGISTRY[run[0].mode].emitLatexRun(\n            parent,\n            run,\n            expandMacro\n        );\n    }\n    return '';\n}\n\nexport function parseTokens(\n    mode: ParseModePrivate,\n    tokens: Token[],\n    error: ErrorListener,\n    options: ParseTokensOptions\n): Atom[] {\n    if (MODES_REGISTRY[mode] && MODES_REGISTRY[mode].parse) {\n        return MODES_REGISTRY[mode].parse(tokens, error, options);\n    }\n    return null;\n}\n\n/*\n * Apply the styling (bold, italic, etc..) as classes to the atom, and return\n * the effective font name to be used for metrics\n * ('Main-Regular', 'Caligraphic-Regualr' etc...)\n */\nexport function applyStyle(span: Span, style: Style): string {\n    if (MODES_REGISTRY[style.mode] && MODES_REGISTRY[style.mode].applyStyle) {\n        return MODES_REGISTRY[style.mode].applyStyle(span, style);\n    }\n    return '';\n}\n","import { isArray } from '../common/types';\n\nimport { Style, ParseMode } from '../public/core';\nimport { getCharacterMetrics } from './font-metrics';\nimport { svgBodyToMarkup, svgBodyHeight } from './svg-span';\nimport { applyStyle as applyStyleForMode } from './modes-utils';\nimport { Context } from './context';\nimport { Mathstyle } from './mathstyle';\n\n/*\n * See https://tex.stackexchange.com/questions/81752/\n * for a thorough description of the TeXt atom type and their relevance to\n * proper kerning.\n */\n\nconst SPAN_TYPE = [\n    '',\n    'mord',\n    'mbin',\n    'mop',\n    'mrel',\n    'mopen',\n    'mclose',\n    'mpunct',\n    'minner',\n    'spacing',\n    // 'mtable',\n    'first',\n    'command',\n    'error',\n    'placeholder',\n    'textord', // @revisit\n    'none', // @revisit. Use ''?\n] as const; // The const assertion prevents widening to string[]\nexport type SpanType = typeof SPAN_TYPE[number];\n\nexport function isSpanType(type: string): type is SpanType {\n    return ((SPAN_TYPE as unknown) as string[]).includes(type);\n}\n\n/*\n * See http://www.tug.org/TUGboat/tb30-3/tb96vieth.pdf for\n * typesetting conventions for mathematical physics (units, etc...)\n */\n\nconst INTER_ATOM_SPACING = {\n    'mord+mop': 3,\n    'mord+mbin': 4,\n    'mord+mrel': 5,\n    'mord+minner': 3,\n\n    'mop+mord': 3,\n    'mop+mop': 3,\n    'mop+mbin': 5,\n    'mop+minner': 3,\n\n    'mbin+mord': 4,\n    'mbin+mop': 4,\n    'mbin+mopen': 4,\n    'mbin+minner': 4,\n\n    'mrel+mord': 5,\n    'mrel+mop': 5,\n    'mrel+mopen': 5,\n    'mrel+minner': 5,\n\n    'mclose+mop': 3,\n    'mclose+mbin': 4,\n    'mclose+mrel': 5,\n    'mclose+minner': 3,\n\n    'mpunct+mord': 3,\n    'mpunct+mop': 3,\n    'mpunct+mbin': 4,\n    'mpunct+mrel': 5,\n    'mpunct+mopen': 3,\n    'mpunct+mpunct': 3,\n    'mpunct+minner': 3,\n};\n\n// See https://www.w3.org/TR/2000/WD-MathML2-20000328/chapter6.html\n// 6.1.4 Non-Marking Characters\nconst SPACING_CHARACTER = [\n    '\\u200b', // 0/18 ZERO-WIDTH SPACE\n    '\\u200a', // 1/18 HAIR SPACE\n    '\\u200a\\u200a', // 2/18\n    '\\u2009', // 3/18 THIN SPACE\n    '\\u205f', // 4/18 MEDIUM MATHEMATICAL SPACE\n    '\\u205f\\u200a', // 5/18 MEDIUM MATHEMATICAL SPACE + HAIR SPACE\n    '\\u2004', // 6/18 THREE-PER-EM SPACE   1/3em\n    '',\n    '',\n    '\\u2002', // 9/18 EN SPACE 1/2em = 9/18\n];\nconst NEGATIVE_SPACING_CHARACTER = [\n    '',\n    '\\u200a\\u2063', // -1/18\n    '',\n    '\\u2009\\u2063', // -3/18\n    '\\u205f\\u2063', // -4/18\n    '\\u2005\\u2063', // -5/18\n];\n\nconst INTER_ATOM_TIGHT_SPACING = {\n    'mord+mop': 3,\n    'mop+mord': 3,\n    'mop+mop': 3,\n    'mclose+mop': 3,\n    'minner+mop': 3,\n};\n\n/**\n * Return a string made up of the concatenated arguments.\n * Each arguments can be either a string, which is unchanged,\n * or a number, which is converted to a string with at most 2 fractional digits.\n *\n */\nfunction toString(arg: (string | number)[] | string | number): string {\n    if (typeof arg === 'string') {\n        return arg;\n    }\n    if (typeof arg === 'number') {\n        return Number(Math.ceil(1e2 * arg) / 1e2).toString();\n    }\n    if (typeof arg === 'undefined') {\n        return '';\n    }\n    if (isArray(arg)) {\n        let result = '';\n        for (const elem of arg) {\n            result += toString(elem);\n        }\n        return result;\n        // } else if (arg) {\n        //     result += (arg as number).toString();\n    }\n    console.error('Span.toStringUnexpected argument type');\n    return '';\n}\n\n//----------------------------------------------------------------------------\n// SPAN\n//----------------------------------------------------------------------------\n/**\n * A span is the most elementary element that can be rendered.\n * It is composed of an optional body of text and an optional list\n * of children (other spans). Each span can be decorated with\n * CSS classes and style attributes.\n *\n * @param content the items 'contained' by this node\n * @param classes list of classes attributes associated with this node\n\n\n * @property  type - For example, `'command'`, `'mrel'`, etc...\n * @property classes - A string of space separated CSS classes\n * associated with this element\n * @property cssId - A CSS ID assigned to this span (optional)\n * @property children - An array, potentially empty, of spans which\n * this span encloses\n * @property body - Content of this span. Can be empty.\n * @property style - A set of key/value pairs specifying CSS properties\n * associated with this element.\n * @property height - The measurement from baseline to top, in em.\n * @property depth - The measurement from baseline to bottom, in em.\n * @property width\n */\nexport class Span {\n    children?: Span[];\n    classes: string;\n    type: SpanType;\n\n    body: string;\n    delim?: string; // @revisit\n    caret: ParseMode;\n\n    height?: number;\n    depth?: number;\n    width?: number;\n    skew?: number;\n    italic?: number;\n    maxFontSize?: number;\n\n    isTight?: boolean;\n\n    cssId?: string;\n\n    svgBody?: string;\n    svgOverlay?: string;\n    svgStyle?: string;\n\n    style: { [key: string]: string };\n    attributes?: { [key: string]: string }; // HTML attributes, for example 'data-atom-id'\n\n    constructor(\n        content: string | Span | Span[],\n        classes = '',\n        type: SpanType = ''\n    ) {\n        // CLASSES\n        this.classes = classes;\n        // CONTENT\n        if (isArray(content)) {\n            // Check if isArray first, since an array is also an object\n            // Flatten it (i.e. [[a1, a2], b1, b2] -> [a1, a2, b1, b2]\n            this.children = [].concat(...content);\n        } else if (typeof content === 'string') {\n            this.body = content;\n        } else if (content && typeof content === 'object') {\n            this.children = [content];\n        }\n        this.type = type;\n\n        // STYLE\n        // CSS style, as an array of key value pairs.\n        // Use this.setStyle() to modify it.\n        this.style = null;\n\n        // Calculate the dimensions of this span based on its children\n        this.updateDimensions();\n    }\n    /**\n     * Update the dimensions of this node based on its children:\n     * - height: distance from bottom to top\n     * - depth: distance from bottom to baseline\n     * - maxFontSize: a size multiplier (typically set with commands such as \\huge)\n     */\n    updateDimensions(): void {\n        let height = 0.0;\n        let depth = 0.0;\n        let maxFontSize = 1.0;\n        if (this.children) {\n            this.children.forEach((x) => {\n                if (x.height > height) height = x.height;\n                if (x.depth > depth) depth = x.depth;\n                if (x.maxFontSize > maxFontSize) maxFontSize = x.maxFontSize;\n            });\n        } else if (typeof this.body === 'string') {\n            height = 0.7;\n            depth = 0.2;\n        }\n        this.height = height;\n        this.depth = depth;\n        this.maxFontSize = maxFontSize;\n    }\n\n    selected(isSelected: boolean): void {\n        if (isSelected && !/ML__selected/.test(this.classes)) {\n            if (this.classes.length > 0) this.classes += ' ';\n            this.classes += 'ML__selected';\n        }\n        if (!isSelected && /ML__selected/.test(this.classes)) {\n            this.classes = this.classes.replace('ML__selected', '');\n        }\n        if (this.children) {\n            this.children.forEach((x) => x.selected(isSelected));\n        }\n    }\n\n    applyStyle(style: Style): void {\n        if (!style) return;\n\n        //\n        // 1. Apply color\n        //\n        if (style.color) {\n            if (style.color !== 'none') {\n                this.setStyle('color', style.color);\n            } else {\n                this.setStyle('color', '');\n            }\n        }\n        if (style.backgroundColor) {\n            if (style.backgroundColor !== 'none') {\n                this.setStyle('background-color', style.backgroundColor);\n            } else {\n                this.setStyle('background-color', '');\n            }\n        }\n\n        //\n        // 2. Add any custom style classes\n        //\n\n        if (style.cssClass) {\n            this.classes += ' ' + style.cssClass;\n        }\n\n        // If the body is null (for example for a line), we're done.\n        if (!this.body) return;\n\n        //\n        // 3. Determine the font family (i.e. 'ams', 'mathcal', etc...)\n        // and apply styling by adding appropriate classes to the atom\n        //\n\n        console.assert(typeof this.body === 'string');\n\n        const fontName = applyStyleForMode(this, style);\n\n        //\n        // 5. Get the metrics information\n        //\n        if (this.body && fontName) {\n            this.maxFontSize =\n                {\n                    size1: 0.5,\n                    size2: 0.7,\n                    size3: 0.8,\n                    size4: 0.9,\n                    size5: 1.0,\n                    size6: 1.2,\n                    size7: 1.44,\n                    size8: 1.73,\n                    size9: 2.07,\n                    size10: 2.49,\n                }[style.fontSize] || 1.0;\n            this.height = 0.0;\n            this.depth = 0.0;\n            this.skew = 0.0;\n            this.italic = 0.0;\n            for (let i = 0; i < this.body.length; i++) {\n                const metrics = getCharacterMetrics(\n                    this.body.charAt(i),\n                    fontName\n                );\n                // If we were able to get metrics info for this character, store it.\n                if (metrics) {\n                    this.height = Math.max(this.height, metrics.height);\n                    this.depth = Math.max(this.depth, metrics.depth);\n                    this.skew = metrics.skew;\n                    this.italic = metrics.italic;\n                }\n            }\n        }\n    }\n\n    /**\n     * Set the value of a CSS property associated with this span.\n     * For example, setStyle('border-right', 5.6, 'em');\n     *\n     * @param prop the CSS property to set\n     * @param value a series of strings and numbers that will be concatenated.\n     */\n    setStyle(prop: string, ...value: (string | number)[]): void {\n        const v = toString(value);\n        if (v.length > 0) {\n            if (!this.style) this.style = {};\n            this.style[prop] = v;\n        }\n    }\n\n    setTop(top: number): void {\n        if (top && top !== 0) {\n            if (!this.style) this.style = {};\n            this.style['top'] = toString(top) + 'em';\n            this.height -= top;\n            this.depth += top;\n        }\n    }\n\n    setLeft(left: number): void {\n        if (left && left !== 0) {\n            if (!this.style) this.style = {};\n            this.style['margin-left'] = toString(left) + 'em';\n        }\n    }\n    setRight(right: number): void {\n        if (right && right !== 0) {\n            if (!this.style) this.style = {};\n            this.style['margin-right'] = toString(right) + 'em';\n        }\n    }\n    setWidth(width: number): void {\n        if (width && width !== 0) {\n            if (!this.style) this.style = {};\n            this.style['width'] = toString(width) + 'em';\n        }\n    }\n\n    /**\n     * Generate the HTML markup to represent this span.\n     *\n     * @param hskip - Space (in mu, 1/18em) to leave on the left side\n     * of the span. Implemented as a Unicode character if possible, a margin-left otherwise.\n     * This is used to adjust the inter-spacing between spans of different types,\n     * e.g. 'bin' and 'rel', according to the TeX rules (TexBook p.170)\n     * @param hscale - If a value is provided, the margins are scaled by\n     * this factor.\n     * @return HTML markup\n     */\n\n    toMarkup(hskip = 1.0, hscale = 1.0): string {\n        let result = '';\n        let body = this.body || '';\n        if (this.children) {\n            let previousType = 'none';\n            for (const child of this.children) {\n                let spacing = 0;\n                if (previousType) {\n                    let type = child.type;\n                    if (type) {\n                        if (type === 'textord') type = 'mord';\n                        if (type === 'first') type = 'none';\n                        if (child.isTight) {\n                            spacing =\n                                INTER_ATOM_TIGHT_SPACING[\n                                    previousType + '+' + type\n                                ] || 0;\n                        } else {\n                            spacing =\n                                INTER_ATOM_SPACING[previousType + '+' + type] ||\n                                0;\n                        }\n                        spacing = Math.floor(hscale * spacing);\n                    }\n                }\n                body += child.toMarkup(spacing, hscale);\n                previousType = lastSpanType(child);\n            }\n        }\n        // Collapse 'empty' spans\n        if (\n            (body === '\\u200b' || (!body && !this.svgBody)) &&\n            (!this.classes || this.classes === 'ML__selected') &&\n            !this.cssId &&\n            !this.style &&\n            !this.svgOverlay\n        ) {\n            result = '';\n        } else {\n            // Note: We can't omit the tag, even if it has no class and no style,\n            // as some layouts (vlist) depends on the presence of the tag to function\n            result = '<span';\n\n            if (this.cssId) {\n                result += ' id=\"' + this.cssId + '\" ';\n            }\n\n            if (this.attributes) {\n                result +=\n                    ' ' +\n                    Object.keys(this.attributes)\n                        .map(\n                            (attribute) =>\n                                `${attribute}=\"${this.attributes[attribute]}\"`\n                        )\n                        .join(' ');\n            }\n\n            const classes = this.classes.split(' ');\n\n            // Add the type (mbin, mrel, etc...) if specified\n            classes.push(\n                {\n                    command: 'ML__command',\n                    placeholder: 'ML__placeholder',\n                    error: 'ML__error',\n                }[this.type] ?? ''\n            );\n            if (this.caret && this.type === 'command') {\n                classes.push('ML__command-caret');\n            }\n\n            // Remove duplicate and empty classes\n            let classList = '';\n            if (classes.length > 1) {\n                classList = classes\n                    .filter((x, e, a) => {\n                        return x.length > 0 && a.indexOf(x) === e;\n                    })\n                    .join(' ');\n            } else {\n                classList = classes[0];\n            }\n\n            if (classList.length > 0) {\n                result += ` class=\"${classList}\"`;\n            }\n\n            // If a `hskip` value was provided, add it to the margin-left\n            if (hskip) {\n                if (this.style && this.style['margin-left']) {\n                    // There was already a margin, add to it\n                    this.style['margin-left'] =\n                        toString(\n                            parseFloat(this.style['margin-left']) + hskip / 18\n                        ) + 'em';\n                } else {\n                    // No margin yet. Can we encode it as a Unicode space?\n                    if (hskip < 0 && NEGATIVE_SPACING_CHARACTER[-hskip]) {\n                        body = NEGATIVE_SPACING_CHARACTER[-hskip] + body;\n                    } else if (SPACING_CHARACTER[hskip]) {\n                        body = SPACING_CHARACTER[hskip] + body;\n                    } else {\n                        if (!this.style) this.style = {};\n                        this.style['margin-left'] = toString(hskip / 18) + 'em';\n                    }\n                }\n            }\n\n            if (this.style) {\n                let styleString = '';\n                const isSelected = /ML__selected/.test(this.classes);\n                for (const style in this.style) {\n                    if (\n                        Object.prototype.hasOwnProperty.call(this.style, style)\n                    ) {\n                        // Render the style property, except the background\n                        // of selected spans\n                        if (style !== 'background-color' || !isSelected) {\n                            styleString +=\n                                style + ':' + this.style[style] + ';';\n                        }\n                    }\n                }\n\n                if (styleString.length > 0) {\n                    result += ' style=\"' + styleString + '\"';\n                }\n            }\n            result += '>';\n\n            // If there is some SVG markup associated with this span,\n            // include it now\n            if (this.svgBody) {\n                result += svgBodyToMarkup(this.svgBody);\n            } else if (this.svgOverlay) {\n                result += '<span style=\"';\n                result += 'display: inline-block;';\n                result += 'height:' + (this.height + this.depth) + 'em;';\n                result += 'vertical-align:' + this.depth + 'em;';\n                result += '\">';\n                result += body;\n                result += '</span>';\n                result += '<svg ';\n                result += 'style=\"position:absolute;';\n                result += 'overflow:overlay;';\n                result += 'height:' + (this.height + this.depth) + 'em;';\n                if (this.style && this.style.padding) {\n                    result += 'top:' + this.style.padding + ';';\n                    result += 'left:' + this.style.padding + ';';\n                    result +=\n                        'width:calc(100% - 2 * ' + this.style.padding + ' );';\n                } else {\n                    result += 'top:0;';\n                    result += 'left:0;';\n                    result += 'width:100%;';\n                }\n                result += 'z-index:2;';\n                result += '\"';\n                if (this.svgStyle) {\n                    result += ' style=\"' + this.svgStyle + '\"';\n                }\n                result += '>';\n                result += this.svgOverlay;\n                result += '</svg>';\n            } else {\n                result += body;\n            }\n\n            result = result + '</span>';\n        }\n\n        if (this.caret && this.type !== 'command') {\n            if (this.caret === 'text') {\n                result = result + '<span class=\"ML__text-caret\"></span>';\n            } else {\n                result = result + '<span class=\"ML__caret\"></span>';\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Can this span be coalesced with 'span'?\n     * This is used to 'coalesce' (i.e. group together) a series of spans that are\n     * identical except for their value, and to avoid generating redundant spans.\n     * That is: '12' ->\n     *      \"<span class='mord mathrm'>12</span>\"\n     * rather than:\n     *      \"<span class='mord mathrm'>1</span><span class='mord mathrm'>2</span>\"\n     */\n    tryCoalesceWith(span: Span): boolean {\n        // Don't coalesce if the tag or type are different\n        if (this.type !== span.type) return false;\n\n        // Don't coalesce consecutive errors, placeholders or commands\n        if (\n            this.type === 'error' ||\n            this.type === 'placeholder' ||\n            this.type === 'command'\n        ) {\n            return false;\n        }\n\n        // Don't coalesce if some of the content is SVG\n        if (this.svgBody || !this.body) return false;\n        if (span.svgBody || !span.body) return false;\n\n        // If this span or the candidate span have children, we can't\n        // coalesce them, but we'll try to coalesce their children\n        const hasChildren = this.children && this.children.length > 0;\n        const spanHasChildren = span.children && span.children.length > 0;\n        if (hasChildren || spanHasChildren) return false;\n\n        // If they have a different number of styles, can't coalesce\n        const thisStyleCount = this.style ? this.style.length : 0;\n        const spanStyleCount = span.style ? span.style.length : 0;\n        if (thisStyleCount !== spanStyleCount) return false;\n\n        // For the purpose of our comparison,\n        // any 'empty' classes (whitespace)\n        const classes = this.classes.trim().replace(/\\s+/g, ' ').split(' ');\n        const spanClasses = span.classes.trim().replace(/\\s+/g, ' ').split(' ');\n\n        // If they have a different number of classes, can't coalesce\n        if (classes.length !== spanClasses.length) return false;\n\n        // OK, let's do the more expensive comparison now.\n        // If they have different classes, can't coalesce\n        classes.sort();\n        spanClasses.sort();\n        for (let i = 0; i < classes.length; i++) {\n            // Don't coalesce vertical separators\n            // (used in column formating with {l||r} for example\n            if (classes[i] === 'vertical-separator') return false;\n            if (classes[i] !== spanClasses[i]) return false;\n        }\n\n        // If the styles are different, can't coalesce\n        if (this.style && span.style) {\n            for (const style in this.style) {\n                if (\n                    Object.prototype.hasOwnProperty.call(this.style, style) &&\n                    Object.prototype.hasOwnProperty.call(span.style, style)\n                ) {\n                    if (this.style[style] !== span.style[style]) return false;\n                }\n            }\n        }\n\n        // OK, the attributes of those spans are compatible.\n        // Merge span into this\n        this.body += span.body;\n        this.height = Math.max(this.height, span.height);\n        this.depth = Math.max(this.depth, span.depth);\n        this.maxFontSize = Math.max(this.maxFontSize, span.maxFontSize);\n        // The italic correction for the coalesced spans is the\n        // italic correction of the last span.\n        this.italic = span.italic;\n        return true;\n    }\n}\n\nfunction lastSpanType(span: Span): string {\n    const result = span.type;\n    if (result === 'first') return 'none';\n    if (result === 'textord') return 'mord';\n    return result;\n}\n\n/**\n * Attempts to coalesce (merge) spans, for example consecutive text spans.\n * Return a new tree with coalesced spans.\n *\n */\nexport function coalesce(spans: Span[]): Span[] {\n    if (!spans || spans.length === 0) return [];\n\n    spans[0].children = coalesce(spans[0].children);\n    const result = [spans[0]];\n\n    for (let i = 1; i < spans.length; i++) {\n        if (!result[result.length - 1].tryCoalesceWith(spans[i])) {\n            spans[i].children = coalesce(spans[i].children);\n            result.push(spans[i]);\n        }\n    }\n    return result;\n}\n\n//----------------------------------------------------------------------------\n// UTILITY FUNCTIONS\n//----------------------------------------------------------------------------\n\nexport function height(spans: Span | Span[]): number {\n    if (!spans) return 0;\n    if (isArray(spans)) {\n        return spans.reduce((acc, x) => Math.max(acc, x.height), 0);\n    }\n    return spans.height;\n}\n\nexport function depth(spans: Span | Span[]): number {\n    if (!spans) return 0;\n    if (isArray(spans)) {\n        return spans.reduce((acc, x) => Math.max(acc, x.depth), 0);\n    }\n    return spans.depth;\n}\n\nexport function skew(spans: Span | Span[]): number {\n    if (!spans) return 0;\n    if (isArray(spans)) {\n        let result = 0;\n        for (const span of spans) {\n            result += span.skew || 0;\n        }\n        return result;\n    }\n    return spans.skew;\n}\n\nexport function italic(spans: Span | Span[]): number {\n    if (!spans) return 0;\n    if (isArray(spans)) {\n        return spans[spans.length - 1].italic;\n    }\n    return spans.italic;\n}\n\n/**\n * Make an element made of a sequence of children with classes\n * @param content the items 'contained' by this node\n * @param classes list of classes attributes associated with this node\n */\nexport function makeSpan(\n    content: string | Span | Span[],\n    classes = '',\n    type: SpanType = ''\n): Span {\n    if (isArray(content)) {\n        const c = content.filter((x) => !!x);\n        if (c.length === 1) {\n            return new Span(c[0], classes, type);\n        }\n        return new Span(c, classes, type);\n    }\n    return new Span(content, classes, type);\n}\n\nexport function makeSymbol(\n    fontFamily: string,\n    symbol: string,\n    classes = '',\n    type: SpanType = ''\n): Span {\n    const result = new Span(symbol, classes, type);\n\n    const metrics = getCharacterMetrics(symbol, fontFamily);\n    result.height = metrics.height;\n    result.depth = metrics.depth;\n    result.skew = metrics.skew;\n    result.italic = metrics.italic;\n\n    result.setRight(result.italic);\n\n    return result;\n}\n\n/**\n * Makes an element placed in each of the vlist elements to ensure that each\n * element has the same max font size. To do this, we create a zero-width space\n * with the correct font size.\n//  * Note: without this, even when fontSize = 0, the fraction bar is no\n//  * longer positioned correctly\n */\nfunction makeFontSizer(context: Context, fontSize: number): Span {\n    const fontSizeAdjustment = fontSize\n        ? fontSize / context.mathstyle.sizeMultiplier\n        : 0;\n    const fontSizeInner = new Span('\\u200b'); // ZERO WIDTH SPACE\n\n    if (fontSizeAdjustment !== 1) {\n        fontSizeInner.setStyle(\n            'font-size',\n            fontSizeAdjustment,\n            fontSizeAdjustment > 0 ? 'em' : ''\n        );\n        fontSizeInner.attributes = {\n            'aria-hidden': 'true',\n        };\n    }\n\n    if (context.size !== 'size5') {\n        return new Span(\n            fontSizeInner,\n            'fontsize-ensurer reset-' + context.size + ' size5'\n        );\n    }\n    return fontSizeAdjustment !== 0 ? fontSizeInner : null;\n}\n\nexport function makeStruts(\n    content: Span | Span[],\n    classes = '',\n    type: SpanType = ''\n): Span {\n    const topStrut = makeSpan('', 'ML__strut');\n    topStrut.setStyle('height', height(content), 'em');\n    let bottomStrut: Span;\n    if (depth(content) !== 0) {\n        bottomStrut = makeSpan('', 'ML__strut--bottom');\n        bottomStrut.setStyle('height', height(content) + depth(content), 'em');\n        bottomStrut.setStyle('vertical-align', -depth(content), 'em');\n    }\n    let struts: Span[];\n    if (isArray(content)) {\n        struts = [topStrut, bottomStrut, ...content];\n    } else {\n        struts = [topStrut, bottomStrut, content];\n    }\n    const result = makeSpan(struts, classes, type);\n    // result.setStyle('display', 'inline-block');\n    return result;\n}\n\nexport function makeStyleWrap(\n    type: SpanType,\n    children: Span | Span[],\n    fromStyle: Mathstyle,\n    toStyle: Mathstyle,\n    classes: string\n): Span {\n    classes = classes || '';\n    classes += ' style-wrap ';\n\n    const result = makeHlist(children, classes + fromStyle.adjustTo(toStyle));\n    result.type = type;\n\n    const multiplier = toStyle.sizeMultiplier / fromStyle.sizeMultiplier;\n    result.height *= multiplier; // @revisit. Use spanHeight()? is height set at this point?\n    result.depth *= multiplier;\n    result.maxFontSize = toStyle.sizeMultiplier;\n\n    return result;\n}\n\n/**\n * Add some SVG markup to be overlaid on top of the span\n */\nexport function addSVGOverlay(\n    body: Span,\n    svgMarkup: string,\n    svgStyle: string\n): Span {\n    body.svgOverlay = svgMarkup;\n    body.svgStyle = svgStyle;\n    return body;\n}\n\nexport function makeHlist(\n    spans: Span | Span[],\n    classes = '',\n    type: SpanType = ''\n): Span {\n    if (!classes) {\n        // No decorations...\n        if (spans instanceof Span) {\n            // A single span, use it as the output\n            return spans;\n        } else if (isArray(spans) && spans.length === 1) {\n            // An array, with a single span, use the single span as the output\n            return spans[0];\n        }\n    }\n    const result = new Span(spans, classes, type);\n\n    let multiplier = 1.0;\n    if (spans instanceof Span) {\n        multiplier = spans.maxFontSize;\n    } else {\n        multiplier = spans.reduce((acc, x) => Math.max(acc, x.maxFontSize), 0);\n    }\n    result.height *= multiplier;\n    result.depth *= multiplier;\n\n    return result;\n}\n\n/**\n * Create a new span of type `vlist`, a set of vertically stacked items\n * @param elements  An array of Span and integer. The integer can be either some kerning information\n * or the value of an individual shift of the preceding child if in 'individualShift' mode\n * @param pos The method that will be used to position the elements in the vlist.\n *\n * One of:\n * - `\"individualShift\"`: each child must be followed by a number indicating how much to shift it (i.e. moved downwards)\n * - `\"top\"`: posData specifies the topmost point of the vlist (>0 move up)\n * - `\"bottom\"`: posData specifies the bottommost point of the vlist (>0 move down)\n * - `\"shift\"`: the baseline of the vlist will be positioned posData away from the baseline\n * of the first child. (>0 moves down)\n */\nexport function makeVlist(\n    context: Context,\n    elements: (number | Span[] | Span)[],\n    pos: 'shift' | 'top' | 'bottom' | 'individualShift' = 'shift',\n    posData = 0\n): Span {\n    let listDepth = 0;\n    let currPos = 0;\n    pos = pos || 'shift';\n\n    // Normalize the elements so that they're all either a number or\n    // a single span. If a child is an array of spans,\n    // wrap it in a span\n    for (let i = 0; i < elements.length; i++) {\n        if (isArray(elements[i])) {\n            if ((elements[i] as Span[]).length === 1) {\n                // If that's an array made up of a single span, use that span\n                elements[i] = elements[i][0];\n            } else {\n                // Otherwise, wrap it in a span\n                elements[i] = makeSpan(elements[i] as Span[]);\n            }\n        }\n    }\n\n    if (pos === 'shift') {\n        console.assert(elements[0] instanceof Span);\n        listDepth = -(elements[0] as Span).depth - posData;\n    } else if (pos === 'bottom') {\n        listDepth = -posData;\n    } else if (pos === 'top') {\n        let bottom = posData;\n        for (const element of elements) {\n            if (element instanceof Span) {\n                // It's a Span, use the dimension data\n                bottom -= element.height + element.depth;\n            } else if (typeof element === 'number') {\n                // It's a kern adjustment\n                bottom -= element;\n            }\n        }\n        listDepth = bottom;\n    } else if (pos === 'individualShift') {\n        // Individual adjustment to each elements.\n        // The elements list is made up of a Span followed\n        // by a shift adjustment as an integer\n        const originalElements: (number | Span)[] = elements as (\n            | number\n            | Span\n        )[];\n        elements = [originalElements[0]];\n\n        // Add in kerns to the list of elements to get each element to be\n        // shifted to the correct specified shift\n        console.assert(originalElements[0] instanceof Span);\n        listDepth = -originalElements[1] - (originalElements[0] as Span).depth;\n        currPos = listDepth;\n        for (let i = 2; i < originalElements.length; i += 2) {\n            console.assert(originalElements[i] instanceof Span);\n            const diff =\n                -originalElements[i + 1] -\n                currPos -\n                (originalElements[i] as Span).depth;\n            currPos = currPos + diff;\n\n            console.assert(originalElements[i - 2] instanceof Span);\n            const kern =\n                diff -\n                ((originalElements[i - 2] as Span).height +\n                    (originalElements[i - 2] as Span).depth);\n\n            elements.push(kern);\n            elements.push(originalElements[i]);\n        }\n    } else {\n        console.assert(false, 'makeVList with unknown method: \"' + pos + '\"');\n    }\n\n    // Make the fontSizer\n    let maxFontSize = 1.0;\n    for (const element of elements) {\n        if (element instanceof Span) {\n            maxFontSize = Math.max(maxFontSize, element.maxFontSize);\n        }\n    }\n    const fontSizer = makeFontSizer(context, maxFontSize);\n\n    const newElements = [];\n    currPos = listDepth;\n    for (const element of elements) {\n        if (typeof element === 'number') {\n            // It's a kern adjustment\n            currPos += element;\n        } else if (element instanceof Span) {\n            const wrap = makeSpan([fontSizer, element]);\n            wrap.setTop(-element.depth - currPos);\n            newElements.push(wrap);\n            currPos += element.height + element.depth;\n        }\n    }\n\n    const result = makeSpan(newElements, 'vlist');\n\n    // Fix the final height and depth, in case there were kerns at the ends\n    // since makeSpan won't take that into account.\n    result.depth = Math.max(listDepth, depth(result) || 0);\n    result.height = Math.max(-currPos, height(result) || 0);\n\n    return result;\n}\n\n/**\n * Create a span that consist of a (stretchy) SVG element\n *\n * @param classes list of classes attributes associated with this node\n */\nexport function makeSVGSpan(svgBodyName: string): Span {\n    const span = new Span(null);\n    span.svgBody = svgBodyName;\n    span.height = svgBodyHeight(svgBodyName) / 2;\n    span.depth = span.height;\n    return span;\n}\n","import { ParseModePrivate } from './context';\nimport { Atom, AtomType, Notations, Colspec, BBoxParam } from './atom-utils';\nimport {\n    Variant,\n    VariantStyle,\n    FontSeries,\n    FontShape,\n    MacroDictionary,\n} from '../public/core';\n\nexport type FunctionArgumentDefiniton = {\n    isOptional: boolean;\n    type: ParseModePrivate;\n};\n\nexport type FunctionDefinition = {\n    params: FunctionArgumentDefiniton[];\n    mode: ParseModePrivate;\n    infix: boolean;\n    parse: ParseFunction;\n    emit: EmitFunction;\n    isFunction: boolean;\n};\n\ntype EnvironmentDefinition = {\n    /* If true, the 'content' of the environment is parsed in tabular mode,\n        i.e. wiht '&' creating a new column and '\\\\' creating a new row */\n    tabular: boolean;\n    params: FunctionArgumentDefiniton[];\n    parser: ParseEnvironmentFunction;\n};\n\ntype SymbolDefinition = {\n    type: AtomType;\n    value: string;\n    variant: Variant;\n    variantStyle: VariantStyle;\n};\n\nexport const MATH_SYMBOLS = {};\n// Map a character to some corresponding Latex\n// This is used for some characters such as ² SUPERSCRIPT TWO.\n// This is also an opportunity to specify the prefered form when\n// a unicode character is encountered that maps to multiple commands,\n// for example ≠ could map either to \\ne or \\neq\n// The table will also be populated by any registered symbol\n// from MATH_SYMBOLS\n// prettier-ignore\nexport const REVERSE_MATH_SYMBOLS = {\n    '<': '<',   // Also \\lt\n    '>': '>',   // Also \\gt\n    'o': 'o',    // Also \\omicron\n    '&': '\\\\&',  // Also \\And\n    '{': '\\\\{',  // Also \\lbrace\n    '}': '\\\\}',  // Also \\rbrace\n    '[': '\\\\lbrack',\n    ']': '\\\\rbrack',\n    ':': '\\\\colon', // Also :\n    \n    '\\u00a0': '~', // Also \\space\n    '\\u00ac': '\\\\neg',  // Also \\lnot\n\n    '\\u00b7': '\\\\cdot',\n    '\\u00bc': '\\\\frac{1}{4}',\n    '\\u00bd': '\\\\frac{1}{2}',\n    '\\u00be': '\\\\frac{3}{4}',\n    '\\u2070': '^{0}',\n    '\\u2071': '^{i}', // eslint-disable-line\n    '\\u00b9': '^{1}',\n    '\\u00b2': '^{2}',\n    '\\u00b3': '^{3}',\n\n    '\\u2020': '\\\\dagger', // Also \\dag\n    '\\u2021': '\\\\ddagger', // Also \\ddag\n    '\\u2026': '\\\\ldots',    // Also \\mathellipsis\n\n    '\\u2074': '^{4}',\n    '\\u2075': '^{5}',\n    '\\u2076': '^{6}',\n    '\\u2077': '^{7}',\n    '\\u2078': '^{8}',\n    '\\u2079': '^{9}',\n    '\\u207a': '^{+}',\n    '\\u207b': '^{-}',\n    '\\u207c': '^{=}',\n    '\\u207f': '^{n}', // eslint-disable-line\n    '\\u2080': '_{0}',\n    '\\u2081': '_{1}',\n    '\\u2082': '_{2}',\n    '\\u2083': '_{3}',\n    '\\u2084': '_{4}',\n    '\\u2085': '_{5}',\n    '\\u2086': '_{6}',\n    '\\u2087': '_{7}',\n    '\\u2088': '_{8}',\n    '\\u2089': '_{9}',\n    '\\u208a': '_{+}',\n    '\\u208b': '_{-}',\n    '\\u208c': '_{=}',\n    '\\u2090': '_{a}',// eslint-disable-line\n    '\\u2091': '_{e}',// eslint-disable-line\n    '\\u2092': '_{o}',// eslint-disable-line\n    '\\u2093': '_{x}',// eslint-disable-line\n\n    '\\u2032': '\\\\prime',\n    '\\'': '\\\\prime',\n\n    '\\u2190': '\\\\gets', // Also \\leftarrow\n    '\\u2192': '\\\\to',   // Also \\rightarrow\n\n    '\\u25b3': '\\\\triangle', // Also \\bigtriangleup, \\vartriangle\n    '\\u25bd': '\\\\triangledown',\n\n    '\\u220b': '\\\\owns', // Also \\ni\n    '\\u2217': '\\\\ast',  // Also *\n    '\\u2223': '\\\\vert',  // Also |, \\mvert, \\lvert, \\rvert\n    '\\u2225': '\\\\Vert',  // Also \\parallel \\shortparallel\n\n    '\\u2227': '\\\\land', // Also \\wedge\n    '\\u2228': '\\\\lor', // Also \\vee\n\n    '\\u22c5': '\\\\cdot', // Also \\centerdot, \\cdotp\n    '\\u22c8': '\\\\bowtie', // Also \\Joint\n\n    '\\u2260': '\\\\ne',   // Also \\neq\n    '\\u2264': '\\\\le',   // Also \\leq\n    '\\u2265': '\\\\ge',   // Also \\geq\n    '\\u22a5': '\\\\bot', // Also \\perp\n\n    '\\u27f7': '\\\\biconditional',    // Also longleftrightarrow\n    '\\u27f8': '\\\\impliedby', // Also \\Longleftarrow\n    '\\u27f9': '\\\\implies', // Also \\Longrightarrow\n\n    '\\u2102': '\\\\C',    // Also \\doubleStruckCapitalC\n    '\\u2115': '\\\\N',    // Also \\doubleStruckCapitalN\n    '\\u2119': '\\\\P',    // Also \\doubleStruckCapitalP\n    '\\u211a': '\\\\Q',    // Also \\doubleStruckCapitalQ\n    '\\u211d': '\\\\R',    // Also \\doubleStruckCapitalR\n    '\\u2124': '\\\\Z',    // Also \\doubleStruckCapitalZ\n};\nexport const FUNCTIONS = {};\n\nexport const ENVIRONMENTS: { [name: string]: EnvironmentDefinition } = {};\n\ntype EmitFunction = (\n    name: string,\n    parent: Atom,\n    atom: Atom,\n    emit: (parent: Atom, atoms: Atom[]) => string\n) => string;\n\nexport type ParseFunctionResult = {\n    type?: string;\n\n    mode?: ParseModePrivate;\n    mathstyle?: string;\n\n    skipBoundary?: boolean;\n    captureSelection?: boolean;\n\n    body?: string | Atom[];\n    svgBelow?: string; // type = 'overunder'\n\n    limits?: 'limits' | 'nolimits' | 'accent' | 'overunder' | 'auto';\n    accent?: string;\n\n    latexOpen?: string; // type = 'group'\n    latexClose?: string; // type = 'group'\n    color?: string; // type = ''\n    verbatimBackgroundcolor?: string;\n    backgroundcolor?: string;\n    framecolor?: string;\n    verbatimFramecolor?: string;\n    fontSize?:\n        | 'size1'\n        | 'size2'\n        | 'size3'\n        | 'size4'\n        | 'size5'\n        | 'size6'\n        | 'size7'\n        | 'size8'\n        | 'size9'\n        | 'size10';\n    fontSeries?: FontSeries;\n    fontShape?: FontShape;\n    fontFamily?: string;\n    variant?: Variant;\n    variantStyle?: VariantStyle;\n\n    cssClass?: string;\n    cssId?: string;\n    isFunction?: boolean;\n    isSymbol?: boolean;\n\n    size?: string; // type = 'sizeddelim'\n    cls?: string; // type = 'sizeddelim'    @revisit: use cssClass?\n    delim?: string;\n\n    // type = 'genfrac'\n    hasBarLine?: boolean;\n    leftDelim?: string;\n    rightDelim?: string;\n    numer?: Atom[];\n    denom?: Atom[];\n    continuousFraction?: boolean;\n    numerPrefix?: string;\n    denomPrefix?: string;\n\n    // type = 'enclose'\n    notation?: Notations;\n    borderStyle?: string;\n    padding?: number | string;\n    svgStrokeStyle?: string;\n    strokeColor?: string;\n    strokeWidth?: number;\n    strokeStyle?: string;\n    shadow?: string;\n};\n\ntype ParseFunction = (\n    name: string,\n    args: (string | number | BBoxParam | Colspec[] | Atom[])[]\n) => ParseFunctionResult;\n\nexport type ParseEnvironmentResult = {\n    // params: FunctionArgumentDefiniton[];\n    // parser: ParseFunction;\n    mathstyle?:\n        | 'displaystyle'\n        | 'textstyle'\n        | 'scriptstyle'\n        | 'scriptscriptstyle';\n    colFormat?: Colspec[];\n    lFence?: string;\n    rFence?: string;\n    jot?: number; // Jot is an extra gap between lines of numbered equation.\n    // It's 3pt by default in LaTeX (ltmath.dtx:181)\n    arraystretch?: number;\n    arraycolsep?: number;\n};\ntype ParseEnvironmentFunction = (\n    name: string,\n    args: (string | number | BBoxParam | Colspec[] | Atom[])[],\n    arrray: Atom[][][]\n) => ParseEnvironmentResult;\n\nexport const MACROS: MacroDictionary = {\n    iff: '\\\\;\\u27fa\\\\;', //>2,000 Note: additional spaces around the arrows\n    nicefrac: '^{#1}\\\\!\\\\!/\\\\!_{#2}',\n\n    // From bracket.sty, Dirac notation\n    bra: '\\\\mathinner{\\\\langle{#1}|}',\n    ket: '\\\\mathinner{|{#1}\\\\rangle}',\n    braket: '\\\\mathinner{\\\\langle{#1}\\\\rangle}',\n    set: '\\\\mathinner{\\\\lbrace #1 \\\\rbrace}',\n    Bra: '\\\\left\\\\langle #1\\\\right|',\n    Ket: '\\\\left|#1\\\\right\\\\rangle',\n    Braket: '\\\\left\\\\langle{#1}\\\\right\\\\rangle',\n    Set: '\\\\left\\\\lbrace #1 \\\\right\\\\rbrace',\n\n    // Proof Wiki\n    rd: '\\\\mathrm{d}',\n    rD: '\\\\mathrm{D}',\n\n    // From Wolfram Alpha\n    doubleStruckCapitalN: '\\\\mathbb{N}',\n    doubleStruckCapitalR: '\\\\mathbb{R}',\n    doubleStruckCapitalQ: '\\\\mathbb{Q}',\n    doubleStruckCapitalZ: '\\\\mathbb{Z}',\n    doubleStruckCapitalP: '\\\\mathbb{P}',\n\n    scriptCapitalE: '\\\\mathscr{E}',\n    scriptCapitalH: '\\\\mathscr{H}',\n    scriptCapitalL: '\\\\mathscr{L}',\n    gothicCapitalC: '\\\\mathfrak{C}',\n    gothicCapitalH: '\\\\mathfrak{H}',\n    gothicCapitalI: '\\\\mathfrak{I}',\n    gothicCapitalR: '\\\\mathfrak{R}',\n\n    imaginaryI: '\\\\mathrm{i}', // NOTE: set in main (upright) as per ISO 80000-2:2009.\n    imaginaryJ: '\\\\mathrm{j}', // NOTE: set in main (upright) as per ISO 80000-2:2009.\n\n    exponentialE: '\\\\mathrm{e}', // NOTE: set in main (upright) as per ISO 80000-2:2009.\n    differentialD: '\\\\mathrm{d}', // NOTE: set in main (upright) as per ISO 80000-2:2009.\n    capitalDifferentialD: '\\\\mathrm{D}', // NOTE: set in main (upright) as per ISO 80000-2:2009.\n};\n\nexport const RIGHT_DELIM = {\n    '(': ')',\n    '{': '}',\n    '[': ']',\n    '|': '|',\n    '\\\\lbrace': '\\\\rbrace',\n    '\\\\{': '\\\\}',\n    '\\\\langle': '\\\\rangle',\n    '\\\\lfloor': '\\\\rfloor',\n    '\\\\lceil': '\\\\rceil',\n    '\\\\vert': '\\\\vert',\n    '\\\\lvert': '\\\\rvert',\n    '\\\\Vert': '\\\\Vert',\n    '\\\\lVert': '\\\\rVert',\n    '\\\\lbrack': '\\\\rbrack',\n    '\\\\ulcorner': '\\\\urcorner',\n    '\\\\llcorner': '\\\\lrcorner',\n    '\\\\lgroup': '\\\\rgroup',\n    '\\\\lmoustache': '\\\\rmoustache',\n};\n\n// Body-text symbols\n// See http://ctan.mirrors.hoobly.com/info/symbols/comprehensive/symbols-a4.pdf, p14\n\nexport const TEXT_SYMBOLS = {\n    '\\\\#': '\\u0023',\n    '\\\\&': '\\u0026',\n    '\\\\$': '$',\n    '\\\\%': '%',\n    '\\\\_': '_',\n    '\\\\euro': '\\u20AC',\n    '\\\\maltese': '\\u2720',\n    '\\\\{': '{',\n    '\\\\}': '}',\n    '\\\\nobreakspace': '\\u00A0',\n    '\\\\ldots': '\\u2026',\n    '\\\\textellipsis': '\\u2026',\n    '\\\\backslash': '\\\\',\n    '`': '\\u2018',\n    \"'\": '\\u2019',\n    '``': '\\u201c',\n    \"''\": '\\u201d',\n    '\\\\degree': '\\u00b0',\n    '\\\\textasciicircum': '^',\n    '\\\\textasciitilde': '~',\n    '\\\\textasteriskcentered': '*',\n    '\\\\textbackslash': '\\\\',\n    '\\\\textbraceleft': '{',\n    '\\\\textbraceright': '}',\n    '\\\\textbullet': '•',\n    '\\\\textdollar': '$',\n    '\\\\textsterling': '£',\n    '\\\\textdagger': '\\u2020',\n    '\\\\textdaggerdbl': '\\u2021',\n\n    '–': '\\u2013', // EN DASH\n    '—': '\\u2014', // EM DASH\n    '‘': '\\u2018', // LEFT SINGLE QUOTATION MARK\n    '’': '\\u2019', // RIGHT SINGLE QUOTATION MARK\n    '“': '\\u201C', // LEFT DOUBLE QUOTATION MARK\n    '”': '\\u201D', // RIGHT DOUBLE QUOTATION MARK\n    '\"': '\\u201D', // DOUBLE PRIME\n    '\\\\ss': '\\u00df', // LATIN SMALL LETTER SHARP S\n    '\\\\ae': '\\u00E6', // LATIN SMALL LETTER AE\n    '\\\\oe': '\\u0153', // LATIN SMALL LIGATURE OE\n    '\\\\AE': '\\u00c6', // LATIN CAPITAL LETTER AE\n    '\\\\OE': '\\u0152', // LATIN CAPITAL LIGATURE OE\n    '\\\\O': '\\u00d8', // LATIN CAPITAL LETTER O WITH STROKE\n    '\\\\i': '\\u0131', // LATIN SMALL LETTER DOTLESS I\n    '\\\\j': '\\u0237', // LATIN SMALL LETTER DOTLESS J\n    '\\\\aa': '\\u00e5', // LATIN SMALL LETTER A WITH RING ABOVE\n    '\\\\AA': '\\u00c5', // LATIN CAPITAL LETTER A WITH RING ABOVE\n};\n\nexport const COMMAND_MODE_CHARACTERS = /[a-zA-Z0-9!@*()-=+{}[\\]\\\\';:?/.,~<>`|'$%#&^_\" ]/;\n\n// Word boundaries for Cyrillic, Polish, French, German, Italian\n// and Spanish. We use \\p{L} (Unicode property escapes: \"Letter\")\n// but Firefox doesn't support it\n// (https://bugzilla.mozilla.org/show_bug.cgi?id=1361876). Booo...\n// See also https://stackoverflow.com/questions/26133593/using-regex-to-match-international-unicode-alphanumeric-characters-in-javascript\nexport const LETTER =\n    typeof navigator !== 'undefined' &&\n    /firefox|edge|Trident/i.test(navigator.userAgent)\n        ? /[a-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒäöüßÄÖÜẞàèéìíîòóùúÀÈÉÌÍÎÒÓÙÚáéíñóúüÁÉÍÑÓÚÜ]/\n        : new RegExp('\\\\p{Letter}', 'u');\n\nexport const LETTER_AND_DIGITS =\n    typeof navigator !== 'undefined' &&\n    /firefox|edge|Trident/i.test(navigator.userAgent)\n        ? /[0-9a-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒäöüßÄÖÜẞàèéìíîòóùúÀÈÉÌÍÎÒÓÙÚáéíñóúüÁÉÍÑÓÚÜ]/\n        : new RegExp('[0-9\\\\p{Letter}]', 'u');\n\n/**\n * @param symbol    The LaTeX command for this symbol, for\n * example `\\alpha` or `+`\n */\nexport function defineSymbol(\n    symbol: string,\n    value: string,\n    type: AtomType = 'mord',\n    variant: Variant | '' = ''\n): void {\n    MATH_SYMBOLS[symbol] = {\n        type,\n        variant,\n        value,\n    };\n    if (!REVERSE_MATH_SYMBOLS[value] && !variant) {\n        REVERSE_MATH_SYMBOLS[value] = symbol;\n    }\n    // We accept all math symbols in text mode as well\n    // which is a bit more permissive than TeX\n    TEXT_SYMBOLS[symbol] = value;\n}\n\n/**\n * Define a set of single-character symbols as 'mord' symbols.\n * @param string a string of single character symbols\n */\nexport function defineSymbols(string: string): void {\n    for (let i = 0; i < string.length; i++) {\n        const ch = string.charAt(i);\n        defineSymbol(ch, ch);\n    }\n}\n\n/**\n * Define a set of single-character symbols as a range of Unicode codepoints\n * @param from First Unicode codepoint\n * @param to Last Unicode codepoint\n */\nexport function defineSymbolRange(from: number, to: number): void {\n    for (let i = from; i <= to; i++) {\n        const ch = String.fromCodePoint(i);\n        defineSymbol(ch, ch);\n    }\n}\n\n/**\n * Given a character, return a LaTeX expression matching its Unicode codepoint.\n * If there is a matching symbol (e.g. \\alpha) it is returned.\n */\nexport function charToLatex(parseMode: ParseModePrivate, s: string): string {\n    if (parseMode === 'math') {\n        return REVERSE_MATH_SYMBOLS[s] || s;\n    }\n    if (parseMode === 'text') {\n        return (\n            Object.keys(TEXT_SYMBOLS).find((x) => TEXT_SYMBOLS[x] === s) || s\n        );\n    }\n    return s;\n}\n\n/* Some symbols in the MATHEMATICAL ALPHANUMERICAL SYMBOLS block had\n   been previously defined in other blocks. Remap them */\nconst MATH_LETTER_EXCEPTIONS = {\n    0x1d455: 0x0210e,\n    0x1d49d: 0x0212c,\n    0x1d4a0: 0x02130,\n    0x1d4a1: 0x02131,\n    0x1d4a3: 0x0210b,\n    0x1d4a4: 0x02110,\n    0x1d4a7: 0x02112,\n    0x1d4a8: 0x02133,\n    0x1d4ad: 0x0211b,\n    0x1d4ba: 0x0212f,\n    0x1d4bc: 0x0210a,\n    0x1d4c4: 0x02134,\n    0x1d506: 0x0212d,\n    0x1d50b: 0x0210c,\n    0x1d50c: 0x02111,\n    0x1d515: 0x0211c,\n    0x1d51d: 0x02128,\n    0x1d53a: 0x02102,\n    0x1d53f: 0x0210d,\n    0x1d545: 0x02115,\n    0x1d547: 0x02119,\n    0x1d548: 0x0211a,\n    0x1d549: 0x0211d,\n    0x1d551: 0x02124,\n};\n\nconst MATH_UNICODE_BLOCKS = [\n    { start: 0x1d400, len: 26, offset: 65, style: 'bold' },\n    { start: 0x1d41a, len: 26, offset: 97, style: 'bold' },\n    { start: 0x1d434, len: 26, offset: 65, style: 'italic' },\n    { start: 0x1d44e, len: 26, offset: 97, style: 'italic' },\n    { start: 0x1d468, len: 26, offset: 65, style: 'bolditalic' },\n    { start: 0x1d482, len: 26, offset: 97, style: 'bolditalic' },\n\n    { start: 0x1d49c, len: 26, offset: 65, variant: 'script' },\n    { start: 0x1d4b6, len: 26, offset: 97, variant: 'script' },\n    { start: 0x1d4d0, len: 26, offset: 65, variant: 'script', style: 'bold' },\n    { start: 0x1d4ea, len: 26, offset: 97, variant: 'script', style: 'bold' },\n\n    { start: 0x1d504, len: 26, offset: 65, variant: 'fraktur' },\n    { start: 0x1d51e, len: 26, offset: 97, variant: 'fraktur' },\n    { start: 0x1d56c, len: 26, offset: 65, variant: 'fraktur', style: 'bold' },\n    { start: 0x1d586, len: 26, offset: 97, variant: 'fraktur', style: 'bold' },\n\n    { start: 0x1d538, len: 26, offset: 65, variant: 'double-struck' },\n    { start: 0x1d552, len: 26, offset: 97, variant: 'double-struck' },\n\n    { start: 0x1d5a0, len: 26, offset: 65, variant: 'sans-serif' },\n    { start: 0x1d5ba, len: 26, offset: 97, variant: 'sans-serif' },\n    {\n        start: 0x1d5d4,\n        len: 26,\n        offset: 65,\n        variant: 'sans-serif',\n        style: 'bold',\n    },\n    {\n        start: 0x1d5ee,\n        len: 26,\n        offset: 97,\n        variant: 'sans-serif',\n        style: 'bold',\n    },\n    {\n        start: 0x1d608,\n        len: 26,\n        offset: 65,\n        variant: 'sans-serif',\n        style: 'italic',\n    },\n    {\n        start: 0x1d622,\n        len: 26,\n        offset: 97,\n        variant: 'sans-serif',\n        style: 'italic',\n    },\n    {\n        start: 0x1d63c,\n        len: 26,\n        offset: 65,\n        variant: 'sans-serif',\n        style: 'bolditalic',\n    },\n    {\n        start: 0x1d656,\n        len: 26,\n        offset: 97,\n        variant: 'sans-serif',\n        style: 'bolditalic',\n    },\n\n    { start: 0x1d670, len: 26, offset: 65, variant: 'monospace' },\n    { start: 0x1d68a, len: 26, offset: 97, variant: 'monospace' },\n\n    { start: 0x1d6a8, len: 25, offset: 0x391, style: 'bold' },\n    { start: 0x1d6c2, len: 25, offset: 0x3b1, style: 'bold' },\n    { start: 0x1d6e2, len: 25, offset: 0x391, style: 'italic' },\n    { start: 0x1d6fc, len: 25, offset: 0x3b1, style: 'italic' },\n    { start: 0x1d71c, len: 25, offset: 0x391, style: 'bolditalic' },\n    { start: 0x1d736, len: 25, offset: 0x3b1, style: 'bolditalic' },\n    {\n        start: 0x1d756,\n        len: 25,\n        offset: 0x391,\n        variant: 'sans-serif',\n        style: 'bold',\n    },\n    {\n        start: 0x1d770,\n        len: 25,\n        offset: 0x3b1,\n        variant: 'sans-serif',\n        style: 'bold',\n    },\n    {\n        start: 0x1d790,\n        len: 25,\n        offset: 0x391,\n        variant: 'sans-serif',\n        style: 'bolditalic',\n    },\n    {\n        start: 0x1d7aa,\n        len: 25,\n        offset: 0x3b1,\n        variant: 'sans-serif',\n        style: 'bolditalic',\n    },\n\n    { start: 0x1d7ce, len: 10, offset: 48, variant: '', style: 'bold' },\n    { start: 0x1d7d8, len: 10, offset: 48, variant: 'double-struck' },\n    { start: 0x1d7e3, len: 10, offset: 48, variant: 'sans-serif' },\n    {\n        start: 0x1d7ec,\n        len: 10,\n        offset: 48,\n        variant: 'sans-serif',\n        style: 'bold',\n    },\n    { start: 0x1d7f6, len: 10, offset: 48, variant: 'monospace' },\n];\n\nfunction unicodeToMathVariant(\n    codepoint: number\n): { char: string; variant?: string; style?: string } {\n    if (\n        (codepoint < 0x1d400 || codepoint > 0x1d7ff) &&\n        (codepoint < 0x2100 || codepoint > 0x214f)\n    ) {\n        return { char: String.fromCodePoint(codepoint) };\n    }\n\n    // Handle the 'gap' letters by converting them back into their logical range\n    for (const c in MATH_LETTER_EXCEPTIONS) {\n        if (Object.prototype.hasOwnProperty.call(MATH_LETTER_EXCEPTIONS, c)) {\n            if (MATH_LETTER_EXCEPTIONS[c] === codepoint) {\n                codepoint = c.codePointAt(0);\n                break;\n            }\n        }\n    }\n\n    for (let i = 0; i < MATH_UNICODE_BLOCKS.length; i++) {\n        if (\n            codepoint >= MATH_UNICODE_BLOCKS[i].start &&\n            codepoint <\n                MATH_UNICODE_BLOCKS[i].start + MATH_UNICODE_BLOCKS[i].len\n        ) {\n            return {\n                char: String.fromCodePoint(\n                    codepoint -\n                        MATH_UNICODE_BLOCKS[i].start +\n                        MATH_UNICODE_BLOCKS[i].offset\n                ),\n                variant: MATH_UNICODE_BLOCKS[i].variant,\n                style: MATH_UNICODE_BLOCKS[i].style,\n            };\n        }\n    }\n\n    return { char: String.fromCodePoint(codepoint) };\n}\n\n/**\n * Given a character and variant ('double-struck', 'fraktur', etc...)\n * return the corresponding unicode character (a string)\n */\nexport function mathVariantToUnicode(\n    char: string,\n    variant: string,\n    style: string\n): string {\n    if (!/[A-Za-z0-9]/.test(char)) return char;\n    if (!variant && !style) return char;\n\n    const codepoint = char.codePointAt(0);\n\n    for (let i = 0; i < MATH_UNICODE_BLOCKS.length; i++) {\n        if (!variant || MATH_UNICODE_BLOCKS[i].variant === variant) {\n            if (!style || MATH_UNICODE_BLOCKS[i].style === style) {\n                if (\n                    codepoint >= MATH_UNICODE_BLOCKS[i].offset &&\n                    codepoint <\n                        MATH_UNICODE_BLOCKS[i].offset +\n                            MATH_UNICODE_BLOCKS[i].len\n                ) {\n                    const result =\n                        MATH_UNICODE_BLOCKS[i].start +\n                        codepoint -\n                        MATH_UNICODE_BLOCKS[i].offset;\n                    return String.fromCodePoint(\n                        MATH_LETTER_EXCEPTIONS[result] || result\n                    );\n                }\n            }\n        }\n    }\n\n    return char;\n}\n\nexport function unicodeCharToLatex(\n    parseMode: ParseModePrivate,\n    char: string\n): string {\n    if (parseMode === 'text') {\n        return charToLatex(parseMode, char) || char;\n    }\n\n    let result: string;\n    // Codepoint shortcuts have priority over variants\n    // That is, \"\\N\" vs \"\\mathbb{N}\"\n    // if (CODEPOINT_SHORTCUTS[cp]) return CODEPOINT_SHORTCUTS[cp];\n    result = charToLatex(parseMode, char);\n    if (result) return result;\n\n    const cp = char.codePointAt(0);\n    const v = unicodeToMathVariant(cp);\n    if (!v.style && !v.variant) return '';\n\n    result = v.char;\n    if (v.variant) {\n        result = '\\\\' + v.variant + '{' + result + '}';\n    }\n    if (v.style === 'bold') {\n        result = '\\\\mathbf{' + result + '}';\n    } else if (v.style === 'italic') {\n        result = '\\\\mathit{' + result + '}';\n    } else if (v.style === 'bolditalic') {\n        result = '\\\\mathbfit{' + result + '}';\n    }\n    return '\\\\mathord{' + result + '}';\n}\n\nexport function unicodeStringToLatex(\n    parseMode: ParseModePrivate,\n    s: string\n): string {\n    let result = '';\n    let needSpace = false;\n    for (const c of s) {\n        if (needSpace) {\n            if (parseMode === 'text') {\n                result += '{}';\n            } else {\n                result += ' ';\n            }\n        }\n        needSpace = false;\n        const latex = unicodeCharToLatex(parseMode, c);\n        if (latex) {\n            result += latex;\n            needSpace = /\\\\[a-zA-Z0-9]+\\*?$/.test(latex);\n        } else {\n            result += c;\n        }\n    }\n    return result;\n}\n\n/**\n *\n * @return True if command is allowed in the mode\n * (note that command can also be a single character, e.g. \"a\")\n */\nexport function commandAllowed(\n    mode: ParseModePrivate,\n    command: string\n): boolean {\n    if (\n        FUNCTIONS[command] &&\n        (!FUNCTIONS[command].mode || FUNCTIONS[command].mode.includes(mode))\n    ) {\n        return true;\n    }\n    if ({ text: TEXT_SYMBOLS, math: MATH_SYMBOLS }[mode][command]) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function getValue(mode: ParseModePrivate, symbol: string): string {\n    if (mode === 'math') {\n        return MATH_SYMBOLS[symbol] && MATH_SYMBOLS[symbol].value\n            ? MATH_SYMBOLS[symbol].value\n            : symbol;\n    }\n    return TEXT_SYMBOLS[symbol] ? TEXT_SYMBOLS[symbol] : symbol;\n}\n\nexport function emit(\n    symbol: string,\n    parent: Window,\n    atom: Atom,\n    emitFn: (parent: Atom, atoms: Atom[]) => string\n): string {\n    console.assert(!!atom);\n    console.assert(!!symbol, 'Missing command for ', atom.body);\n\n    if (FUNCTIONS[symbol] && FUNCTIONS[symbol].emit) {\n        return FUNCTIONS[symbol].emit(symbol, parent, atom, emitFn);\n    }\n\n    if (MATH_SYMBOLS[symbol] || TEXT_SYMBOLS[symbol]) {\n        return symbol;\n    }\n\n    if (\n        FUNCTIONS[symbol] &&\n        FUNCTIONS[symbol].params &&\n        FUNCTIONS[symbol].params.length === 1 &&\n        atom.body\n    ) {\n        return symbol + '{' + emitFn(atom, atom.body as Atom[]) + '}';\n    }\n    // No custom emit function provided, return the symbol (could be a character)\n    return symbol;\n}\n\nexport function getEnvironmentDefinition(name: string): EnvironmentDefinition {\n    return ENVIRONMENTS[name] ?? null;\n}\n\n/**\n * @param symbol    A command (e.g. '\\alpha') or a character (e.g. 'a')\n * @param parseMode One of 'math' or 'text'\n * @param macros A macros dictionary\n * @return {object} An info structure about the symbol, or null\n */\nexport function getInfo(\n    symbol: string,\n    parseMode: ParseModePrivate,\n    macros?: MacroDictionary\n): FunctionDefinition & SymbolDefinition {\n    if (!symbol || symbol.length === 0) return null;\n\n    let info = null;\n\n    if (symbol.charAt(0) === '\\\\') {\n        // This could be a function or a symbol\n        info = FUNCTIONS[symbol];\n        if (info) {\n            // We've got a match\n            return info;\n        }\n\n        // It wasn't a function, maybe it's a symbol?\n        if (parseMode === 'math') {\n            info = MATH_SYMBOLS[symbol];\n        } else if (TEXT_SYMBOLS[symbol]) {\n            info = { value: TEXT_SYMBOLS[symbol] };\n        }\n\n        if (!info) {\n            // Maybe it's a macro\n            const command = symbol.slice(1);\n            if (macros?.[command]) {\n                let def = macros[command];\n                if (typeof def === 'object') {\n                    def = def.def;\n                }\n                let argCount = 0;\n                // Let's see if there are arguments in the definition.\n                if (/(^|[^\\\\])#1/.test(def)) argCount = 1;\n                if (/(^|[^\\\\])#2/.test(def)) argCount = 2;\n                if (/(^|[^\\\\])#3/.test(def)) argCount = 3;\n                if (/(^|[^\\\\])#4/.test(def)) argCount = 4;\n                if (/(^|[^\\\\])#5/.test(def)) argCount = 5;\n                if (/(^|[^\\\\])#6/.test(def)) argCount = 6;\n                if (/(^|[^\\\\])#7/.test(def)) argCount = 7;\n                if (/(^|[^\\\\])#8/.test(def)) argCount = 8;\n                if (/(^|[^\\\\])#9/.test(def)) argCount = 9;\n                info = {\n                    type: 'group',\n                    mode: 'math',\n                    params: [],\n                    infix: false,\n                };\n                while (argCount >= 1) {\n                    info.params.push({\n                        isOptional: false,\n                        type: 'math',\n                    });\n                    argCount -= 1;\n                }\n            }\n        }\n    } else {\n        if (parseMode === 'math') {\n            info = MATH_SYMBOLS[symbol];\n        } else if (TEXT_SYMBOLS[symbol]) {\n            info = { value: TEXT_SYMBOLS[symbol] };\n        }\n    }\n\n    // Special case `f`, `g` and `h` are recognized as functions.\n    if (\n        info &&\n        info.type === 'mord' &&\n        (info.value === 'f' || info.value === 'g' || info.value === 'h')\n    ) {\n        info.isFunction = true;\n    }\n\n    return info;\n}\n\n/**\n * Return an array of suggestion for completing string 's'.\n * For example, for 'si', it could return ['sin', 'sinh', 'sim', 'simeq', 'sigma']\n * Infix operators are excluded, since they are deprecated commands.\n */\nexport function suggest(s: string): { match: string; frequency: number }[] {\n    if (s.length <= 1) return [];\n    const result = [];\n\n    // Iterate over items in the dictionary\n    for (const p in FUNCTIONS) {\n        if (Object.prototype.hasOwnProperty.call(FUNCTIONS, p)) {\n            if (p.startsWith(s) && !FUNCTIONS[p].infix) {\n                result.push({ match: p, frequency: FUNCTIONS[p].frequency });\n            }\n        }\n    }\n\n    for (const p in MATH_SYMBOLS) {\n        if (Object.prototype.hasOwnProperty.call(MATH_SYMBOLS, p)) {\n            if (p.startsWith(s)) {\n                result.push({ match: p, frequency: MATH_SYMBOLS[p].frequency });\n            }\n        }\n    }\n\n    result.sort((a, b) => {\n        if (a.frequency === b.frequency) {\n            return a.match.length - b.match.length;\n        }\n        return (b.frequency || 0) - (a.frequency || 0);\n    });\n\n    return result;\n}\n\n/**\n * An argument template has the following syntax:\n *\n * <placeholder>:<type>\n *\n * where\n * - <placeholder> is a string whose value is displayed when the argument\n *   is missing\n * - <type> is one of 'string', 'color', 'dimen', 'auto', 'text', 'math'\n *\n */\nfunction parseParamTemplateArgument(argTemplate: string): ParseModePrivate {\n    let type: ParseModePrivate = 'auto';\n\n    // Parse the type (:type)\n    const r = argTemplate.match(/:([^=]+)/);\n    if (r) type = r[1].trim() as ParseModePrivate;\n\n    return type;\n}\n\nfunction parseParamTemplate(\n    paramTemplate: string\n): FunctionArgumentDefiniton[] {\n    if (!paramTemplate) return [];\n\n    let result = [];\n    let params = paramTemplate.split(']');\n    if (params[0].charAt(0) === '[') {\n        // We found at least one optional parameter.\n        result.push({\n            isOptional: true,\n            type: parseParamTemplateArgument(params[0].slice(1)),\n        });\n        // Parse the rest\n        for (let i = 1; i <= params.length; i++) {\n            result = result.concat(parseParamTemplate(params[i]));\n        }\n    } else {\n        params = paramTemplate.split('}');\n        if (params[0].charAt(0) === '{') {\n            // We found a required parameter\n            result.push({\n                isOptional: false,\n                type: parseParamTemplateArgument(params[0].slice(1)),\n            });\n            // Parse the rest\n            for (let i = 1; i <= params.length; i++) {\n                result = result.concat(parseParamTemplate(params[i]));\n            }\n        }\n    }\n\n    return result;\n}\n\n/**\n * If possible, i.e. if they are all simple atoms, return a string made up of\n * their body\n */\nexport function parseArgAsString(atoms: Atom[]): string {\n    let result = '';\n    let success = true;\n    atoms.forEach((atom) => {\n        if (typeof atom.body === 'string') {\n            result += atom.body;\n        } else {\n            success = false;\n        }\n    });\n    return success ? result : '';\n}\n\n/**\n * Define one or more environments to be used with\n *         \\begin{<env-name>}...\\end{<env-name>}.\n *\n * @param params The number and type of required and optional parameters.\n */\nexport function defineEnvironment(\n    names: string | string[],\n    params: string,\n    parser: ParseEnvironmentFunction,\n    isTabular = false\n): void {\n    if (typeof names === 'string') {\n        names = [names];\n    }\n    const parsedParams = parseParamTemplate(params);\n\n    // Set default values of functions\n    const data: EnvironmentDefinition = {\n        tabular: isTabular,\n        // Params: the parameters for this function, an array of\n        // {optional, type}\n        params: parsedParams,\n\n        // Callback to parse the arguments\n        parser: parser,\n    };\n    for (const name of names) {\n        ENVIRONMENTS[name] = data;\n    }\n}\n\n/**\n * Like defineEnvironment, but for a tabular environment, i.e.\n * one whose content is in tabular mode, where '&' indicata a new column\n * and '\\\\' indicate a new row.\n */\nexport function defineTabularEnvironment(\n    names: string | string[],\n    params: string,\n    parser: ParseEnvironmentFunction\n): void {\n    defineEnvironment(names, params, parser, true);\n}\n\n/**\n * Define one of more functions.\n *\n * @param names\n * @param params The number and type of required and optional parameters.\n * For example: '{}' defines a single mandatory parameter\n * '[string]{auto}' defines two params, one optional, one required\n */\nexport function defineFunction(\n    names: string | string[],\n    params: string,\n    options: { mode?: ParseModePrivate; infix?: boolean },\n    parseFunction?: ParseFunction,\n    emitFunction?: EmitFunction\n): void {\n    if (typeof names === 'string') {\n        names = [names];\n    }\n\n    if (!options) options = {};\n\n    // Set default values of functions\n    const data = {\n        // The parameters for this function, an array of\n        // {optional, type}\n        params: parseParamTemplate(params),\n\n        mode: options.mode,\n        infix: !!options.infix,\n        parse: parseFunction,\n        emit: emitFunction,\n    };\n    names.forEach((name) => {\n        FUNCTIONS['\\\\' + name] = data;\n    });\n}\n","import { defineFunction, parseArgAsString } from './definitions-utils';\nimport type { Atom } from './atom';\n\nconst ACCENTS = {\n    acute: '\\u02ca',\n    grave: '\\u02cb',\n    dot: '\\u02d9',\n    ddot: '\\u00a8',\n    mathring: '\\u02da',\n    tilde: '\\u007e',\n    bar: '\\u02c9',\n    breve: '\\u02d8',\n    check: '\\u02c7',\n    hat: '\\u005e',\n    vec: '\\u20d7',\n};\ndefineFunction(Object.keys(ACCENTS), '{body:auto}', null, function (\n    name,\n    args\n) {\n    return {\n        type: 'accent',\n        accent: ACCENTS[name.slice(1)],\n        limits: 'accent', // This will suppress the regular\n        // supsub attachment and will delegate\n        // it to the decomposeAccent\n        // (any non-null value would do)\n        skipBoundary: true,\n        body: args[0] as Atom[],\n    };\n});\n\ndefineFunction(\n    ['widehat', 'widecheck', 'widetilde'],\n    '{body:auto}',\n    null,\n    (name, args) => {\n        const baseString = parseArgAsString(args[0] as Atom[]);\n        const accent =\n            name.slice(1) +\n            (baseString.length > 5\n                ? '4'\n                : ['1', '1', '2', '2', '3', '3'][baseString.length]);\n        return {\n            type: 'accent',\n            svgAccent: accent,\n            limits: 'accent', // This will suppress the regular\n            // supsub attachment and will delegate\n            // it to the decomposeAccent\n            // (any non-null value would do)\n            skipBoundary: true,\n            body: args[0] as Atom[],\n        };\n    }\n);\n\ndefineFunction(\n    'utilde',\n    '{body:auto}',\n    null,\n    (_name, args) => {\n        const baseString = parseArgAsString(args[0] as Atom[]);\n        const accent =\n            'widetilde' +\n            (baseString.length > 5\n                ? '4'\n                : ['1', '1', '2', '2', '3', '3'][baseString.length]);\n\n        return {\n            type: 'overunder',\n\n            body: args[0] as Atom[],\n            svgBelow: accent,\n\n            skipBoundary: true,\n        };\n    },\n    (_name, _parent, atom, emit) =>\n        `\\\\utilde{${emit(atom, atom.body as Atom[])}}`\n);\n\n/*\n * From plain.tex\n *\n */\n\ndefineFunction('^', '{:string}', {}, (_name, args) => {\n    return {\n        type: 'mord',\n        limits: 'nolimits',\n        isSymbol: true,\n        isFunction: false,\n        body: args[0]\n            ? {\n                  a: 'â',\n                  e: 'ê',\n                  i: 'î',\n                  o: 'ô',\n                  u: 'û',\n                  A: 'Â',\n                  E: 'Ê',\n                  I: 'Î',\n                  O: 'Ô',\n                  U: 'Û',\n              }[args[0] as string] || '^'\n            : '^',\n    };\n});\n\ndefineFunction('`', '{:string}', {}, (_name, args) => {\n    return {\n        type: 'mord',\n        limits: 'nolimits',\n        isSymbol: true,\n        isFunction: false,\n        body: args[0]\n            ? {\n                  a: 'à',\n                  e: 'è',\n                  i: 'ì',\n                  o: 'ò',\n                  u: 'ù',\n                  A: 'À',\n                  E: 'È',\n                  I: 'Ì',\n                  O: 'Ò',\n                  U: 'Ù',\n              }[args[0] as string] || '`'\n            : '`',\n    };\n});\n\ndefineFunction(\"'\", '{:string}', {}, function (name, args) {\n    return {\n        type: 'mord',\n        limits: 'nolimits',\n        isSymbol: true,\n        isFunction: false,\n        body: args[0]\n            ? {\n                  a: 'á',\n                  e: 'é',\n                  i: 'í',\n                  o: 'ó',\n                  u: 'ú',\n                  A: 'Á',\n                  E: 'É',\n                  I: 'Í',\n                  O: 'Ó',\n                  U: 'Ú',\n              }[args[0] as string] || '\\u005e'\n            : '\\u005e',\n    };\n});\n\ndefineFunction('~', '{:string}', {}, (_name, args) => {\n    return {\n        type: 'mord',\n        limits: 'nolimits',\n        isSymbol: true,\n        isFunction: false,\n        body: args[0]\n            ? { n: 'ñ', N: 'Ñ', a: 'ã', o: 'õ', A: 'Ã', O: 'Õ' }[\n                  args[0] as string\n              ] || '\\u00B4'\n            : '\\u00B4',\n    };\n});\n\ndefineFunction('c', '{:string}', {}, (_name, args) => {\n    return {\n        type: 'mord',\n        limits: 'nolimits',\n        isSymbol: true,\n        isFunction: false,\n        body: args[0] ? { c: 'ç', C: 'Ç' }[args[0] as string] || '' : '',\n    };\n});\n","import { defineFunction, ParseFunctionResult } from './definitions-utils';\nimport { convertDimenToPx } from './font-metrics';\nimport type { Atom } from './atom';\n\n// \\enclose, a MathJax extension mapping to the MathML `menclose` tag.\n// The first argument is a comma delimited list of notations, as defined\n// here: https://developer.mozilla.org/en-US/docs/Web/MathML/Element/menclose\n// The second, optional, specifies the style to use for the notations.\ndefineFunction(\n    'enclose',\n    '{notation:string}[style:string]{body:auto}',\n    null,\n    (_name: string, args: (string | Atom[])[]): ParseFunctionResult => {\n        const result: ParseFunctionResult = {\n            type: 'enclose',\n            strokeColor: 'currentColor',\n            strokeWidth: 1,\n            strokeStyle: 'solid',\n            backgroundcolor: 'transparent',\n            padding: 'auto',\n            shadow: 'auto',\n            captureSelection: true, // Do not let children be selected\n            body: args[2],\n        };\n\n        // Extract info from style string\n        if (args[1]) {\n            // Split the string by comma delimited sub-strings, ignoring commas\n            // that may be inside (). For example\"x, rgb(a, b, c)\" would return\n            // ['x', 'rgb(a, b, c)']\n            const styles = (args[1] as string).split(\n                /,(?![^(]*\\)(?:(?:[^(]*\\)){2})*[^\"]*$)/\n            );\n            for (const s of styles) {\n                const shorthand = s.match(/\\s*(\\S+)\\s+(\\S+)\\s+(.*)/);\n                if (shorthand) {\n                    result.strokeWidth = convertDimenToPx(shorthand[1], 'px');\n                    if (!isFinite(result.strokeWidth)) {\n                        result.strokeWidth = 1;\n                    }\n                    result.strokeStyle = shorthand[2];\n                    result.strokeColor = shorthand[3];\n                } else {\n                    const attribute = s.match(/\\s*([a-z]*)\\s*=\\s*\"(.*)\"/);\n                    if (attribute) {\n                        if (attribute[1] === 'mathbackground') {\n                            result.backgroundcolor = attribute[2];\n                        } else if (attribute[1] === 'mathcolor') {\n                            result.strokeColor = attribute[2];\n                        } else if (attribute[1] === 'padding') {\n                            result.padding = convertDimenToPx(\n                                attribute[2],\n                                'px'\n                            );\n                        } else if (attribute[1] === 'shadow') {\n                            result.shadow = attribute[2];\n                        }\n                    }\n                }\n            }\n            if (result.strokeStyle === 'dashed') {\n                result.svgStrokeStyle = '5,5';\n            } else if (result.strokeStyle === 'dotted') {\n                result.svgStrokeStyle = '1,5';\n            }\n        }\n        result.borderStyle =\n            result.strokeWidth +\n            'px ' +\n            result.strokeStyle +\n            ' ' +\n            result.strokeColor;\n\n        // Normalize the list of notations.\n        result.notation = {};\n        (args[0] as string)\n            .split(/[, ]/)\n            .filter((v) => v.length > 0)\n            .forEach((x) => {\n                result.notation[x.toLowerCase()] = true;\n            });\n        if (result.notation['updiagonalarrow']) {\n            result.notation['updiagonalstrike'] = false;\n        }\n        if (result.notation['box']) {\n            result.notation['left'] = false;\n            result.notation['right'] = false;\n            result.notation['bottom'] = false;\n            result.notation['top'] = false;\n        }\n        return result;\n    }\n);\n\ndefineFunction('cancel', '{body:auto}', null, function (\n    _name,\n    args\n): ParseFunctionResult {\n    return {\n        type: 'enclose',\n        strokeColor: 'currentColor',\n        strokeWidth: 1,\n        strokeStyle: 'solid',\n        borderStyle: '1px solid currentColor',\n        backgroundcolor: 'transparent',\n        padding: 'auto',\n        shadow: 'auto',\n        notation: { updiagonalstrike: true },\n        body: args[0] as Atom[],\n    };\n});\n\ndefineFunction('bcancel', '{body:auto}', null, function (\n    name,\n    args\n): ParseFunctionResult {\n    return {\n        type: 'enclose',\n        strokeColor: 'currentColor',\n        strokeWidth: 1,\n        strokeStyle: 'solid',\n        borderStyle: '1px solid currentColor',\n        backgroundcolor: 'transparent',\n        padding: 'auto',\n        shadow: 'auto',\n        notation: { downdiagonalstrike: true },\n        body: args[0] as Atom[],\n    };\n});\n\ndefineFunction('xcancel', '{body:auto}', null, function (\n    name,\n    args\n): ParseFunctionResult {\n    return {\n        type: 'enclose',\n        strokeColor: 'currentColor',\n        strokeWidth: 1,\n        strokeStyle: 'solid',\n        borderStyle: '1px solid currentColor',\n        backgroundcolor: 'transparent',\n        padding: 'auto',\n        shadow: 'auto',\n        notation: { updiagonalstrike: true, downdiagonalstrike: true },\n        body: args[0] as Atom[],\n    };\n});\n","import {\n    defineEnvironment,\n    ParseEnvironmentResult,\n    defineTabularEnvironment,\n} from './definitions-utils';\nimport { Colspec } from './core';\n\n/*\n\nSee http://texdoc.net/texmf-dist/doc/latex/amsmath/amsldoc.pdf\n\n<columns> ::= <column>*<line>\n<column> ::= <line>('l'|'c'|'r')\n<line> ::= '|' | '||' | ''\n\n'math',\n                frequency 0\n'displaymath',\n                frequency 8\n\n'equation'      centered, numbered\n                frequency 8\n\n'subequations'   with an 'equation' environment, appends a letter to eq no\n                frequency 1\n\n'array',        {columns:text}\n                cells are textstyle math\n                no fence\n\n'eqnarray'      DEPRECATED see http://www.tug.org/pracjourn/2006-4/madsen/madsen.pdf\n                {rcl}\n                first and last cell in each row is displaystyle math\n                each cell has a margin of \\arraycolsep\n                Each line has a eqno\n                frequency 7\n\n\n'theorem'       text mode. Prepends in bold 'Theorem <counter>', then body in italics.\n\n'multline'      single column\n                first row left aligned, last right aligned, others centered\n                last line has an eqn. counter. multline* will omit the counter\n                no output if inside an equation\n                \n\n'gather'        at most two columns\n                first column centered, second column right aligned\n                frequency 1\n\n'gathered'      must be in equation environment\n                single column,\n                centered\n                frequency: COMMON\n                optional argument: [b], [t] to vertical align\n\n'align'        multiple columns,\n                alternating rl\n                there is some 'space' (additional column?) between each pair\n                each line is numbered (except when inside an equation environment)\n                there is an implicit {} at the beginning of left columns\n\n'aligned'      must be in equation environment\n                frequency: COMMON\n                @{}r@{}l@{\\quad}@{}r@{}l@{}\n\n'split'         must be in an equation environment,\n                two columns, additional columns are interpreted as line breaks\n                first column is right aligned, second column is left aligned\n                entire construct is numbered (as opposed to 'align' where each line is numbered)\n                frequency: 0\n\n\n'alignedat'\nFrom AMSMath:\n---The alignedat environment was changed to take two arguments rather\nthan one: a mandatory argument (as formerly) specifying the number of\nalign structures, and a new optional one specifying the placement of the\nenvironment (parallel to the optional argument of aligned). However,\naligned is simpler to use, allowing any number of aligned structures\nautomatically, and therefore the use of alignedat is deprecated.\n\n\n 'alignat'      {pairs:number}\n                {rl} alternating as many times as indicated by <pairs> arg\n                no space between column pairs (unlike align)\n                there is an implicit {} at the beginning of left columns\n                frequency: 0\n\n 'flalign'      multiple columns\n                alternate rl\n                third column further away than align...?\n                frequency: 0\n\n\n'matrix'        at most 10 columns\n                cells centered\n                no fence\n                no colsep at beginning or end\n                (mathtools package add an optional arg for the cell alignment)\n                frequency: COMMON\n\n'pmatrix'       fence: ()\n                frequency: COMMON\n\n'bmatrix'       fence: []\n                frequency: COMMON\n\n'Bmatrix'       fence: {}\n                frequency: 237\n\n'vmatrix'       fence: \\vert\n                frequency: 368\n\n'Vmatrix'       fence: \\Vert\n                frequency: 41\n\n'smallmatrix'   displaystyle: scriptstyle (?)\n                frequency: 279\n\n'cases'\n                frequency: COMMON\n                l@{2}l\n\n'center'        text mode only?\n                frequency: ?\n*/\n// See https://en.wikibooks.org/wiki/LaTeX/Mathematics\n// and http://www.ele.uri.edu/faculty/vetter/Other-stuff/latex/Mathmode.pdf\n\n/*\nThe star at the end of the name of a displayed math environment causes that\nthe formula lines won't be numbered. Otherwise they would automatically get a number.\n\n\\notag will also turn off the numbering.\n\\shoveright and \\shoveleft will force alignment of a line\n\nThe only difference between align and equation is the spacing of the formulas.\nYou should attempt to use equation when possible, and align when you have multi-line formulas.\nEquation will have space before/after < 1em if line before/after is short enough.\n\nAlso: equation throws an error when you have an & inside the environment,\nso look out for that when converting between the two.\n\n\n\nWhereas align produces a structure whose width is the full line width, aligned\ngives a width that is the actual width of the contents, thus it can be used as\na component in a containing expression, e.g. for putting the entire alignment\nin a parenthesis\n*/\ndefineEnvironment('math', '', () => {\n    return { mathstyle: 'textstyle' };\n});\n\ndefineEnvironment('displaymath', '', function () {\n    return { mathstyle: 'displaystyle' };\n});\n\n// defineEnvironment('text', '', {\n//     frequency: 0,\n//     }, function(name, args) {\n//     return {\n//         mathstyle: 'text',         // @todo: not quite right, not a style, a parsemode...\n//     };\n// });\n\ndefineTabularEnvironment('array', '{columns:colspec}', (_name, args) => {\n    return {\n        colFormat: args[0] as Colspec[],\n        mathstyle: 'textstyle',\n    };\n});\n\ndefineTabularEnvironment(['equation', 'equation', 'subequations'], '', () => {\n    return {\n        colFormat: [{ align: 'c' }],\n    };\n});\n\n// Note spelling: MULTLINE, not multiline.\ndefineTabularEnvironment('multline', '', function () {\n    return {\n        colFormat: [{ align: 'm' }],\n    };\n});\n\n// An AMS-Math environment\n// See amsmath.dtx:3565\n// Note that some versions of AMS-Math have a gap on the left.\n// More recent version suppresses that gap, but have an option to turn it back on\n// for backward compatibility.\n// Note that technically, 'eqnarray' behaves (slightly) differently. However,\n// is is generally recommended to avoid using eqnarray and use align isntead.\n// https://texblog.net/latex-archive/maths/eqnarray-align-environment/\ndefineTabularEnvironment(\n    ['align', 'align*', 'aligned', 'eqnarray'],\n    '',\n    (_name, _args, array): ParseEnvironmentResult => {\n        let colCount = 0;\n        for (const row of array) {\n            colCount = Math.max(colCount, row.length);\n        }\n        const colFormat: Colspec[] = [\n            { gap: 0 },\n            { align: 'r' },\n            { gap: 0 },\n            { align: 'l' },\n        ];\n        let i = 2;\n        while (i < colCount) {\n            colFormat.push({ gap: 1 });\n            colFormat.push({ align: 'r' });\n            colFormat.push({ gap: 0 });\n            colFormat.push({ align: 'l' });\n            i += 2;\n        }\n        colFormat.push({ gap: 0 });\n\n        return {\n            arraycolsep: 0,\n            colFormat: colFormat,\n            jot: 0.3,\n        };\n    }\n);\n\n// defineEnvironment('alignat', '', function(name, args) {\n//     return {\n\n//     };\n// });\n\n// defineEnvironment('flalign', '', function(name, args) {\n//     return {\n\n//     };\n// });\n\ndefineTabularEnvironment(\n    'split',\n    '',\n    (): ParseEnvironmentResult => {\n        return { colFormat: [{ align: 'r' }, { align: 'l' }] };\n    }\n);\n\ndefineTabularEnvironment(\n    ['gather', 'gathered'],\n    '',\n    (): ParseEnvironmentResult => {\n        // An AMS-Math environment\n        // %    The \\env{gathered} environment is for several lines that are\n        // %    centered independently.\n        // From amstex.sty\n        // \\newenvironment{gathered}[1][c]{%\n        //   \\relax\\ifmmode\\else\\nonmatherr@{\\begin{gathered}}\\fi\n        //   \\null\\,%\n        //   \\if #1t\\vtop \\else \\if#1b\\vbox \\else \\vcenter \\fi\\fi\n        //   \\bgroup\\Let@\\restore@math@cr\n        //   \\ifinany@\\else\\openup\\jot\\fi\\ialign\n        //   \\bgroup\\hfil\\strut@$\\m@th\\displaystyle##$\\hfil\\crcr\n\n        return {\n            colFormat: [{ gap: 0.25 }, { align: 'c' }, { gap: 0 }],\n            jot: 0.3,\n        };\n    }\n);\n\n// defineEnvironment('cardinality', '',  function() {\n//     const result = {};\n\n//     result.mathstyle = 'textstyle';\n//     result.lFence = '|';\n//     result.rFence = '|';\n\n//     return result;\n// });\n\ndefineTabularEnvironment(\n    [\n        'matrix',\n        'pmatrix',\n        'bmatrix',\n        'Bmatrix',\n        'vmatrix',\n        'Vmatrix',\n        'smallmatrix',\n        'matrix*',\n        'pmatrix*',\n        'bmatrix*',\n        'Bmatrix*',\n        'vmatrix*',\n        'Vmatrix*',\n        'smallmatrix*',\n    ],\n    '[columns:colspec]',\n    (name, args): ParseEnvironmentResult => {\n        // From amstex.sty:\n        // \\def\\matrix{\\hskip -\\arraycolsep\\array{*\\c@MaxMatrixCols c}}\n        // \\def\\endmatrix{\\endarray \\hskip -\\arraycolsep}\n        const result: ParseEnvironmentResult = {};\n\n        result.mathstyle = 'textstyle';\n\n        switch (name) {\n            case 'pmatrix':\n            case 'pmatrix*':\n                result.lFence = '(';\n                result.rFence = ')';\n                break;\n\n            case 'bmatrix':\n            case 'bmatrix*':\n                result.lFence = '[';\n                result.rFence = ']';\n                break;\n\n            case 'Bmatrix':\n            case 'Bmatrix*':\n                result.lFence = '\\\\lbrace';\n                result.rFence = '\\\\rbrace';\n                break;\n\n            case 'vmatrix':\n            case 'vmatrix*':\n                result.lFence = '\\\\vert';\n                result.rFence = '\\\\vert';\n                break;\n\n            case 'Vmatrix':\n            case 'Vmatrix*':\n                result.lFence = '\\\\Vert';\n                result.rFence = '\\\\Vert';\n                break;\n\n            case 'smallmatrix':\n            case 'smallmatrix*':\n                result.mathstyle = 'scriptstyle';\n                break;\n\n            case 'matrix':\n            case 'matrix*':\n                // Specifying a fence, even a null fence,\n                // will prevent the insertion of an initial and final gap\n                result.lFence = '.';\n                result.rFence = '.';\n                break;\n            default:\n        }\n\n        result.colFormat = (args[0] as Colspec[]) ?? [\n            { align: 'c' },\n            { align: 'c' },\n            { align: 'c' },\n            { align: 'c' },\n            { align: 'c' },\n            { align: 'c' },\n            { align: 'c' },\n            { align: 'c' },\n            { align: 'c' },\n            { align: 'c' },\n        ];\n\n        return result;\n    }\n);\n\ndefineTabularEnvironment('cases', '', () => {\n    // From amstex.sty:\n    // \\def\\cases{\\left\\{\\def\\arraystretch{1.2}\\hskip-\\arraycolsep\n    //   \\array{l@{\\quad}l}}\n    // \\def\\endcases{\\endarray\\hskip-\\arraycolsep\\right.}\n    // From amsmath.dtx\n    // \\def\\env@cases{%\n    //   \\let\\@ifnextchar\\new@ifnextchar\n    //   \\left\\lbrace\n    //   \\def\\arraystretch{1.2}%\n    //   \\array{@{}l@{\\quad}l@{}}%\n\n    return {\n        arraystretch: 1.2,\n        lFence: '\\\\lbrace',\n        rFence: '.',\n        colFormat: [{ align: 'l' }, { gap: 1 }, { align: 'l' }],\n    };\n});\n\n// This is a text mode environment\n/*\n\\begin{theorem}\nLet $f$ be a function whose derivative exists in every point, then $f$\nis a continuous function.\n\\end{theorem}\n*/\n// defineEnvironment('theorem', '', function () {\n//     return {};\n// });\n\ndefineEnvironment('center', '', function () {\n    return { colFormat: [{ align: 'c' }] };\n});\n","import { defineFunction } from './definitions-utils';\nimport type { Atom } from './atom';\n\n// Extensible (horitontally stretchy) symbols\n\ndefineFunction(\n    [\n        'overrightarrow',\n        'overleftarrow',\n        'Overrightarrow',\n        'overleftharpoon',\n        'overrightharpoon',\n        'overleftrightarrow',\n        'overbrace',\n        'overlinesegment',\n        'overgroup',\n    ],\n    '{:auto}',\n    null,\n    (name, args) => {\n        return {\n            type: 'overunder',\n            // The body is the argument of the command\n            body: args[0] as Atom[],\n\n            // Set the \"svgAbove\" to the name of a SVG object (which is the same\n            // as the command name)\n            svgAbove: name.slice(1),\n\n            skipBoundary: true,\n\n            limits: 'overunder',\n        };\n    },\n    (name, _parent, atom, emit) => `${name}{${emit(atom, atom.body as Atom[])}}`\n);\n\ndefineFunction(\n    [\n        'underrightarrow',\n        'underleftarrow',\n        'underleftrightarrow',\n        'underbrace',\n        'underlinesegment',\n        'undergroup',\n    ],\n    '{:auto}',\n    null,\n    (name, args) => {\n        return {\n            type: 'overunder',\n\n            body: args[0] as Atom[],\n            // Set the \"svgBelow\" to the name of a SVG object (which is the same\n            // as the command name)\n            svgBelow: name.slice(1),\n\n            skipBoundary: true,\n            limits: 'overunder',\n        };\n    },\n    (name, _parent, atom, emit) => `${name}{${emit(atom, atom.body as Atom[])}}`\n);\ndefineFunction(\n    [\n        'xrightarrow',\n        'xleftarrow',\n        'xRightarrow',\n        'xLeftarrow',\n        'xleftharpoonup',\n        'xleftharpoondown',\n        'xrightharpoonup',\n        'xrightharpoondown',\n        'xlongequal',\n        'xtwoheadleftarrow',\n        'xtwoheadrightarrow',\n        'xleftrightarrow',\n        'xLeftrightarrow',\n        'xrightleftharpoons',\n        'xleftrightharpoons',\n        'xhookleftarrow',\n        'xhookrightarrow',\n        'xmapsto',\n        'xtofrom',\n        'xrightleftarrows', // From mhchem.sty package\n        'xrightequilibrium', // From mhchem.sty package\n        'xleftequilibrium', // From mhchem.sty package\n    ],\n    '[:auto]{:auto}',\n    null,\n    (name, args) => {\n        return {\n            type: 'overunder',\n\n            // Set the spacing type\n            mathtype: 'mrel',\n\n            // Set the \"svgBody\" to the name of a SVG object (which is the same\n            // as the command name)\n            svgBody: name.slice(1),\n            overscript: args[1],\n            underscript: args[0],\n\n            skipBoundary: true,\n        };\n    },\n    (name, _parent, atom, emit) =>\n        name +\n        (atom.underscript ? `[${emit(atom, atom.underscript)}]` : '') +\n        `{${emit(atom, atom.overscript)}}`\n);\n","import { defineFunction, ParseFunctionResult } from './definitions-utils';\nimport type { Atom } from './atom';\n\ndefineFunction(\n    [\n        'arccos',\n        'arcsin',\n        'arctan',\n        'arctg', // Not Latex standard. Used in France\n        'arcctg', // Not Latex standard. Used in France\n        'arg',\n        'ch', // Not Latex standard. \\cosh\n        'cos',\n        'cosh',\n        'cot',\n        'coth',\n        'ctg', // Not Latex standard. Used in France\n        'cth',\n        'cotg', // Not Latex standard. Used in France\n        'csc', // Not Latex standard. \\cth\n        'cosec', // Not Latex standard.\n        'deg',\n        'dim',\n        'exp',\n        'hom',\n        'inf',\n        'ker',\n        'lg',\n        'lb', // Not Latex standard. US Dept of Commerce recommendation for log2\n        'lg', // Not Latex standard. In German and Russian literature,  log10.\n        // Sometimes used as the log2\n        'ln',\n        'log',\n        'Pr',\n        'sec',\n        'sh', // Not Latex standard. \\sinh\n        'sin',\n        'sinh',\n        'sup',\n        'tan',\n        'tanh',\n        'tg', // Not Latex standard. Used in France\n        'th', // Not Latex standard. \\tanh\n    ],\n    '',\n    null,\n    function (name) {\n        return {\n            type: 'mop',\n            limits: 'nolimits',\n            isSymbol: false,\n            isFunction: true,\n            body: name.slice(1),\n            variant: 'main',\n            variantStyle: 'up',\n        };\n    }\n);\n\ndefineFunction(['liminf', 'limsup'], '', null, (name) => {\n    return {\n        type: 'mop',\n        limits: 'limits',\n        isSymbol: false,\n        body: { '\\\\liminf': 'lim inf', '\\\\limsup': 'lim sup' }[name],\n        variant: 'main',\n    };\n});\n\ndefineFunction(['lim', 'mod'], '', null, function (name) {\n    return {\n        type: 'mop',\n        limits: 'limits',\n        isSymbol: false,\n        body: name.slice(1),\n        variant: 'main',\n    };\n});\n\n// With Limits\ndefineFunction(['det', 'max', 'min'], '', null, function (name) {\n    return {\n        type: 'mop',\n        limits: 'limits',\n        isSymbol: false,\n        isFunction: true,\n        body: name.slice(1),\n        variant: 'main',\n    };\n});\n\n// Root\ndefineFunction(\n    'sqrt',\n    '[index:auto]{radicand:auto}',\n    null,\n    (_name, args) => {\n        return {\n            type: 'surd',\n            body: args[1] as Atom[],\n            index: args[0] as Atom[],\n        };\n    },\n    (name, _parent, atom, emit) => {\n        let args = '';\n        if (atom.index) {\n            args += `[${emit(atom, atom.index)}]`;\n        }\n        args += `{${emit(atom, atom.body as Atom[])}}`;\n        return name + args;\n    }\n);\n\n// Fractions\ndefineFunction(\n    ['frac', 'dfrac', 'tfrac', 'cfrac', 'binom', 'dbinom', 'tbinom'],\n    '{numerator}{denominator}',\n    null,\n    (name, args): ParseFunctionResult => {\n        const result: ParseFunctionResult = {\n            type: 'genfrac',\n            numer: args[0] as Atom[],\n            denom: args[1] as Atom[],\n            mathstyle: 'auto',\n        };\n\n        switch (name) {\n            case '\\\\dfrac':\n            case '\\\\frac':\n            case '\\\\tfrac':\n            case '\\\\cfrac':\n                result.hasBarLine = true;\n                break;\n            case '\\\\\\\\atopfrac':\n                result.hasBarLine = false;\n                break;\n            case '\\\\dbinom':\n            case '\\\\binom':\n            case '\\\\tbinom':\n                result.hasBarLine = false;\n                result.leftDelim = '(';\n                result.rightDelim = ')';\n                break;\n        }\n\n        switch (name) {\n            case '\\\\dfrac':\n            case '\\\\dbinom':\n                result.mathstyle = 'displaystyle';\n                break;\n            case '\\\\tfrac':\n            case '\\\\tbinom':\n                result.mathstyle = 'textstyle';\n                break;\n        }\n\n        if (name === '\\\\cfrac') {\n            result.continuousFraction = true;\n        }\n\n        return result;\n    },\n    (name, _parent, atom, emit) => {\n        return `${name}{${emit(atom, atom.numer)}}{${emit(atom, atom.denom)}}`;\n    }\n);\n\ndefineFunction(\n    ['over', 'atop', 'choose'],\n    '',\n    { infix: true },\n    (name, args): ParseFunctionResult => {\n        const numer = args[0] as Atom[];\n        const denom = args[1] as Atom[];\n        let hasBarLine = false;\n        let leftDelim = null;\n        let rightDelim = null;\n\n        switch (name) {\n            case '\\\\atop':\n                break;\n            case '\\\\over':\n                hasBarLine = true;\n                break;\n            case '\\\\choose':\n                hasBarLine = false;\n                leftDelim = '(';\n                rightDelim = ')';\n                break;\n            default:\n                throw new Error('Unrecognized genfrac command');\n        }\n        return {\n            type: 'genfrac',\n            numer: numer,\n            denom: denom,\n            hasBarLine: hasBarLine,\n            leftDelim: leftDelim,\n            rightDelim: rightDelim,\n            mathstyle: 'auto',\n        };\n    },\n    (name, _parent, atom, emit) => {\n        return `{${emit(atom, atom.numer)}${name} ${emit(atom, atom.denom)}}`;\n    }\n);\n\n// Slashed package\n/*\ndefineFunction('\\\\slashed'\n*/\n\ndefineFunction(\n    'pdiff',\n    '{numerator}{denominator}',\n    null,\n    (_funcname, args): ParseFunctionResult => {\n        return {\n            type: 'genfrac',\n            numer: args[0] as Atom[],\n            denom: args[1] as Atom[],\n            numerPrefix: '\\u2202',\n            denomPrefix: '\\u2202',\n            hasBarLine: true,\n            leftDelim: null,\n            rightDelim: null,\n            mathstyle: 'auto',\n        };\n    },\n    (name, _parent, atom, emit) => {\n        return `${name}{${emit(atom, atom.numer)}}{${emit(atom, atom.denom)}}`;\n    }\n);\n\n// Limits, symbols\ndefineFunction(\n    [\n        'sum',\n        'prod',\n        'bigcup',\n        'bigcap',\n        'coprod',\n        'bigvee',\n        'bigwedge',\n        'biguplus',\n        'bigotimes',\n        'bigoplus',\n        'bigodot',\n        'bigsqcup',\n        'smallint',\n        'intop',\n    ],\n    '',\n    null,\n    (name): ParseFunctionResult => {\n        return {\n            type: 'mop',\n            limits: 'auto',\n            isSymbol: true,\n            variant: 'main',\n            body: {\n                coprod: '\\u2210',\n                bigvee: '\\u22c1',\n                bigwedge: '\\u22c0',\n                biguplus: '\\u2a04',\n                bigcap: '\\u22c2',\n                bigcup: '\\u22c3',\n                intop: '\\u222b',\n                prod: '\\u220f',\n                sum: '\\u2211',\n                bigotimes: '\\u2a02',\n                bigoplus: '\\u2a01',\n                bigodot: '\\u2a00',\n                bigsqcup: '\\u2a06',\n                smallint: '\\u222b',\n            }[name.slice(1)],\n        };\n    }\n);\n\n// No limits, symbols (i.e. display larger in 'display' mode, and\n// centered on the baseline)\nconst EXTENSIBLE_SYMBOLS = {\n    int: '\\u222b',\n    iint: '\\u222c',\n    iiint: '\\u222d',\n    oint: '\\u222e',\n    oiint: '\\u222f',\n    oiiint: '\\u2230',\n    intclockwise: '\\u2231',\n    varointclockwise: '\\u2232',\n    ointctrclockwise: '\\u2233',\n    intctrclockwise: '\\u2a11',\n    sqcup: '\\u2294',\n    sqcap: '\\u2293',\n    uplus: '\\u228e',\n    wr: '\\u2240',\n    amalg: '\\u2a3f',\n    Cap: '\\u22d2',\n    Cup: '\\u22d3',\n    doublecap: '\\u22d2',\n    doublecup: '\\u22d3',\n};\ndefineFunction(Object.keys(EXTENSIBLE_SYMBOLS), '', null, function (name) {\n    return {\n        type: 'mop',\n        limits: 'nolimits',\n        isSymbol: true,\n        body: EXTENSIBLE_SYMBOLS[name.slice(1)],\n        variant: { '\\u22d2': 'ams', '\\u22d3': 'ams' }[\n            EXTENSIBLE_SYMBOLS[name.slice(1)]\n        ],\n    };\n});\n\ndefineFunction(['Re', 'Im'], '', null, function (name): ParseFunctionResult {\n    return {\n        type: 'mop',\n        limits: 'nolimits',\n        isSymbol: false,\n        isFunction: true,\n        body: { '\\\\Re': '\\u211c', '\\\\Im': '\\u2111' }[name],\n        variant: 'fraktur',\n    };\n});\n\ndefineFunction('middle', '{:delim}', null, function (\n    name,\n    args\n): ParseFunctionResult {\n    return { type: 'delim', delim: args[0] as string };\n});\n\n// TODO\n// Some missing greek letters, but see https://reference.wolfram.com/language/tutorial/LettersAndLetterLikeForms.html\n// koppa, stigma, Sampi\n// See https://tex.stackexchange.com/questions/231878/accessing-archaic-greek-koppa-in-the-birkmult-document-class\n// Capital Alpha, etc...\n// Colon (ratio) (2236)\n\n// Review:\n// https://en.wikipedia.org/wiki/Help:Displaying_a_formula\n\n// https://reference.wolfram.com/language/tutorial/LettersAndLetterLikeForms.html\n// ftp://ftp.dante.de/tex-archive/info/symbols/comprehensive/symbols-a4.pdf\n\n// Media Wiki Reference\n// https://en.wikipedia.org/wiki/Help:Displaying_a_formula\n\n// MathJax Reference\n// http://docs.mathjax.org/en/latest/tex.html#supported-latex-commands\n// http://www.onemathematicalcat.org/MathJaxDocumentation/TeXSyntax.htm\n\n// LaTeX Reference\n// http://ctan.sharelatex.com/tex-archive/info/latex2e-help-texinfo/latex2e.html\n\n// iBooks Author/Pages\n// https://support.apple.com/en-au/HT202501\n\n// Mathematica Reference\n// https://reference.wolfram.com/language/tutorial/NamesOfSymbolsAndMathematicalObjects.html\n// https://reference.wolfram.com/language/guide/MathematicalTypesetting.html\n/*\n    * @todo \\sb (equivalent to _) $\\mathfrak{sl}\\sb 2$ frequency 184\n    * @todo \\sp (equivalent to ^) $\\mathfrak{sl}\\sp 2$ frequency 274\n    * \\intertext    frequency 0\n\n\n    See http://mirrors.ibiblio.org/CTAN/macros/latex/contrib/mathtools/mathtools.pdf\n\n*/\n","/**\n * This module contains some color dictionaries and algorithms to\n * parse a string into a hex RGB color value.s\n * @summary   Parsing of color strings.\n */\n\n/*\n{\\color{apricot}\\blacksquare}{\\color{aquamarine}\\blacksquare}{\\color{bittersweet}\\blacksquare}{\\color{black}\\blacksquare}{\\color{blue}\\blacksquare}{\\color{blueGreen}\\blacksquare}{\\color{blueviolet}\\blacksquare}{\\color{brickred}\\blacksquare}{\\color{brown}\\blacksquare}{\\color{burntorange}\\blacksquare}{\\color{cadetblue}\\blacksquare}{\\color{carnationpink}\\blacksquare}{\\color{cerulean}\\blacksquare}{\\color{cornflowerblue}\\blacksquare}{\\color{cyan}\\blacksquare}{\\color{dandelion}\\blacksquare}{\\color{darkorchid}\\blacksquare}{\\color{emerald}\\blacksquare}{\\color{forestgreen}\\blacksquare}{\\color{fuchsia}\\blacksquare}{\\color{goldenrod}\\blacksquare}{\\color{gray}\\blacksquare}{\\color{green}\\blacksquare}{\\color{greenyellow}\\blacksquare}{\\color{junglegreen}\\blacksquare}{\\color{lavender}\\blacksquare}{\\color{limegreen}\\blacksquare}{\\color{magenta}\\blacksquare}{\\color{mahogany}\\blacksquare}{\\color{maroon}\\blacksquare}{\\color{melon}\\blacksquare}{\\color{midnightblue}\\blacksquare}{\\color{mulberry}\\blacksquare}{\\color{navyblue}\\blacksquare}{\\color{olivegreen}\\blacksquare}{\\color{orange}\\blacksquare}{\\color{orangered}\\blacksquare}{\\color{orchid}\\blacksquare}{\\color{peach}\\blacksquare}{\\color{periwinkle}\\blacksquare}{\\color{pinegreen}\\blacksquare}{\\color{plum}\\blacksquare}{\\color{processblue}\\blacksquare}{\\color{purple}\\blacksquare}{\\color{rawsienna}\\blacksquare}{\\color{red}\\blacksquare}{\\color{redorange}\\blacksquare}{\\color{redviolet}\\blacksquare}{\\color{rhodamine}\\blacksquare}{\\color{royalblue}\\blacksquare}{\\color{royalpurple}\\blacksquare}{\\color{rubinered}\\blacksquare}{\\color{salmon}\\blacksquare}{\\color{seagreen}\\blacksquare}{\\color{sepia}\\blacksquare}{\\color{skyblue}\\blacksquare}{\\color{springgreen}\\blacksquare}{\\color{tan}\\blacksquare}{\\color{tealblue}\\blacksquare}{\\color{thistle}\\blacksquare}{\\color{turquoise}\\blacksquare}{\\color{violet}\\blacksquare}{\\color{violetred}\\blacksquare}{\\color{white}\\blacksquare}{\\color{wildstrawberry}\\blacksquare}{\\color{yellow}\\blacksquare}{\\color{yellowgreen}\\blacksquare}{\\color{yelloworange}\\blacksquare}\n*/\n\n/**\n * First 10 predefined colors used for plotting by Mathematica.\n *\n * Also known as _indexed color scheme #97_.\n */\nconst MATHEMATICA_COLORS: { [key: string]: string } = {\n    m0: '#3f3d99', // strong blue\n    m1: '#993d71', // strong cerise\n    m2: '#998b3d', // strong gold\n    m3: '#3d9956', // malachite green\n    m4: '#3d5a99', // strong cobalt blue\n    m5: '#993d90', // strong orchid\n    m6: '#996d3d', // strong orange\n    m7: '#43993d', // strong sap green\n    m8: '#3d7999', // cornflower blue\n    m9: '#843d99', // mulberry\n};\n// ColorData97 (Mathematica standard lines)\n// rgb(0.368417, 0.506779, 0.709798),       #5e81b5\n// rgb(0.880722, 0.611041, 0.142051),\n// rgb(0.560181, 0.691569, 0.194885),\n// rgb(0.922526, 0.385626, 0.209179),\n// rgb(0.528488, 0.470624, 0.701351),\n// rgb(0.772079, 0.431554, 0.102387),\n// rgb(0.363898, 0.618501, 0.782349),\n// rgb(1, 0.75, 0),\n// rgb(0.647624, 0.37816, 0.614037),\n// rgb(0.571589, 0.586483, 0.),\n// rgb(0.915, 0.3325, 0.2125),\n// rgb(0.40082222609352647, 0.5220066643438841, 0.85),\n// rgb(0.9728288904374106, 0.621644452187053, 0.07336199581899142),\n// rgb(0.736782672705901, 0.358, 0.5030266573755369),\n// rgb(0.28026441037696703, 0.715, 0.4292089322474965)\n\n// MathLab colors\n// '#0072bd' // [0, 0.4470, 0.7410]             blue\n// '#d95319' // [0.8500, 0.3250, 0.0980]        orange\n// '#edb120', // [0.9290, 0.6940, 0.1250]       yellow\n// '#7e2f8e', // [0.4940, 0.1840, 0.5560]       purple\n// '#77ac30', // [0.4660, 0.6740, 0.1880]       green\n// '#4dbeee', // [0.3010, 0.7450, 0.9330]       cyan\n// '#a2142f' // [0.6350, 0.0780, 0.1840]\t    dark red\n\n/* Area colors are most appropriate to color a large area */\nexport const AREA_COLORS = [\n    '#d35d60', // red\n    '#7293cb', // cobalt blue\n    '#e1974d', // orange\n    '#84bb5d', // pistachio\n    '#9066a7', // purple\n    '#aD6a58', // vermilion\n    '#f5a4ce', // pale rose\n    '#fff590', // pale gold\n    '#212121', // Black\n    '#818787', // dark grey\n    '#d4d5d2', // light grey\n    '#ffffff', // white\n];\n\n/* Line colors are most appropriate to color as a stroke color */\nexport const LINE_COLORS = [\n    '#cc2428', // red\n    '#3769b1', // cobalt blue\n    '#da7e30', // orange\n    '#409852', // malachite green\n    '#6b4c9a', // blue violet\n    '#922426', // red\n    '#e7298a', // brilliant rose\n    '#ffe907', // vivid gold\n    '#000000',\n    '#525055',\n    '#adafaa',\n    '#ffffff',\n];\n\n/**\n * 68 colors (+ white) known to dvips used in LaTeX.\n *\n * The color names are based on the names of the _Crayola Crayon_ box of\n * 64 crayons.\n *\n * See:\n * - {@link http://mirror.jmu.edu/pub/CTAN/systems/knuth/local/lib/colordvi.tex | ColorDVI.tex}\n * - {@link https://en.wikibooks.org/w/index.php?title=LaTeX/Colors | Wikibooks:LaTeX/Colors}\n */\nconst NAMED_COLORS: { [key: string]: string } = {\n    apricot: '#FBB982',\n    aquamarine: '#00B5BE',\n    bittersweet: '#C04F17',\n    black: '#221E1F', // Indeed.\n    blue: '#2D2F92',\n    bluegreen: '#00B3B8',\n    blueviolet: '#473992',\n    brickred: '#B6321C',\n    brown: '#792500',\n    burntorange: '#F7921D',\n    cadetblue: '#74729A',\n    carnationpink: '#F282B4',\n    cerulean: '#00A2E3',\n    cornflowerblue: '#41B0E4',\n    cyan: '#00AEEF',\n    dandelion: '#FDBC42',\n    darkorchid: '#A4538A',\n    emerald: '#00A99D',\n    forestgreen: '#009B55',\n    fuchsia: '#8C368C',\n    goldenrod: '#FFDF42',\n    gray: '#949698',\n    green: '#00A64F',\n    greenyellow: '#DFE674',\n    junglegreen: '#00A99A',\n    lavender: '#F49EC4',\n    limegreen: '#8DC73E',\n    magenta: '#EC008C',\n    mahogany: '#A9341F',\n    maroon: '#AF3235',\n    melon: '#F89E7B',\n    midnightblue: '#006795',\n    mulberry: '#A93C93',\n    navyblue: '#006EB8',\n    olivegreen: '#3C8031',\n    orange: '#F58137',\n    orangered: '#ED135A',\n    orchid: '#AF72B0',\n    peach: '#F7965A',\n    periwinkle: '#7977B8',\n    pinegreen: '#008B72',\n    plum: '#92268F',\n    processblue: '#00B0F0',\n    purple: '#99479B',\n    rawsienna: '#974006',\n    red: '#ED1B23',\n    redorange: '#F26035',\n    redviolet: '#A1246B',\n    rhodamine: '#EF559F',\n    royalblue: '#0071BC',\n    royalpurple: '#613F99',\n    rubinered: '#ED017D',\n    salmon: '#F69289',\n    seagreen: '#3FBC9D',\n    sepia: '#671800',\n    skyblue: '#46C5DD',\n    springgreen: '#C6DC67',\n    tan: '#DA9D76',\n    tealblue: '#00AEB3',\n    thistle: '#D883B7',\n    turquoise: '#00B4CE',\n    violet: '#58429B',\n    violetred: '#EF58A0',\n    white: '#FFFFFF',\n    wildstrawberry: '#EE2967',\n    yellow: '#FFF200',\n    yellowgreen: '#98CC70',\n    yelloworange: '#FAA21A',\n};\n\n// Other color lists: SVG colors, x11 colors\n/*\naliceblue\trgb(240, 248, 255)\nantiquewhite\trgb(250, 235, 215)\naqua\trgb( 0, 255, 255)\naquamarine\trgb(127, 255, 212)\nazure\trgb(240, 255, 255)\nbeige\trgb(245, 245, 220)\nbisque\trgb(255, 228, 196)\nblack\trgb( 0, 0, 0)\nblanchedalmond\trgb(255, 235, 205)\nblue\trgb( 0, 0, 255)\nblueviolet\trgb(138, 43, 226)\nbrown\trgb(165, 42, 42)\nburlywood\trgb(222, 184, 135)\ncadetblue\trgb( 95, 158, 160)\nchartreuse\trgb(127, 255, 0)\nchocolate\trgb(210, 105, 30)\ncoral\trgb(255, 127, 80)\ncornflowerblue\trgb(100, 149, 237)\ncornsilk\trgb(255, 248, 220)\ncrimson\trgb(220, 20, 60)\ncyan\trgb( 0, 255, 255)\ndarkblue\trgb( 0, 0, 139)\ndarkcyan\trgb( 0, 139, 139)\ndarkgoldenrod\trgb(184, 134, 11)\ndarkgray\trgb(169, 169, 169)\ndarkgreen\trgb( 0, 100, 0)\ndarkgrey\trgb(169, 169, 169)\ndarkkhaki\trgb(189, 183, 107)\ndarkmagenta\trgb(139, 0, 139)\ndarkolivegreen\trgb( 85, 107, 47)\ndarkorange\trgb(255, 140, 0)\ndarkorchid\trgb(153, 50, 204)\ndarkred\trgb(139, 0, 0)\ndarksalmon\trgb(233, 150, 122)\ndarkseagreen\trgb(143, 188, 143)\ndarkslateblue\trgb( 72, 61, 139)\ndarkslategray\trgb( 47, 79, 79)\ndarkslategrey\trgb( 47, 79, 79)\ndarkturquoise\trgb( 0, 206, 209)\ndarkviolet\trgb(148, 0, 211)\ndeeppink\trgb(255, 20, 147)\ndeepskyblue\trgb( 0, 191, 255)\ndimgray\trgb(105, 105, 105)\ndimgrey\trgb(105, 105, 105)\ndodgerblue\trgb( 30, 144, 255)\nfirebrick\trgb(178, 34, 34)\nfloralwhite\trgb(255, 250, 240)\nforestgreen\trgb( 34, 139, 34)\nfuchsia\trgb(255, 0, 255)\ngainsboro\trgb(220, 220, 220)\nghostwhite\trgb(248, 248, 255)\ngold\trgb(255, 215, 0)\ngoldenrod\trgb(218, 165, 32)\ngray\trgb(128, 128, 128)\ngrey\trgb(128, 128, 128)\ngreen\trgb( 0, 128, 0)\ngreenyellow\trgb(173, 255, 47)\nhoneydew\trgb(240, 255, 240)\nhotpink\trgb(255, 105, 180)\nindianred\trgb(205, 92, 92)\nindigo\trgb( 75, 0, 130)\nivory\trgb(255, 255, 240)\nkhaki\trgb(240, 230, 140)\nlavender\trgb(230, 230, 250)\nlavenderblush\trgb(255, 240, 245)\nlawngreen\trgb(124, 252, 0)\nlemonchiffon\trgb(255, 250, 205)\nlightblue\trgb(173, 216, 230)\nlightcoral\trgb(240, 128, 128)\nlightcyan\trgb(224, 255, 255)\nlightgoldenrodyellow\trgb(250, 250, 210)\nlightgray\trgb(211, 211, 211)\nlightgreen\trgb(144, 238, 144)\nlightgrey\trgb(211, 211, 211)\nlightpink\trgb(255, 182, 193)\nlightsalmon\trgb(255, 160, 122)\nlightseagreen\trgb( 32, 178, 170)\nlightskyblue\trgb(135, 206, 250)\nlightslategray\trgb(119, 136, 153)\nlightslategrey\trgb(119, 136, 153)\nlightsteelblue\trgb(176, 196, 222)\nlightyellow\trgb(255, 255, 224)\nlime\trgb( 0, 255, 0)\nlimegreen\trgb( 50, 205, 50)\nlinen\trgb(250, 240, 230)\nmagenta\trgb(255, 0, 255)\nmaroon\trgb(128, 0, 0)\nmediumaquamarine\trgb(102, 205, 170)\nmediumblue\trgb( 0, 0, 205)\nmediumorchid\trgb(186, 85, 211)\nmediumpurple\trgb(147, 112, 219)\nmediumseagreen\trgb( 60, 179, 113)\nmediumslateblue\trgb(123, 104, 238)\nmediumspringgreen\trgb( 0, 250, 154)\nmediumturquoise\trgb( 72, 209, 204)\nmediumvioletred\trgb(199, 21, 133)\nmidnightblue\trgb( 25, 25, 112)\nmintcream\trgb(245, 255, 250)\nmistyrose\trgb(255, 228, 225)\nmoccasin\trgb(255, 228, 181)\nnavajowhite\trgb(255, 222, 173)\nnavy\trgb( 0, 0, 128)\noldlace\trgb(253, 245, 230)\nolive\trgb(128, 128, 0)\nolivedrab\trgb(107, 142, 35)\norange\trgb(255, 165, 0)\norangered\trgb(255, 69, 0)\norchid\trgb(218, 112, 214)\npalegoldenrod\trgb(238, 232, 170)\npalegreen\trgb(152, 251, 152)\npaleturquoise\trgb(175, 238, 238)\npalevioletred\trgb(219, 112, 147)\npapayawhip\trgb(255, 239, 213)\npeachpuff\trgb(255, 218, 185)\nperu\trgb(205, 133, 63)\npink\trgb(255, 192, 203)\nplum\trgb(221, 160, 221)\npowderblue\trgb(176, 224, 230)\npurple\trgb(128, 0, 128)\nred\trgb(255, 0, 0)\nrosybrown\trgb(188, 143, 143)\nroyalblue\trgb( 65, 105, 225)\nsaddlebrown\trgb(139, 69, 19)\nsalmon\trgb(250, 128, 114)\nsandybrown\trgb(244, 164, 96)\nseagreen\trgb( 46, 139, 87)\nseashell\trgb(255, 245, 238)\nsienna\trgb(160, 82, 45)\nsilver\trgb(192, 192, 192)\nskyblue\trgb(135, 206, 235)\nslateblue\trgb(106, 90, 205)\nslategray\trgb(112, 128, 144)\nslategrey\trgb(112, 128, 144)\nsnow\trgb(255, 250, 250)\nspringgreen\trgb( 0, 255, 127)\nsteelblue\trgb( 70, 130, 180)\ntan\trgb(210, 180, 140)\nteal\trgb( 0, 128, 128)\nthistle\trgb(216, 191, 216)\ntomato\trgb(255, 99, 71)\nturquoise\trgb( 64, 224, 208)\nviolet\trgb(238, 130, 238)\nwheat\trgb(245, 222, 179)\nwhite\trgb(255, 255, 255)\nwhitesmoke\trgb(245, 245, 245)\nyellow\trgb(255, 255, 0)\nyellowgreen\trgb(154, 205, 50)\n \t \n*/\n\n/**\n * Return a CSS color (#rrggbb) from a string.\n *\n * Possible formats include:\n * - named colors from the DVI color set: 'Yellow', 'red'... Case insensitive.\n * - colors from the Mathematica set: 'm1'...'m9'\n * - 3-digit hex: `'#d50'`\n * - 6-digit hex: `'#dd5500'`\n * - RGB functional: `'rgb(240, 20, 10)'`\n *\n * In addition, colors can be mixed using the following syntax:\n * `<mix> = <color>![<value>][!<mix>]`\n * For example:\n * - `'blue!20'`  = 20% blue + 80% white\n * - `'blue!20!black'` = 20% + 80% black\n * - `'blue!20!black!30!green'` = (20% + 80% black) * 30 % + 70% green\n *\n * If the input string is prefixed with a dash, the complementary color\n * of the expression is returned.\n *\n * This creative syntax is defined by the {@link http://mirror.jmu.edu/pub/CTAN/macros/latex/contrib/xcolor/xcolor.pdf | `xcolor` LaTeX package}.\n *\n * @param s - An expression representing a color value\n * @return An RGB color expressed as a hex-triplet preceded by `#`\n */\nexport function stringToColor(s: string): string {\n    const colorSpec = s.toLowerCase().split('!');\n\n    let baseRed;\n    let baseGreen;\n    let baseBlue;\n    let red = 255;\n    let green = 255;\n    let blue = 255;\n    let mix = -1;\n\n    // If the string is prefixed with a '-', use the complementary color\n    const complementary =\n        colorSpec.length > 0 && colorSpec[0].charAt(0) === '-';\n    if (complementary) colorSpec[0] = colorSpec[0].slice(1);\n\n    for (let i = 0; i < colorSpec.length; i++) {\n        baseRed = red;\n        baseGreen = green;\n        baseBlue = blue;\n\n        const colorName = colorSpec[i].match(/([a-z0-9]*)/)?.[1];\n\n        let color = NAMED_COLORS[colorName] || MATHEMATICA_COLORS[colorName];\n        if (!color) color = colorSpec[i];\n\n        let m = color.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);\n        if (m?.[1] && m[2] && m[3]) {\n            // It's a six-digit hex number\n            red = Math.max(0, Math.min(255, parseInt(m[1], 16)));\n            green = Math.max(0, Math.min(255, parseInt(m[2], 16)));\n            blue = Math.max(0, Math.min(255, parseInt(m[3], 16)));\n        } else {\n            m = color.match(/^#([0-9a-f]{3})$/i);\n            if (m?.[1]) {\n                // It's a three-digit hex number\n                const r1 = parseInt(m[1][0], 16);\n                const g1 = parseInt(m[1][1], 16);\n                const b1 = parseInt(m[1][2], 16);\n                red = Math.max(0, Math.min(255, r1 * 16 + r1));\n                green = Math.max(0, Math.min(255, g1 * 16 + g1));\n                blue = Math.max(0, Math.min(255, b1 * 16 + b1));\n            } else {\n                // It's a rgb functional\n                m = color.match(\n                    /^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i\n                );\n                if (m?.[1] && m[2] && m[3]) {\n                    red = Math.max(0, Math.min(255, parseInt(m[1])));\n                    green = Math.max(0, Math.min(255, parseInt(m[2])));\n                    blue = Math.max(0, Math.min(255, parseInt(m[3])));\n                } else {\n                    return null;\n                }\n            }\n        }\n        if (mix >= 0) {\n            red = (1.0 - mix) * red + mix * baseRed;\n            green = (1.0 - mix) * green + mix * baseGreen;\n            blue = (1.0 - mix) * blue + mix * baseBlue;\n            mix = -1;\n        }\n        if (i + 1 < colorSpec.length) {\n            mix = Math.max(0, Math.min(100, parseInt(colorSpec[++i]))) / 100.0;\n        }\n    }\n\n    if (mix >= 0) {\n        red = mix * red + (1.0 - mix) * baseRed;\n        green = mix * green + (1.0 - mix) * baseGreen;\n        blue = mix * blue + (1.0 - mix) * baseBlue;\n    }\n\n    if (complementary) {\n        red = 255 - red;\n        green = 255 - green;\n        blue = 255 - blue;\n    }\n\n    return (\n        '#' +\n        ('00' + Math.round(red).toString(16)).slice(-2) +\n        ('00' + Math.round(green).toString(16)).slice(-2) +\n        ('00' + Math.round(blue).toString(16)).slice(-2)\n    );\n}\n\nexport function colorToString(color: string): string {\n    let result = color.toUpperCase();\n\n    for (const c in NAMED_COLORS) {\n        if (NAMED_COLORS[c] === result) {\n            result = c;\n            break;\n        }\n    }\n\n    for (const c in MATHEMATICA_COLORS) {\n        if (MATHEMATICA_COLORS[c] === result) {\n            result = c;\n            break;\n        }\n    }\n\n    return result;\n}\n","import { defineFunction, ParseFunctionResult } from './definitions-utils';\nimport { colorToString, stringToColor } from './color';\nimport { Atom, BBoxParam } from './atom-utils';\nimport { FontShape, FontSeries } from '../public/core';\n\ndefineFunction(\n    'ensuremath',\n    '{:math}',\n    {},\n    (_name, args) => {\n        return {\n            type: 'group',\n            mode: 'math',\n            body: args[0] as Atom[],\n            skipBoundary: true,\n            latexOpen: '\\\\ensuremath{',\n            latexClose: '}',\n        };\n    },\n    (_name, _parent, atom, emit) => emit(atom, atom.body as Atom[])\n);\n\ndefineFunction('color', '{:color}', {}, (_name, args) => {\n    return { color: args[0] as string };\n});\n\n// From the xcolor package.\n// Unlike what its name might suggest, this command does not set the mode to text\n// That is, it can equally be applied to math and text mode.\ndefineFunction('textcolor', '{:color}{content:auto*}', {}, (_name, args) => {\n    return { color: args[0] as string };\n});\n\n// Can be preceded by e.g. '\\fboxsep=4pt' (also \\fboxrule)\n// Note:\n// - \\boxed: sets content in displaystyle mode (@todo: should change type of argument)\n//      equivalent to \\fbox{$$<content>$$}\n// - \\fbox: sets content in 'auto' mode (frequency 777)\n// - \\framebox[<width>][<alignment>]{<content>} (<alignment> := 'c'|'t'|'b' (center, top, bottom) (frequency 28)\n// @todo\ndefineFunction('boxed', '{content:math}', null, (_name, args) => {\n    return {\n        type: 'box',\n        framecolor: 'black',\n        skipBoundary: true,\n        body: args[0] as Atom[],\n    };\n});\n\n// In LaTeX, \\colorbox sets the mode to text\ndefineFunction(\n    'colorbox',\n    '{background-color:string}{content:auto}',\n    {},\n    (_name, args) => {\n        return {\n            type: 'box',\n            backgroundcolor: stringToColor(args[0] as string),\n            skipBoundary: true,\n            body: args[1] as Atom[],\n            verbatimBackgroundcolor: args[0] as string, // Save this value to restore it verbatim later\n        };\n    },\n    (name, _parent, atom, emit) =>\n        `${name}{${\n            atom.verbatimBackgroundcolor || colorToString(atom.backgroundcolor)\n        }}{${emit(atom, atom.body as Atom[])}}`\n);\n\ndefineFunction(\n    'fcolorbox',\n    '{frame-color:string}{background-color:string}{content:auto}',\n    {},\n    (_name, args) => {\n        return {\n            type: 'box',\n            framecolor: stringToColor(args[0] as string),\n            backgroundcolor: stringToColor(args[1] as string),\n            skipBoundary: true,\n            body: args[2] as Atom[],\n            verbatimBackgroundcolor: args[1] as string, // Save this value to restore it verbatim later\n            verbatimFramecolor: args[0] as string, // Save this value to restore it verbatim later\n        };\n    },\n    (name, _parent, atom, emit) =>\n        `${name}{${atom.verbatimFramecolor || colorToString(atom.framecolor)}{${\n            atom.verbatimBackgroundcolor || colorToString(atom.backgroundcolor)\n        }}{${emit(atom, atom.body as Atom[])}}`\n);\n\n// \\bbox, MathJax extension\n// The first argument is a CSS border property shorthand, e.g.\n// \\bbox[red], \\bbox[5px,border:2px solid red]\n// The MathJax syntax is\n// arglist ::= <arg>[,<arg>[,<arg>]]\n// arg ::= [<background:color>|<padding:dimen>|<style>]\n// style ::= 'border:' <string>\n\ndefineFunction(\n    'bbox',\n    '[:bbox]{body:auto}',\n    {},\n    (_name, args) => {\n        if (args[0]) {\n            const arg = args[0] as BBoxParam;\n            return {\n                type: 'box',\n                padding: arg.padding,\n                border: arg.border,\n                backgroundcolor: arg.backgroundcolor,\n                skipBoundary: true,\n                body: args[1] as Atom[],\n            };\n        }\n        return {\n            type: 'box',\n            skipBoundary: true,\n            body: args[1] as Atom[],\n        };\n    },\n    (name, _parent, atom, emit) => {\n        let result = name;\n        if (\n            isFinite(atom.padding) ||\n            typeof atom.border !== 'undefined' ||\n            typeof atom.backgroundcolor !== 'undefined'\n        ) {\n            const bboxParams = [];\n            if (isFinite(atom.padding)) {\n                bboxParams.push(Math.floor(1e2 * atom.padding) / 1e2 + 'em');\n            }\n            if (atom.border) {\n                bboxParams.push('border:' + atom.border);\n            }\n            if (atom.backgroundcolor) {\n                bboxParams.push(colorToString(atom.backgroundcolor));\n            }\n            result += `[${bboxParams.join(',')}]`;\n        }\n\n        return result + `{${emit(atom, atom.body as Atom[])}}`;\n    }\n);\n\n// Size\ndefineFunction(\n    [\n        'tiny',\n        'scriptsize',\n        'footnotesize',\n        'small',\n        'normalsize',\n        'large',\n        'Large',\n        'LARGE',\n        'huge',\n        'Huge',\n    ],\n    '',\n    {},\n    (name, _args) => {\n        return {\n            fontSize: {\n                tiny: 'size1',\n                scriptsize: 'size2',\n                footnotesize: 'size3',\n                small: 'size4',\n                normalsize: 'size5',\n                large: 'size6',\n                Large: 'size7',\n                LARGE: 'size8',\n                huge: 'size9',\n                Huge: 'size10',\n            }[name.slice(1)],\n        };\n    }\n);\n\n// \\fontseries only works in text mode\ndefineFunction('fontseries', '{:string}', { mode: 'text' }, (_name, args) => {\n    return { fontSeries: (args[0] as string) as FontSeries };\n});\n// SHAPE: italic, small caps\ndefineFunction('fontshape', '{:string}', { mode: 'text' }, (_name, args) => {\n    return { fontShape: args[0] as FontShape };\n});\n\n// FONT FAMILY: Fraktur, Calligraphic, ...\ndefineFunction('fontfamily', '{:string}', { mode: 'text' }, (_name, args) => {\n    return { fontFamily: args[0] as string };\n});\n\n// In LaTeX, the \\fontseries, \\fontshape, \\fontfamily, \\fontsize commands\n// do not take effect until \\selectfont is encoded. In our implementation,\n// they take effect immediately, and \\selectfont is a no-op\ndefineFunction('selectfont', '', { mode: 'text' }, (_name, _args) => {\n    return {};\n});\n\n// \\bf works in any mode\n// As per the LaTeX 2.09 semantics, it overrides shape, family\ndefineFunction('bf', '', {}, (_name, _args) => {\n    return { fontSeries: 'b', fontShape: 'n', fontFamily: 'cmr' };\n});\n\n// Note: These function work a little bit differently than LaTex\n// In LaTeX, \\bm{x\\mathrm{y}} yield a bold x and an upright y.\n// This is not necesarily intentional, but a side effect of the (current)\n// implementation of \\bm\ndefineFunction(['boldsymbol', 'bm'], '{:math*}', {}, (_name, _args) => {\n    return { mode: 'math', cssClass: 'ML__boldsymbol' };\n});\n\n// Note: switches to math mode\ndefineFunction('bold', '{:math*}', {}, (_name, _args) => {\n    return { mode: 'math', variantStyle: 'bold' };\n});\n\ndefineFunction('bfseries', '', { mode: 'text' }, (_name, _args) => {\n    return { fontSeries: 'b' };\n});\ndefineFunction('mdseries', '', { mode: 'text' }, (_name, _args) => {\n    return { fontSeries: 'm' };\n});\ndefineFunction('upshape', '', { mode: 'text' }, (_name, _args) => {\n    return { fontShape: 'n' };\n});\ndefineFunction('slshape', '', { mode: 'text' }, (_name, _args) => {\n    return { fontShape: 'sl' };\n});\n// Small caps\ndefineFunction('scshape', '', { mode: 'text' }, (_name, _args) => {\n    return { fontShape: 'sc' };\n});\n\ndefineFunction('textbf', '{:text*}', {}, (_name, _args) => {\n    return { mode: 'text', fontSeries: 'b' };\n});\ndefineFunction('textmd', '{:text*}', {}, (_name, _args) => {\n    return { mode: 'text', fontSeries: 'm' };\n});\n\ndefineFunction('textup', '{:text*}', {}, (_name, _args) => {\n    return { mode: 'text', fontShape: 'n' };\n});\n\n// @todo: family could be 'none' or 'default'\n// \"normal\" font of the body text, not necessarily roman\ndefineFunction('textnormal', '{:text*}', {}, (_name, _args) => {\n    return { mode: 'text', fontShape: 'n', fontSeries: 'm' };\n});\n\ndefineFunction('textsl', '{:text*}', {}, (_name, _args) => {\n    return { mode: 'text', fontShape: 'sl' };\n});\n\ndefineFunction('textit', '{:text*}', {}, (_name, _args) => {\n    return { mode: 'text', fontShape: 'it' };\n});\n\ndefineFunction('textsc', '{:text*}', {}, (_name, _args) => {\n    return { mode: 'text', fontShape: 'sc' };\n});\ndefineFunction('textrm', '{:text*}', {}, (_name, _args) => {\n    return { mode: 'text', fontFamily: 'roman' };\n});\n\ndefineFunction('textsf', '{:text*}', {}, (_name, _args) => {\n    return { mode: 'text', fontFamily: 'sans-serif' };\n});\n\ndefineFunction('texttt', '{:text*}', {}, (_name, _args) => {\n    return { mode: 'text', fontFamily: 'monospace' };\n});\n\n// Note: \\mathbf is a no-op in text mode\ndefineFunction('mathbf', '{:math*}', {}, (_name, _args) => {\n    return { mode: 'math', variant: 'normal', variantStyle: 'bold' };\n});\n\ndefineFunction('mathit', '{:math*}', {}, (_name, _args) => {\n    return { mode: 'math', variant: 'normal', variantStyle: 'italic' };\n});\n\n// From the ISOMath package\ndefineFunction('mathbfit', '{:math*}', {}, (_name, _args) => {\n    return { mode: 'math', variant: 'normal', variantStyle: 'bolditalic' };\n});\n\ndefineFunction('mathrm', '{:math*}', {}, (_name, _args) => {\n    return { mode: 'math', variant: 'normal', variantStyle: 'up' };\n});\n\ndefineFunction(\n    'mathsf',\n    '{:math*}',\n    {},\n    (_name, _args): ParseFunctionResult => {\n        return { mode: 'math', variant: 'sans-serif', variantStyle: 'up' };\n    }\n);\ndefineFunction(\n    'mathtt',\n    '{:math*}',\n    {},\n    (_name, _args): ParseFunctionResult => {\n        return { mode: 'math', variant: 'monospace', variantStyle: 'up' };\n    }\n);\n\ndefineFunction(\n    'it',\n    '',\n    {},\n    (_name, _args): ParseFunctionResult => {\n        return {\n            fontSeries: 'm',\n            fontShape: 'it',\n            fontFamily: 'cmr',\n            variantStyle: 'italic', // For math mode\n        };\n    }\n);\n\n// In LaTeX, \\rmfamily, \\sffamily and \\ttfamily are no-op in math mode.\ndefineFunction(\n    'rmfamily',\n    '',\n    {},\n    (_name, _args): ParseFunctionResult => {\n        return { fontFamily: 'roman' };\n    }\n);\n\ndefineFunction(\n    'sffamily',\n    '',\n    {},\n    (_name, _args): ParseFunctionResult => {\n        return { fontFamily: 'sans-serif' };\n    }\n);\n\ndefineFunction(\n    'ttfamily',\n    '',\n    {},\n    (_name, _args): ParseFunctionResult => {\n        return { fontFamily: 'monospace' };\n    }\n);\n\n// In LaTeX, \\Bbb and \\mathbb are no-op in text mode.\n// They also map lowercase characters to different glyphs.\n// Note that \\Bbb has been deprecated for over 20 years (as well as \\rm, \\it, \\bf)\ndefineFunction(\n    ['Bbb', 'mathbb'],\n    '{:math*}',\n    {},\n    (_name, _args): ParseFunctionResult => {\n        return { variant: 'double-struck', variantStyle: 'up' };\n    }\n);\n\ndefineFunction(['frak', 'mathfrak'], '{:math*}', {}, (_name, _args) => {\n    return { variant: 'fraktur', variantStyle: 'up' };\n});\n\ndefineFunction('mathcal', '{:math*}', {}, (_name, _args) => {\n    return { variant: 'calligraphic', variantStyle: 'up' };\n});\n\ndefineFunction(\n    'mathscr',\n    '{:math*}',\n    {},\n    (_name, _args): ParseFunctionResult => {\n        return { variant: 'script', variantStyle: 'up' };\n    }\n);\n\n// Rough synomym for \\text{}\n/*\nAn \\mbox within math mode does not use the current math font; rather it uses\nthe typeface of the surrounding running text.\n*/\ndefineFunction(\n    'mbox',\n    '{:text}',\n    null,\n    (_name, args): ParseFunctionResult => {\n        return {\n            type: 'group',\n            mode: 'math',\n            body: args[0] as Atom[],\n        };\n    }\n);\n\ndefineFunction(\n    'text',\n    '{:text*}',\n    null,\n    (_name, _args): ParseFunctionResult => {\n        return { mode: 'text' };\n    }\n);\n\n/* A MathJax extension: assign a class to the element */\ndefineFunction(\n    'class',\n    '{name:string}{content:auto*}',\n    null,\n    (_name, args): ParseFunctionResult => {\n        return { cssClass: args[0] as string };\n    }\n);\n\n/* A MathJax extension: assign an ID to the element */\ndefineFunction(\n    'cssId',\n    '{id:string}{content:auto}',\n    null,\n    (_name, args): ParseFunctionResult => {\n        return {\n            type: 'group',\n            body: args[1] as Atom[],\n            cssId: args[0] as string,\n        };\n    }\n);\n\n/* Note: in TeX, \\em is restricted to text mode. We extend it to math\n * This is the 'switch' variant of \\emph, i.e:\n * `\\emph{important text}`\n * `{\\em important text}`\n */\ndefineFunction(\n    'em',\n    '',\n    null,\n    (_name, _args): ParseFunctionResult => {\n        return { cssClass: 'ML__emph' };\n    }\n);\n\n/* Note: in TeX, \\emph is restricted to text mode. We extend it to math */\ndefineFunction(\n    'emph',\n    '{:auto}',\n    null,\n    (_name, args): ParseFunctionResult => {\n        return {\n            cssClass: 'ML__emph',\n            body: args[0] as Atom[],\n            type: 'group',\n            skipBoundary: true,\n        };\n    }\n);\n\n// Extra data needed for the delimiter parse function down below\nconst DELIMITER_SIZES = {\n    '\\\\bigl': { mclass: 'mopen', size: 1 },\n    '\\\\Bigl': { mclass: 'mopen', size: 2 },\n    '\\\\biggl': { mclass: 'mopen', size: 3 },\n    '\\\\Biggl': { mclass: 'mopen', size: 4 },\n    '\\\\bigr': { mclass: 'mclose', size: 1 },\n    '\\\\Bigr': { mclass: 'mclose', size: 2 },\n    '\\\\biggr': { mclass: 'mclose', size: 3 },\n    '\\\\Biggr': { mclass: 'mclose', size: 4 },\n    '\\\\bigm': { mclass: 'mrel', size: 1 },\n    '\\\\Bigm': { mclass: 'mrel', size: 2 },\n    '\\\\biggm': { mclass: 'mrel', size: 3 },\n    '\\\\Biggm': { mclass: 'mrel', size: 4 },\n    '\\\\big': { mclass: 'mord', size: 1 },\n    '\\\\Big': { mclass: 'mord', size: 2 },\n    '\\\\bigg': { mclass: 'mord', size: 3 },\n    '\\\\Bigg': { mclass: 'mord', size: 4 },\n};\n\ndefineFunction(\n    [\n        'bigl',\n        'Bigl',\n        'biggl',\n        'Biggl',\n        'bigr',\n        'Bigr',\n        'biggr',\n        'Biggr',\n        'bigm',\n        'Bigm',\n        'biggm',\n        'Biggm',\n        'big',\n        'Big',\n        'bigg',\n        'Bigg',\n    ],\n    '{:delim}',\n    null,\n    function (name, args): ParseFunctionResult {\n        return {\n            type: 'sizeddelim',\n            size: DELIMITER_SIZES[name].size,\n            cls: DELIMITER_SIZES[name].mclass,\n            delim: args[0] as string,\n        };\n    }\n);\n\ndefineFunction(\n    [\n        'hspace',\n        'hspace*',\n        // \\hspace* inserts a non-breakable space, but since we don't line break...\n        // it's the same as \\hspace.\n    ],\n    '{width:skip}',\n    {},\n    function (_name, args) {\n        return {\n            type: 'spacing',\n            width: args[0] || 0,\n        };\n    }\n);\n\ndefineFunction(\n    [\n        'mathop',\n        'mathbin',\n        'mathrel',\n        'mathopen',\n        'mathclose',\n        'mathpunct',\n        'mathord',\n        'mathinner',\n    ],\n    '{:auto}',\n    null,\n    (name, args) => {\n        const result: ParseFunctionResult = {\n            type: {\n                '\\\\mathop': 'mop',\n                '\\\\mathbin': 'mbin',\n                '\\\\mathrel': 'mrel',\n                '\\\\mathopen': 'mopen',\n                '\\\\mathclose': 'mclose',\n                '\\\\mathpunct': 'mpunct',\n                '\\\\mathord': 'mord',\n                '\\\\mathinner': 'minner',\n            }[name],\n            body: args[0] as Atom[], // Pass the body as an array of atoms, not a string\n            // A string would be styled as text, but these need to be interpreted\n            // as 'math'\n            captureSelection: true, // Do not let children be selected\n        };\n        if (name === '\\\\mathop') {\n            result.limits = 'limits';\n            result.isFunction = true;\n        }\n        return result;\n    },\n    (name, _parent, atom, emit) => {\n        return `${name}{${emit(atom, atom.body as Atom[])}}`;\n    }\n);\n\n// @todo see http://mirrors.ibiblio.org/CTAN/macros/latex/required/amsmath/amsopn.pdf\n// for list of additional operators\n\ndefineFunction(\n    ['operatorname', 'operatorname*'],\n    '{operator:math}',\n    null,\n    function (name, args) {\n        const result: ParseFunctionResult = {\n            type: 'mop',\n            captureSelection: true, // Do not let children be selected\n            body: args[0] as Atom[],\n            isFunction: true,\n        };\n        /*\n        The \\operatorname commands is defined with:\n\n        \\gdef\\newmcodes@{\\mathcode`\\'39\\mathcode`\\*42\\mathcode`\\.\"613A%\n        \\ifnum\\mathcode`\\-=45 \\else\n            \\mathchardef\\std@minus\\mathcode`\\-\\relax\n        \\fi\n        \\mathcode`\\-45\\mathcode`\\/47\\mathcode`\\:\"603A\\relax}\n\n\n        \\mathcode assigns to a character its category (2=mbin), its font family (0=cmr),\n        and its character code.\n\n        It basically temporarily reassigns to \":.'-/*\" the values/properties\n        these characters have in text mode (but importantly, not to \" \" (space))\n\n        */\n\n        (result.body as Atom[]).forEach((x) => {\n            x.isFunction = false;\n            if (!x.variant && !x.variantStyle) {\n                // No variant as been specified (as it could have been with\n                // \\operatorname{\\mathit{lim}} for example)\n                // Bypass the default auto styling by specifing an upright style\n                x.variant = 'main';\n                x.variantStyle = 'up';\n            }\n            x.type = 'mord';\n            x.body =\n                { '\\u2217': '*', '\\u2212': '-' }[x.body as string] || x.body;\n        });\n\n        if (name === '\\\\operatorname') {\n            result.limits = 'nolimits';\n        } else if (name === '\\\\operatorname*') {\n            result.limits = 'limits';\n        }\n\n        return result;\n    }\n);\n\ndefineFunction(\n    'unicode',\n    '{charcode:number}',\n    null,\n    (_name, args) => {\n        let codepoint = parseInt(args[0] as string);\n        if (!isFinite(codepoint)) codepoint = 0x2753; // BLACK QUESTION MARK\n        return {\n            type: 'mord',\n            body: String.fromCodePoint(codepoint),\n            codepoint: codepoint,\n        };\n    },\n    (name, _parent, atom, _emit) => {\n        return `${name}{\"${('000000' + atom.codepoint.toString(16))\n            .toUpperCase()\n            .substr(-6)}}`;\n    }\n);\n\n// A box of the width and height\ndefineFunction(\n    'rule',\n    '[raise:dimen]{width:dimen}{thickness:dimen}',\n    null,\n    function (name, args) {\n        return {\n            type: 'rule',\n            shift: args[0],\n            width: args[1],\n            height: args[2],\n        };\n    }\n);\n\n// An overline\ndefineFunction('overline', '{:auto}', null, (_name, args) => {\n    return {\n        type: 'line',\n        position: 'overline',\n        skipBoundary: true,\n        body: args[0] as Atom[],\n    };\n});\n\ndefineFunction('underline', '{:auto}', null, (_name, args) => {\n    return {\n        type: 'line',\n        position: 'underline',\n        skipBoundary: true,\n        body: args[0] as Atom[],\n    };\n});\n\ndefineFunction(\n    'overset',\n    '{annotation:auto}{symbol:auto}',\n    null,\n    function (_name, args) {\n        return {\n            type: 'overunder',\n            overscript: args[0],\n            skipBoundary: true,\n            body: args[1] as Atom[],\n        };\n    },\n    (name, _parent, atom, emit) => {\n        return `${name}{${emit(atom, atom.overscript)}}{${emit(\n            atom,\n            atom.body as Atom[]\n        )}}`;\n    }\n);\n\ndefineFunction(\n    'underset',\n    '{annotation:auto}{symbol:auto}',\n    null,\n    function (_name, args) {\n        return {\n            type: 'overunder',\n            underscript: args[0] as Atom[],\n            skipBoundary: true,\n            body: args[1] as Atom[],\n        };\n    },\n    (name, _parent, atom, emit) => {\n        return `${name}{${emit(atom, atom.overscript)}}{${emit(\n            atom,\n            atom.body as Atom[]\n        )}}`;\n    }\n);\n\ndefineFunction(\n    ['overwithdelims', 'atopwithdelims'],\n    '{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}',\n    { infix: true },\n    function (_name, args): ParseFunctionResult {\n        return {\n            type: 'genfrac',\n            numer: args[0] as Atom[],\n            denom: args[1] as Atom[],\n            hasBarLine: false,\n            leftDelim: args[2] as string,\n            rightDelim: args[3] as string,\n            mathstyle: 'auto',\n        };\n    },\n    (name, _parent, atom, emit) => {\n        return `${emit(atom, atom.numer)} ${name}${atom.leftDelim}${\n            atom.rightDelim\n        }${emit(atom, atom.denom)}`;\n    }\n);\n\ndefineFunction(\n    ['stackrel', 'stackbin'],\n    '{annotation:auto}{symbol:auto}',\n    null,\n    function (name, args) {\n        return {\n            type: 'overunder',\n            overscript: args[0] as Atom[],\n            skipBoundary: true,\n            body: args[1] as Atom[],\n            // Set the correct spacing rule for \\stackrel\n            mathtype: name === '\\\\stackrel' ? 'mrel' : 'mbin',\n        };\n    },\n    (name, _parent, atom, emit) =>\n        `${name}{${emit(atom, atom.overscript)}}{${emit(\n            atom,\n            atom.body as Atom[]\n        )}}`\n);\n\ndefineFunction('rlap', '{:auto}', null, function (name, args) {\n    return {\n        type: 'overlap',\n        align: 'right',\n        skipBoundary: true,\n        body: args[0] as Atom[],\n    };\n});\n\ndefineFunction('llap', '{:auto}', null, function (name, args) {\n    return {\n        type: 'overlap',\n        align: 'left',\n        skipBoundary: true,\n        body: args[0] as Atom[],\n    };\n});\n\ndefineFunction('mathrlap', '{:auto}', null, function (name, args) {\n    return {\n        type: 'overlap',\n        mode: 'math',\n        align: 'right',\n        skipBoundary: true,\n        body: args[0] as Atom[],\n    };\n});\n\ndefineFunction('mathllap', '{:auto}', null, function (name, args) {\n    return {\n        type: 'overlap',\n        mode: 'math',\n        align: 'left',\n        skipBoundary: true,\n        body: args[0] as Atom[],\n    };\n});\n","import {\n    defineSymbol,\n    defineSymbols,\n    defineSymbolRange,\n} from './definitions-utils';\n\n// Simple characters allowed in math mode\ndefineSymbols('0123456789/@.?!');\ndefineSymbolRange(0x0041, 0x005a); // a-z\ndefineSymbolRange(0x0061, 0x007a); // A-Z\n\n// Quantifiers\n\ndefineSymbol('\\\\forall', '\\u2200');\ndefineSymbol('\\\\exists', '\\u2203');\ndefineSymbol('\\\\nexists', '\\u2204', 'mord', 'ams');\ndefineSymbol('\\\\mid', '\\u2223', 'mrel');\ndefineSymbol('\\\\top', '\\u22a4');\ndefineSymbol('\\\\bot', '\\u22a5');\n\n// Misc Symbols\n\ndefineSymbol('\\\\sharp', '\\u266f');\ndefineSymbol('\\\\flat', '\\u266d');\ndefineSymbol('\\\\natural', '\\u266e');\ndefineSymbol('\\\\#', '\\u0023');\ndefineSymbol('\\\\&', '\\u0026');\ndefineSymbol('\\\\clubsuit', '\\u2663');\ndefineSymbol('\\\\heartsuit', '\\u2661');\ndefineSymbol('\\\\spadesuit', '\\u2660');\ndefineSymbol('\\\\diamondsuit', '\\u2662');\n\n// defineSymbol( '\\\\cross', '\\uF4A0',  'mord',  MAIN); // NOTE: not a real TeX symbol, but Mathematica\n// defineSymbol( '\\\\transpose', '\\uF3C7',  'mord',  MAIN); // NOTE: not a real TeX symbol, but Mathematica\n// defineSymbol( '\\\\conjugate', 'conj'],  MAIN,  'mord', '\\uF3C8'); // NOTE: not a real TeX symbol, but Mathematica\n// defineSymbol( '\\\\conjugatetranspose', '\\uF3C9',  'mord',  MAIN); // NOTE: not a real TeX symbol, but Mathematica\n// defineSymbol( '\\\\hermitianconjugate', '\\uF3CE',  'mord',  MAIN); // NOTE: not a real TeX symbol, but Mathematica\ndefineSymbol('\\\\differencedelta', '\\u2206', 'mrel');\n\ndefineSymbol('\\\\backslash', '\\\\');\n\ndefineSymbol('\\\\nabla', '\\u2207');\ndefineSymbol('\\\\partial', '\\u2202');\n\ndefineSymbol('\\\\ell', '\\u2113');\n\ndefineSymbol('\\\\hbar', '\\u210f');\ndefineSymbol('\\\\hslash', '\\u210f', 'mord', 'ams');\n\ndefineSymbol('\\\\Finv', '\\u2132', 'mord', 'ams');\ndefineSymbol('\\\\Game', '\\u2141', 'mord', 'ams');\n\ndefineSymbol('\\\\wp', '\\u2118');\ndefineSymbol('\\\\eth', '\\u00f0', 'mord', 'ams');\n\ndefineSymbol('\\\\mho', '\\u2127', 'mord', 'ams');\n\ndefineSymbol('\\\\Bbbk', '\\u006b', 'mord', 'ams');\ndefineSymbol('\\\\N', 'N', 'mord', 'double-struck'); // NOTE: Check if standard Latex\ndefineSymbol('\\\\R', 'R', 'mord', 'double-struck'); // NOTE: Check if standard Latex\ndefineSymbol('\\\\Q', 'Q', 'mord', 'double-struck'); // NOTE: Check if standard Latex\ndefineSymbol('\\\\C', 'C', 'mord', 'double-struck'); // NOTE: Check if standard Latex\ndefineSymbol('\\\\Z', 'Z', 'mord', 'double-struck'); // NOTE: Check if standard Latex\ndefineSymbol('\\\\P', 'P', 'mord', 'double-struck'); // NOTE: Check if standard Latex\n\ndefineSymbol('\\\\pounds', '\\u00a3');\ndefineSymbol('\\\\yen', '\\u00a5', 'mord', 'ams');\ndefineSymbol('\\\\euro', '\\u20AC'); // NOTE: not TeX built-in, but textcomp package\n\n// TODO Koppa, Stigma, Sampi\n\n// Math and Text\n\ndefineSymbol('\\\\dagger', '\\u2020', 'mbin');\ndefineSymbol('\\\\dag', '\\u2020', 'mbin');\ndefineSymbol('\\\\ddag', '\\u2021', 'mbin');\ndefineSymbol('\\\\ddagger', '\\u2021', 'mbin');\ndefineSymbol('\\\\maltese', '\\u2720', 'mord', 'ams');\n\n// Arrow Symbols\n\ndefineSymbol('\\\\rightarrow', '\\u2192', 'mrel');\ndefineSymbol('\\\\to', '\\u2192', 'mrel');\ndefineSymbol('\\\\leftarrow', '\\u2190', 'mrel');\ndefineSymbol('\\\\gets', '\\u2190', 'mrel');\ndefineSymbol('\\\\Rightarrow', '\\u21d2', 'mrel');\ndefineSymbol('\\\\Leftarrow', '\\u21d0', 'mrel');\ndefineSymbol('\\\\longrightarrow', '\\u27f6', 'mrel');\ndefineSymbol('\\\\longleftarrow', '\\u27f5', 'mrel');\ndefineSymbol('\\\\Longrightarrow', '\\u27f9', 'mrel');\ndefineSymbol('\\\\implies', '\\u27f9', 'mrel');\ndefineSymbol('\\\\Longleftarrow', '\\u27f8', 'mrel');\ndefineSymbol('\\\\impliedby', '\\u27f8', 'mrel');\ndefineSymbol('\\\\dashrightarrow', '\\u21e2', 'mrel', 'ams');\ndefineSymbol('\\\\dashleftarrow', '\\u21e0', 'mrel', 'ams');\ndefineSymbol('\\\\Rrightarrow', '\\u21db', 'mrel', 'ams');\ndefineSymbol('\\\\Lleftarrow', '\\u21da', 'mrel', 'ams');\n\ndefineSymbol('\\\\longleftrightarrow', '\\u27f7', 'mrel');\ndefineSymbol('\\\\biconditional', '\\u27f7', 'mrel');\ndefineSymbol('\\\\Longleftrightarrow', '\\u27fa', 'mrel');\n\ndefineSymbol('\\\\leftrightarrows', '\\u21c6', 'mrel', 'ams');\ndefineSymbol('\\\\rightleftarrows', '\\u21c4', 'mrel', 'ams');\n\ndefineSymbol('\\\\mapsto', '\\u21a6', 'mrel');\ndefineSymbol('\\\\longmapsto', '\\u27fc', 'mrel');\n\ndefineSymbol('\\\\uparrow', '\\u2191', 'mrel');\ndefineSymbol('\\\\downarrow', '\\u2193', 'mrel');\ndefineSymbol('\\\\Uparrow', '\\u21d1', 'mrel');\ndefineSymbol('\\\\Downarrow', '\\u21d3', 'mrel');\ndefineSymbol('\\\\updownarrow', '\\u2195', 'mrel');\ndefineSymbol('\\\\Updownarrow', '\\u21d5', 'mrel');\n\ndefineSymbol('\\\\curvearrowright', '\\u21b7', 'mrel', 'ams');\ndefineSymbol('\\\\curvearrowleft', '\\u21b6', 'mrel', 'ams');\n\ndefineSymbol('\\\\hookrightarrow', '\\u21aa', 'mrel');\ndefineSymbol('\\\\hookleftarrow', '\\u21a9', 'mrel');\n\ndefineSymbol('\\\\rightharpoonup', '\\u21c0', 'mrel');\ndefineSymbol('\\\\leftharpoonup', '\\u21bc', 'mrel');\ndefineSymbol('\\\\rightharpoondown', '\\u21c1', 'mrel');\ndefineSymbol('\\\\leftharpoondown', '\\u21bd', 'mrel');\n\ndefineSymbol('\\\\rightrightarrows', '\\u21c9', 'mrel', 'ams');\ndefineSymbol('\\\\leftleftarrows', '\\u21c7', 'mrel', 'ams');\ndefineSymbol('\\\\upuparrows', '\\u21c8', 'mrel', 'ams');\ndefineSymbol('\\\\downdownarrows', '\\u21ca', 'mrel', 'ams');\n\ndefineSymbol('\\\\leftarrowtail', '\\u21a2', 'mrel', 'ams');\ndefineSymbol('\\\\rightarrowtail', '\\u21a3', 'mrel', 'ams');\n\ndefineSymbol('\\\\looparrowright', '\\u21ac', 'mrel', 'ams');\ndefineSymbol('\\\\looparrowleft', '\\u21ab', 'mrel', 'ams');\n\ndefineSymbol('\\\\twoheadleftarrow', '\\u219e', 'mrel', 'ams');\ndefineSymbol('\\\\twoheadrightarrow', '\\u21a0', 'mrel', 'ams');\n\ndefineSymbol('\\\\rightleftharpoons', '\\u21cc', 'mrel');\ndefineSymbol('\\\\leftrightharpoons', '\\u21cb', 'mrel', 'ams');\n\ndefineSymbol('\\\\Rsh', '\\u21b1', 'mrel', 'ams');\ndefineSymbol('\\\\Lsh', '\\u21b0', 'mrel', 'ams');\n\ndefineSymbol('\\\\searrow', '\\u2198', 'mrel');\ndefineSymbol('\\\\nearrow', '\\u2197', 'mrel');\ndefineSymbol('\\\\swarrow', '\\u2199', 'mrel');\ndefineSymbol('\\\\nwarrow', '\\u2196', 'mrel');\n\ndefineSymbol('\\\\circlearrowright', '\\u21bb', 'mrel', 'ams');\ndefineSymbol('\\\\circlearrowleft', '\\u21ba', 'mrel', 'ams');\n\ndefineSymbol('\\\\restriction', '\\u21be', 'mrel', 'ams');\ndefineSymbol('\\\\upharpoonright', '\\u21be', 'mrel', 'ams');\ndefineSymbol('\\\\upharpoonleft', '\\u21bf', 'mrel', 'ams');\ndefineSymbol('\\\\downharpoonright', '\\u21c2', 'mrel', 'ams');\ndefineSymbol('\\\\downharpoonleft', '\\u21c3', 'mrel', 'ams');\n\ndefineSymbol('\\\\rightsquigarrow', '\\u21dd', 'mrel', 'ams');\ndefineSymbol('\\\\leadsto', '\\u21dd', 'mrel', 'ams');\ndefineSymbol('\\\\leftrightsquigarrow', '\\u21ad', 'mrel', 'ams');\n\ndefineSymbol('\\\\originalof', '\\u22B6', 'mrel');\ndefineSymbol('\\\\imageof', '\\u22B7', 'mrel');\ndefineSymbol('\\\\multimap', '\\u22b8', 'mrel', 'ams');\n\n// 'ams' Negated Arrows\n\ndefineSymbol('\\\\nrightarrow', '\\u219b', 'mrel', 'ams');\ndefineSymbol('\\\\nleftarrow', '\\u219a', 'mrel', 'ams');\ndefineSymbol('\\\\nRightarrow', '\\u21cf', 'mrel', 'ams');\ndefineSymbol('\\\\nLeftarrow', '\\u21cd', 'mrel', 'ams');\ndefineSymbol('\\\\nleftrightarrow', '\\u21ae', 'mrel', 'ams');\ndefineSymbol('\\\\nLeftrightarrow', '\\u21ce', 'mrel', 'ams');\n\n// 'ams' Negated Binary Relations\n\ndefineSymbol('\\\\nless', '\\u226e', 'mrel', 'ams');\ndefineSymbol('\\\\nleqslant', '\\ue010', 'mrel', 'ams');\ndefineSymbol('\\\\lneq', '\\u2a87', 'mrel', 'ams');\ndefineSymbol('\\\\lneqq', '\\u2268', 'mrel', 'ams');\ndefineSymbol('\\\\nleqq', '\\ue011', 'mrel', 'ams');\n\ndefineSymbol('\\\\unlhd', '\\u22b4', 'mbin', 'ams');\ndefineSymbol('\\\\unrhd', '\\u22b5', 'mbin', 'ams');\n\ndefineSymbol('\\\\lvertneqq', '\\ue00c', 'mrel', 'ams');\ndefineSymbol('\\\\lnsim', '\\u22e6', 'mrel', 'ams');\ndefineSymbol('\\\\lnapprox', '\\u2a89', 'mrel', 'ams');\ndefineSymbol('\\\\nprec', '\\u2280', 'mrel', 'ams');\ndefineSymbol('\\\\npreceq', '\\u22e0', 'mrel', 'ams');\ndefineSymbol('\\\\precnsim', '\\u22e8', 'mrel', 'ams');\ndefineSymbol('\\\\precnapprox', '\\u2ab9', 'mrel', 'ams');\ndefineSymbol('\\\\nsim', '\\u2241', 'mrel', 'ams');\ndefineSymbol('\\\\nshortmid', '\\ue006', 'mrel', 'ams');\ndefineSymbol('\\\\nmid', '\\u2224', 'mrel', 'ams');\ndefineSymbol('\\\\nvdash', '\\u22ac', 'mrel', 'ams');\ndefineSymbol('\\\\nvDash', '\\u22ad', 'mrel', 'ams');\ndefineSymbol('\\\\ngtr', '\\u226f', 'mrel', 'ams');\ndefineSymbol('\\\\ngeqslant', '\\ue00f', 'mrel', 'ams');\ndefineSymbol('\\\\ngeqq', '\\ue00e', 'mrel', 'ams');\ndefineSymbol('\\\\gneq', '\\u2a88', 'mrel', 'ams');\ndefineSymbol('\\\\gneqq', '\\u2269', 'mrel', 'ams');\ndefineSymbol('\\\\gvertneqq', '\\ue00d', 'mrel', 'ams');\ndefineSymbol('\\\\gnsim', '\\u22e7', 'mrel', 'ams');\ndefineSymbol('\\\\gnapprox', '\\u2a8a', 'mrel', 'ams');\ndefineSymbol('\\\\nsucc', '\\u2281', 'mrel', 'ams');\ndefineSymbol('\\\\nsucceq', '\\u22e1', 'mrel', 'ams');\ndefineSymbol('\\\\succnsim', '\\u22e9', 'mrel', 'ams');\ndefineSymbol('\\\\succnapprox', '\\u2aba', 'mrel', 'ams');\ndefineSymbol('\\\\ncong', '\\u2246', 'mrel', 'ams');\ndefineSymbol('\\\\nshortparallel', '\\ue007', 'mrel', 'ams');\ndefineSymbol('\\\\nparallel', '\\u2226', 'mrel', 'ams');\ndefineSymbol('\\\\nVDash', '\\u22af', 'mrel', 'ams');\ndefineSymbol('\\\\nsupseteqq', '\\ue018', 'mrel', 'ams');\ndefineSymbol('\\\\supsetneq', '\\u228b', 'mrel', 'ams');\ndefineSymbol('\\\\varsupsetneq', '\\ue01b', 'mrel', 'ams');\ndefineSymbol('\\\\supsetneqq', '\\u2acc', 'mrel', 'ams');\ndefineSymbol('\\\\varsupsetneqq', '\\ue019', 'mrel', 'ams');\ndefineSymbol('\\\\nVdash', '\\u22ae', 'mrel', 'ams');\ndefineSymbol('\\\\precneqq', '\\u2ab5', 'mrel', 'ams');\ndefineSymbol('\\\\succneqq', '\\u2ab6', 'mrel', 'ams');\ndefineSymbol('\\\\nsubseteqq', '\\ue016', 'mrel', 'ams');\n\n// 'ams' Misc\n\ndefineSymbol('\\\\checkmark', '\\u2713', 'mord', 'ams');\n\ndefineSymbol('\\\\diagup', '\\u2571', 'mord', 'ams');\ndefineSymbol('\\\\diagdown', '\\u2572', 'mord', 'ams');\n\ndefineSymbol('\\\\measuredangle', '\\u2221', 'mord', 'ams');\ndefineSymbol('\\\\sphericalangle', '\\u2222', 'mord', 'ams');\n\ndefineSymbol('\\\\backprime', '\\u2035', 'mord', 'ams');\ndefineSymbol('\\\\backdoubleprime', '\\u2036', 'mord', 'ams');\n\ndefineSymbol('\\\\ast', '\\u2217', 'mbin');\ndefineSymbol('\\\\star', '\\u22c6', 'mbin');\ndefineSymbol('\\\\diamond', '\\u22c4', 'mbin');\ndefineSymbol('\\\\Diamond', '\\u25ca', 'mord', 'ams');\ndefineSymbol('\\\\lozenge', '\\u25ca', 'mord', 'ams');\ndefineSymbol('\\\\blacklozenge', '\\u29eb', 'mord', 'ams');\ndefineSymbol('\\\\bigstar', '\\u2605', 'mord', 'ams');\n\n// 'ams' Hebrew\n\ndefineSymbol('\\\\aleph', '\\u2135');\ndefineSymbol('\\\\beth', '\\u2136', 'mord', 'ams');\ndefineSymbol('\\\\daleth', '\\u2138', 'mord', 'ams');\ndefineSymbol('\\\\gimel', '\\u2137', 'mord', 'ams');\n\n// 'ams' Delimiters\n\ndefineSymbol('\\\\lbrace', '{', 'mopen');\ndefineSymbol('\\\\rbrace', '}', 'mclose');\ndefineSymbol('\\\\langle', '\\u27e8', 'mopen');\ndefineSymbol('\\\\rangle', '\\u27e9', 'mclose');\ndefineSymbol('\\\\lfloor', '\\u230a', 'mopen');\ndefineSymbol('\\\\rfloor', '\\u230b', 'mclose');\ndefineSymbol('\\\\lceil', '\\u2308', 'mopen');\ndefineSymbol('\\\\rceil', '\\u2309', 'mclose');\n\ndefineSymbol('\\\\vert', '\\u2223');\ndefineSymbol('\\\\mvert', '\\u2223', 'mrel');\ndefineSymbol('\\\\lvert', '\\u2223', 'mopen');\ndefineSymbol('\\\\rvert', '\\u2223', 'mclose');\ndefineSymbol('\\\\|', '\\u2225');\ndefineSymbol('\\\\Vert', '\\u2225');\ndefineSymbol('\\\\mVert', '\\u2225');\ndefineSymbol('\\\\lVert', '\\u2225', 'mopen');\ndefineSymbol('\\\\rVert', '\\u2225', 'mclose');\ndefineSymbol('\\\\parallel', '\\u2225', 'mrel');\ndefineSymbol('\\\\shortparallel', '\\u2225', 'mrel', 'ams');\n\ndefineSymbol('\\\\lbrack', '[', 'mopen');\ndefineSymbol('\\\\rbrack', ']', 'mclose');\ndefineSymbol('\\\\{', '{', 'mopen');\ndefineSymbol('\\\\}', '}', 'mclose');\n\ndefineSymbol('(', '(', 'mopen');\ndefineSymbol(')', ')', 'mclose');\ndefineSymbol('[', '[', 'mopen');\ndefineSymbol(']', ']', 'mclose');\n\ndefineSymbol('\\\\ulcorner', '\\u250c', 'mopen', 'ams');\ndefineSymbol('\\\\urcorner', '\\u2510', 'mclose', 'ams');\ndefineSymbol('\\\\llcorner', '\\u2514', 'mopen', 'ams');\ndefineSymbol('\\\\lrcorner', '\\u2518', 'mclose', 'ams');\n\n// Large Delimiters\n\ndefineSymbol('\\\\lgroup', '\\u27ee', 'mopen');\ndefineSymbol('\\\\rgroup', '\\u27ef', 'mclose');\ndefineSymbol('\\\\lmoustache', '\\u23b0', 'mopen');\ndefineSymbol('\\\\rmoustache', '\\u23b1', 'mclose');\n\n// Relations\n\ndefineSymbol('=', '=', 'mrel');\ndefineSymbol('\\\\ne', '\\u2260', 'mrel');\ndefineSymbol('\\\\neq', '\\u2260', 'mrel');\n// defineSymbol( '\\\\longequal', '\\uF7D9',  'mrel',  MAIN);   // NOTE: Not TeX\n\ndefineSymbol('<', '<', 'mrel');\ndefineSymbol('\\\\lt', '<', 'mrel');\ndefineSymbol('>', '>', 'mrel');\ndefineSymbol('\\\\gt', '>', 'mrel');\n\ndefineSymbol('\\\\le', '\\u2264', 'mrel');\ndefineSymbol('\\\\leq', '\\u2264', 'mrel');\ndefineSymbol('\\\\ge', '\\u2265', 'mrel');\ndefineSymbol('\\\\geq', '\\u2265', 'mrel');\n\ndefineSymbol('\\\\leqslant', '\\u2a7d', 'mrel', 'ams');\ndefineSymbol('\\\\geqslant', '\\u2a7e', 'mrel', 'ams');\n\ndefineSymbol('\\\\ll', '\\u226a', 'mrel');\ndefineSymbol('\\\\gg', '\\u226b', 'mrel');\ndefineSymbol('\\\\coloneq', '\\u2254', 'mrel');\ndefineSymbol('\\\\measeq', '\\u225d', 'mrel'); // MEASSURED BY\ndefineSymbol('\\\\eqdef', '\\u225e', 'mrel');\ndefineSymbol('\\\\questeq', '\\u225f', 'mrel'); // QUESTIONED EQUAL TO\n\ndefineSymbol(':', ':', 'mrel');\ndefineSymbol('\\\\cong', '\\u2245', 'mrel');\n\ndefineSymbol('\\\\equiv', '\\u2261', 'mrel');\n\ndefineSymbol('\\\\prec', '\\u227a', 'mrel');\ndefineSymbol('\\\\preceq', '\\u2aaf', 'mrel');\ndefineSymbol('\\\\succ', '\\u227b', 'mrel');\ndefineSymbol('\\\\succeq', '\\u2ab0', 'mrel');\n\ndefineSymbol('\\\\perp', '\\u22a5', 'mrel');\n\ndefineSymbol('\\\\propto', '\\u221d', 'mrel');\ndefineSymbol('\\\\Colon', '\\u2237', 'mrel');\n\ndefineSymbol('\\\\smile', '\\u2323', 'mrel');\ndefineSymbol('\\\\frown', '\\u2322', 'mrel');\n\ndefineSymbol('\\\\sim', '\\u223c', 'mrel');\ndefineSymbol('\\\\gtrsim', '\\u2273', 'mrel', 'ams');\n\ndefineSymbol('\\\\approx', '\\u2248', 'mrel');\n\ndefineSymbol('\\\\approxeq', '\\u224a', 'mrel', 'ams');\ndefineSymbol('\\\\thickapprox', '\\u2248', 'mrel', 'ams');\ndefineSymbol('\\\\lessapprox', '\\u2a85', 'mrel', 'ams');\ndefineSymbol('\\\\gtrapprox', '\\u2a86', 'mrel', 'ams');\ndefineSymbol('\\\\precapprox', '\\u2ab7', 'mrel', 'ams');\ndefineSymbol('\\\\succapprox', '\\u2ab8', 'mrel', 'ams');\n\ndefineSymbol('\\\\thicksim', '\\u223c', 'mrel', 'ams');\ndefineSymbol('\\\\succsim', '\\u227f', 'mrel', 'ams');\ndefineSymbol('\\\\precsim', '\\u227e', 'mrel', 'ams');\ndefineSymbol('\\\\backsim', '\\u223d', 'mrel', 'ams');\ndefineSymbol('\\\\eqsim', '\\u2242', 'mrel', 'ams');\ndefineSymbol('\\\\backsimeq', '\\u22cd', 'mrel', 'ams');\ndefineSymbol('\\\\simeq', '\\u2243', 'mrel');\ndefineSymbol('\\\\lesssim', '\\u2272', 'mrel', 'ams');\n\ndefineSymbol('\\\\nleq', '\\u2270', 'mrel', 'ams');\ndefineSymbol('\\\\ngeq', '\\u2271', 'mrel', 'ams');\n\ndefineSymbol('\\\\smallsmile', '\\u2323', 'mrel', 'ams');\ndefineSymbol('\\\\smallfrown', '\\u2322', 'mrel', 'ams');\ndefineSymbol('\\\\bowtie', '\\u22c8', 'mrel');\ndefineSymbol('\\\\Join', '\\u22c8', 'mrel');\n\ndefineSymbol('\\\\asymp', '\\u224d', 'mrel');\n\ndefineSymbol('\\\\sqsubseteq', '\\u2291', 'mrel');\ndefineSymbol('\\\\sqsupseteq', '\\u2292', 'mrel');\n\ndefineSymbol('\\\\leqq', '\\u2266', 'mrel', 'ams');\ndefineSymbol('\\\\eqslantless', '\\u2a95', 'mrel', 'ams');\n\ndefineSymbol('\\\\lll', '\\u22d8', 'mrel', 'ams');\ndefineSymbol('\\\\lessgtr', '\\u2276', 'mrel', 'ams');\ndefineSymbol('\\\\lesseqgtr', '\\u22da', 'mrel', 'ams');\ndefineSymbol('\\\\lesseqqgtr', '\\u2a8b', 'mrel', 'ams');\ndefineSymbol('\\\\risingdotseq', '\\u2253', 'mrel', 'ams');\ndefineSymbol('\\\\fallingdotseq', '\\u2252', 'mrel', 'ams');\ndefineSymbol('\\\\subseteqq', '\\u2ac5', 'mrel', 'ams');\ndefineSymbol('\\\\Subset', '\\u22d0', 'mrel', 'ams');\ndefineSymbol('\\\\sqsubset', '\\u228f', 'mrel', 'ams');\ndefineSymbol('\\\\preccurlyeq', '\\u227c', 'mrel', 'ams');\ndefineSymbol('\\\\curlyeqprec', '\\u22de', 'mrel', 'ams');\ndefineSymbol('\\\\vDash', '\\u22a8', 'mrel', 'ams');\ndefineSymbol('\\\\Vvdash', '\\u22aa', 'mrel', 'ams');\ndefineSymbol('\\\\bumpeq', '\\u224f', 'mrel', 'ams');\ndefineSymbol('\\\\Bumpeq', '\\u224e', 'mrel', 'ams');\ndefineSymbol('\\\\geqq', '\\u2267', 'mrel', 'ams');\ndefineSymbol('\\\\eqslantgtr', '\\u2a96', 'mrel', 'ams');\ndefineSymbol('\\\\ggg', '\\u22d9', 'mrel', 'ams');\ndefineSymbol('\\\\gtrless', '\\u2277', 'mrel', 'ams');\ndefineSymbol('\\\\gtreqless', '\\u22db', 'mrel', 'ams');\ndefineSymbol('\\\\gtreqqless', '\\u2a8c', 'mrel', 'ams');\n\ndefineSymbol('\\\\supseteqq', '\\u2ac6', 'mrel', 'ams');\ndefineSymbol('\\\\Supset', '\\u22d1', 'mrel', 'ams');\ndefineSymbol('\\\\sqsupset', '\\u2290', 'mrel', 'ams');\ndefineSymbol('\\\\succcurlyeq', '\\u227d', 'mrel', 'ams');\ndefineSymbol('\\\\curlyeqsucc', '\\u22df', 'mrel', 'ams');\ndefineSymbol('\\\\Vdash', '\\u22a9', 'mrel', 'ams');\ndefineSymbol('\\\\shortmid', '\\u2223', 'mrel', 'ams');\ndefineSymbol('\\\\between', '\\u226c', 'mrel', 'ams');\ndefineSymbol('\\\\pitchfork', '\\u22d4', 'mrel', 'ams');\ndefineSymbol('\\\\varpropto', '\\u221d', 'mrel', 'ams');\ndefineSymbol('\\\\backepsilon', '\\u220d', 'mrel', 'ams');\ndefineSymbol('\\\\llless', '\\u22d8', 'mrel', 'ams');\ndefineSymbol('\\\\gggtr', '\\u22d9', 'mrel', 'ams');\ndefineSymbol('\\\\lhd', '\\u22b2', 'mbin', 'ams');\ndefineSymbol('\\\\rhd', '\\u22b3', 'mbin', 'ams');\n\ndefineSymbol('\\\\doteq', '\\u2250', 'mrel');\ndefineSymbol('\\\\doteqdot', '\\u2251', 'mrel', 'ams');\ndefineSymbol('\\\\Doteq', '\\u2251', 'mrel', 'ams');\ndefineSymbol('\\\\eqcirc', '\\u2256', 'mrel', 'ams');\ndefineSymbol('\\\\circeq', '\\u2257', 'mrel', 'ams');\ndefineSymbol('\\\\lessdot', '\\u22d6', 'mbin', 'ams');\ndefineSymbol('\\\\gtrdot', '\\u22d7', 'mbin', 'ams');\n\n// In TeX, '~' is a spacing command (non-breaking space).\n// However, '~' is used as an ASCII Math shortctut character, so define a \\\\~\n// command which maps to the '~' character\ndefineSymbol('\\\\~', '~', 'mrel');\n\ndefineSymbol('\\\\leftrightarrow', '\\u2194', 'mrel');\ndefineSymbol('\\\\Leftrightarrow', '\\u21d4', 'mrel');\ndefineSymbol('\\\\models', '\\u22a8', 'mrel');\ndefineSymbol('\\\\vdash', '\\u22a2', 'mrel');\n\ndefineSymbol('\\\\therefore', '\\u2234', 'mrel', 'ams');\ndefineSymbol('\\\\because', '\\u2235', 'mrel', 'ams');\ndefineSymbol('\\\\dashv', '\\u22a3', 'mrel');\ndefineSymbol('\\\\roundimplies', '\\u2970', 'mrel');\n\n// 'ams' Binary Operators\n\ndefineSymbol('+', '+', 'mbin');\ndefineSymbol('-', '\\u2212', 'mbin');\ndefineSymbol('\\u2212', '\\u2212', 'mbin');\ndefineSymbol('\\\\pm', '\\u00b1', 'mbin');\ndefineSymbol('\\\\mp', '\\u2213', 'mbin');\ndefineSymbol('*', '\\u2217', 'mbin');\ndefineSymbol('\\\\times', '\\u00d7', 'mbin');\ndefineSymbol('\\\\div', '\\u00f7', 'mbin');\ndefineSymbol('\\\\surd', '\\u221a');\n\ndefineSymbol('\\\\divides', '\\u2223', 'mbin');\n// From MnSymbol package\n\ndefineSymbol('\\\\ltimes', '\\u22c9', 'mbin', 'ams');\ndefineSymbol('\\\\rtimes', '\\u22ca', 'mbin', 'ams');\ndefineSymbol('\\\\leftthreetimes', '\\u22cb', 'mbin', 'ams');\ndefineSymbol('\\\\rightthreetimes', '\\u22cc', 'mbin', 'ams');\ndefineSymbol('\\\\intercal', '\\u22ba', 'mbin', 'ams');\ndefineSymbol('\\\\dotplus', '\\u2214', 'mbin', 'ams');\ndefineSymbol('\\\\doublebarwedge', '\\u2a5e', 'mbin', 'ams');\ndefineSymbol('\\\\divideontimes', '\\u22c7', 'mbin', 'ams');\ndefineSymbol('\\\\centerdot', '\\u22c5', 'mbin', 'ams');\ndefineSymbol('\\\\cdot', '\\u22c5', 'mbin');\n\ndefineSymbol('\\\\infty', '\\u221e');\ndefineSymbol('\\\\prime', '\\u2032');\ndefineSymbol('\\\\doubleprime', '\\u2033'); // NOTE: Not in TeX, but Mathematica\ndefineSymbol('\\\\angle', '\\u2220');\ndefineSymbol('`', '\\u2018');\ndefineSymbol('\\\\$', '$');\ndefineSymbol('\\\\%', '%');\ndefineSymbol('\\\\_', '_');\n\n// Note: In TeX, greek symbols are only available in Math mode\ndefineSymbol('\\\\alpha', '\\u03b1');\ndefineSymbol('\\\\beta', '\\u03b2');\ndefineSymbol('\\\\gamma', '\\u03b3');\ndefineSymbol('\\\\delta', '\\u03b4');\ndefineSymbol('\\\\epsilon', '\\u03f5');\ndefineSymbol('\\\\varepsilon', '\\u03b5');\ndefineSymbol('\\\\zeta', '\\u03b6');\ndefineSymbol('\\\\eta', '\\u03b7');\ndefineSymbol('\\\\theta', '\\u03b8');\ndefineSymbol('\\\\vartheta', '\\u03d1');\ndefineSymbol('\\\\iota', '\\u03b9');\ndefineSymbol('\\\\kappa', '\\u03ba');\ndefineSymbol('\\\\varkappa', '\\u03f0', 'mord', 'ams');\ndefineSymbol('\\\\lambda', '\\u03bb');\ndefineSymbol('\\\\mu', '\\u03bc');\ndefineSymbol('\\\\nu', '\\u03bd');\ndefineSymbol('\\\\xi', '\\u03be');\ndefineSymbol('\\\\omicron', 'o');\ndefineSymbol('\\\\pi', '\\u03c0');\ndefineSymbol('\\\\varpi', '\\u03d6');\ndefineSymbol('\\\\rho', '\\u03c1');\ndefineSymbol('\\\\varrho', '\\u03f1');\ndefineSymbol('\\\\sigma', '\\u03c3');\ndefineSymbol('\\\\varsigma', '\\u03c2');\ndefineSymbol('\\\\tau', '\\u03c4');\ndefineSymbol('\\\\phi', '\\u03d5');\ndefineSymbol('\\\\varphi', '\\u03c6');\ndefineSymbol('\\\\upsilon', '\\u03c5');\ndefineSymbol('\\\\chi', '\\u03c7');\ndefineSymbol('\\\\psi', '\\u03c8');\ndefineSymbol('\\\\omega', '\\u03c9');\n\ndefineSymbol('\\\\Gamma', '\\u0393');\ndefineSymbol('\\\\Delta', '\\u0394');\ndefineSymbol('\\\\Theta', '\\u0398');\ndefineSymbol('\\\\Lambda', '\\u039b');\ndefineSymbol('\\\\Xi', '\\u039e');\ndefineSymbol('\\\\Pi', '\\u03a0');\ndefineSymbol('\\\\Sigma', '\\u03a3');\ndefineSymbol('\\\\Upsilon', '\\u03a5');\ndefineSymbol('\\\\Phi', '\\u03a6');\ndefineSymbol('\\\\Psi', '\\u03a8');\ndefineSymbol('\\\\Omega', '\\u03a9');\n\n// 'ams' Greek\ndefineSymbol('\\\\digamma', '\\u03dd', 'mord', 'ams');\n\ndefineSymbol('\\\\emptyset', '\\u2205');\ndefineSymbol('\\\\varnothing', '\\u2205', 'mord', 'ams');\n\ndefineSymbol('\\\\cap', '\\u2229', 'mbin');\ndefineSymbol('\\\\cup', '\\u222a', 'mbin');\ndefineSymbol('\\\\setminus', '\\u2216', 'mbin');\ndefineSymbol('\\\\smallsetminus', '\\u2216', 'mbin', 'ams');\ndefineSymbol('\\\\complement', '\\u2201', 'mord', 'ams');\n\ndefineSymbol('\\\\in', '\\u2208', 'mrel');\ndefineSymbol('\\\\notin', '\\u2209', 'mrel');\ndefineSymbol('\\\\not', '\\u0338', 'mrel');\ndefineSymbol('\\\\ni', '\\u220b', 'mrel');\ndefineSymbol('\\\\owns', '\\u220b', 'mrel');\ndefineSymbol('\\\\subset', '\\u2282', 'mrel');\ndefineSymbol('\\\\supset', '\\u2283', 'mrel');\ndefineSymbol('\\\\subseteq', '\\u2286', 'mrel');\ndefineSymbol('\\\\supseteq', '\\u2287', 'mrel');\ndefineSymbol('\\\\subsetneq', '\\u228a', 'mrel', 'ams');\ndefineSymbol('\\\\varsubsetneq', '\\ue01a', 'mrel', 'ams');\ndefineSymbol('\\\\subsetneqq', '\\u2acb', 'mrel', 'ams');\ndefineSymbol('\\\\varsubsetneqq', '\\ue017', 'mrel', 'ams');\ndefineSymbol('\\\\nsubset', '\\u2284', 'mrel', 'ams'); // NOTE: Not TeX?\ndefineSymbol('\\\\nsupset', '\\u2285', 'mrel', 'ams'); // NOTE: Not TeX?\ndefineSymbol('\\\\nsubseteq', '\\u2288', 'mrel', 'ams');\ndefineSymbol('\\\\nsupseteq', '\\u2289', 'mrel', 'ams');\n\n// See http://tex.stackexchange.com/questions/41476/lengths-and-when-to-use-them\ndefineSymbol('\\\\ ', '\\u00a0', 'spacing');\ndefineSymbol('~', '\\u00a0', 'spacing');\ndefineSymbol('\\\\space', '\\u00a0', 'spacing');\n\ndefineSymbol('\\\\!', null, 'spacing');\ndefineSymbol('\\\\,', null, 'spacing');\ndefineSymbol('\\\\:', null, 'spacing');\ndefineSymbol('\\\\;', null, 'spacing');\ndefineSymbol('\\\\enskip', null, 'spacing');\n// \\enspace is a TeX command (not LaTeX) equivalent to a \\skip\ndefineSymbol('\\\\enspace', null, 'spacing');\ndefineSymbol('\\\\quad', null, 'spacing');\ndefineSymbol('\\\\qquad', null, 'spacing');\n\n// Punctuation\n\ndefineSymbol('\\\\colon', ':', 'mpunct');\ndefineSymbol('\\\\cdotp', '\\u22c5', 'mpunct');\ndefineSymbol('\\\\cdots', '\\u22ef', 'minner');\ndefineSymbol('\\\\ddots', '\\u22f1', 'minner');\ndefineSymbol('\\\\ldots', '\\u2026', 'minner');\ndefineSymbol('\\\\mathellipsis', '\\u2026', 'minner');\ndefineSymbol('\\\\vdots', '\\u22ee');\ndefineSymbol('\\\\ldotp', '\\u002e', 'mpunct');\ndefineSymbol(',', ',', 'mpunct');\ndefineSymbol(';', ';', 'mpunct');\n\ndefineSymbol('\\\\land', '\\u2227', 'mbin');\ndefineSymbol('\\\\wedge', '\\u2227', 'mbin');\ndefineSymbol('\\\\lor', '\\u2228', 'mbin');\ndefineSymbol('\\\\vee', '\\u2228', 'mbin');\ndefineSymbol('\\\\lnot', '\\u00ac');\ndefineSymbol('\\\\neg', '\\u00ac');\n\ndefineSymbol('\\\\barwedge', '\\u22bc', 'mbin', 'ams');\ndefineSymbol('\\\\veebar', '\\u22bb', 'mbin', 'ams');\ndefineSymbol('\\\\nor', '\\u22bb', 'mbin', 'ams'); // NOTE: Not TeX, Mathematica\ndefineSymbol('\\\\curlywedge', '\\u22cf', 'mbin', 'ams');\ndefineSymbol('\\\\curlyvee', '\\u22ce', 'mbin', 'ams');\n\ndefineSymbol('\\\\square', '\\u25a1', 'mord', 'ams');\ndefineSymbol('\\\\Box', '\\u25a1', 'mord', 'ams');\ndefineSymbol('\\\\blacksquare', '\\u25a0', 'mord', 'ams');\ndefineSymbol('\\\\boxminus', '\\u229f', 'mbin', 'ams');\ndefineSymbol('\\\\boxplus', '\\u229e', 'mbin', 'ams');\ndefineSymbol('\\\\boxtimes', '\\u22a0', 'mbin', 'ams');\ndefineSymbol('\\\\boxdot', '\\u22a1', 'mbin', 'ams');\n\ndefineSymbol('\\\\circ', '\\u2218', 'mbin');\ndefineSymbol('\\\\bigcirc', '\\u25ef', 'mbin');\ndefineSymbol('\\\\bullet', '\\u2219', 'mbin');\ndefineSymbol('\\\\circleddash', '\\u229d', 'mbin', 'ams');\ndefineSymbol('\\\\circledast', '\\u229b', 'mbin', 'ams');\ndefineSymbol('\\\\oplus', '\\u2295', 'mbin');\ndefineSymbol('\\\\ominus', '\\u2296', 'mbin');\ndefineSymbol('\\\\otimes', '\\u2297', 'mbin');\ndefineSymbol('\\\\odot', '\\u2299', 'mbin');\ndefineSymbol('\\\\circledcirc', '\\u229a', 'mbin', 'ams');\ndefineSymbol('\\\\oslash', '\\u2298', 'mbin');\ndefineSymbol('\\\\circledS', '\\u24c8', 'mord', 'ams');\ndefineSymbol('\\\\circledR', '\\u00ae', 'mord', 'ams');\n\ndefineSymbol('\\\\triangle', '\\u25b3');\ndefineSymbol('\\\\bigtriangleup', '\\u25b3', 'mbin');\ndefineSymbol('\\\\vartriangle', '\\u25b3', 'mrel', 'ams');\ndefineSymbol('\\\\triangleq', '\\u225c', 'mrel', 'ams');\n\ndefineSymbol('\\\\triangledown', '\\u25bd', 'mord', 'ams');\ndefineSymbol('\\\\bigtriangledown', '\\u25bd', 'mbin');\n\ndefineSymbol('\\\\triangleleft', '\\u25c3', 'mbin');\ndefineSymbol('\\\\vartriangleleft', '\\u22b2', 'mrel', 'ams');\ndefineSymbol('\\\\trianglelefteq', '\\u22b4', 'mrel', 'ams');\ndefineSymbol('\\\\ntriangleleft', '\\u22ea', 'mrel', 'ams');\ndefineSymbol('\\\\ntrianglelefteq', '\\u22ec', 'mrel', 'ams');\n\ndefineSymbol('\\\\triangleright', '\\u25b9', 'mbin');\ndefineSymbol('\\\\vartriangleright', '\\u22b3', 'mrel', 'ams');\ndefineSymbol('\\\\trianglerighteq', '\\u22b5', 'mrel', 'ams');\ndefineSymbol('\\\\ntriangleright', '\\u22eb', 'mrel', 'ams');\ndefineSymbol('\\\\ntrianglerighteq', '\\u22ed', 'mrel', 'ams');\n\ndefineSymbol('\\\\blacktriangle', '\\u25b2', 'mord', 'ams');\ndefineSymbol('\\\\blacktriangledown', '\\u25bc', 'mord', 'ams');\ndefineSymbol('\\\\blacktriangleleft', '\\u25c0', 'mrel', 'ams');\ndefineSymbol('\\\\blacktriangleright', '\\u25b6', 'mrel', 'ams');\n\ndefineSymbol('\\\\/', '/');\ndefineSymbol('|', '\\u2223', 'textord');\n\ndefineSymbol('\\\\And', '\\u0026', 'mbin');\ndefineSymbol('\\\\imath', '\\u0131');\ndefineSymbol('\\\\jmath', '\\u0237');\n\ndefineSymbol('\\\\degree', '\\u00b0');\n\ndefineSymbol(\"'\", '\\u2032'); // Prime\ndefineSymbol('\"', '\\u201D'); // Double Prime\n// defineSymbol( \"\\'', '\\u2033',  'mord',  MAIN);       // Double Prime\n","/**\n * This module deals with creating delimiters of various sizes. The TeXbook\n * discusses these routines on page 441-442, in the \"Another subroutine sets box\n * x to a specified variable delimiter\" paragraph.\n *\n * There are three main routines here. `makeSmallDelim` makes a delimiter in the\n * normal font, but in either text, script, or scriptscript style.\n * `makeLargeDelim` makes a delimiter in textstyle, but in one of the Size1,\n * Size2, Size3, or Size4 fonts. `makeStackedDelim` makes a delimiter out of\n * smaller pieces that are stacked on top of one another.\n *\n * The functions take a parameter `center`, which determines if the delimiter\n * should be centered around the axis.\n *\n * Then, there are three exposed functions. `sizedDelim` makes a delimiter in\n * one of the given sizes. This is used for things like `\\bigl`.\n * `customSizedDelim` makes a delimiter with a given total height+depth. It is\n * called in places like `\\sqrt`. `leftRightDelim` makes an appropriate\n * delimiter which surrounds an expression of a given height an depth. It is\n * used in `\\left` and `\\right`.\n * @summary   Handling of delimiters surrounds symbols.\n */\n\nimport { getValue } from './definitions';\nimport {\n    makeSymbol,\n    makeSpan,\n    makeVlist,\n    makeStyleWrap,\n    SpanType,\n    Span,\n} from './span';\nimport { Mathstyle, MATHSTYLES } from './mathstyle';\nimport { getCharacterMetrics, METRICS } from './font-metrics';\nimport { Context } from './context';\n/**\n * Makes a small delimiter. This is a delimiter that comes in the Main-Regular\n * font, but is restyled to either be in textstyle, scriptstyle, or\n * scriptscriptstyle.\n */\nfunction makeSmallDelim(\n    type: SpanType,\n    delim: string,\n    style: Mathstyle,\n    center: boolean,\n    context: Context,\n    classes = ''\n): Span {\n    const text = makeSymbol('Main-Regular', getValue('math', delim));\n\n    const span = makeStyleWrap(type, text, context.mathstyle, style, classes);\n\n    if (center) {\n        span.setTop(\n            (1 - context.mathstyle.sizeMultiplier / style.sizeMultiplier) *\n                context.mathstyle.metrics.axisHeight\n        );\n    }\n    span.setStyle('color', context.color);\n    if (typeof context.opacity === 'number') {\n        span.setStyle('opacity', context.opacity);\n    }\n\n    return span;\n}\n\n/**\n * Makes a large delimiter. This is a delimiter that comes in the Size1, Size2,\n * Size3, or Size4 fonts. It is always rendered in textstyle.\n */\nfunction makeLargeDelim(\n    type: SpanType,\n    delim: string,\n    size: number,\n    center: boolean,\n    context: Context,\n    classes = ''\n): Span {\n    const result = makeStyleWrap(\n        type,\n        makeSymbol(\n            'Size' + size + '-Regular',\n            getValue('math', delim),\n            'delimsizing size' + size\n        ),\n        context.mathstyle,\n        MATHSTYLES.textstyle,\n        classes\n    );\n\n    if (center) {\n        result.setTop(\n            (1 - context.mathstyle.sizeMultiplier) *\n                context.mathstyle.metrics.axisHeight\n        );\n    }\n    result.setStyle('color', context.color);\n    if (typeof context.opacity === 'number') {\n        result.setStyle('opacity', context.opacity);\n    }\n\n    return result;\n}\n\n/**\n * Make an inner span with the given offset and in the given font. This is used\n * in `makeStackedDelim` to make the stacking pieces for the delimiter.\n */\nfunction makeInner(symbol: string, font: string): Span {\n    let sizeClass = '';\n    // Apply the correct CSS class to choose the right font.\n    if (font === 'Size1-Regular') {\n        sizeClass = ' delim-size1';\n    } else if (font === 'Size4-Regular') {\n        sizeClass = ' delim-size4';\n    }\n\n    return makeSymbol(\n        font,\n        getValue('math', symbol),\n        'delimsizinginner' + sizeClass\n    );\n}\n\n/**\n * Make a stacked delimiter out of a given delimiter, with the total height at\n * least `heightTotal`. This routine is mentioned on page 442 of the TeXbook.\n */\nfunction makeStackedDelim(\n    type: SpanType,\n    delim: string,\n    heightTotal: number,\n    center: boolean,\n    context: Context,\n    classes = ''\n): Span {\n    // There are four parts, the top, an optional middle, a repeated part, and a\n    // bottom.\n    let top: string;\n    let middle: string;\n    let repeat: string;\n    let bottom: string;\n    top = repeat = bottom = getValue('math', delim);\n    middle = null;\n    // Also keep track of what font the delimiters are in\n    let font = 'Size1-Regular';\n\n    // We set the parts and font based on the symbol. Note that we use\n    // '\\u23d0' instead of '|' and '\\u2016' instead of '\\\\|' for the\n    // repeats of the arrows\n    if (\n        delim === '\\\\vert' ||\n        delim === '\\\\lvert' ||\n        delim === '\\\\rvert' ||\n        delim === '\\\\mvert' ||\n        delim === '\\\\mid'\n    ) {\n        repeat = top = bottom = '\\u2223';\n    } else if (\n        delim === '\\\\Vert' ||\n        delim === '\\\\lVert' ||\n        delim === '\\\\rVert' ||\n        delim === '\\\\mVert' ||\n        delim === '\\\\|'\n    ) {\n        repeat = top = bottom = '\\u2225';\n    } else if (delim === '\\\\uparrow') {\n        repeat = bottom = '\\u23d0';\n    } else if (delim === '\\\\Uparrow') {\n        repeat = bottom = '\\u2016';\n    } else if (delim === '\\\\downarrow') {\n        top = repeat = '\\u23d0';\n    } else if (delim === '\\\\Downarrow') {\n        top = repeat = '\\u2016';\n    } else if (delim === '\\\\updownarrow') {\n        top = '\\u2191';\n        repeat = '\\u23d0';\n        bottom = '\\u2193';\n    } else if (delim === '\\\\Updownarrow') {\n        top = '\\u21d1';\n        repeat = '\\u2016';\n        bottom = '\\u21d3';\n    } else if (delim === '[' || delim === '\\\\lbrack') {\n        top = '\\u23a1';\n        repeat = '\\u23a2';\n        bottom = '\\u23a3';\n        font = 'Size4-Regular';\n    } else if (delim === ']' || delim === '\\\\rbrack') {\n        top = '\\u23a4';\n        repeat = '\\u23a5';\n        bottom = '\\u23a6';\n        font = 'Size4-Regular';\n    } else if (delim === '\\\\lfloor') {\n        repeat = top = '\\u23a2';\n        bottom = '\\u23a3';\n        font = 'Size4-Regular';\n    } else if (delim === '\\\\lceil') {\n        top = '\\u23a1';\n        repeat = bottom = '\\u23a2';\n        font = 'Size4-Regular';\n    } else if (delim === '\\\\rfloor') {\n        repeat = top = '\\u23a5';\n        bottom = '\\u23a6';\n        font = 'Size4-Regular';\n    } else if (delim === '\\\\rceil') {\n        top = '\\u23a4';\n        repeat = bottom = '\\u23a5';\n        font = 'Size4-Regular';\n    } else if (delim === '(') {\n        top = '\\u239b';\n        repeat = '\\u239c';\n        bottom = '\\u239d';\n        font = 'Size4-Regular';\n    } else if (delim === ')') {\n        top = '\\u239e';\n        repeat = '\\u239f';\n        bottom = '\\u23a0';\n        font = 'Size4-Regular';\n    } else if (delim === '\\\\{' || delim === '\\\\lbrace') {\n        top = '\\u23a7';\n        middle = '\\u23a8';\n        bottom = '\\u23a9';\n        repeat = '\\u23aa';\n        font = 'Size4-Regular';\n    } else if (delim === '\\\\}' || delim === '\\\\rbrace') {\n        top = '\\u23ab';\n        middle = '\\u23ac';\n        bottom = '\\u23ad';\n        repeat = '\\u23aa';\n        font = 'Size4-Regular';\n    } else if (delim === '\\\\lgroup') {\n        top = '\\u23a7';\n        bottom = '\\u23a9';\n        repeat = '\\u23aa';\n        font = 'Size4-Regular';\n    } else if (delim === '\\\\rgroup') {\n        top = '\\u23ab';\n        bottom = '\\u23ad';\n        repeat = '\\u23aa';\n        font = 'Size4-Regular';\n    } else if (delim === '\\\\lmoustache') {\n        top = '\\u23a7';\n        bottom = '\\u23ad';\n        repeat = '\\u23aa';\n        font = 'Size4-Regular';\n    } else if (delim === '\\\\rmoustache') {\n        top = '\\u23ab';\n        bottom = '\\u23a9';\n        repeat = '\\u23aa';\n        font = 'Size4-Regular';\n    } else if (delim === '\\\\surd') {\n        top = '\\ue001';\n        bottom = '\\u23b7';\n        repeat = '\\ue000';\n        font = 'Size4-Regular';\n    } else if (delim === '\\\\ulcorner') {\n        top = '\\u250c';\n        repeat = bottom = ' ';\n    } else if (delim === '\\\\urcorner') {\n        top = '\\u2510';\n        repeat = bottom = ' ';\n    } else if (delim === '\\\\llcorner') {\n        bottom = '\\u2514';\n        repeat = top = ' ';\n    } else if (delim === '\\\\lrcorner') {\n        top = '\\u2518';\n        repeat = top = ' ';\n    }\n\n    // Get the metrics of the four sections\n    const topMetrics = getCharacterMetrics(getValue('math', top), font);\n    const topHeightTotal = topMetrics.height + topMetrics.depth;\n    const repeatMetrics = getCharacterMetrics(getValue('math', repeat), font);\n    const repeatHeightTotal = repeatMetrics.height + repeatMetrics.depth;\n    const bottomMetrics = getCharacterMetrics(getValue('math', bottom), font);\n    const bottomHeightTotal = bottomMetrics.height + bottomMetrics.depth;\n    let middleHeightTotal = 0;\n    let middleFactor = 1;\n    if (middle !== null) {\n        const middleMetrics = getCharacterMetrics(\n            getValue('math', middle),\n            font\n        );\n        middleHeightTotal = middleMetrics.height + middleMetrics.depth;\n        middleFactor = 2; // repeat symmetrically above and below middle\n    }\n\n    // Calculate the minimal height that the delimiter can have.\n    // It is at least the size of the top, bottom, and optional middle combined.\n    const minHeight = topHeightTotal + bottomHeightTotal + middleHeightTotal;\n\n    // Compute the number of copies of the repeat symbol we will need\n    const repeatCount = Math.ceil(\n        (heightTotal - minHeight) / (middleFactor * repeatHeightTotal)\n    );\n\n    // Compute the total height of the delimiter including all the symbols\n    const realHeightTotal =\n        minHeight + repeatCount * middleFactor * repeatHeightTotal;\n\n    // The center of the delimiter is placed at the center of the axis. Note\n    // that in this context, 'center' means that the delimiter should be\n    // centered around the axis in the current style, while normally it is\n    // centered around the axis in textstyle.\n    let axisHeight = context.mathstyle.metrics.axisHeight;\n    if (center) {\n        axisHeight *= context.mathstyle.sizeMultiplier;\n    }\n    // Calculate the depth\n    const depth = realHeightTotal / 2 - axisHeight;\n\n    // Now, we start building the pieces that will go into the vlist\n\n    // Keep a list of the inner pieces\n    const inners = [];\n\n    // Add the bottom symbol\n    inners.push(makeInner(bottom, font));\n\n    if (middle === null) {\n        // Add that many symbols\n        for (let i = 0; i < repeatCount; i++) {\n            inners.push(makeInner(repeat, font));\n        }\n    } else {\n        // When there is a middle bit, we need the middle part and two repeated\n        // sections\n        for (let i = 0; i < repeatCount; i++) {\n            inners.push(makeInner(repeat, font));\n        }\n        inners.push(makeInner(middle, font));\n        for (let i = 0; i < repeatCount; i++) {\n            inners.push(makeInner(repeat, font));\n        }\n    }\n\n    // Add the top symbol\n    inners.push(makeInner(top, font));\n\n    // Finally, build the vlist\n    const inner = makeVlist(context, inners, 'bottom', depth);\n    inner.setStyle('color', context.color);\n    if (typeof context.opacity === 'number') {\n        inner.setStyle('opacity', context.opacity);\n    }\n\n    return makeStyleWrap(\n        type,\n        makeSpan(inner, 'delimsizing mult'),\n        context.mathstyle,\n        MATHSTYLES.textstyle,\n        classes\n    );\n}\n\n// There are three kinds of delimiters, delimiters that stack when they become\n// too large\nconst stackLargeDelimiters = [\n    '(',\n    ')',\n    '[',\n    '\\\\lbrack',\n    ']',\n    '\\\\rbrack',\n    '\\\\{',\n    '\\\\lbrace',\n    '\\\\}',\n    '\\\\rbrace',\n    '\\\\lfloor',\n    '\\\\rfloor',\n    '\\\\lceil',\n    '\\\\rceil',\n    '\\\\surd',\n];\n\n// delimiters that always stack\nconst stackAlwaysDelimiters = [\n    '\\\\uparrow',\n    '\\\\downarrow',\n    '\\\\updownarrow',\n    '\\\\Uparrow',\n    '\\\\Downarrow',\n    '\\\\Updownarrow',\n    '|',\n    '\\\\|',\n    '\\\\vert',\n    '\\\\Vert',\n    '\\\\lvert',\n    '\\\\rvert',\n    '\\\\lVert',\n    '\\\\rVert',\n    '\\\\mvert',\n    '\\\\mid',\n    '\\\\lgroup',\n    '\\\\rgroup',\n    '\\\\lmoustache',\n    '\\\\rmoustache',\n];\n\n// and delimiters that never stack\nconst stackNeverDelimiters = [\n    '<',\n    '>',\n    '\\\\langle',\n    '\\\\rangle',\n    '/',\n    '\\\\backslash',\n    '\\\\lt',\n    '\\\\gt',\n];\n\n// Metrics of the different sizes. Found by looking at TeX's output of\n// $\\bigl| // \\Bigl| \\biggl| \\Biggl| \\showlists$\n// Used to create stacked delimiters of appropriate sizes in makeSizedDelim.\nconst sizeToMaxHeight = [0, 1.2, 1.8, 2.4, 3.0];\n\n/**\n * Used to create a delimiter of a specific size, where `size` is 1, 2, 3, or 4.\n */\nexport function makeSizedDelim(\n    type: SpanType,\n    delim: string,\n    size: number,\n    context: Context,\n    classes = ''\n): Span {\n    if (delim === '.') {\n        // Empty delimiters still count as elements, even though they don't\n        // show anything.\n        return makeNullFence(type, context, classes);\n        // return makeSpan('', classes);\n    }\n\n    // < and > turn into \\langle and \\rangle in delimiters\n    if (delim === '<' || delim === '\\\\lt') {\n        delim = '\\\\langle';\n    } else if (delim === '>' || delim === '\\\\gt') {\n        delim = '\\\\rangle';\n    }\n\n    // Sized delimiters are never centered.\n    if (\n        stackLargeDelimiters.includes(delim) ||\n        stackNeverDelimiters.includes(delim)\n    ) {\n        return makeLargeDelim(type, delim, size, false, context, classes);\n    } else if (stackAlwaysDelimiters.includes(delim)) {\n        return makeStackedDelim(\n            type,\n            delim,\n            sizeToMaxHeight[size],\n            false,\n            context,\n            classes\n        );\n    }\n    console.assert(false, \"Unknown delimiter '\" + delim + \"'\");\n    return null;\n}\n\n/*\n * There are three different sequences of delimiter sizes that the delimiters\n * follow depending on the kind of delimiter. This is used when creating custom\n * sized delimiters to decide whether to create a small, large, or stacked\n * delimiter.\n *\n * In real TeX, these sequences aren't explicitly defined, but are instead\n * defined inside the font metrics. Since there are only three sequences that\n * are possible for the delimiters that TeX defines, it is easier to just encode\n * them explicitly here.\n */\n\ninterface DelimiterInfo {\n    type: 'small' | 'large' | 'stack';\n    mathstyle?: Mathstyle;\n    size?: 1 | 2 | 3 | 4;\n}\n\n// Delimiters that never stack try small delimiters and large delimiters only\nconst stackNeverDelimiterSequence: DelimiterInfo[] = [\n    { type: 'small', mathstyle: MATHSTYLES.scriptscriptstyle },\n    { type: 'small', mathstyle: MATHSTYLES.scriptstyle },\n    { type: 'small', mathstyle: MATHSTYLES.textstyle },\n    { type: 'large', size: 1 },\n    { type: 'large', size: 2 },\n    { type: 'large', size: 3 },\n    { type: 'large', size: 4 },\n];\n\n// Delimiters that always stack try the small delimiters first, then stack\nconst stackAlwaysDelimiterSequence: DelimiterInfo[] = [\n    { type: 'small', mathstyle: MATHSTYLES.scriptscriptstyle },\n    { type: 'small', mathstyle: MATHSTYLES.scriptstyle },\n    { type: 'small', mathstyle: MATHSTYLES.textstyle },\n    { type: 'stack' },\n];\n\n// Delimiters that stack when large try the small and then large delimiters, and\n// stack afterwards\nconst stackLargeDelimiterSequence: DelimiterInfo[] = [\n    { type: 'small', mathstyle: MATHSTYLES.scriptscriptstyle },\n    { type: 'small', mathstyle: MATHSTYLES.scriptstyle },\n    { type: 'small', mathstyle: MATHSTYLES.textstyle },\n    { type: 'large', size: 1 },\n    { type: 'large', size: 2 },\n    { type: 'large', size: 3 },\n    { type: 'large', size: 4 },\n    { type: 'stack' },\n];\n\n/*\n * Get the font used in a delimiter based on what kind of delimiter it is.\n */\nfunction delimTypeToFont(info: DelimiterInfo): string {\n    if (info.type === 'small') {\n        return 'Main-Regular';\n    } else if (info.type === 'large') {\n        return 'Size' + info.size + '-Regular';\n    }\n    console.assert(info.type === 'stack');\n    return 'Size4-Regular';\n}\n\n/**\n * Traverse a sequence of types of delimiters to decide what kind of delimiter\n * should be used to create a delimiter of the given height+depth.\n * @param delim - a character value (not a command)\n */\nfunction traverseSequence(\n    delim: string,\n    height: number,\n    sequence: DelimiterInfo[],\n    context: Context\n): DelimiterInfo {\n    // Here, we choose the index we should start at in the sequences. In smaller\n    // sizes (which correspond to larger numbers in style.size) we start earlier\n    // in the sequence. Thus, scriptscript starts at index 3-3=0, script starts\n    // at index 3-2=1, text starts at 3-1=2, and display starts at min(2,3-0)=2\n    const start = Math.min(2, 3 - context.mathstyle.size);\n    for (let i = start; i < sequence.length; i++) {\n        if (sequence[i].type === 'stack') {\n            // This is always the last delimiter, so we just break the loop now.\n            break;\n        }\n\n        const metrics = getCharacterMetrics(\n            delim,\n            delimTypeToFont(sequence[i])\n        );\n        if (metrics.defaultMetrics) {\n            // If we don't have metrics info for this character,\n            // assume we'll construct as a small delimiter\n            return { type: 'small', mathstyle: MATHSTYLES.scriptstyle };\n        }\n        let heightDepth = metrics.height + metrics.depth;\n\n        // Small delimiters are scaled down versions of the same font, so we\n        // account for the style change size.\n\n        if (sequence[i].type === 'small') {\n            heightDepth *= sequence[i].mathstyle.sizeMultiplier;\n        }\n\n        // Check if the delimiter at this size works for the given height.\n        if (heightDepth > height) {\n            return sequence[i];\n        }\n    }\n\n    // If we reached the end of the sequence, return the last sequence element.\n    return sequence[sequence.length - 1];\n}\n\n/**\n * Make a delimiter of a given height+depth, with optional centering. Here, we\n * traverse the sequences, and create a delimiter that the sequence tells us to.\n *\n * @param type - 'mopen' or 'mclose'\n */\nexport function makeCustomSizedDelim(\n    type: SpanType,\n    delim: string,\n    height: number,\n    center: boolean,\n    context: Context,\n    classes = ''\n): Span {\n    if (!delim || delim.length === 0 || delim === '.') {\n        return makeNullFence(type, context, type);\n    }\n\n    if (delim === '<' || delim === '\\\\lt') {\n        delim = '\\\\langle';\n    } else if (delim === '>' || delim === '\\\\gt') {\n        delim = '\\\\rangle';\n    }\n\n    // Decide what sequence to use\n    let sequence: DelimiterInfo[];\n    if (stackNeverDelimiters.includes(delim)) {\n        sequence = stackNeverDelimiterSequence;\n    } else if (stackLargeDelimiters.includes(delim)) {\n        sequence = stackLargeDelimiterSequence;\n    } else {\n        sequence = stackAlwaysDelimiterSequence;\n    }\n\n    // Look through the sequence\n    const delimType = traverseSequence(\n        getValue('math', delim),\n        height,\n        sequence,\n        context\n    );\n\n    // Depending on the sequence element we decided on,\n    // call the appropriate function.\n    if (delimType.type === 'small') {\n        return makeSmallDelim(\n            type,\n            delim,\n            delimType.mathstyle,\n            center,\n            context,\n            'ML__small-delim ' + classes\n        );\n    }\n    if (delimType.type === 'large') {\n        return makeLargeDelim(\n            type,\n            delim,\n            delimType.size,\n            center,\n            context,\n            classes\n        );\n    }\n    console.assert(delimType.type === 'stack');\n    return makeStackedDelim(type, delim, height, center, context, classes);\n}\n\n/**\n * Make a delimiter for use with `\\left` and `\\right`, given a height and depth\n * of an expression that the delimiters surround.\n * See tex.web:14994\n */\nexport function makeLeftRightDelim(\n    type: SpanType,\n    delim: string,\n    height: number,\n    depth: number,\n    context: Context,\n    classes = ''\n): Span {\n    // If this is the empty delimiter, return a null fence\n    if (delim === '.') {\n        return makeNullFence(type, context, classes);\n    }\n\n    // We always center \\left/\\right delimiters, so the axis is always shifted\n    const axisHeight =\n        context.mathstyle.metrics.axisHeight * context.mathstyle.sizeMultiplier;\n\n    // Taken from TeX source, tex.web, function make_left_right\n    const delimiterFactor = 901; // plain.tex:327, texboox:152\n    const delimiterShortfall = 5.0 / METRICS.ptPerEm; // plain.tex:345, texboox:152\n\n    const maxDistFromAxis = Math.max(height - axisHeight, depth + axisHeight);\n    const totalHeight = Math.max(\n        (maxDistFromAxis / 500) * delimiterFactor,\n        2 * maxDistFromAxis - delimiterShortfall\n    );\n\n    // Finally, we defer to `makeCustomSizedDelim` with our calculated total\n    // height\n    return makeCustomSizedDelim(\n        type,\n        delim,\n        totalHeight,\n        true,\n        context,\n        classes\n    );\n}\n\n/**\n *\n * @param type either 'mopen', 'mclose' or null\n */\nfunction makeNullFence(\n    type: SpanType,\n    context: Context,\n    classes: string\n): Span {\n    return makeSpan(\n        '',\n        'sizing' + // @todo not useful, redundant with 'nulldelimiter'\n        // 'reset-' + context.size, 'size5',                 // @todo: that seems like a lot of resizing... do we need both?\n        context.mathstyle.adjustTo(MATHSTYLES.textstyle) +\n        ' nulldelimiter ' + // The null delimiter has a width, specified by class 'nulldelimiter'\n            (classes || ''),\n        type\n    );\n}\n","import { isArray, isFunction } from '../common/types';\n\nimport type { Atom } from './atom';\nimport { emit as emitDefinition } from './definitions';\nimport { joinLatex, emitLatexRun, getPropertyRuns } from './modes-utils';\nimport { colorToString } from './color';\n\n// See https://tex.stackexchange.com/questions/58098/what-are-all-the-font-styles-i-can-use-in-math-mode\n\n/*\n * Return an array of runs with the same mode\n */\nfunction getModeRuns(atoms: Atom[]): Atom[][] {\n    const result = [];\n    let run = [];\n    let currentMode = 'NONE';\n    atoms.forEach((atom) => {\n        if (atom.type !== 'first') {\n            if (atom.mode !== currentMode) {\n                if (run.length > 0) result.push(run);\n                run = [atom];\n                currentMode = atom.mode;\n            } else {\n                run.push(atom);\n            }\n        }\n    });\n    // Push whatever is left\n    if (run.length > 0) result.push(run);\n    return result;\n}\n\n/**\n *\n * @param {Atom} parent the parent or predecessor of the atom list\n * @param {Atom[]} atoms the list of atoms to transform to LaTeX\n * @param {boolean} expandMacro true if macros should be expanded\n * @result {string} a LaTeX string\n */\nfunction latexifyArray(parent, atoms, expandMacro): string {\n    if (atoms.length === 0) return '';\n    if (atoms[0].type === 'first') {\n        if (atoms.length === 1) return '';\n        // Remove the 'first' atom, if present\n        atoms = atoms.slice(1);\n    }\n    if (atoms.length === 0) return '';\n\n    return joinLatex(\n        getPropertyRuns(atoms, 'cssClass').map((x) => {\n            const result = joinLatex(\n                getPropertyRuns(x, 'color').map((x) =>\n                    joinLatex(\n                        getModeRuns(x).map((x) =>\n                            emitLatexRun(parent, x, expandMacro)\n                        )\n                    )\n                )\n            );\n            if (\n                x[0].cssClass &&\n                (!parent || parent.cssClass !== x[0].cssClass)\n            ) {\n                if (x[0].cssClass === 'ML__boldsymbol') {\n                    return '\\\\boldsymbol{' + result + '}';\n                } else if (x[0].cssClass === 'ML__emph') {\n                    return '\\\\emph{' + result + '}';\n                }\n                return '\\\\class{' + x[0].cssClass + '}{' + result + '}';\n            }\n            return result;\n        })\n    );\n}\n\n/**\n * Given an atom or an array of atoms, return a LaTeX string representation\n */\nfunction latexify(\n    parent: Atom,\n    value: boolean | number | string | Atom | Atom[],\n    expandMacro: boolean\n): string {\n    let result = '';\n    if (isArray(value)) {\n        result = latexifyArray(parent, value, expandMacro);\n    } else if (typeof value === 'number' || typeof value === 'boolean') {\n        result = value.toString();\n    } else if (typeof value === 'string') {\n        result = value.replace(/\\s/g, '~');\n    } else if (value && isFunction(value.toLatex)) {\n        result = value.toLatex(expandMacro);\n    }\n    return result;\n}\n\n/**\n * Return a LaTeX representation of the atom.\n *\n * @param {boolean} expandMacro - If true, macros are fully expanded. This will\n * no longer round-trip.\n *\n */\nexport function atomToLatex(atom: Atom, expandMacro: boolean): string {\n    expandMacro = typeof expandMacro === 'undefined' ? false : expandMacro;\n    // If we have some verbatim latex for this atom, use it.\n    // This allow non-significant punctuation to be preserved when possible.\n    if (!expandMacro && atom.latex) {\n        return atom.latex;\n    }\n    let result = '';\n    let col = 0;\n    let row = 0;\n    let i = 0;\n    const command = atom.symbol;\n    const emit = (parent: Atom, atom: string | number | Atom[]): string =>\n        latexify(parent, atom, expandMacro);\n\n    // atom.mode=='text' is handled in the switch by looking at atom.type===''\n    switch (atom.type) {\n        case 'group':\n            if (command) {\n                // This is a macro\n                result = expandMacro ? emit(atom, atom.body) : atom.latex;\n            } else {\n                result =\n                    atom.latexOpen || (atom.cssId || atom.cssClass ? '' : '{');\n\n                if (atom.cssId) result += '\\\\cssId{' + atom.cssId + '}{';\n\n                if (atom.cssClass === 'ML__emph') {\n                    result += `\\\\emph{${emit(atom, atom.body)}`;\n                } else {\n                    if (atom.cssClass) {\n                        result += '\\\\class{' + atom.cssClass + '}{';\n                    }\n                    result += emit(atom, atom.body);\n\n                    if (atom.cssClass) result += '}';\n                }\n                if (atom.cssId) result += '}';\n\n                result +=\n                    atom.latexClose || (atom.cssId || atom.cssClass ? '' : '}');\n            }\n            break;\n\n        case 'array':\n            result += '\\\\begin{' + atom.environmentName + '}';\n            if (atom.environmentName === 'array') {\n                result += '{';\n                if (atom.colFormat) {\n                    for (i = 0; i < atom.colFormat.length; i++) {\n                        if (atom.colFormat[i].align) {\n                            result += atom.colFormat[i].align;\n                        } else if (atom.colFormat[i].rule) {\n                            result += '|';\n                        }\n                    }\n                }\n                result += '}';\n            }\n            for (row = 0; row < atom.array.length; row++) {\n                for (col = 0; col < atom.array[row].length; col++) {\n                    if (col > 0) result += ' & ';\n                    result += emit(atom, atom.array[row][col]);\n                }\n                // Adds a separator between rows (but not after the last row)\n                if (row < atom.array.length - 1) {\n                    result += ' \\\\\\\\ ';\n                }\n            }\n            result += '\\\\end{' + atom.environmentName + '}';\n            break;\n\n        case 'root':\n            result = emit(atom, atom.body);\n            break;\n\n        case 'leftright':\n            if (atom.inner) {\n                result += '\\\\left' + (atom.leftDelim || '.');\n                if (atom.leftDelim && atom.leftDelim.length > 1) result += ' ';\n                result += emit(atom, atom.body);\n                result += '\\\\right' + (atom.rightDelim || '.');\n                if (atom.rightDelim && atom.rightDelim.length > 1) {\n                    result += ' ';\n                }\n            } else {\n                if (expandMacro) {\n                    // If we're in 'expandMacro' mode (i.e. interchange format\n                    // used, e.g., on the clipboard for maximum compatibility\n                    // with other LaTeX renderers), drop the `\\mleft(` and `\\mright`)\n                    // commands\n                    result += atom.leftDelim === '.' ? '' : atom.leftDelim;\n                    result += emit(atom, atom.body);\n                    result += atom.rightDelim === '.' ? '' : atom.rightDelim;\n                } else {\n                    result += '\\\\mleft' + (atom.leftDelim || '.');\n                    if (atom.leftDelim && atom.leftDelim.length > 1) {\n                        result += ' ';\n                    }\n                    result += emit(atom, atom.body);\n                    result += '\\\\mright' + (atom.rightDelim || '.');\n                    if (atom.rightDelim && atom.rightDelim.length > 1) {\n                        result += ' ';\n                    }\n                }\n            }\n            break;\n\n        case 'delim':\n        case 'sizeddelim':\n            result += command + '{' + atom.delim + '}';\n            break;\n\n        case 'rule':\n            result += command;\n            if (atom.shift) {\n                result += `[${emit(atom, atom.shift)}em]`;\n            }\n            result += `{${emit(atom, atom.width)}em}{${emit(\n                atom,\n                atom.height\n            )}em}`;\n            break;\n\n        case 'mord':\n        case 'minner':\n        case 'mbin':\n        case 'mrel':\n        case 'mpunct':\n        case 'mopen':\n        case 'mclose':\n        case 'textord':\n            if (command === '\\\\char\"') {\n                result += atom.latex;\n            } else {\n                result += emitDefinition(command, null, atom, emit);\n            }\n            break;\n\n        case 'mop':\n            if (atom.body !== '\\u200b') {\n                // Not ZERO-WIDTH\n                if (command === '\\\\mathop') {\n                    // The argument to mathop is math, therefor atom.body can be an expression\n                    result += command + '{' + emit(atom, atom.body) + '}';\n                } else if (command === '\\\\operatorname') {\n                    // The argument to `\\operatorname` is 'math' and needs to be latexified\n                    result += command + '{' + emit(atom, atom.body) + '}';\n                } else {\n                    result += command;\n                    if (/^\\\\.*[a-zA-Z0-9]$/.test(command)) {\n                        // Add a space after commands, to avoid, e.g.\n                        // '\\sin' + 'x' -> '\\sinx' instead of '\\sin x'\n                        result += ' ';\n                    }\n                }\n            }\n            if (atom.explicitLimits) {\n                if (atom.limits === 'limits') result += '\\\\limits ';\n                if (atom.limits === 'nolimits') result += '\\\\nolimits ';\n            }\n            break;\n\n        case 'spacing':\n            // Three kinds of spacing commands:\n            // \\hskip and \\kern which take one implicit parameter\n            // \\hspace and hspace* with take one *explicit* parameter\n            // \\quad, etc... which take no parameters.\n            result += command;\n            if (command === '\\\\hspace' || command === '\\\\hspace*') {\n                result += '{';\n                if (atom.width) {\n                    result += atom.width + 'em';\n                } else {\n                    result += '0em';\n                }\n                result += '}';\n            } else {\n                result += ' ';\n                if (atom.width) {\n                    result += atom.width + 'em ';\n                }\n            }\n\n            break;\n\n        case 'enclose':\n            result += command;\n            if (command === '\\\\enclose') {\n                result += '{' + Object.keys(atom.notation).join(' ') + '}';\n\n                // \\enclose can have optional parameters...\n                let style = '';\n                let sep = '';\n                if (\n                    atom.backgroundColor &&\n                    atom.backgroundColor !== 'transparent'\n                ) {\n                    style +=\n                        sep +\n                        'mathbackground=\"' +\n                        colorToString(atom.backgroundColor) +\n                        '\"';\n                    sep = ',';\n                }\n                if (atom.shadow && atom.shadow !== 'auto') {\n                    style += sep + 'shadow=\"' + atom.shadow + '\"';\n                    sep = ',';\n                }\n                if (atom.strokeWidth !== 1 || atom.strokeStyle !== 'solid') {\n                    style += sep + atom.borderStyle;\n                    sep = ',';\n                } else if (\n                    atom.strokeColor &&\n                    atom.strokeColor !== 'currentColor'\n                ) {\n                    style +=\n                        sep +\n                        'mathcolor=\"' +\n                        colorToString(atom.strokeColor) +\n                        '\"';\n                    sep = ',';\n                }\n\n                if (style) {\n                    result += `[${style}]`;\n                }\n            }\n            result += `{${emit(atom, atom.body)}}`;\n            break;\n\n        case 'mathstyle':\n            result += '\\\\' + atom.mathstyle;\n            break;\n\n        case 'space':\n            result += atom.symbol;\n            break;\n\n        case 'placeholder':\n            result += '\\\\placeholder{}';\n            break;\n\n        case 'first':\n        case 'command':\n        case 'msubsup':\n            break;\n\n        case 'error':\n            result += atom.latex;\n            break;\n\n        case '':\n            console.assert(\n                atom.mode === 'text',\n                'Null atom type in mode ' + atom.mode\n            );\n            console.error('Attempting to emit a text atom');\n            break;\n\n        default:\n            result = emitDefinition(command, parent, atom, emit);\n            console.assert(\n                !!result,\n                'Missing custom emiter for ',\n                command || atom.body\n            );\n            if (!result) {\n                result += command;\n            }\n\n            break;\n    }\n    if (atom.superscript) {\n        let sup = emit(atom, atom.superscript);\n        if (sup.length === 1) {\n            if (sup === '\\u2032') {\n                // PRIME\n                sup = '\\\\prime ';\n            } else if (sup === '\\u2033') {\n                // DOUBLE-PRIME\n                sup = '\\\\doubleprime ';\n            }\n            result += '^' + sup;\n        } else {\n            result += '^{' + sup + '}';\n        }\n    }\n    if (atom.subscript) {\n        const sub = emit(atom, atom.subscript);\n        if (sub.length === 1) {\n            result += '_' + sub;\n        } else {\n            result += '_{' + sub + '}';\n        }\n    }\n    return result;\n}\n","import { isArray } from '../common/types';\n\nimport { Context, ContextInterface, ParseModePrivate } from './context';\nimport {\n    Style,\n    ParseMode,\n    Variant,\n    VariantStyle,\n    FontShape,\n    FontSeries,\n} from '../public/core';\nimport { MATHSTYLES } from './mathstyle';\nimport { METRICS as FONTMETRICS } from './font-metrics';\nimport {\n    makeSpan,\n    makeVlist,\n    depth as spanDepth,\n    height as spanHeight,\n    italic as spanItalic,\n    SpanType,\n    isSpanType,\n    Span,\n} from './span';\nimport { makeSizedDelim } from './delimiters';\nimport { atomToLatex } from './atom-to-latex';\n\nexport type Notations = {\n    downdiagonalstrike?: boolean;\n    updiagonalstrike?: boolean;\n    verticalstrike?: boolean;\n    horizontalstrike?: boolean;\n    right?: boolean;\n    bottom?: boolean;\n    left?: boolean;\n    top?: boolean;\n    circle?: boolean;\n    roundedbox?: boolean;\n    madruwb?: boolean;\n    actuarial?: boolean;\n    box?: boolean;\n};\nexport type AtomType =\n    | ''\n    | 'array'\n    | 'box'\n    | 'command'\n    | 'delim'\n    | 'enclose'\n    | 'error'\n    | 'first'\n    | 'genfrac'\n    | 'group'\n    | 'leftright'\n    | 'mathstyle' // @revisit\n    | 'mbin'\n    | 'mclose'\n    | 'minner'\n    | 'mop'\n    | 'mopen'\n    | 'mord'\n    | 'mpunct'\n    | 'mrel'\n    | 'msubsup'\n    | 'none' // @revisit\n    | 'overlap'\n    | 'overunder'\n    | 'placeholder'\n    | 'root'\n    | 'rule'\n    | 'sizeddelim'\n    | 'space'\n    | 'spacing'\n    | 'surd'\n    | 'textord';\n\nexport type Colspec = {\n    gap?: number | Atom[];\n    // 'm' is a special alignement for multline: left on first row, right on last\n    // row, centered otherwise\n    align?: 'l' | 'c' | 'r' | 'm';\n    rule?: boolean;\n};\nexport type BBoxParam = {\n    backgroundcolor?: string;\n    padding?: number;\n    border?: string;\n};\n\nexport const ATOM_REGISTRY = {};\n\n// A table of size -> font size for the different sizing functions\nexport const SIZING_MULTIPLIER = {\n    size1: 0.5,\n    size2: 0.7,\n    size3: 0.8,\n    size4: 0.9,\n    size5: 1.0,\n    size6: 1.2,\n    size7: 1.44,\n    size8: 1.73,\n    size9: 2.07,\n    size10: 2.49,\n};\n\nexport function registerAtomType(\n    name: string,\n    decompose: (context: Context, atom: Atom) => Span[]\n): void {\n    ATOM_REGISTRY[name] = { decompose: decompose };\n}\n\n/**\n * Return a list of spans equivalent to atoms.\n * A span is the most elementary type possible, for example 'text'\n * or 'vlist', while the input atoms may be more abstract and complex,\n * such as 'genfrac'\n *\n * @param context Font family, variant, size, color, and other info useful\n * to render an expression\n * @param atoms - A single atom or an array of atoms\n */\nexport function decompose(\n    inputContext: ContextInterface,\n    atoms: Atom | Atom[]\n): Span[] | null {\n    function isDigit(atom: Atom): boolean {\n        return (\n            atom.type === 'mord' &&\n            !!atom.symbol &&\n            /^[0-9,.]$/.test(atom.symbol)\n        );\n    }\n    function isText(atom: Atom): boolean {\n        return atom.mode === 'text';\n    }\n\n    // We can be passed either a Context object, or\n    // a simple object with some properties set.\n    const context: Context =\n        inputContext instanceof Context\n            ? inputContext\n            : new Context(inputContext);\n\n    // In most cases we want to display selection,\n    // except if the atomIdsSettings.groupNumbers flag is set which is used for\n    // read aloud.\n    const displaySelection =\n        !context.atomIdsSettings || !context.atomIdsSettings.groupNumbers;\n\n    let result: Span[] | null = [];\n    if (isArray(atoms)) {\n        if (atoms.length === 0) {\n            return [];\n        } else if (atoms.length === 1) {\n            result = atoms[0].decompose(context);\n            if (result && displaySelection && atoms[0].isSelected) {\n                result.forEach((x: Span) => x.selected(true));\n            }\n            console.assert(!result || isArray(result));\n        } else {\n            let previousType = 'none';\n            let nextType = atoms[1].type;\n            let selection: Span[] = [];\n            let digitOrTextStringID = '';\n            let lastWasDigit = true;\n            let phantomBase = null;\n            for (let i = 0; i < atoms.length; i++) {\n                // Is this a binary operator ('+', '-', etc...) that potentially\n                // needs to be adjusted to a unary operator?\n                //\n                // When preceded by a mbin, mopen, mrel, mpunct, mop or\n                // when followed by a mrel, mclose or mpunct\n                // or if preceded or followed by no sibling, a 'mbin' becomes a\n                // 'mord'\n                if (atoms[i].type === 'mbin') {\n                    if (\n                        /first|none|mrel|mpunct|mopen|mbin|mop/.test(\n                            previousType\n                        ) ||\n                        /none|mrel|mpunct|mclose/.test(nextType)\n                    ) {\n                        atoms[i].type = 'mord';\n                    }\n                }\n\n                // If this is a scaffolding supsub, we'll use the\n                // phantomBase from the previous atom to position the supsub.\n                // Otherwise, no need for the phantomBase\n                if (\n                    atoms[i].body !== '\\u200b' ||\n                    (!atoms[i].superscript && !atoms[i].subscript)\n                ) {\n                    phantomBase = null;\n                }\n\n                if (\n                    context.atomIdsSettings?.groupNumbers &&\n                    digitOrTextStringID &&\n                    ((lastWasDigit && isDigit(atoms[i])) ||\n                        (!lastWasDigit && isText(atoms[i])))\n                ) {\n                    context.atomIdsSettings.overrideID = digitOrTextStringID;\n                }\n                const span = atoms[i].decompose(context, phantomBase);\n                if (context.atomIdsSettings) {\n                    context.atomIdsSettings.overrideID = null;\n                }\n                if (span) {\n                    // The result from decompose is always an array\n                    // Flatten it (i.e. [[a1, a2], b1, b2] -> [a1, a2, b1, b2]\n                    const flat = [].concat(...span);\n                    phantomBase = flat;\n\n                    // If this is a digit or text run, keep track of it\n                    if (context.atomIdsSettings?.groupNumbers) {\n                        if (isDigit(atoms[i]) || isText(atoms[i])) {\n                            if (\n                                !digitOrTextStringID ||\n                                lastWasDigit !== isDigit(atoms[i])\n                            ) {\n                                // changed from text to digits or vice-versa\n                                lastWasDigit = isDigit(atoms[i]);\n                                digitOrTextStringID = atoms[i].id;\n                            }\n                        }\n                        if (\n                            (!(isDigit(atoms[i]) || isText(atoms[i])) ||\n                                atoms[i].superscript ||\n                                atoms[i].subscript) &&\n                            digitOrTextStringID\n                        ) {\n                            // Done with digits/text\n                            digitOrTextStringID = '';\n                        }\n                    }\n\n                    if (displaySelection && atoms[i].isSelected) {\n                        selection = selection.concat(flat);\n                        selection.forEach((x: Span) => x.selected(true));\n                    } else {\n                        if (selection.length > 0) {\n                            // There was a selection, but we're out of it now\n                            // Append the selection\n                            result = [...result, ...selection];\n                            selection = [];\n                        }\n                        result = result.concat(flat);\n                    }\n                }\n\n                // Since the next atom (and this atom!) could have children\n                // use getFinal...() and getInitial...() to get the closest\n                // atom linearly.\n                previousType = atoms[i].getFinalBaseElement().type;\n                nextType = atoms[i + 1]\n                    ? atoms[i + 1].getInitialBaseElement().type\n                    : 'none';\n            }\n\n            // Is there a leftover selection?\n            if (selection.length > 0) {\n                result = [...result, ...selection];\n                selection = [];\n            }\n        }\n    } else if (atoms) {\n        // This is a single atom, decompose it\n        result = atoms.decompose(context);\n        if (result && displaySelection && atoms.isSelected) {\n            result.forEach((x: Span) => x.selected(true));\n        }\n    }\n\n    if (!result || result.length === 0) return null;\n\n    console.assert(isArray(result) && result.length > 0);\n\n    // If the mathstyle changed between the parent and the current atom,\n    // account for the size difference\n    if (context.mathstyle !== context.parentMathstyle) {\n        const factor =\n            context.mathstyle.sizeMultiplier /\n            context.parentMathstyle.sizeMultiplier;\n        for (const span of result) {\n            console.assert(!isArray(span));\n            console.assert(\n                typeof span.height === 'number' && isFinite(span.height)\n            );\n            span.height *= factor;\n            span.depth *= factor;\n        }\n    }\n    // If the size changed between the parent and the current group,\n    // account for the size difference\n    if (context.size !== context.parentSize) {\n        const factor =\n            SIZING_MULTIPLIER[context.size] /\n            SIZING_MULTIPLIER[context.parentSize];\n        for (const span of result) {\n            console.assert(!isArray(span));\n            console.assert(\n                typeof span.height === 'number' && isFinite(span.height)\n            );\n            span.height *= factor;\n            span.depth *= factor;\n        }\n    }\n\n    return result;\n}\n\n/**\n * An atom is an object encapsulating an elementary mathematical unit,\n * independent of its graphical representation.\n *\n * It keeps track of the content, while the dimensions, position and style\n * are tracked by Span objects which are created by the `decompose()` functions.\n *\n * @param style A set of additional properties to append to\n * the atom\n * @property {string} mode `'display'`, `'command'`, etc...\n * @property {string} type - Type can be one of:\n * - `mord`: ordinary symbol, e.g. `x`, `\\alpha`\n * - `textord`: ordinary characters\n * - `mop`: operators, including special functions, `\\sin`, `\\sum`, `\\cap`.\n * - `mbin`: binary operator: `+`, `*`, etc...\n * - `mrel`: relational operator: `=`, `\\ne`, etc...\n * - `mpunct`: punctuation: `,`, `:`, etc...\n * - `mopen`: opening fence: `(`, `\\langle`, etc...\n * - `mclose`: closing fence: `)`, `\\rangle`, etc...\n * - `minner`: special layout cases, overlap, `\\left...\\right`\n *\n * In addition to these basic types, which correspond to the TeX atom types,\n * some atoms represent more complex compounds, including:\n * - `space` and `spacing`: blank space between atoms\n * - `mathstyle`: to change the math style used: `display` or `text`.\n * The layout rules are different for each, the latter being more compact and\n * intended to be incorporated with surrounding non-math text.\n * - `root`: a group, which has no parent (only one per formula)\n * - `group`: a simple group of atoms, for example from a `{...}`\n * - `sizing`: set the size of the font used\n * - `rule`: draw a line, for the `\\rule` command\n * - `line`: used by `\\overline` and `\\underline` commands\n * - `box`: a border drawn around an expression and change its background color\n * - `overlap`: display a symbol _over_ another\n * - `overunder`: displays an annotation above or below a symbol\n * - `array`: a group, which has children arranged in rows. Used\n * by environments such as `matrix`, `cases`, etc...\n * - `genfrac`: a generalized fraction: a numerator and denominator, separated\n * by an optional line, and surrounded by optional fences\n * - `surd`: a surd, aka root\n * - `leftright`: used by the `\\left` and `\\right` commands\n * - `delim`: some delimiter\n * - `sizeddelim`: a delimiter that can grow\n *\n * The following types are used by the editor:\n * - `command` indicate a command being entered. The text is displayed in\n * blue in the editor.\n * - `error`: indicate a command that is unknown, for example `\\xyzy`. The text\n * is displayed with a wavy red underline in the editor.\n * - `placeholder`: indicate a temporary item. Placeholders are displayed\n * as a dashed square in the editor.\n * - `first`: a special, empty, atom put as the first atom in math lists in\n * order to be able to position the caret before the first element. Aside from\n * the caret, they display nothing.\n *\n * @property {boolean} captureSelection if true, this atom does not let its\n * children be selected. Used by the `\\enclose` annotations, for example.\n *\n * @property {boolean} skipBoundary if true, when the caret reaches the\n * first position in this element's body, it automatically moves to the\n * outside of the element. Conversely, when the caret reaches the position\n * right after this element, it automatically moves to the last position\n * inside this element.\n */\nexport class Atom implements Style {\n    mode: ParseModePrivate;\n    type: AtomType;\n    latex?: string;\n    symbol?: string; // Latex command ('\\sin') or character ('a')\n    isSymbol?: boolean;\n    isFunction?: boolean;\n    error?: boolean; // Indicate an unknown command\n    suggestion?: boolean; // This atom is a suggestion\n\n    latexOpen?: string; // type = 'group'\n    latexClose?: string; // type = 'group'\n\n    body?: string | Atom[];\n    codepoint?: number; // type = 'mord'\n    accent?: string; // type = 'accent'\n    svgAccent?: string; // type = 'accent'\n    svgBody?: string;\n    svgAbove?: string; // type = 'overunder'\n    svgBelow?: string; // type = 'overunder'\n\n    index?: Atom[]; // type = 'surd'\n\n    denom?: Atom[]; // type = 'genfrac'\n    numer?: Atom[]; // type = 'genfrac'\n    numerPrefix?: string; // type = 'genfrac'\n    denomPrefix?: string; // type = 'genfrac'\n    continuousFraction?: boolean; // type = 'genfrac'\n    hasBarLine?: boolean; // type = 'genfrac'\n\n    // type = 'array'\n    arraystretch?: number;\n    arraycolsep?: number;\n    jot?: number;\n    lFence?: string; // @revisit: use leftDelim\n    rFence?: string; // @revisit: use leftDelim\n\n    subscript?: Atom[];\n    superscript?: Atom[];\n    underscript?: Atom[];\n    overscript?: Atom[];\n\n    position: string; // type = 'line'\n\n    limits?: 'limits' | 'nolimits' | 'accent' | 'overunder';\n    explicitLimits?: boolean;\n\n    array?: Atom[][][]; // type = 'array'\n    rowGaps?: number[]; // type = 'array'\n    // env: { name: string; tabular: boolean }; // type = 'array'\n    environmentName?: string; // type = 'array'\n\n    inner?: boolean;\n    leftDelim?: string;\n    rightDelim?: string;\n    delim?: string;\n    size?: 1 | 2 | 3 | 4; // type = 'sizeddelim' @revisit Use maxFontSize? or fontSize?\n\n    framecolor?: string; // type = 'box'\n    verbatimFramecolor?: string; // type = 'box'\n    backgroundcolor?: string; // type = 'box'\n    verbatimBackgroundcolor?: string; // type = 'box'\n    padding?: number; // type = 'box'\n    border?: string; // type = 'box'\n\n    colFormat?: Colspec[]; // when type = 'array', formating of columns\n    notation?: Notations; // when type = 'enclose'\n    shadow?: string; // when type = 'enclose', CSS shadow\n    strokeWidth?: number; // when type = 'enclose'\n    strokeStyle?: string; // when type = 'enclose', CSS string\n    svgStrokeStyle?: string; // when type = 'enclose', CSS string\n    strokeColor?: string; // when type = 'enclose', CSS string\n    borderStyle?: string; // when type = 'enclose', CSS string\n\n    width?: number;\n    height?: number;\n    maxFontSize?: number;\n    depth?: number;\n    shift?: number;\n    align?: 'left' | 'right';\n\n    skipBoundary?: boolean;\n    // selected?: boolean;\n    isSelected?: boolean;\n    caret: ParseMode | '';\n    containsCaret: boolean; // If the atom or one of its descendant includes the caret\n\n    mathstyle?:\n        | 'auto'\n        | 'displaystyle'\n        | 'textstyle'\n        | 'scriptstyle'\n        | 'scriptscriptstyle'; // type = 'genfrac', ''\n\n    cls?: SpanType;\n\n    color?: string;\n    backgroundColor?: string;\n    variant?: Variant;\n    variantStyle?: VariantStyle;\n    fontFamily?: string;\n    fontShape?: FontShape;\n    fontSeries?: FontSeries;\n    fontSize?: string;\n    cssId?: string;\n    cssClass?: string;\n    letterShapeStyle?: 'tex' | 'french' | 'iso' | 'upright' | 'auto';\n\n    phantom?: boolean;\n\n    captureSelection?: boolean;\n\n    id?: string;\n\n    constructor(\n        mode: ParseModePrivate,\n        type: AtomType,\n        body: string | Atom[] = '',\n        style: Style = {}\n    ) {\n        console.assert(type === 'first' || !!mode);\n        this.mode = mode;\n        this.type = type;\n        this.body = body;\n\n        // Append all the properties in extras to this\n        // This can override the mode, type and body\n        this.applyStyle(style);\n    }\n    toLatex(expandMacro = false): string {\n        return atomToLatex(this, expandMacro);\n    }\n    getStyle(): Style {\n        return {\n            mode: this.mode,\n            color: this.phantom ? 'transparent' : this.color,\n            backgroundColor: this.phantom\n                ? 'transparent'\n                : this.backgroundColor,\n            variant: this.variant,\n            variantStyle: this.variantStyle,\n            fontFamily: this.fontFamily,\n            fontShape: this.fontShape,\n            fontSeries: this.fontSeries,\n            fontSize: this.fontSize,\n            cssId: this.cssId,\n            cssClass: this.cssClass,\n        };\n    }\n\n    applyStyle(style: Style): void {\n        Object.assign(this, style);\n\n        if (this.fontFamily === 'none') {\n            this.fontFamily = '';\n        }\n        if (this.fontShape === 'auto') {\n            this.fontShape = '';\n        }\n        if (this.fontSeries === 'auto') {\n            this.fontSeries = '';\n        }\n        if (this.color === 'none') {\n            this.color = '';\n        }\n        if (this.backgroundColor === 'none') {\n            this.backgroundColor = '';\n        }\n        if (this.fontSize === 'auto') {\n            this.fontSize = '';\n        }\n\n        if (this.fontSize) {\n            this.maxFontSize = SIZING_MULTIPLIER[this.fontSize];\n        }\n\n        if (this.mode === 'text') {\n            // @revisit. Use type = 'text' for text atoms?\n            // A root can be in text mode (root created when creating a representation\n            // of the selection, for copy/paste for example)\n            if (this.type !== 'root') this.type = '';\n        }\n    }\n\n    getInitialBaseElement(): Atom {\n        let result: Atom;\n        if (isArray(this.body) && this.body.length > 0) {\n            if (this.body[0].type !== 'first') {\n                result = this.body[0].getInitialBaseElement();\n            } else if (this.body[1]) {\n                result = this.body[1].getInitialBaseElement();\n            }\n        }\n        return result || this;\n    }\n\n    getFinalBaseElement(): Atom {\n        if (isArray(this.body) && this.body.length > 0) {\n            return this.body[this.body.length - 1].getFinalBaseElement();\n        }\n        return this;\n    }\n\n    isCharacterBox(): boolean {\n        const base = this.getInitialBaseElement();\n        return /minner|mbin|mrel|mpunct|mopen|mclose|textord/.test(base.type);\n    }\n\n    forEach(cb: (arg0: this) => void): void {\n        cb(this);\n        if (isArray(this.body)) {\n            for (const atom of this.body) if (atom) atom.forEach(cb);\n        } else if (this.body && typeof this.body === 'object') {\n            // Note: body can be null, for example 'first' or 'rule'\n            // (and null is an object)\n            cb(this.body);\n        }\n        if (this.superscript) {\n            for (const atom of this.superscript) if (atom) atom.forEach(cb);\n        }\n        if (this.subscript) {\n            for (const atom of this.subscript) if (atom) atom.forEach(cb);\n        }\n        if (this.overscript) {\n            for (const atom of this.overscript) if (atom) atom.forEach(cb);\n        }\n        if (this.underscript) {\n            for (const atom of this.underscript) if (atom) atom.forEach(cb);\n        }\n        if (this.numer) {\n            for (const atom of this.numer) if (atom) atom.forEach(cb);\n        }\n        if (this.denom) {\n            for (const atom of this.denom) if (atom) atom.forEach(cb);\n        }\n        if (this.index) {\n            for (const atom of this.index) if (atom) atom.forEach(cb);\n        }\n        if (this.array) {\n            for (const row of this.array) {\n                for (const cell of row) {\n                    for (const atom of cell) atom.forEach(cb);\n                }\n            }\n        }\n    }\n\n    /**\n     * Iterate over all the child atoms of this atom, this included,\n     * and return an array of all the atoms for which the predicate callback\n     * is true.\n     */\n    filter(cb: (atom: Atom) => boolean): Atom[] {\n        let result: Atom[] = [];\n        if (cb(this)) result.push(this);\n        for (const relation of [\n            'body',\n            'superscript',\n            'subscript',\n            'overscript',\n            'underscript',\n            'numer',\n            'denom',\n            'index',\n        ]) {\n            if (isArray(this[relation])) {\n                for (const atom of this[relation]) {\n                    if (atom) result = result.concat(atom.filter(cb));\n                }\n            }\n        }\n        if (isArray(this.array)) {\n            for (const row of this.array) {\n                for (const cell of row) {\n                    if (cell) result = result.concat(cell.filter(cb));\n                }\n            }\n        }\n        return result;\n    }\n\n    decomposeGroup(context: Context): Span {\n        // The scope of the context is this group, so clone it\n        // so that any changes to it will be discarded when finished\n        // with this group.\n        // Note that the mathstyle property is optional and could be undefined\n        // If that's the case, clone() returns a clone of the\n        // context with the same mathstyle.\n        const localContext = context.clone({\n            mathstyle: this.mathstyle ? MATHSTYLES[this.mathstyle] : undefined,\n        });\n        const span = makeSpan(\n            decompose(localContext, this.body as Atom[]),\n            '',\n            'mord'\n        ); // @revisit\n        if (this.cssId) span.cssId = this.cssId;\n        span.applyStyle({\n            backgroundColor: this.backgroundColor,\n            cssClass: this.cssClass,\n        });\n        return span;\n    }\n\n    decomposeOverlap(context: Context): Span {\n        const inner = makeSpan(\n            decompose(context, this.body as Atom[]),\n            'inner'\n        ); // @revisit\n        return makeSpan(\n            [inner, makeSpan(null, 'fix')],\n            this.align === 'left' ? 'llap' : 'rlap',\n            'mord'\n        );\n    }\n\n    decomposeRule(context: Context): Span {\n        const mathstyle = context.mathstyle;\n        const result = makeSpan('', 'rule', 'mord');\n        let shift = this.shift && !isNaN(this.shift) ? this.shift : 0;\n        shift = shift / mathstyle.sizeMultiplier;\n        const width = this.width / mathstyle.sizeMultiplier;\n        const height = this.height / mathstyle.sizeMultiplier;\n        result.setStyle('border-right-width', width, 'em');\n        result.setStyle('border-top-width', height, 'em');\n        result.setStyle('margin-top', -(height - shift), 'em');\n        result.setStyle('border-color', context['color']); // @revisit\n        result.width = width;\n        result.height = height + shift;\n        result.depth = -shift;\n        return result;\n    }\n\n    /**\n     * Return a representation of this, but decomposed in an array of Spans\n     *\n     * @param context Font variant, size, color, etc...\n     * @param phantomBase If not null, the spans to use to\n     * calculate the placement of the supsub\n     */\n    decompose(\n        context: Context,\n        phantomBase: Span[] | null = null\n    ): Span[] | null {\n        let result: Span | Span[] | null = null;\n        if (\n            !this.type ||\n            /mord|minner|mbin|mrel|mpunct|mopen|mclose|textord/.test(this.type)\n        ) {\n            // The body of these atom types is *often* a string, but it can\n            // be a atom list (for example a command inside a \\text{} or \\mathop{})\n            if (typeof this.body === 'string') {\n                result = this.makeSpan(context, this.body);\n            } else {\n                result = this.makeSpan(\n                    context,\n                    decompose(context, this.body as Atom[])\n                );\n            }\n            result.type = isSpanType(this.type) ? this.type : '';\n        } else if (this.type === 'group' || this.type === 'root') {\n            result = this.decomposeGroup(context);\n        } else if (this.type === 'delim') {\n            result = makeSpan(null, '');\n            result.delim = this.delim;\n        } else if (this.type === 'sizeddelim') {\n            result = this.bind(\n                context,\n                makeSizedDelim(this.cls, this.delim, this.size, context)\n            );\n        } else if (this.type === 'overlap') {\n            // For llap (18), rlap (270), clap (0)\n            // smash (common), mathllap (0), mathrlap (0), mathclap (0)\n            // See https://www.tug.org/TUGboat/tb22-4/tb72perlS.pdf\n            // and https://tex.stackexchange.com/questions/98785/what-are-the-different-kinds-of-vertical-spacing-and-horizontal-spacing-commands\n            result = this.decomposeOverlap(context);\n        } else if (this.type === 'rule') {\n            result = this.decomposeRule(context);\n        } else if (this.type === 'msubsup') {\n            // The caret for this atom type is handled by its elements\n            result = makeSpan('\\u200b', '', 'mord');\n            if (phantomBase) {\n                result.height = phantomBase[0].height;\n                result.depth = phantomBase[0].depth;\n            }\n        } else if (this.type === 'space') {\n            // A space literal\n            result = this.makeSpan(context, ' ');\n        } else if (this.type === 'spacing') {\n            // A spacing command (\\quad, etc...)\n            if (this.body === '\\u200b') {\n                // ZERO-WIDTH SPACE\n                result = this.makeSpan(context, '\\u200b');\n            } else if (this.body === '\\u00a0') {\n                if (this.mode === 'math') {\n                    result = this.makeSpan(context, ' ');\n                } else {\n                    result = this.makeSpan(context, '\\u00a0');\n                }\n            } else if (this.width) {\n                result = makeSpan('\\u200b', 'mspace ');\n                if (this.width > 0) {\n                    result.setWidth(this.width);\n                } else {\n                    result.setStyle('margin-left', this.width, 'em');\n                }\n            } else {\n                const spacingCls =\n                    {\n                        qquad: 'qquad',\n                        quad: 'quad',\n                        enspace: 'enspace',\n                        ';': 'thickspace',\n                        ':': 'mediumspace',\n                        ',': 'thinspace',\n                        '!': 'negativethinspace',\n                    }[this.body as string] || 'quad';\n                result = makeSpan('\\u200b', 'mspace ' + spacingCls);\n            }\n        } else if (this.type === 'mathstyle') {\n            context.setMathstyle(this.mathstyle);\n        } else if (this.type === 'command' || this.type === 'error') {\n            console.assert(typeof this.body === 'string');\n            result = this.makeSpan(context, this.body as string);\n            result.classes = ''; // Override fonts and other attributes.\n            if (this.error) {\n                result.classes += ' ML__error';\n            }\n            if (this.suggestion) {\n                result.classes += ' ML__suggestion';\n            }\n        } else if (this.type === 'placeholder') {\n            result = this.makeSpan(context, '⬚');\n        } else if (this.type === 'first') {\n            // the `first` pseudo-type is used as a placeholder as\n            // the first element in a children list. This makes\n            // managing the list, and the caret selection, easier.\n            // ZERO-WIDTH SPACE\n            result = this.makeSpan(context, '\\u200b');\n        } else {\n            console.assert(\n                ATOM_REGISTRY[this.type],\n                'Unknown Atom type: \"' + this.type + '\"'\n            );\n            result = ATOM_REGISTRY[this.type].decompose(context, this);\n        }\n        if (!result) return null;\n        if (\n            this.caret &&\n            this.type !== 'msubsup' &&\n            this.type !== 'command' &&\n            this.type !== 'placeholder' &&\n            this.type !== 'first'\n        ) {\n            if (isArray(result)) {\n                result[result.length - 1].caret = this.caret;\n            } else {\n                result.caret = this.caret;\n            }\n        }\n        if (this.containsCaret) {\n            if (isArray(result)) {\n                // For a /mleft.../mright, tag the first and last atom in the\n                // list with the \"ML__contains-caret\" style (it's the open and\n                // closing fence, respectively)\n                result[0].classes =\n                    (result[0].classes || '') + ' ML__contains-caret';\n                result[result.length - 1].classes =\n                    (result[result.length - 1].classes || '') +\n                    ' ML__contains-caret';\n            } else {\n                result.classes = (result.classes || '') + ' ML__contains-caret';\n            }\n        }\n        // Finally, attach any necessary superscript, subscripts\n        if (!this.limits && (this.superscript || this.subscript)) {\n            // If `limits` is set, the attachment of sup/sub was handled\n            // in the atom decomposition (e.g. mop, accent)\n            if (isArray(result)) {\n                const lastSpan = result[result.length - 1];\n                result[result.length - 1] = this.attachSupsub(\n                    context,\n                    lastSpan,\n                    lastSpan.type\n                );\n            } else {\n                result = [this.attachSupsub(context, result, result.type)];\n            }\n        }\n        return isArray(result) ? result : [result];\n    }\n\n    attachSupsub(context: Context, nucleus: Span, type: SpanType): Span {\n        // If no superscript or subscript, nothing to do.\n        if (!this.superscript && !this.subscript) return nucleus;\n        // Superscript and subscripts are discussed in the TeXbook\n        // on page 445-446, rules 18(a-f).\n        // TeX:14859-14945\n        const mathstyle = context.mathstyle;\n        let supmid = null;\n        let submid = null;\n        if (this.superscript) {\n            const sup = decompose(context.sup(), this.superscript);\n            supmid = makeSpan(sup, mathstyle.adjustTo(mathstyle.sup()));\n        }\n        if (this.subscript) {\n            const sub = decompose(context.sub(), this.subscript);\n            submid = makeSpan(sub, mathstyle.adjustTo(mathstyle.sub()));\n        }\n        // Rule 18a, p445\n        let supShift = 0;\n        let subShift = 0;\n        if (!this.isCharacterBox()) {\n            supShift = spanHeight(nucleus) - mathstyle.metrics.supDrop;\n            subShift = spanDepth(nucleus) + mathstyle.metrics.subDrop;\n        }\n        // Rule 18c, p445\n        let minSupShift: number;\n        if (mathstyle === MATHSTYLES.displaystyle) {\n            minSupShift = mathstyle.metrics.sup1; // sigma13\n        } else if (mathstyle.cramped) {\n            minSupShift = mathstyle.metrics.sup3; // sigma15\n        } else {\n            minSupShift = mathstyle.metrics.sup2; // sigma14\n        }\n        // scriptspace is a font-size-independent size, so scale it\n        // appropriately @revisit: do we really need to do this scaling? It's in em...\n        const multiplier =\n            MATHSTYLES.textstyle.sizeMultiplier * mathstyle.sizeMultiplier;\n        const scriptspace = 0.5 / FONTMETRICS.ptPerEm / multiplier;\n        let supsub = null;\n        if (submid && supmid) {\n            // Rule 18e\n            supShift = Math.max(\n                supShift,\n                minSupShift,\n                supmid.depth + 0.25 * mathstyle.metrics.xHeight\n            );\n            subShift = Math.max(subShift, mathstyle.metrics.sub2);\n            const ruleWidth = FONTMETRICS.defaultRuleThickness;\n            if (\n                supShift - spanDepth(supmid) - (spanHeight(submid) - subShift) <\n                4 * ruleWidth\n            ) {\n                subShift =\n                    4 * ruleWidth -\n                    (supShift - supmid.depth) +\n                    spanHeight(submid);\n                const psi =\n                    0.8 * mathstyle.metrics.xHeight -\n                    (supShift - spanDepth(supmid));\n                if (psi > 0) {\n                    supShift += psi;\n                    subShift -= psi;\n                }\n            }\n            supsub = makeVlist(\n                context,\n                [submid, subShift, supmid, -supShift],\n                'individualShift'\n            );\n            // Subscripts shouldn't be shifted by the nucleus' italic correction.\n            // Account for that by shifting the subscript back the appropriate\n            // amount. Note we only do this when the nucleus is a single symbol.\n            if (this.isSymbol) {\n                supsub.children[0].setLeft(-spanItalic(nucleus));\n            }\n        } else if (submid && !supmid) {\n            // Rule 18b\n            subShift = Math.max(\n                subShift,\n                mathstyle.metrics.sub1,\n                spanHeight(submid) - 0.8 * mathstyle.metrics.xHeight\n            );\n            supsub = makeVlist(context, [submid], 'shift', subShift);\n            supsub.children[0].setRight(scriptspace);\n            if (this.isCharacterBox()) {\n                supsub.children[0].setLeft(-spanItalic(nucleus));\n            }\n        } else if (!submid && supmid) {\n            // Rule 18c, d\n            supShift = Math.max(\n                supShift,\n                minSupShift,\n                supmid.depth + 0.25 * mathstyle.metrics.xHeight\n            );\n            supsub = makeVlist(context, [supmid], 'shift', -supShift);\n            supsub.children[0].setRight(scriptspace);\n        }\n        // Display the caret *following* the superscript and subscript,\n        // so attach the caret to the 'msubsup' element.\n        const supsubContainer = makeSpan(supsub, 'msubsup');\n        if (this.caret) {\n            supsubContainer.caret = this.caret;\n            this.caret = '';\n        }\n        return makeSpan([nucleus, supsubContainer], '', type);\n    }\n\n    attachLimits(\n        context: Context,\n        nucleus: Span,\n        nucleusShift: number,\n        slant: number\n    ): Span {\n        const limitAbove = this.superscript\n            ? makeSpan(\n                  decompose(context.sup(), this.superscript),\n                  context.mathstyle.adjustTo(context.mathstyle.sup())\n              )\n            : null;\n        const limitBelow = this.subscript\n            ? makeSpan(\n                  decompose(context.sub(), this.subscript),\n                  context.mathstyle.adjustTo(context.mathstyle.sub())\n              )\n            : null;\n        return makeLimitsStack(\n            context,\n            nucleus,\n            nucleusShift,\n            slant,\n            limitAbove,\n            limitBelow\n        );\n    }\n\n    /**\n     * Add an ID attribute to both the span and this atom so that the atom\n     * can be retrieved from the span later on (e.g. when the span is clicked on)\n     */\n    bind(context: Context, span: Span): Span {\n        if (this.type !== 'first' && this.body !== '\\u200b') {\n            this.id = makeID(context);\n            if (this.id) {\n                if (!span.attributes) span.attributes = {};\n                span.attributes['data-atom-id'] = this.id;\n            }\n        }\n        return span;\n    }\n\n    /**\n     * Create a span with the specified body and with a class attribute\n     * equal to the type ('mbin', 'inner', 'spacing', etc...)\n     *\n     */\n    makeSpan(context: Context, body: string | Span | Span[]): Span {\n        // Ensure that the atom type is a valid Span type, or use ''\n        console.assert(isSpanType(this.type));\n        const type: SpanType =\n            this.type === 'textord'\n                ? 'mord'\n                : isSpanType(this.type)\n                ? this.type\n                : '';\n        const result = makeSpan(body, '', type);\n\n        // The font family is determined by:\n        // - the base font family associated with this atom (optional). For example,\n        // some atoms such as some functions ('\\sin', '\\cos', etc...) or some\n        // symbols ('\\Z') have an explicit font family. This overrides any\n        // other font family\n        // - the user-specified font family that has been explicitly applied to\n        // this atom\n        // - the font family automatically determined in math mode, for example\n        // which italicizes some characters, but which can be overridden\n\n        const style = this.getStyle();\n        style.letterShapeStyle = context.letterShapeStyle;\n        result.applyStyle(style);\n\n        // Apply size correction\n        const size = style?.fontSize ? style.fontSize : 'size5';\n        if (size !== context.parentSize) {\n            result.classes += ' sizing reset-' + context.parentSize;\n            result.classes += ' ' + size;\n        } else if (context.parentSize !== context.size) {\n            result.classes += ' sizing reset-' + context.parentSize;\n            result.classes += ' ' + context.size;\n        }\n        result.maxFontSize = Math.max(\n            result.maxFontSize,\n            context.mathstyle.sizeMultiplier || 1.0\n        );\n\n        // Set other attributes\n\n        if (this.mode === 'text') result.classes += ' ML__text';\n        if (context.mathstyle.isTight()) result.isTight = true;\n        // The italic correction applies only in math mode\n        if (this.mode !== 'math') result.italic = 0;\n        result.setRight(result.italic); // Italic correction\n\n        if (typeof context.opacity === 'number') {\n            result.setStyle('opacity', context.opacity);\n        }\n\n        // To retrieve the atom from a span, for example when the span is clicked\n        // on, attach a randomly generated ID to the span and associate it\n        // with the atom.\n        this.bind(context, result);\n        if (this.caret) {\n            // If this has a super/subscript, the caret will be attached\n            // to the 'msubsup' atom, so no need to have it here.\n            if (!this.superscript && !this.subscript) {\n                result.caret = this.caret;\n                this.caret = '';\n                if (context.mathstyle.isTight()) result.isTight = true;\n            }\n        }\n        return result;\n    }\n}\n\nfunction makeID(context: Context): string {\n    let result: string;\n    if (context.atomIdsSettings) {\n        if (typeof context.atomIdsSettings.seed === 'number') {\n            result = context.atomIdsSettings.overrideID\n                ? context.atomIdsSettings.overrideID\n                : context.atomIdsSettings.seed.toString(36);\n            context.atomIdsSettings.seed += 1;\n        } else {\n            result =\n                Date.now().toString(36).slice(-2) +\n                Math.floor(Math.random() * 0x186a0).toString(36);\n        }\n    }\n    return result;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Combine a nucleus with an atom above and an atom below. Used to form\n * limits.\n *\n * @param context\n * @param nucleus The base over and under which the atoms will\n * be placed.\n * @param nucleusShift The vertical shift of the nucleus from\n * the baseline.\n * @param slant For operators that have a slant, such as \\int,\n * indicate by how much to horizontally offset the above and below atoms\n */\nfunction makeLimitsStack(\n    context: Context,\n    nucleus: Span,\n    nucleusShift: number,\n    slant: number,\n    above: Span,\n    below: Span\n): Span {\n    // If nothing above and nothing below, nothing to do.\n    if (!above && !below) return nucleus;\n\n    // IE8 clips \\int if it is in a display: inline-block. We wrap it\n    // in a new span so it is an inline, and works.\n    // @todo: revisit\n    nucleus = makeSpan(nucleus);\n\n    let aboveShift = 0;\n    let belowShift = 0;\n\n    if (above) {\n        aboveShift = Math.max(\n            FONTMETRICS.bigOpSpacing1,\n            FONTMETRICS.bigOpSpacing3 - spanDepth(above)\n        );\n    }\n    if (below) {\n        belowShift = Math.max(\n            FONTMETRICS.bigOpSpacing2,\n            FONTMETRICS.bigOpSpacing4 - spanHeight(below)\n        );\n    }\n\n    let result: Span | null = null;\n\n    if (below && above) {\n        const bottom =\n            FONTMETRICS.bigOpSpacing5 +\n            spanHeight(below) +\n            spanDepth(below) +\n            belowShift +\n            spanDepth(nucleus) +\n            nucleusShift;\n\n        result = makeVlist(\n            context,\n            [\n                FONTMETRICS.bigOpSpacing5,\n                below,\n                belowShift,\n                nucleus,\n                aboveShift,\n                above,\n                FONTMETRICS.bigOpSpacing5,\n            ],\n            'bottom',\n            bottom\n        );\n\n        // Here, we shift the limits by the slant of the symbol. Note\n        // that we are supposed to shift the limits by 1/2 of the slant,\n        // but since we are centering the limits adding a full slant of\n        // margin will shift by 1/2 that.\n        result!.children[0].setLeft(-slant);\n        result!.children[2].setLeft(slant);\n    } else if (below && !above) {\n        const top = spanHeight(nucleus) - nucleusShift;\n\n        result = makeVlist(\n            context,\n            [FONTMETRICS.bigOpSpacing5, below, belowShift, nucleus],\n            'top',\n            top\n        );\n\n        // See comment above about slants\n        result!.children[0].setLeft(-slant);\n    } else if (!below && above) {\n        const bottom = spanDepth(nucleus) + nucleusShift;\n\n        result = makeVlist(\n            context,\n            [nucleus, aboveShift, above, FONTMETRICS.bigOpSpacing5],\n            'bottom',\n            bottom\n        );\n\n        // See comment above about slants\n        result!.children[1].setLeft(slant);\n    }\n\n    return makeSpan(result, 'op-limits', 'mop');\n}\n\n/**\n * Return an atom suitable for use as the root of a formula.\n */\n\nexport function makeRoot(parseMode: ParseModePrivate, body: Atom[] = []): Atom {\n    const result = new Atom(parseMode, 'root', body || []);\n    if (\n        isArray(result.body) &&\n        (result.body.length === 0 || result.body[0].type !== 'first')\n    ) {\n        result.body!.unshift(new Atom('', 'first'));\n    }\n    return result;\n}\n\nexport function isAtomArray(arg: string | Atom | Atom[]): arg is Atom[] {\n    return isArray(arg);\n}\n","export function stringToCodepoints(str: string): number[] {\n    const result: number[] = [];\n    for (let i = 0; i < str.length; i++) {\n        let code = str.charCodeAt(i);\n        if (code === 0x0d && str.charCodeAt(i + 1) === 0x0a) {\n            code = 0x0a;\n            i++;\n        }\n        if (code === 0x0d || code === 0x0c) code = 0x0a;\n        if (code === 0x00) code = 0xfffd;\n\n        // Decode a surrogate pair into an astral codepoint.\n        if (code >= 0xd800 && code <= 0xdbff) {\n            const nextCode = str.charCodeAt(i + 1);\n            if (nextCode >= 0xdc00 && nextCode <= 0xdfff) {\n                const lead = code - 0xd800;\n                const trail = nextCode - 0xdc00;\n                code = Math.pow(2, 16) + lead * Math.pow(2, 10) + trail;\n                // N = ((H - 0xD800) * 0x400) + (L - 0xDC00) + 0x10000;\n                i++;\n            }\n        }\n\n        result.push(code);\n    }\n    return result;\n}\n\nconst ZWJ = 0x200d; // Zero-width joiner\n\n// const ZWSP = 0x200b; // Zero-width space\n\n/* The following codepoints should combine with the previous ones */\nconst EMOJI_COMBINATOR = [\n    [ZWJ, 1],\n    [0xfe0e, 2], // VS-15: text presentation, VS-16: Emoji presentation\n    [0x1f3fb, 5], // EMOJI_MODIFIER_FITZPATRICK_TYPE 1-6\n    [0x1f9b0, 4], // red hair..white hair\n    [0xe0020, 96], // EMOJI_TAG\n];\nlet emojiCombinator: { [code: number]: boolean };\n\n// Regional indicator: a pair of codepoints indicating some flags\nconst REGIONAL_INDICATOR = [0x1f1e6, 0x1f1ff];\n\nfunction isEmojiCombinator(code: number): boolean {\n    if (!emojiCombinator) {\n        emojiCombinator = {};\n        EMOJI_COMBINATOR.forEach((x) => {\n            for (let i = x[0]; i <= x[0] + x[1] - 1; i++) {\n                emojiCombinator[i] = true;\n            }\n        });\n    }\n    return emojiCombinator[code] ?? false;\n}\n\nfunction isRegionalIndicator(code: number): boolean {\n    return code >= REGIONAL_INDICATOR[0] && code <= REGIONAL_INDICATOR[1];\n}\n\n/**\n * Return a string or an array of graphemes.\n * This includes:\n * - emoji with skin and hair modifiers\n * - emoji combination (for example \"female pilot\")\n * - text emoji with an emoji presentation style modifier\n *      - U+1F512 U+FE0E 🔒︎\n *      - U+1F512 U+FE0F 🔒️\n * - flags represented as two regional indicator codepoints\n * - flags represented as a flag emoji + zwj + an emoji tag\n * - other combinations (for example, rainbow flag)\n */\n\nexport function splitGraphemes(str: string): string | string[] {\n    // If it's all ASCII, short-circuit the grapheme splitting...\n    if (/^[\\x20-\\xFF]*$/.test(str)) return str;\n\n    const result: string[] = [];\n\n    const codePoints = stringToCodepoints(str);\n    let index = 0;\n    while (index < codePoints.length) {\n        const code = codePoints[index++];\n\n        const next = codePoints[index];\n        // Combine sequences\n        if (next === ZWJ) {\n            // Zero-width joiner sequences are:\n            // ZWJ_SEQUENCE := (CHAR + ZWJ)+\n            const baseIndex = index - 1;\n            index += 2;\n            while (codePoints[index] === ZWJ) {\n                index += 2;\n            }\n            result.push(\n                String.fromCodePoint(\n                    ...codePoints.slice(baseIndex, index - baseIndex + 1)\n                )\n            );\n        } else if (isEmojiCombinator(next)) {\n            // Combine emoji sequences\n            // See http://unicode.org/reports/tr51/#def_emoji_tag_sequence\n            const baseIndex = index - 1; // The previous character is the 'base'\n            while (isEmojiCombinator(codePoints[index])) {\n                index += codePoints[index] === ZWJ ? 2 : 1;\n            }\n            result.push(\n                String.fromCodePoint(\n                    ...codePoints.slice(baseIndex, index - baseIndex)\n                )\n            );\n        } else if (isRegionalIndicator(code)) {\n            // Some (but not all) flags are represented by a sequence of two\n            // \"regional indicators\" codepoints.\n            index += 1;\n            result.push(\n                String.fromCodePoint(...codePoints.slice(index - 2, 2))\n            );\n        } else {\n            result.push(String.fromCodePoint(code));\n        }\n    }\n    return result;\n}\n","/**\n * ## Reference\n * TeX source code:\n * {@link  http://tug.org/texlive/devsrc/Build/source/texk/web2c/tex.web | Tex.web}\n *\n * For a list of standard TeX macros, see:\n * {@link ftp://tug.ctan.org/pub/tex-archive/systems/knuth/dist/lib/plain.tex | plain.tex}\n */\n\nimport { splitGraphemes } from './grapheme-splitter';\n\n/**\n *\n * A token can be of type:\n *  - `literal`: the value is the character this token represents. This can be\n * a combination of Unicode codepoints, for example for emojis.\n *  - `^` and `_`: superscript and subscript commands.\n *  - `command`: a command such as `\\sin` or `\\text` or `\\alpha`\n *  - `{` and `}`: begin and end group (use for arguments of commands and for grouping)\n *  - `#`: parameter\n *\n *  - `placeholder`: a placeholder value meant to be replaced by some actual value\n *  - `space`: one or more space characters (including tab, etc...)\n *\n *  See: [TeX:289](http://tug.org/texlive/devsrc/Build/source/texk/web2c/tex.web)\n */\nexport class Token {\n    type: string;\n    value: string | number;\n    constructor(type: string, value: string | number = '') {\n        this.type = type;\n        this.value = value;\n        console.assert(!(type === 'literal' && value === '}'));\n    }\n}\n\n/**\n * Given a LaTeX expression represented as a character string,\n * the Lexer class will scan and return Tokens for the lexical\n * units in the string.\n *\n * @param s A string of LaTeX\n */\nclass Lexer {\n    s: string | string[];\n    pos: number;\n    constructor(s: string) {\n        this.s = splitGraphemes(s);\n        this.pos = 0;\n    }\n    /**\n     * @return True if we reached the end of the stream\n     */\n    end(): boolean {\n        return this.pos >= this.s.length;\n    }\n    /**\n     * Return the next char and advance\n     */\n    get(): string {\n        return this.pos < this.s.length ? this.s[this.pos++] : '';\n    }\n    /**\n     * Return the next char, but do not advance\n     */\n    peek(): string {\n        return this.s[this.pos];\n    }\n    /**\n     * Return the next substring matching regEx and advance.\n     */\n    scan(regEx: RegExp): string | null {\n        // this.s can either be a string, if it's made up only of ASCII chars\n        // or an array of graphemes, if it's more complicated.\n        let execResult: (string | null)[] | null;\n        if (typeof this.s === 'string') {\n            execResult = regEx.exec(this.s.slice(this.pos));\n        } else {\n            execResult = regEx.exec(this.s.slice(this.pos).join(''));\n        }\n        if (execResult?.[0]) {\n            this.pos += execResult[0].length;\n            return execResult[0];\n        }\n        return null;\n    }\n    /**\n     * Return true if next char is white space. Does not advance.\n     *\n     * See [Stackoverflow](http://stackoverflow.com/questions/6073637/)\n     */\n    isWhiteSpace(): boolean {\n        return /[ \\f\\n\\r\\t\\v\\xA0\\u2028\\u2029]/.test(this.s[this.pos]);\n        /*\n    Note that browsers are inconsistent in their definitions of the\n    `\\s` metacharacter, so we use an explicit pattern instead.\n\n    - IE:          `[ \\f\\n\\r\\t\\v]`\n    - Chrome:      `[ \\f\\n\\r\\t\\v\\u00A0]`\n    - Firefox:     `[ \\f\\n\\r\\t\\v\\u00A0\\u2028\\u2029]`\n\n    - \\f \\u000C: form feed (FORM FEED)\n    - \\n \\u000A: linefeed (LINE FEED)\n    - \\r \\u000D: carriage return\n    - \\t \\u0009: tab (CHARACTER TABULATION)\n    - \\v \\u000B: vertical tab (LINE TABULATION)\n    - \\u00A0: NON-BREAKING SPACE\n    - \\u2028: LINE SEPARATOR\n    - \\u2029: PARAGRAPH SEPARATOR\n\n    Could be considered:\n    - \\u2000-\\u200a spacing\n    - \\u202f NARROW NO-BREAK SPACE\n    - \\u205F MEDIUM MATHEMATICAL SPACE\n    - \\u3000 IDEOGRAPHIC SPACE\n    - \\uFEFF ZERO WITH NON-BREAKING SPACE\n*/\n    }\n    /**\n     * Return a single token, or null, created from the lexer.\n     */\n    makeToken(): Token | null {\n        // If we've reached the end, exit\n        if (this.end()) return null;\n        // Handle white space\n        // Note that in text mode, spaces are significant and can't be coalesced.\n        if (this.isWhiteSpace()) {\n            this.get();\n            return new Token('space');\n        }\n        let result: Token | null = null;\n        // Is it a command?\n        if (this.peek() === '\\\\') {\n            this.get(); // Skip the initial \\\n            if (!this.end()) {\n                // A command is either a string of letters and asterisks...\n                let command = this.scan(/^[a-zA-Z*]+/);\n                // There are a few special commands that are handled here...\n                if (command === 'bgroup') {\n                    // Begin group, synonym for opening brace\n                    result = new Token('{');\n                } else if (command === 'egroup') {\n                    // End group, synonym for closing brace\n                    result = new Token('}');\n                } else {\n                    if (!command) {\n                        // ... or a single non-letter character\n                        command = this.get();\n                    }\n                    result = new Token('command', command);\n                }\n            }\n            // Is it a group start/end?\n        } else if (this.peek() === '{' || this.peek() === '}') {\n            result = new Token(this.get()!);\n        } else if (this.peek() === '#') {\n            // This could be either a param token, or a literal # (used for\n            // colorspecs, for example). A param token is a '#' followed by\n            // - a digit 0-9 followed by a non-alpha, non-digit\n            // - or '?'.\n            // Otherwise, it's a literal '#'.\n            this.get();\n            if (!this.end()) {\n                let isParam = false;\n                let next = this.peek();\n                if (/[0-9?]/.test(next)) {\n                    // Could be a param\n                    isParam = true;\n                    // Need to look ahead to the following char\n                    if (this.pos + 1 < this.s.length) {\n                        const after = this.s[this.pos + 1];\n                        isParam = /[^0-9A-Za-z]/.test(after);\n                    }\n                }\n                if (isParam) {\n                    result = new Token('#');\n                    next = this.get()!;\n                    if (next >= '0' && next <= '9') {\n                        result.value = parseInt(next);\n                    } else {\n                        result.value = '?';\n                    }\n                } else {\n                    result = new Token('literal', '#');\n                }\n            }\n        } else if (this.peek() === '$') {\n            // Mode switch\n            this.get();\n            if (this.peek() === '$') {\n                // $$\n                this.get();\n                result = new Token('$$');\n            } else {\n                // $\n                result = new Token('$');\n            }\n        } else {\n            result = new Token('literal', this.get()!);\n        }\n        return result;\n    }\n}\n\n/**\n * Create Tokens from a stream of LaTeX\n *\n * @param s - A string o LaTeX. It can include comments (with the `%`\n * marker) and multiple lines.\n */\nexport function tokenize(s: string): Token[] {\n    const result: Token[] = [];\n    const lines = s.toString().split(/\\r?\\n/);\n    let stream = '';\n    let sep = '';\n    for (const line of lines) {\n        stream += sep;\n        sep = ' ';\n        // Remove everything after a % (comment marker)\n        // (but \\% should be preserved...)\n        const m = line.match(/((?:\\\\%)|[^%])*/);\n        if (m) stream += m[0];\n    }\n\n    const lex = new Lexer(stream);\n    while (!lex.end()) {\n        const token = lex.makeToken();\n        if (token) result.push(token);\n    }\n\n    return result;\n}\n","import { registerAtomType, decompose, Atom } from './atom-utils';\nimport { MATHSTYLES } from './mathstyle';\nimport { METRICS as FONTMETRICS } from './font-metrics';\nimport {\n    Span,\n    makeSpan,\n    makeHlist,\n    makeVlist,\n    depth as spanDepth,\n    height as spanHeight,\n} from './span';\nimport { makeCustomSizedDelim } from './delimiters';\nimport { Context } from './context';\n\n/**\n * Gengrac -- Generalized fraction\n *\n * Decompose fractions, binomials, and in general anything made\n * of two expressions on top of each other, optionally separated by a bar,\n * and optionally surrounded by fences (parentheses, brackets, etc...)\n *\n * Depending on the type of fraction the mathstyle is either\n * display math or inline math (which is indicated by 'textstyle'). This value can\n * also be set to 'auto', which indicates it should use the current mathstyle\n */\nregisterAtomType('genfrac', (context: Context, atom: Atom): Span[] => {\n    const mathstyle =\n        atom.mathstyle === 'auto'\n            ? context.mathstyle\n            : MATHSTYLES[atom.mathstyle];\n    const newContext = context.clone({ mathstyle: mathstyle });\n    let numer = [];\n    if (atom.numerPrefix) {\n        numer.push(makeSpan(atom.numerPrefix, 'mord'));\n    }\n    const numeratorStyle = atom.continuousFraction\n        ? mathstyle\n        : mathstyle.fracNum();\n    numer = numer.concat(\n        decompose(newContext.clone({ mathstyle: numeratorStyle }), atom.numer)\n    );\n    const numerReset = makeHlist(\n        numer,\n        context.mathstyle.adjustTo(numeratorStyle)\n    );\n    let denom = [];\n    if (atom.denomPrefix) {\n        denom.push(makeSpan(atom.denomPrefix, 'mord'));\n    }\n    const denominatorStyle = atom.continuousFraction\n        ? mathstyle\n        : mathstyle.fracDen();\n    denom = denom.concat(\n        decompose(newContext.clone({ mathstyle: denominatorStyle }), atom.denom)\n    );\n    const denomReset = makeHlist(\n        denom,\n        context.mathstyle.adjustTo(denominatorStyle)\n    );\n    const ruleWidth = !atom.hasBarLine\n        ? 0\n        : FONTMETRICS.defaultRuleThickness / mathstyle.sizeMultiplier;\n    // Rule 15b from TeXBook Appendix G, p.444\n    //\n    // 15b. If C > T, set u ← σ8 and v ← σ11. Otherwise set u ← σ9 or σ10,according\n    // as θ ̸= 0 or θ = 0, and set v ← σ12. (The fraction will be typeset with\n    // its numerator shifted up by an amount u with respect to the current\n    // baseline, and with the denominator shifted down by v, unless the boxes\n    // are unusually large.)\n    let numShift: number;\n    let clearance = 0;\n    let denomShift: number;\n    if (mathstyle.size === MATHSTYLES.displaystyle.size) {\n        numShift = mathstyle.metrics.num1; // set u ← σ8\n        if (ruleWidth > 0) {\n            clearance = 3 * ruleWidth; //  φ ← 3θ\n        } else {\n            clearance = 7 * FONTMETRICS.defaultRuleThickness; // φ ← 7 ξ8\n        }\n        denomShift = mathstyle.metrics.denom1; // v ← σ11\n    } else {\n        if (ruleWidth > 0) {\n            numShift = mathstyle.metrics.num2; // u ← σ9\n            clearance = ruleWidth; //  φ ← θ\n        } else {\n            numShift = mathstyle.metrics.num3; // u ← σ10\n            clearance = 3 * FONTMETRICS.defaultRuleThickness; // φ ← 3 ξ8\n        }\n        denomShift = mathstyle.metrics.denom2; // v ← σ12\n    }\n    const numerDepth = numerReset ? spanDepth(numerReset) : 0;\n    const denomHeight = denomReset ? spanHeight(denomReset) : 0;\n    let frac: Span;\n    if (ruleWidth === 0) {\n        // Rule 15c from Appendix G\n        // No bar line between numerator and denominator\n        const candidateClearance =\n            numShift - numerDepth - (denomHeight - denomShift);\n        if (candidateClearance < clearance) {\n            numShift += 0.5 * (clearance - candidateClearance);\n            denomShift += 0.5 * (clearance - candidateClearance);\n        }\n        frac = makeVlist(\n            newContext,\n            [numerReset, -numShift, denomReset, denomShift],\n            'individualShift'\n        );\n    } else {\n        // Rule 15d from Appendix G\n        // There is a bar line between the numerator and the denominator\n        const axisHeight = mathstyle.metrics.axisHeight;\n        const numerLine = axisHeight + 0.5 * ruleWidth;\n        const denomLine = axisHeight - 0.5 * ruleWidth;\n        if (numShift - numerDepth - numerLine < clearance) {\n            numShift += clearance - (numShift - numerDepth - numerLine);\n        }\n        if (denomLine - (denomHeight - denomShift) < clearance) {\n            denomShift += clearance - (denomLine - (denomHeight - denomShift));\n        }\n        const mid = makeSpan(null, ' frac-line');\n        mid.applyStyle(atom.getStyle());\n        // Manually set the height of the line because its height is\n        // created in CSS\n        mid.height = ruleWidth / 2;\n        mid.depth = ruleWidth / 2;\n        const elements = [];\n        if (numerReset) {\n            elements.push(numerReset);\n            elements.push(-numShift);\n        }\n        elements.push(mid);\n        elements.push(ruleWidth / 2 - axisHeight);\n        if (denomReset) {\n            elements.push(denomReset);\n            elements.push(denomShift);\n        }\n        frac = makeVlist(newContext, elements, 'individualShift');\n    }\n    // Add a 'mfrac' class to provide proper context for\n    // other css selectors (such as 'frac-line')\n    frac.classes += ' mfrac';\n    // Since we manually change the style sometimes (with \\dfrac or \\tfrac),\n    // account for the possible size change here.\n    frac.height *= mathstyle.sizeMultiplier / context.mathstyle.sizeMultiplier;\n    frac.depth *= mathstyle.sizeMultiplier / context.mathstyle.sizeMultiplier;\n    // if (!atom.leftDelim && !atom.rightDelim) {\n    //     return makeOrd(frac,\n    //         context.parentMathstyle.adjustTo(mathstyle) +\n    //         ((context.parentSize !== context.size) ?\n    //             (' sizing reset-' + context.parentSize + ' ' + context.size) : ''));\n    // }\n    // Rule 15e of Appendix G\n    const delimSize =\n        mathstyle.size === MATHSTYLES.displaystyle.size\n            ? mathstyle.metrics.delim1\n            : mathstyle.metrics.delim2;\n    // Optional delimiters\n    const leftDelim = atom.bind(\n        context,\n        makeCustomSizedDelim(\n            'mopen',\n            atom.leftDelim,\n            delimSize,\n            true,\n            context.clone({ mathstyle: mathstyle })\n        )\n    );\n    const rightDelim = atom.bind(\n        context,\n        makeCustomSizedDelim(\n            'mclose',\n            atom.rightDelim,\n            delimSize,\n            true,\n            context.clone({ mathstyle: mathstyle })\n        )\n    );\n    leftDelim.applyStyle(atom.getStyle());\n    rightDelim.applyStyle(atom.getStyle());\n\n    return [\n        atom.bind(\n            context,\n            // makeStruts(\n            makeSpan(\n                [leftDelim, frac, rightDelim],\n                context.parentSize !== context.size\n                    ? 'sizing reset-' + context.parentSize + ' ' + context.size\n                    : '',\n                'mord'\n            )\n            // )\n        ),\n    ];\n});\n","import { registerAtomType, decompose, Atom } from './atom-utils';\nimport {\n    makeSpan,\n    makeVlist,\n    depth as spanDepth,\n    height as spanHeight,\n    Span,\n} from './span';\nimport { METRICS as FONTMETRICS } from './font-metrics';\nimport { makeLeftRightDelim } from './delimiters';\nimport { MATHSTYLES } from './mathstyle';\nimport { Context } from './context';\n\nregisterAtomType('array', (context: Context, atom: Atom): Span[] => {\n    // See http://tug.ctan.org/macros/latex/base/ltfsstrc.dtx\n    // and http://tug.ctan.org/macros/latex/base/lttab.dtx\n    let colFormat = atom.colFormat;\n    if (colFormat && colFormat.length === 0) {\n        colFormat = [{ align: 'l' }];\n    }\n    if (!colFormat) {\n        colFormat = [\n            { align: 'l' },\n            { align: 'l' },\n            { align: 'l' },\n            { align: 'l' },\n            { align: 'l' },\n            { align: 'l' },\n            { align: 'l' },\n            { align: 'l' },\n            { align: 'l' },\n            { align: 'l' },\n        ];\n    }\n    // Fold the array so that there are no more columns of content than\n    // there are columns prescribed by the column format.\n    const array = [];\n    let colMax = 0; // Maximum number of columns of content\n    for (const colSpec of colFormat) {\n        if (colSpec.align) colMax++;\n    }\n    for (const row of atom.array) {\n        let colIndex = 0;\n        while (colIndex < row.length) {\n            const newRow = [];\n            const lastCol = Math.min(row.length, colIndex + colMax);\n            while (colIndex < lastCol) {\n                newRow.push(row[colIndex++]);\n            }\n            array.push(newRow);\n        }\n    }\n    // If the last row is empty, ignore it.\n    if (\n        array[array.length - 1].length === 1 &&\n        array[array.length - 1][0].length === 0\n    ) {\n        array.pop();\n    }\n    const mathstyle = MATHSTYLES[atom.mathstyle] || context.mathstyle;\n    // Row spacing\n    // Default \\arraystretch from lttab.dtx\n    const arraystretch = atom.arraystretch || 1;\n    const arraycolsep =\n        typeof atom.arraycolsep === 'number'\n            ? atom.arraycolsep\n            : FONTMETRICS.arraycolsep;\n    const arrayskip = arraystretch * FONTMETRICS.baselineskip;\n    const arstrutHeight = 0.7 * arrayskip;\n    const arstrutDepth = 0.3 * arrayskip; // \\@arstrutbox in lttab.dtx\n    let totalHeight = 0;\n    let nc = 0;\n    const body = [];\n    const nr = array.length;\n    for (let r = 0; r < nr; ++r) {\n        const inrow = array[r];\n        nc = Math.max(nc, inrow.length);\n        let height = arstrutHeight; // \\@array adds an \\@arstrut\n        let depth = arstrutDepth; // to each row (via the template)\n        const outrow: {\n            cells: Span[][];\n            height: number;\n            depth: number;\n            pos: number;\n        } = { cells: [], height: 0, depth: 0, pos: 0 };\n        for (let c = 0; c < inrow.length; ++c) {\n            const localContext = context.clone({\n                mathstyle: MATHSTYLES[atom.mathstyle],\n            });\n            const cell = decompose(localContext, inrow[c]) || [];\n            const elt = [makeSpan(null, '', 'mord')].concat(cell);\n            depth = Math.max(depth, spanDepth(elt));\n            height = Math.max(height, spanHeight(elt));\n            outrow.cells.push(elt);\n        }\n        let jot = r === nr - 1 ? 0 : atom.jot || 0;\n        if (atom.rowGaps && atom.rowGaps[r]) {\n            jot = atom.rowGaps[r];\n            if (jot > 0) {\n                // \\@argarraycr\n                jot += arstrutDepth;\n                if (depth < jot) {\n                    depth = jot; // \\@xargarraycr\n                }\n                jot = 0;\n            }\n        }\n        outrow.height = height;\n        outrow.depth = depth;\n        totalHeight += height;\n        outrow.pos = totalHeight;\n        totalHeight += depth + jot; // \\@yargarraycr\n        body.push(outrow);\n    }\n    const offset = totalHeight / 2 + mathstyle.metrics.axisHeight;\n    const contentCols = [];\n    for (let colIndex = 0; colIndex < nc; colIndex++) {\n        const col = [];\n        for (const row of body) {\n            const elem = row.cells[colIndex];\n            if (!elem) {\n                continue;\n            }\n            elem.depth = row.depth;\n            elem.height = row.height;\n\n            col.push(elem);\n            col.push(row.pos - offset);\n        }\n        if (col.length > 0) {\n            contentCols.push(makeVlist(context, col, 'individualShift'));\n        }\n    }\n    // Iterate over each column description.\n    // Each `colDesc` will indicate whether to insert a gap, a rule or\n    // a column from 'contentCols'\n    const cols = [];\n    let prevColContent = false;\n    let prevColRule = false;\n    let currentContentCol = 0;\n    let firstColumn = !atom.lFence;\n    for (const colDesc of colFormat) {\n        if (colDesc.align && currentContentCol >= contentCols.length) {\n            break;\n        } else if (colDesc.align && currentContentCol < contentCols.length) {\n            // If an alignment is specified, insert a column of content\n            if (prevColContent) {\n                // If no gap was provided, insert a default gap between\n                // consecutive columns of content\n                cols.push(makeColGap(2 * arraycolsep));\n            } else if (prevColRule || firstColumn) {\n                // If the previous column was a rule or this is the first column\n                // add a smaller gap\n                cols.push(makeColGap(arraycolsep));\n            }\n            cols.push(\n                makeSpan(\n                    contentCols[currentContentCol],\n                    'col-align-' + colDesc.align\n                )\n            );\n            currentContentCol++;\n            prevColContent = true;\n            prevColRule = false;\n            firstColumn = false;\n        } else if (typeof colDesc.gap !== 'undefined') {\n            // Something to insert in between columns of content\n            if (typeof colDesc.gap === 'number') {\n                // It's a number, indicating how much space, in em,\n                // to leave in between columns\n                cols.push(makeColGap(colDesc.gap));\n            } else {\n                // It's a mathlist\n                // Create a column made up of the mathlist\n                // as many times as there are rows.\n                cols.push(\n                    makeColOfRepeatingElements(\n                        context,\n                        body,\n                        offset,\n                        colDesc.gap\n                    )\n                );\n            }\n            prevColContent = false;\n            prevColRule = false;\n            firstColumn = false;\n        } else if (colDesc.rule) {\n            // It's a rule.\n            const separator = makeSpan(null, 'vertical-separator');\n            separator.setStyle('height', totalHeight, 'em');\n            // result.setTop((1 - context.mathstyle.sizeMultiplier) *\n            //     context.mathstyle.metrics.axisHeight);\n            separator.setStyle(\n                'margin-top',\n                3 * context.mathstyle.metrics.axisHeight - offset,\n                'em'\n            );\n            separator.setStyle('vertical-align', 'top');\n            // separator.setStyle('display', 'inline-block');\n            let gap = 0;\n            if (prevColRule) {\n                gap = FONTMETRICS.doubleRuleSep - FONTMETRICS.arrayrulewidth;\n            } else if (prevColContent) {\n                gap = arraycolsep - FONTMETRICS.arrayrulewidth;\n            }\n            separator.setLeft(gap);\n            cols.push(separator);\n            prevColContent = false;\n            prevColRule = true;\n            firstColumn = false;\n        }\n    }\n    if (prevColContent && !atom.rFence) {\n        // If the last column was content, add a small gap\n        cols.push(makeColGap(arraycolsep));\n    }\n    if (\n        (!atom.lFence || atom.lFence === '.') &&\n        (!atom.rFence || atom.rFence === '.')\n    ) {\n        // There are no delimiters around the array, just return what\n        // we've built so far.\n        return [makeSpan(cols, 'mtable', 'mord')];\n    }\n    // There is at least one delimiter. Wrap the core of the array with\n    // appropriate left and right delimiters\n    // const inner = makeSpan(makeSpan(cols, 'mtable'), 'mord');\n    const inner = makeSpan(cols, 'mtable');\n    const innerHeight = spanHeight(inner);\n    const innerDepth = spanDepth(inner);\n    return [\n        makeSpan(\n            [\n                atom.bind(\n                    context,\n                    makeLeftRightDelim(\n                        'mopen',\n                        atom.lFence,\n                        innerHeight,\n                        innerDepth,\n                        context\n                    )\n                ),\n                inner,\n                atom.bind(\n                    context,\n                    makeLeftRightDelim(\n                        'mclose',\n                        atom.rFence,\n                        innerHeight,\n                        innerDepth,\n                        context\n                    )\n                ),\n            ],\n            '',\n            'mord'\n        ),\n    ];\n});\n\n/**\n * Used in `decomposeArray` to create a column separator span.\n *\n */\nfunction makeColGap(width: number): Span {\n    const separator = makeSpan('\\u200b', 'arraycolsep');\n    separator.setWidth(width);\n    return separator;\n}\n\n/**\n * Used in decomposeArray to create a column of repeating elements.\n */\nfunction makeColOfRepeatingElements(\n    context: Context,\n    body,\n    offset,\n    elem\n): Span {\n    const col = [];\n    for (const row of body) {\n        const cell = makeSpan(decompose(context, elem));\n        cell.depth = row.depth;\n        cell.height = row.height;\n        col.push(cell);\n        col.push(row.pos - offset);\n    }\n    return makeVlist(context, col, 'individualShift');\n}\n","import { isArray } from '../common/types';\n\nimport { registerAtomType, decompose, Atom } from './atom-utils';\nimport {\n    Span,\n    SpanType,\n    isSpanType,\n    makeSVGSpan,\n    makeSpan,\n    makeVlist,\n    depth as spanDepth,\n    height as spanHeight,\n} from './span';\nimport { METRICS as FONTMETRICS } from './font-metrics';\nimport { MATHSTYLES } from './mathstyle';\nimport { Context } from './context';\n\n// An `overunder` atom has the following attributes:\n// - body: atoms[]: atoms displayed on the base line\n// - svgBody: string. A SVG graphic displayed on the base line (if present, the body is ignored)\n// - overscript: atoms[]: atoms displayed above the body\n// - svgAbove: string. A named SVG graphic above the element\n// - underscript: atoms[]: atoms displayed below the body\n// - svgBelow: string. A named SVG graphic below the element\n// - skipBoundary: boolean. If true, ignore atom boundary when keyboard navigating\nregisterAtomType('overunder', (context: Context, atom: Atom): Span[] => {\n    const body: Span | Span[] = atom.svgBody\n        ? makeSVGSpan(atom.svgBody)\n        : decompose(context, atom.body as Atom[]);\n    const annotationStyle = context.clone({\n        mathstyle: MATHSTYLES.scriptstyle,\n    });\n    let above: Span;\n    let below: Span;\n    if (atom.svgAbove) {\n        above = makeSVGSpan(atom.svgAbove);\n    } else if (atom.overscript) {\n        above = makeSpan(\n            decompose(annotationStyle, atom.overscript),\n            context.mathstyle.adjustTo(annotationStyle.mathstyle)\n        );\n    }\n    if (atom.svgBelow) {\n        below = makeSVGSpan(atom.svgBelow);\n    } else if (atom.underscript) {\n        below = makeSpan(\n            decompose(annotationStyle, atom.underscript),\n            context.mathstyle.adjustTo(annotationStyle.mathstyle)\n        );\n    }\n    if (above && below) {\n        // Pad the above and below if over a \"base\"\n        below.setLeft(0.3);\n        below.setRight(0.3);\n        above.setLeft(0.3);\n        above.setRight(0.3);\n    }\n    let result = makeOverunderStack(\n        context,\n        body,\n        above,\n        below,\n        isSpanType(atom.type) ? atom.type : 'mord'\n    );\n    if (atom.superscript || atom.subscript) {\n        result = atom.attachLimits(context, result, 0, 0);\n    }\n\n    return [result];\n});\n\n/**\n * Combine a nucleus with an atom above and an atom below. Used to form\n * stacks for the 'overunder' atom type .\n *\n * @param nucleus The base over and under which the atoms will\n * be placed.\n * @param type The type ('mop', 'mrel', etc...) of the result\n */\nfunction makeOverunderStack(\n    context: Context,\n    nucleus: Span | Span[],\n    above: Span,\n    below: Span,\n    type: SpanType\n): Span {\n    // If nothing above and nothing below, nothing to do.\n    if (!above && !below) return isArray(nucleus) ? makeSpan(nucleus) : nucleus;\n\n    let aboveShift = 0;\n    let belowShift = 0;\n\n    if (above) {\n        aboveShift = Math.max(\n            FONTMETRICS.bigOpSpacing1,\n            FONTMETRICS.bigOpSpacing3 - spanDepth(above)\n        );\n    }\n    if (below) {\n        belowShift = Math.max(\n            FONTMETRICS.bigOpSpacing2,\n            FONTMETRICS.bigOpSpacing4 - spanHeight(below)\n        );\n    }\n\n    let result = null;\n\n    if (below && above) {\n        const bottom =\n            spanHeight(below) + spanDepth(below) + spanDepth(nucleus);\n\n        result = makeVlist(\n            context,\n            [\n                0,\n                below,\n                FONTMETRICS.bigOpSpacing3 + spanDepth(nucleus),\n                nucleus,\n                -aboveShift,\n                above,\n                FONTMETRICS.bigOpSpacing2,\n            ],\n            'bottom',\n            bottom\n        );\n    } else if (below && !above) {\n        const top = spanHeight(nucleus);\n\n        result = makeVlist(\n            context,\n            [0, below, belowShift, nucleus],\n            'top',\n            top\n        );\n    } else if (above && !below) {\n        result = makeVlist(\n            context,\n            [\n                nucleus,\n                Math.max(\n                    FONTMETRICS.bigOpSpacing2,\n                    aboveShift - spanDepth(above)\n                ), // TeXBook 13a, p.444\n                above,\n                0,\n            ],\n            'bottom',\n            spanDepth(nucleus)\n        );\n    }\n\n    return makeSpan(result, 'op-over-under', type);\n}\n","import { isArray } from '../common/types';\n\nimport type { Atom } from './atom';\nimport type { Context } from './context';\n\nimport { registerAtomType, decompose } from './atom-utils';\nimport {\n    makeSVGSpan,\n    makeSpan,\n    makeVlist,\n    makeSymbol,\n    height as spanHeight,\n    skew as spanSkew,\n    Span,\n} from './span';\nimport { METRICS as FONTMETRICS } from './font-metrics';\n\nregisterAtomType('accent', (context: Context, atom: Atom): Span[] => {\n    // Accents are handled in the TeXbook pg. 443, rule 12.\n    const mathstyle = context.mathstyle;\n    // Build the base atom\n    let base = decompose(context.cramp(), atom.body as Atom[]);\n    if (atom.superscript || atom.subscript) {\n        // If there is a supsub attached to the accent\n        // apply it to the base.\n        // Note this does not give the same result as TeX when there\n        // are stacked accents, e.g. \\vec{\\breve{\\hat{\\acute{...}}}}^2\n        base = [atom.attachSupsub(context, makeSpan(base, '', 'mord'), 'mord')];\n    }\n    // Calculate the skew of the accent. This is based on the line \"If the\n    // nucleus is not a single character, let s = 0; otherwise set s to the\n    // kern amount for the nucleus followed by the \\skewchar of its font.\"\n    // Note that our skew metrics are just the kern between each character\n    // and the skewchar.\n    let skew = 0;\n    if (\n        isArray(atom.body) &&\n        atom.body.length === 1 &&\n        atom.body[0].isCharacterBox()\n    ) {\n        skew = spanSkew(base);\n    }\n    // calculate the amount of space between the body and the accent\n    let clearance = Math.min(spanHeight(base), mathstyle.metrics.xHeight);\n    let accentBody: Span;\n    if (atom.svgAccent) {\n        accentBody = makeSVGSpan(atom.svgAccent);\n        clearance = -clearance + FONTMETRICS.bigOpSpacing1;\n    } else {\n        // Build the accent\n        const accent = makeSymbol('Main-Regular', atom.accent, 'math');\n        // Remove the italic correction of the accent, because it only serves to\n        // shift the accent over to a place we don't want.\n        accent.italic = 0;\n        // The \\vec character that the fonts use is a combining character, and\n        // thus shows up much too far to the left. To account for this, we add a\n        // specific class which shifts the accent over to where we want it.\n        const vecClass = atom.accent === '\\u20d7' ? ' accent-vec' : '';\n        accentBody = makeSpan(makeSpan(accent), 'accent-body' + vecClass);\n    }\n    accentBody = makeVlist(context, [base, -clearance, accentBody]);\n    // Shift the accent over by the skew. Note we shift by twice the skew\n    // because we are centering the accent, so by adding 2*skew to the left,\n    // we shift it to the right by 1*skew.\n    accentBody.children[1].setLeft(2 * skew);\n    return [makeSpan([accentBody], 'accent', 'mord')];\n});\n","import { registerAtomType, decompose, Atom } from './atom-utils';\nimport { METRICS as FONTMETRICS } from './font-metrics';\nimport {\n    makeSpan,\n    addSVGOverlay,\n    depth as spanDepth,\n    height as spanHeight,\n    Span,\n} from './span';\nimport { Context } from './context';\n\nregisterAtomType('enclose', (context: Context, atom: Atom): Span[] => {\n    const base = makeSpan(decompose(context, atom.body as Atom[]), '', 'mord');\n\n    // Account for the padding\n    const padding =\n        typeof atom.padding === 'number' ? atom.padding : FONTMETRICS.fboxsep;\n\n    // The 'ML__notation' class is required to prevent the span from being omitted\n    // during rendering (it looks like an empty, no-op span)\n    const notation = makeSpan('', 'ML__notation');\n    notation.setStyle('position', 'absolute');\n    notation.setStyle(\n        'height',\n        spanHeight(base) + spanDepth(base) + 2 * padding,\n        'em'\n    );\n    notation.height = spanHeight(base) + padding;\n    notation.depth = spanDepth(base) + padding;\n    if (padding !== 0) {\n        notation.setStyle('width', 'calc(100% + ' + 2 * padding + 'em)');\n    } else {\n        notation.setStyle('width', '100%');\n    }\n    notation.setStyle('top', '0');\n    notation.setStyle('left', -padding, 'em');\n    notation.setStyle('z-index', '-1'); // Ensure the box is *behind* the base\n    if (atom.backgroundcolor) {\n        notation.setStyle('background-color', atom.backgroundcolor);\n    }\n\n    if (atom.notation.box) notation.setStyle('border', atom.borderStyle);\n    if (atom.notation.actuarial) {\n        notation.setStyle('border-top', atom.borderStyle);\n        notation.setStyle('border-right', atom.borderStyle);\n    }\n    if (atom.notation.madruwb) {\n        notation.setStyle('border-bottom', atom.borderStyle);\n        notation.setStyle('border-right', atom.borderStyle);\n    }\n    if (atom.notation.roundedbox) {\n        notation.setStyle(\n            'border-radius',\n            (spanHeight(base) + spanDepth(base)) / 2,\n            'em'\n        );\n        notation.setStyle('border', atom.borderStyle);\n    }\n    if (atom.notation.circle) {\n        notation.setStyle('border-radius', '50%');\n        notation.setStyle('border', atom.borderStyle);\n    }\n    if (atom.notation.top) notation.setStyle('border-top', atom.borderStyle);\n    if (atom.notation.left) notation.setStyle('border-left', atom.borderStyle);\n    if (atom.notation.right) {\n        notation.setStyle('border-right', atom.borderStyle);\n    }\n    if (atom.notation.bottom) {\n        notation.setStyle('border-bottom', atom.borderStyle);\n    }\n\n    let svg = '';\n\n    if (atom.notation.horizontalstrike) {\n        svg += '<line x1=\"3%\"  y1=\"50%\" x2=\"97%\" y2=\"50%\"';\n        svg += ` stroke-width=\"${atom.strokeWidth}\" stroke=\"${atom.strokeColor}\"`;\n        svg += ' stroke-linecap=\"round\"';\n        if (atom.svgStrokeStyle) {\n            svg += ` stroke-dasharray=\"${atom.svgStrokeStyle}\"`;\n        }\n        svg += '/>';\n    }\n    if (atom.notation.verticalstrike) {\n        svg += '<line x1=\"50%\"  y1=\"3%\" x2=\"50%\" y2=\"97%\"';\n        svg += ` stroke-width=\"${atom.strokeWidth}\" stroke=\"${atom.strokeColor}\"`;\n        svg += ' stroke-linecap=\"round\"';\n        if (atom.svgStrokeStyle) {\n            svg += ` stroke-dasharray=\"${atom.svgStrokeStyle}\"`;\n        }\n        svg += '/>';\n    }\n    if (atom.notation.updiagonalstrike) {\n        svg += '<line x1=\"3%\"  y1=\"97%\" x2=\"97%\" y2=\"3%\"';\n        svg += ` stroke-width=\"${atom.strokeWidth}\" stroke=\"${atom.strokeColor}\"`;\n        svg += ' stroke-linecap=\"round\"';\n        if (atom.svgStrokeStyle) {\n            svg += ` stroke-dasharray=\"${atom.svgStrokeStyle}\"`;\n        }\n        svg += '/>';\n    }\n    if (atom.notation.downdiagonalstrike) {\n        svg += '<line x1=\"3%\"  y1=\"3%\" x2=\"97%\" y2=\"97%\"';\n        svg += ` stroke-width=\"${atom.strokeWidth}\" stroke=\"${atom.strokeColor}\"`;\n        svg += ' stroke-linecap=\"round\"';\n        if (atom.svgStrokeStyle) {\n            svg += ` stroke-dasharray=\"${atom.svgStrokeStyle}\"`;\n        }\n        svg += '/>';\n    }\n    // if (atom.notation.updiagonalarrow) {\n    //     const t = 1;\n    //     const length = Math.sqrt(w * w + h * h);\n    //     const f = 1 / length / 0.075 * t;\n    //     const wf = w * f;\n    //     const hf = h * f;\n    //     const x = w - t / 2;\n    //     let y = t / 2;\n    //     if (y + hf - .4 * wf < 0 ) y = 0.4 * wf - hf;\n    //     svg += '<line ';\n    //     svg += `x1=\"1\" y1=\"${h - 1}px\" x2=\"${x - .7 * wf}px\" y2=\"${y + .7 * hf}px\"`;\n    //     svg += ` stroke-width=\"${atom.strokeWidth}\" stroke=\"${atom.strokeColor}\"`;\n    //     svg += ' stroke-linecap=\"round\"';\n    //     if (atom.svgStrokeStyle) {\n    //         svg += ` stroke-dasharray=\"${atom.svgStrokeStyle}\"`;\n    //     }\n    //     svg += '/>';\n    //     svg += '<polygon points=\"';\n    //     svg += `${x},${y} ${x - wf - .4 * hf},${y + hf - .4 * wf} `;\n    //     svg += `${x - .7 * wf},${y + .7 * hf} ${x - wf + .4 * hf},${y + hf + .4 * wf} `;\n    //     svg += `${x},${y}`;\n    //     svg += `\" stroke='none' fill=\"${atom.strokeColor}\"`;\n    //     svg += '/>';\n    // }\n    // if (atom.notation.phasorangle) {\n    //     svg += '<path d=\"';\n    //     svg += `M ${h / 2},1 L1,${h} L${w},${h} \"`;\n    //     svg += ` stroke-width=\"${atom.strokeWidth}\" stroke=\"${atom.strokeColor}\" fill=\"none\"`;\n    //     if (atom.svgStrokeStyle) {\n    //         svg += ' stroke-linecap=\"round\"';\n    //         svg += ` stroke-dasharray=\"${atom.svgStrokeStyle}\"`;\n    //     }\n    //     svg += '/>';\n    // }\n    // if (atom.notation.radical) {\n    //     svg += '<path d=\"';\n    //     svg += `M 0,${.6 * h} L1,${h} L${emToPx(padding) * 2},1 \"`;\n    //     svg += ` stroke-width=\"${atom.strokeWidth}\" stroke=\"${atom.strokeColor}\" fill=\"none\"`;\n    //     if (atom.svgStrokeStyle) {\n    //         svg += ' stroke-linecap=\"round\"';\n    //         svg += ` stroke-dasharray=\"${atom.svgStrokeStyle}\"`;\n    //     }\n    //     svg += '/>';\n    // }\n    // if (atom.notation.longdiv) {\n    //     svg += '<path d=\"';\n    //     svg += `M ${w} 1 L1 1 a${emToPx(padding)} ${h / 2}, 0, 0, 1, 1 ${h} \"`;\n    //     svg += ` stroke-width=\"${atom.strokeWidth}\" stroke=\"${atom.strokeColor}\" fill=\"none\"`;\n    //     if (atom.svgStrokeStyle) {\n    //         svg += ' stroke-linecap=\"round\"';\n    //         svg += ` stroke-dasharray=\"${atom.svgStrokeStyle}\"`;\n    //     }\n    //     svg += '/>';\n    // }\n    if (svg) {\n        let svgStyle;\n        if (atom.shadow !== 'none') {\n            if (atom.shadow === 'auto') {\n                svgStyle =\n                    'filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)';\n            } else {\n                svgStyle = 'filter: drop-shadow(' + atom.shadow + ')';\n            }\n        }\n        addSVGOverlay(notation, svg, svgStyle);\n    }\n    const result = makeSpan([notation, base]);\n    // Set its position as relative so that the box can be absolute positioned\n    // over the base\n    result.setStyle('position', 'relative');\n    result.setStyle('display', 'inline');\n\n    // The padding adds to the width and height of the pod\n    result.height = spanHeight(base) + padding;\n    result.depth = spanDepth(base) + padding;\n    result.setLeft(padding);\n    result.setRight(padding);\n\n    return [result];\n});\n","import { registerAtomType, decompose, Atom } from './atom-utils';\nimport { METRICS as FONTMETRICS } from './font-metrics';\nimport {\n    makeSpan,\n    depth as spanDepth,\n    height as spanHeight,\n    Span,\n} from './span';\nimport { Context } from './context';\n\nregisterAtomType('box', (context: Context, atom: Atom): Span[] => {\n    // The padding extends outside of the base\n    const padding =\n        typeof atom.padding === 'number' ? atom.padding : FONTMETRICS.fboxsep;\n\n    // Base is the main content \"inside\" the box\n    const content = makeSpan(\n        decompose(context, atom.body as Atom[]),\n        '',\n        'mord'\n    );\n    content.setStyle('vertical-align', -spanDepth(content), 'em');\n    content.setStyle('height', 0);\n    const base = makeSpan(content, '', 'mord');\n\n    // This span will represent the box (background and border)\n    // It's positioned to overlap the base\n    // The 'ML__box' class is required to prevent the span from being omitted\n    // during rendering (it looks like an empty, no-op span)\n    const box = makeSpan('', 'ML__box');\n    box.setStyle('position', 'absolute');\n\n    box.setStyle(\n        'height',\n        spanHeight(base) + spanDepth(base) + 2 * padding,\n        'em'\n    );\n    if (padding !== 0) {\n        box.setStyle('width', 'calc(100% + ' + 2 * padding + 'em)');\n    } else {\n        box.setStyle('width', '100%');\n    }\n\n    box.setStyle('top', -padding, 'em');\n    box.setStyle('left', -padding, 'em');\n    box.setStyle('z-index', '-1'); // Ensure the box is *behind* the base\n    box.setStyle('box-sizing', 'border-box');\n\n    if (atom.backgroundcolor) {\n        box.setStyle('background-color', atom.backgroundcolor);\n    }\n    if (atom.framecolor) {\n        box.setStyle(\n            'border',\n            FONTMETRICS.fboxrule + 'em solid ' + atom.framecolor\n        );\n    }\n    if (atom.border) box.setStyle('border', atom.border);\n\n    base.setStyle('display', 'inline-block');\n    base.setStyle('height', spanHeight(base) + spanDepth(base), 'em');\n\n    // The result is a span that encloses the box and the base\n    const result = makeSpan([box, base]);\n    // Set its position as relative so that the box can be absolute positioned\n    // over the base\n    result.setStyle('position', 'relative');\n    result.setStyle('vertical-align', -padding + spanDepth(base), 'em');\n\n    // The padding adds to the width and height of the pod\n    result.height = spanHeight(base) + padding;\n    result.depth = spanDepth(base) + padding;\n    result.setLeft(padding);\n    result.setRight(padding);\n    result.setStyle('height', result.height + result.depth - 2 * padding, 'em');\n    result.setStyle('top', -padding, 'em');\n    result.setStyle('display', 'inline-block');\n\n    return [result];\n});\n","import { isArray } from '../common/types';\n\nimport { registerAtomType, decompose, Atom } from './atom-utils';\nimport { MATHSTYLES } from './mathstyle';\nimport { makeSymbol, makeSpan, Span } from './span';\nimport { Context } from './context';\n\n/**\n * Operators are handled in the TeXbook pg. 443-444, rule 13(a).\n */\nregisterAtomType('mop', (context: Context, atom: Atom): Span[] => {\n    const mathstyle = context.mathstyle;\n    let base: Span;\n    let baseShift = 0;\n    let slant = 0;\n    if (atom.isSymbol) {\n        // If this is a symbol, create the symbol.\n\n        // Most symbol operators get larger in displaystyle (rule 13)\n        const large =\n            mathstyle.size === MATHSTYLES.displaystyle.size &&\n            atom.symbol !== '\\\\smallint';\n\n        base = makeSymbol(\n            large ? 'Size2-Regular' : 'Size1-Regular',\n            atom.body as string,\n            'op-symbol ' + (large ? 'large-op' : 'small-op'),\n            'mop'\n        );\n\n        // Shift the symbol so its center lies on the axis (rule 13). It\n        // appears that our fonts have the centers of the symbols already\n        // almost on the axis, so these numbers are very small. Note we\n        // don't actually apply this here, but instead it is used either in\n        // the vlist creation or separately when there are no limits.\n        baseShift =\n            (base.height - base.depth) / 2 -\n            mathstyle.metrics.axisHeight * mathstyle.sizeMultiplier;\n\n        // The slant of the symbol is just its italic correction.\n        slant = base.italic;\n\n        base.applyStyle({\n            color: atom.phantom ? 'transparent' : atom.color,\n            backgroundColor: atom.phantom\n                ? 'transparent'\n                : atom.backgroundColor,\n            cssId: atom.cssId,\n            cssClass: atom.cssClass,\n            letterShapeStyle: context.letterShapeStyle,\n        });\n    } else if (isArray(atom.body)) {\n        // If this is a list, decompose that list.\n        base = makeSpan(decompose(context, atom.body), '', 'mop');\n    } else {\n        // Otherwise, this is a text operator. Build the text from the\n        // operator's name.\n        console.assert(atom.type === 'mop');\n        base = atom.makeSpan(context, atom.body);\n    }\n\n    // Bind the generated span and this atom so the atom can be retrieved\n    // from the span later.\n    atom.bind(context, base);\n\n    if (atom.isSymbol) base.setTop(baseShift);\n    let result = base;\n    if (atom.superscript || atom.subscript) {\n        const limits = atom.limits ?? 'auto';\n        if (\n            limits === 'limits' ||\n            (limits === 'auto' &&\n                mathstyle.size === MATHSTYLES.displaystyle.size)\n        ) {\n            result = atom.attachLimits(context, base, baseShift, slant);\n        } else {\n            result = atom.attachSupsub(context, base, 'mop');\n        }\n    }\n    return [result];\n});\n","import { registerAtomType, decompose, Atom } from './atom-utils';\nimport { MATHSTYLES } from './mathstyle';\nimport { METRICS as FONTMETRICS } from './font-metrics';\nimport { makeSpan, makeVlist, height as spanHeight, Span } from './span';\nimport { Context } from './context';\n\n/**\n * \\overline and \\underline\n */\nregisterAtomType('line', (context: Context, atom: Atom): Span[] => {\n    const mathstyle = context.mathstyle;\n    // TeXBook:443. Rule 9 and 10\n    const inner = decompose(context.cramp(), atom.body as Atom[]);\n    const ruleWidth =\n        FONTMETRICS.defaultRuleThickness / mathstyle.sizeMultiplier;\n    const line = makeSpan(\n        null,\n        context.mathstyle.adjustTo(MATHSTYLES.textstyle) +\n            ' ' +\n            atom.position +\n            '-line'\n    );\n    line.height = ruleWidth;\n    line.maxFontSize = 1.0;\n    let vlist;\n    if (atom.position === 'overline') {\n        vlist = makeVlist(context, [inner, 3 * ruleWidth, line, ruleWidth]);\n    } else {\n        const innerSpan = makeSpan(inner);\n        vlist = makeVlist(\n            context,\n            [ruleWidth, line, 3 * ruleWidth, innerSpan],\n            'top',\n            spanHeight(innerSpan)\n        );\n    }\n    return [makeSpan(vlist, atom.position, 'mord')];\n});\n","import { Atom, registerAtomType, decompose } from './atom-utils';\nimport {\n    makeSpan,\n    depth as spanDepth,\n    height as spanHeight,\n    Span,\n} from './span';\nimport { makeLeftRightDelim } from './delimiters';\nimport { Context } from './context';\n\n/**\n *  \\left....\\right\n *\n * Note that we can encounter malformed \\left...\\right, for example\n * a \\left without a matching \\right or vice versa. In that case, the\n * leftDelim (resp. rightDelim) will be undefined. We still need to handle\n * those cases.\n *\n */\nregisterAtomType('leftright', (context: Context, atom: Atom): Span[] => {\n    if (!atom.body) {\n        // No body, only a delimiter\n        if (atom.leftDelim) {\n            return new Atom('math', 'mopen', atom.leftDelim).decompose(context);\n        }\n        if (atom.rightDelim) {\n            return new Atom('math', 'mclose', atom.rightDelim).decompose(\n                context\n            );\n        }\n        return null;\n    }\n    // The scope of the context is this group, so make a copy of it\n    // so that any changes to it will be discarded when finished\n    // with this group.\n    const localContext = context.clone();\n    const inner = decompose(localContext, atom.body as Atom[]);\n    const mathstyle = localContext.mathstyle;\n    let innerHeight = 0;\n    let innerDepth = 0;\n    let result: Span[] = [];\n    // Calculate its height and depth\n    // The size of delimiters is the same, regardless of what mathstyle we are\n    // in. Thus, to correctly calculate the size of delimiter we need around\n    // a group, we scale down the inner size based on the size.\n    innerHeight = spanHeight(inner) * mathstyle.sizeMultiplier;\n    innerDepth = spanDepth(inner) * mathstyle.sizeMultiplier;\n    // Add the left delimiter to the beginning of the expression\n    if (atom.leftDelim) {\n        result.push(\n            atom.bind(\n                context,\n                makeLeftRightDelim(\n                    'mopen',\n                    atom.leftDelim,\n                    innerHeight,\n                    innerDepth,\n                    localContext,\n                    'ML__open'\n                )\n            )\n        );\n        result[result.length - 1].applyStyle(atom.getStyle());\n    }\n    if (inner) {\n        // Replace the delim (\\middle) spans with proper ones now that we know\n        // the height/depth\n        for (let i = 0; i < inner.length; i++) {\n            if (inner[i].delim) {\n                const savedCaret = inner[i].caret;\n                const savedSelected = /ML__selected/.test(inner[i].classes);\n                inner[i] = atom.bind(\n                    context,\n                    makeLeftRightDelim(\n                        'minner',\n                        inner[i].delim,\n                        innerHeight,\n                        innerDepth,\n                        localContext\n                    )\n                );\n                inner[i].caret = savedCaret;\n                inner[i].selected(savedSelected);\n            }\n        }\n        result = result.concat(inner);\n    }\n    // Add the right delimiter to the end of the expression.\n    if (atom.rightDelim) {\n        let delim = atom.rightDelim;\n        let classes;\n        if (delim === '?') {\n            if (context.smartFence) {\n                // Use a placeholder delimiter matching the open delimiter\n                delim = {\n                    '(': ')',\n                    '\\\\{': '\\\\}',\n                    '\\\\[': '\\\\]',\n                    '\\\\lbrace': '\\\\rbrace',\n                    '\\\\langle': '\\\\rangle',\n                    '\\\\lfloor': '\\\\rfloor',\n                    '\\\\lceil': '\\\\rceil',\n                    '\\\\vert': '\\\\vert',\n                    '\\\\lvert': '\\\\rvert',\n                    '\\\\Vert': '\\\\Vert',\n                    '\\\\lVert': '\\\\rVert',\n                    '\\\\lbrack': '\\\\rbrack',\n                    '\\\\ulcorner': '\\\\urcorner',\n                    '\\\\llcorner': '\\\\lrcorner',\n                    '\\\\lgroup': '\\\\rgroup',\n                    '\\\\lmoustache': '\\\\rmoustache',\n                }[atom.leftDelim];\n                delim = delim || atom.leftDelim;\n                classes = 'ML__smart-fence__close';\n            } else {\n                delim = '.';\n            }\n        }\n        result.push(\n            atom.bind(\n                context,\n                makeLeftRightDelim(\n                    'mclose',\n                    delim,\n                    innerHeight,\n                    innerDepth,\n                    localContext,\n                    (classes || '') + ' ML__close'\n                )\n            )\n        );\n        result[result.length - 1].applyStyle(atom.getStyle());\n    }\n    // If the `inner` flag is set, return the `inner` element (that's the\n    // behavior for the regular `\\left...\\right`\n    if (atom.inner) return [makeSpan(result, mathstyle.cls(), 'minner')];\n    // Otherwise, include a `\\mathopen{}...\\mathclose{}`. That's the\n    // behavior for `\\mleft...\\mright`, which allows for tighter spacing\n    // for example in `\\sin\\mleft(x\\mright)`\n    return result;\n});\n","import { isArray } from '../common/types';\n\nimport { registerAtomType, decompose, Atom } from './atom-utils';\nimport { MATHSTYLES } from './mathstyle';\nimport { METRICS as FONTMETRICS } from './font-metrics';\nimport {\n    makeSpan,\n    makeVlist,\n    depth as spanDepth,\n    height as spanHeight,\n    Span,\n} from './span';\nimport { Context } from './context';\n\nimport { makeCustomSizedDelim } from './delimiters';\n\nregisterAtomType('surd', (context: Context, atom: Atom): Span[] => {\n    // See the TeXbook pg. 443, Rule 11.\n    // http://www.ctex.org/documents/shredder/src/texbook.pdf\n    const mathstyle = context.mathstyle;\n    // First, we do the same steps as in overline to build the inner group\n    // and line\n    console.assert(isArray(atom.body));\n    const inner = decompose(context.cramp(), atom.body as Atom[]);\n    const ruleWidth =\n        FONTMETRICS.defaultRuleThickness / mathstyle.sizeMultiplier;\n    let phi = ruleWidth;\n    if (mathstyle.id < MATHSTYLES.textstyle.id) {\n        phi = mathstyle.metrics.xHeight;\n    }\n    // Calculate the clearance between the body and line\n    let lineClearance = ruleWidth + phi / 4;\n    const innerTotalHeight = Math.max(\n        2 * phi,\n        (spanHeight(inner) + spanDepth(inner)) * mathstyle.sizeMultiplier\n    );\n    const minDelimiterHeight = innerTotalHeight + (lineClearance + ruleWidth);\n\n    // Create a \\surd delimiter of the required minimum size\n    const delim = makeSpan(\n        makeCustomSizedDelim('', '\\\\surd', minDelimiterHeight, false, context),\n        'sqrt-sign'\n    );\n    delim.applyStyle(atom.getStyle());\n\n    const delimDepth = delim.height + delim.depth - ruleWidth;\n\n    // Adjust the clearance based on the delimiter size\n    if (delimDepth > spanHeight(inner) + spanDepth(inner) + lineClearance) {\n        lineClearance =\n            (lineClearance +\n                delimDepth -\n                (spanHeight(inner) + spanDepth(inner))) /\n            2;\n    }\n\n    // Shift the delimiter so that its top lines up with the top of the line\n    delim.setTop(\n        delim.height - spanHeight(inner) - (lineClearance + ruleWidth)\n    );\n    const line = makeSpan(\n        null,\n        context.mathstyle.adjustTo(MATHSTYLES.textstyle) + ' sqrt-line'\n    );\n    line.applyStyle(atom.getStyle());\n    line.height = ruleWidth;\n\n    const body = makeVlist(context, [inner, lineClearance, line, ruleWidth]);\n\n    if (!atom.index) {\n        return [atom.bind(context, makeSpan([delim, body], 'sqrt', 'mord'))];\n    }\n\n    // Handle the optional root index\n    // The index is always in scriptscript style\n    const newcontext = context.clone({\n        mathstyle: MATHSTYLES.scriptscriptstyle,\n    });\n    const root = makeSpan(\n        decompose(newcontext, atom.index),\n        mathstyle.adjustTo(MATHSTYLES.scriptscriptstyle)\n    );\n    // Figure out the height and depth of the inner part\n    const innerRootHeight = Math.max(delim.height, body.height);\n    const innerRootDepth = Math.max(delim.depth, body.depth);\n    // The amount the index is shifted by. This is taken from the TeX\n    // source, in the definition of `\\r@@t`.\n    const toShift = 0.6 * (innerRootHeight - innerRootDepth);\n    // Build a VList with the superscript shifted up correctly\n    const rootVlist = makeVlist(context, [root], 'shift', -toShift);\n\n    // Add a class surrounding it so we can add on the appropriate\n    // kerning\n\n    return [\n        atom.bind(\n            context,\n            makeSpan([makeSpan(rootVlist, 'root'), delim, body], 'sqrt', 'mord')\n        ),\n    ];\n});\n","import { colorToString } from './color';\nimport { joinLatex, register, getPropertyRuns } from './modes-utils';\nimport { getInfo, mathVariantToUnicode } from './definitions-utils';\nimport type { Atom } from './atom';\n\n// Each entry indicate the font-name (to be used to calculate font metrics)\n// and the CSS classes (for proper markup styling) for each possible\n// variant combinations.\nconst VARIANTS = {\n    // Handle some special characters which are only available in \"main\" font (not \"math\")\n    main: ['Main-Regular', 'ML__cmr'],\n    'main-italic': ['Main-Italic', 'ML__cmr ML__it'],\n    'main-bold': ['Main-Bold', 'ML__cmr ML__bold'],\n    'main-bolditalic': ['Main-BoldItalic', 'ML__cmr ML_bold ML__it'],\n\n    normal: ['Main-Regular', 'ML__cmr'], // 'main' font. There is no 'math' regular (upright)\n    'normal-bold': ['Main-Bold', 'ML__mathbf'], // 'main' font. There is no 'math' bold\n    'normal-italic': ['Math-Italic', 'ML__mathit'], // Special metrics for 'math'\n    'normal-bolditalic': ['Math-BoldItalic', 'ML__mathbfit'], // Special metrics for 'math'\n\n    // Extended math symbols, arrows, etc.. at their standard Unicode codepoints\n    ams: ['AMS-Regular', 'ML__ams'],\n    'ams-bold': ['AMS-Regular', 'ML__ams'],\n    'ams-italic': ['AMS-Regular', 'ML__ams'],\n    'ams-bolditalic': ['AMS-Regular', 'ML__ams'],\n\n    'sans-serif': ['SansSerif-Regular', 'ML__sans'],\n    'sans-serif-bold': ['SansSerif-Regular', 'ML__sans ML__bold'],\n    'sans-serif-italic': ['SansSerif-Regular', 'ML__sans'],\n    'sans-serif-bolditalic': ['SansSerif-Regular', 'ML__sans'],\n\n    calligraphic: ['Caligraphic-Regular', 'ML__cal'],\n    'calligraphic-bold': ['Caligraphic-Regular', 'ML__cal ML__bold'],\n    'calligraphic-italic': ['Caligraphic-Regular', 'ML__cal ML__it'],\n    'calligraphic-bolditalic': [\n        'Caligraphic-Regular',\n        'ML__cal ML__bold ML__it',\n    ],\n\n    script: ['Script-Regular', 'ML__script'],\n    'script-bold': ['Script-Regular', 'ML__script ML__bold'],\n    'script-italic': ['Script-Regular', 'ML__script ML__it'],\n    'script-bolditalic': ['Script-Regular', 'ML__script ML__bold ML__it'],\n\n    fraktur: ['Fraktur-Regular', 'ML__frak'],\n    'fraktur-bold': ['Fraktur-Regular', 'ML__frak'],\n    'fraktur-italic': ['Fraktur-Regular', 'ML__frak'],\n    'fraktur-bolditalic': ['Fraktur-Regular', 'ML__frak'],\n\n    monospace: ['Typewriter-Regular', 'ML__tt'],\n    'monospace-bold': ['Typewriter-Regular', 'ML__tt ML__bold'],\n    'monospace-italic': ['Typewriter-Regular', 'ML__tt ML__it'],\n    'monospace-bolditalic': ['Typewriter-Regular', 'ML__tt ML__bold ML__it'],\n\n    // Blackboard characters are 'A-Z' in the AMS font\n    'double-struck': ['AMS-Regular', 'ML__bb'],\n    'double-struck-bold': ['AMS-Regular', 'ML__bb'],\n    'double-struck-italic': ['AMS-Regular', 'ML__bb'],\n    'double-struck-bolditalic': ['AMS-Regular', 'ML__bb'],\n};\n\nconst VARIANT_REPERTOIRE = {\n    'double-struck': /^[A-Z ]$/,\n    script: /^[A-Z ]$/,\n    calligraphic: /^[0-9A-Z ]$/,\n    fraktur: /^[0-9A-Za-z ]$|^[!\"#$%&'()*+,\\-./:;=?[]^’‘]$/,\n    monospace: /^[0-9A-Za-z ]$|^[!\"&'()*+,\\-./:;=?@[\\]^_~\\u0131\\u0237\\u0393\\u0394\\u0398\\u039b\\u039e\\u03A0\\u03A3\\u03A5\\u03A8\\u03a9]$/,\n    'sans-serif': /^[0-9A-Za-z ]$|^[!\"&'()*+,\\-./:;=?@[\\]^_~\\u0131\\u0237\\u0393\\u0394\\u0398\\u039b\\u039e\\u03A0\\u03A3\\u03A5\\u03A8\\u03a9]$/,\n};\n\nconst GREEK_LOWERCASE = /^[\\u03b1-\\u03c9]|\\u03d1|\\u03d5|\\u03d6|\\u03f1|\\u03f5]$/;\nconst GREEK_UPPERCASE = /^[\\u0393|\\u0394|\\u0398|\\u039b|\\u039E|\\u03A0|\\u03A3|\\u03a5|\\u03a6|\\u03a8|\\u03a9]$/;\n\nconst LETTER_SHAPE_RANGES = [\n    /^[a-z]$/, // Lowercase latin\n    /^[A-Z]$/, // Upppercase latin\n    GREEK_LOWERCASE,\n    GREEK_UPPERCASE,\n];\n\n// The letterShapeStyle property indicates which characters should be\n// automatically italicized (see LETTER_SHAPE_RANGES)\nconst LETTER_SHAPE_MODIFIER = {\n    iso: ['it', 'it', 'it', 'it'],\n    tex: ['it', 'it', 'it', 'up'],\n    french: ['it', 'up', 'up', 'up'],\n    upright: ['up', 'up', 'up', 'up'],\n};\n\n// See http://ctan.math.illinois.edu/macros/latex/base/fntguide.pdf\n\nfunction emitLatexMathRun(\n    context: Atom,\n    run: Atom[],\n    expandMacro: boolean\n): string {\n    let contextValue = context.variant;\n    if (context.variantStyle && context.variantStyle !== 'up') {\n        contextValue += '-' + context.variantStyle;\n    }\n    return joinLatex(\n        getPropertyRuns(run, 'color').map((x) => {\n            const result = joinLatex(\n                getPropertyRuns(x, 'variant').map((x) => {\n                    let value = x[0].variant;\n                    if (x[0].variantStyle && x[0].variantStyle !== 'up') {\n                        value += '-' + x[0].variantStyle;\n                    }\n                    // Check if all the atoms in this run have a base\n                    // variant identical to the current variant\n                    // If so, we can skip wrapping them\n                    if (\n                        x.every((x) => {\n                            const info = getInfo(x.symbol, context.mode, null);\n                            if (!info || !(info.variant || info.variantStyle)) {\n                                return false;\n                            }\n                            let styledValue = x.variant;\n                            if (x.variantStyle && x.variantStyle !== 'up') {\n                                styledValue += '-' + x.variantStyle;\n                            }\n                            return styledValue === value;\n                        })\n                    ) {\n                        return joinLatex(x.map((x) => x.toLatex(expandMacro)));\n                    }\n\n                    let command = '';\n                    if (value && value !== contextValue) {\n                        command = {\n                            calligraphic: '\\\\mathcal{',\n                            fraktur: '\\\\mathfrak{',\n                            'double-struck': '\\\\mathbb{',\n                            script: '\\\\mathscr{',\n                            monospace: '\\\\mathtt{',\n                            'sans-serif': '\\\\mathsf{',\n                            normal: '\\\\mathrm{',\n                            'normal-italic': '\\\\mathit{',\n                            'normal-bold': '\\\\mathbf{',\n                            'normal-bolditalic': '\\\\mathbfit{',\n                            ams: '',\n                            'ams-italic': '\\\\mathit{',\n                            'ams-bold': '\\\\mathbf{',\n                            'ams-bolditalic': '\\\\mathbfit{',\n                            main: '',\n                            'main-italic': '\\\\mathit{',\n                            'main-bold': '\\\\mathbf{',\n                            'main-bolditalic': '\\\\mathbfit{',\n                            // There are a few rare font families possible, which\n                            // are not supported:\n                            // mathbbm, mathbbmss, mathbbmtt, mathds, swab, goth\n                            // In addition, the 'main' and 'math' font technically\n                            // map to \\mathnormal{}\n                        }[value];\n                        console.assert(typeof command !== 'undefined');\n                    }\n                    return (\n                        command +\n                        joinLatex(x.map((x) => x.toLatex(expandMacro))) +\n                        (command ? '}' : '')\n                    );\n                })\n            );\n            if (x[0].color && (!context || context.color !== x[0].color)) {\n                return (\n                    '\\\\textcolor{' +\n                    colorToString(x[0].color) +\n                    '}{' +\n                    result +\n                    '}'\n                );\n            }\n            return result;\n        })\n    );\n}\n\nfunction applyStyle(atom, style): string {\n    // letterShapeStyle will usually be set automatically, except when the\n    // locale cannot be determined, in which case its value will be 'auto'\n    // which we default to 'tex'\n    const letterShapeStyle =\n        style.letterShapeStyle === 'auto' || !style.letterShapeStyle\n            ? 'tex'\n            : style.letterShapeStyle;\n    let variant = style.variant || 'normal';\n    let variantStyle = style.variantStyle || '';\n\n    // 1. Remap to \"main\" font some characters that don't exist\n    // in the \"math\" font\n\n    // There are two fonts that include the roman italic characters, \"main-it\" and \"math\"\n    // They are similar, but the \"math\" font has some different kernings ('f')\n    // and some slightly different character shape. It doesn't include a few\n    // characters, so for those characters, \"main\" has to be used instead\n\n    // \\imath, \\jmath and \\pound don't exist in \"math\" font,\n    // so use \"main\" italic instead.\n    if (\n        variant === 'normal' &&\n        !variantStyle &&\n        /\\u00a3|\\u0131|\\u0237/.test(atom.body)\n    ) {\n        variant = 'main';\n        variantStyle = 'italic';\n    }\n\n    // 2. If no explicit variant style, auto-italicize some symbols,\n    // depending on the letterShapeStyle\n    if (variant === 'normal' && !variantStyle && atom.body.length === 1) {\n        LETTER_SHAPE_RANGES.forEach((x, i) => {\n            if (\n                x.test(atom.body) &&\n                LETTER_SHAPE_MODIFIER[letterShapeStyle][i] === 'it'\n            ) {\n                variantStyle = 'italic';\n            }\n        });\n    }\n\n    // 3. Map the variant + variantStyle to a font\n    if (variantStyle === 'up') {\n        variantStyle = '';\n    }\n    const styledVariant = variantStyle ? variant + '-' + variantStyle : variant;\n\n    console.assert(VARIANTS[styledVariant]);\n\n    const [fontName, classes] = VARIANTS[styledVariant];\n\n    // 4. If outside the font repertoire, switch to system font\n    // (return NULL to use default metrics)\n    if (\n        VARIANT_REPERTOIRE[variant] &&\n        !VARIANT_REPERTOIRE[variant].test(atom.body)\n    ) {\n        // Map to unicode character\n        atom.body = mathVariantToUnicode(atom.body, variant, variantStyle);\n        atom.variant = '';\n        atom.variantStyle = '';\n        // Return NULL to use default metrics\n        return null;\n    }\n    // Lowercase greek letters have an incomplete repertoire (no bold)\n    // so, for \\mathbf to behave correctly, add a 'lcGreek' class.\n    if (GREEK_LOWERCASE.test(atom.body)) {\n        atom.classes += ' lcGreek';\n    }\n\n    // 5. Assign classes based on the font\n    if (classes) {\n        atom.classes += ' ' + classes;\n    }\n\n    return fontName;\n}\n\nregister('math', {\n    emitLatexRun: emitLatexMathRun,\n    applyStyle,\n});\n","import { ErrorListener, Style } from '../public/core';\nimport {\n    joinLatex,\n    register,\n    getPropertyRuns,\n    ParseTokensOptions,\n} from './modes-utils';\nimport { colorToString } from './color';\nimport { Token } from './lexer';\nimport { Span } from './span';\nimport { Atom } from './atom';\nimport { getInfo, charToLatex, unicodeStringToLatex } from './definitions';\n\nfunction emitStringTextRun(\n    _context: Atom,\n    run: Atom[],\n    _expandMacro: boolean\n): string {\n    let needSpace = false;\n    return joinLatex(\n        run.map((x: Atom) => {\n            let result = '';\n            let space = '';\n            if (x.latex) {\n                result = x.latex;\n            } else if (typeof x.body === 'string') {\n                result = unicodeStringToLatex('text', x.body);\n            } else if (x.symbol) {\n                result = x.symbol.replace(/\\\\/g, '\\\\backslash ');\n            }\n            if (needSpace && (!result || /^[a-zA-Z0-9*]/.test(result))) {\n                space = '{}';\n            }\n            needSpace = /\\\\[a-zA-Z0-9]+\\*?$/.test(result);\n            return space + result;\n        })\n    );\n}\n\nfunction emitFontShapeTextRun(\n    context: Atom,\n    run: Atom[],\n    expandMacro: boolean\n): string {\n    return joinLatex(\n        getPropertyRuns(run, 'fontShape').map((x: Atom[]) => {\n            const result = emitStringTextRun(context, x, expandMacro);\n            if (x[0].fontShape === 'it') {\n                return '\\\\textit{' + result + '}';\n            }\n            if (x[0].fontShape === 'sl') {\n                return '\\\\textsl{' + result + '}';\n            }\n            if (x[0].fontShape === 'sc') {\n                return '\\\\textsc{' + result + '}';\n            }\n            if (x[0].fontShape === 'n') {\n                return '\\\\textup{' + result + '}';\n            }\n            if (x[0].fontShape) {\n                return '\\\\fontshape{' + x[0].fontShape + '}' + result;\n            }\n            return result;\n        })\n    );\n}\n\nfunction emitFontSeriesTextRun(\n    context: Atom,\n    run: Atom[],\n    expandMacro: boolean\n): string {\n    return joinLatex(\n        getPropertyRuns(run, 'fontSeries').map((x) => {\n            const result = emitFontShapeTextRun(context, x, expandMacro);\n            if (x[0].fontSeries === 'b') {\n                return '\\\\textbf{' + result + '}';\n            }\n            if (x[0].fontSeries === 'l') {\n                return '\\\\textlf{' + result + '}';\n            }\n            if (x[0].fontSeries === 'm') {\n                return '\\\\textmd{' + result + '}';\n            }\n            if (x[0].fontSeries) {\n                return '\\\\fontseries{' + x[0].fontSeries + '}' + result;\n            }\n            return result;\n        })\n    );\n}\n\nfunction emitSizeTextRun(\n    context: Atom,\n    run: Atom[],\n    expandMacro: boolean\n): string {\n    return joinLatex(\n        getPropertyRuns(run, 'fontSize').map((x: Atom[]) => {\n            const result = emitFontSeriesTextRun(context, x, expandMacro);\n            const command =\n                {\n                    size1: 'tiny',\n                    size2: 'scriptsize',\n                    size3: 'footnotesize',\n                    size4: 'small',\n                    size5: 'normalsize',\n                    size6: 'large',\n                    size7: 'Large',\n                    size8: 'LARGE',\n                    size9: 'huge',\n                    size10: 'Huge',\n                }[x[0].fontSize] || '';\n            if (command) {\n                return '\\\\' + command + ' ' + result;\n            }\n            return result;\n        })\n    );\n}\n\nfunction emitFontFamilyTextRun(\n    context: Atom,\n    run: Atom[],\n    expandMacro: boolean\n): string {\n    return joinLatex(\n        getPropertyRuns(run, 'fontFamily').map((x: Atom[]) => {\n            const result = emitSizeTextRun(context, x, expandMacro);\n            const command =\n                {\n                    roman: 'textrm',\n                    monospace: 'texttt',\n                    'sans-serif': 'textsf',\n                }[x[0].fontFamily] || '';\n            if (command) {\n                return '\\\\' + command + '{' + result + '}';\n            }\n            if (x[0].fontFamily) {\n                return '\\\\fontfamily{' + x[0].fontFamily + '}' + result;\n            }\n            return result;\n        })\n    );\n}\n\nfunction emitStyledTextRun(\n    context: Atom,\n    run: Atom[],\n    expandMacro: boolean\n): string {\n    return emitFontFamilyTextRun(context, run, expandMacro);\n}\n\nfunction emitColorRun(\n    context: Atom,\n    run: Atom[],\n    expandMacro: boolean\n): string {\n    return joinLatex(\n        getPropertyRuns(run, 'color').map((x) => {\n            const result = emitStyledTextRun(context, x, expandMacro);\n\n            if (\n                x[0].color &&\n                x[0].color !== 'none' &&\n                (!context || context.color !== x[0].color)\n            ) {\n                // If there is a color specified, and it is different\n                // from our context color, output a command\n                return (\n                    '\\\\textcolor{' +\n                    colorToString(x[0].color) +\n                    '}{' +\n                    result +\n                    '}'\n                );\n            }\n            return result;\n        })\n    );\n}\n\nfunction emitLatexTextRun(\n    context: Atom,\n    run: Atom[],\n    expandMacro: boolean\n): string {\n    const result = emitColorRun(context, run, expandMacro);\n\n    const allAtomsHaveShapeOrSeriesOrFontFamily = run.every(\n        (x: Atom) => x.fontSeries || x.fontShape || x.fontFamily\n    );\n    if (\n        !allAtomsHaveShapeOrSeriesOrFontFamily ||\n        run[0].mode !== context.mode\n    ) {\n        // Wrap in text, only if there isn't a shape or series on\n        // all the atoms, because if so, it will be wrapped in a\n        // \\\\textbf, \\\\textit, etc... and the \\\\text would be redundant\n        return `\\\\text{${result}}`;\n    }\n    return result;\n}\n\nconst TEXT_FONT_CLASS = {\n    roman: '',\n    'sans-serif': 'ML__sans',\n    monospace: 'ML__tt',\n};\n\n/**\n * Return the font-family name\n */\nfunction applyStyle(span: Span, style: Style): string {\n    const fontFamily = style.fontFamily;\n\n    if (TEXT_FONT_CLASS[fontFamily]) {\n        span.classes += ' ' + TEXT_FONT_CLASS[fontFamily];\n    } else if (fontFamily) {\n        // Not a well-known family. Use a style.\n        span.setStyle('font-family', fontFamily);\n    }\n\n    if (style.fontShape) {\n        span.classes +=\n            ' ' +\n            ({\n                it: 'ML__it',\n                sl: 'ML__shape_sl', // slanted\n                sc: 'ML__shape_sc', // small caps\n                ol: 'ML__shape_ol', // outline\n            }[style.fontShape] || '');\n    }\n    if (style.fontSeries) {\n        const m = style.fontSeries.match(/(.?[lbm])?(.?[cx])?/);\n        if (m) {\n            span.classes +=\n                ' ' +\n                ({\n                    ul: 'ML__series_ul',\n                    el: 'ML__series_el',\n                    l: 'ML__series_l',\n                    sl: 'ML__series_sl',\n                    m: '', // medium (default)\n                    sb: 'ML__series_sb',\n                    b: 'ML__bold',\n                    eb: 'ML__series_eb',\n                    ub: 'ML__series_ub',\n                }[m[1] || ''] || '');\n            span.classes +=\n                ' ' +\n                ({\n                    uc: 'ML__series_uc',\n                    ec: 'ML__series_ec',\n                    c: 'ML__series_c',\n                    sc: 'ML__series_sc',\n                    n: '', // normal (default)\n                    sx: 'ML__series_sx',\n                    x: 'ML__series_x',\n                    ex: 'ML__series_ex',\n                    ux: 'ML__series_ux',\n                }[m[2] || ''] || '');\n        }\n    }\n    // Always use the metrics of 'Main-Regular' in text mode\n    return 'Main-Regular';\n}\n\n// Given an array of tokens, return an array of atoms\n// options.args\n// options.macros\n// options.smartFence\n// options.style\n// options.parser\nfunction parse(\n    tokens: Token[],\n    error: ErrorListener,\n    options: ParseTokensOptions\n): [Atom[], Token[]] {\n    let result = [];\n    let atom: Atom;\n\n    while (tokens.length > 0) {\n        const token = tokens.shift();\n        if (token.type === 'space') {\n            atom = new Atom('text', '', ' ', options.style);\n            atom.symbol = ' ';\n            result.push(atom);\n        } else if (token.type === 'placeholder') {\n            // RENDER PLACEHOLDER\n            atom = new Atom('text', 'placeholder', token.value as string);\n            atom.captureSelection = true;\n            result.push(atom);\n        } else if (token.type === 'command') {\n            // Invoke the 'main' parser to handle the command\n            tokens.unshift(token);\n            let atoms: Atom[];\n            [atoms, tokens] = options.parse('text', tokens, options);\n            result = [...result, ...atoms];\n        } else if (token.type === 'literal') {\n            const info = getInfo(token.value as string, 'text', options.macros);\n            if (!info) {\n                error({ code: 'unexpected-token' });\n            } else if (!info.mode || info.mode.includes('text')) {\n                atom = new Atom(\n                    'text',\n                    info ? info.type : '', // @todo: revisit. Use 'text' type?\n                    info ? info.value : (token.value as string),\n                    options.style\n                );\n                atom.symbol = token.value as string;\n                atom.latex = charToLatex('text', token.value as string);\n                result.push(atom);\n            } else {\n                error({ code: 'unexpected-token' });\n            }\n        } else if (token.type === '$' || token.type === '$$') {\n            // Mode-shift\n            const subtokens = tokens.slice(\n                0,\n                tokens.findIndex((x: Token) => x.type === token.type)\n            );\n            tokens = tokens.slice(subtokens.length + 1);\n            const [atoms] = options.parse('math', subtokens, options);\n            result = [...result, ...atoms];\n        } else if (token.type === '{' || token.type === '}') {\n            // Spurious braces are ignored by TeX in text mode\n            // In text mode, braces are sometimes used to separate adjacent\n            // commands without inserting a space, e.g. \"\\backlash{}command\"\n        } else {\n            error({\n                code: 'unexpected-token',\n                arg: token.type + (token.value ?? ''),\n            });\n        }\n    }\n    return [result, tokens];\n}\n\nregister('text', {\n    emitLatexRun: emitLatexTextRun,\n    applyStyle,\n    parse: (tokens, error, options) => parse(tokens, error, options)[0],\n});\n","import { isArray } from '../common/types';\n\nimport {\n    getEnvironmentDefinition,\n    getInfo,\n    unicodeCharToLatex,\n    MacroDictionary,\n} from './definitions';\nimport { stringToColor } from './color';\nimport { convertDimenToEm } from './font-metrics';\nimport { Token, tokenize } from './lexer';\nimport { Atom, Colspec, BBoxParam } from './atom';\nimport { parseTokens } from './modes';\nimport { FunctionDefinition } from './definitions-utils';\nimport { ErrorListener, MacroDefinition, Style } from '../public/core';\nimport { ParseModePrivate } from './context';\n\nfunction tokensToString(tokens: Token[]): string {\n    let hasParamToken = false;\n    const result = tokens\n        .map((token) => {\n            if (token.type === 'literal') {\n                return token.value;\n            }\n            if (token.type === '{') {\n                return '{';\n            }\n            if (token.type === '}') {\n                return '}';\n            }\n            if (token.type === 'command') {\n                return '\\\\' + token.value;\n            }\n            if (token.type === 'placeholder') {\n                return '#?';\n            }\n            if (token.type === '#') {\n                hasParamToken = true;\n                return '#' + token.value;\n            }\n            if (token.type === 'space') {\n                return ' ';\n            }\n            if (token.type === '$') {\n                return '$';\n            }\n            if (token.type === '$$') {\n                return '$$';\n            }\n            console.error('Unexpected token type ', token.type);\n            return '';\n        })\n        .join('');\n    return hasParamToken ? '' : result;\n}\n\n/**\n * A parser transforms a list of tokens into a list of Atom.\n *\n * @param {Token[]} tokens - An array of tokens generated by the lexer.\n * @param {Object.<string>} [args] - An optional list of arguments. `#n` tokens will be\n * substituted with the corresponding element in the args object. This is used\n * when parsing macros.\n * @class module:core/parser#Parser\n * @property {Token[]} tokens - An array of tokens generated by the lexer.\n * @property {Object.<string>} args - Optional arguments to substitute the `#` token.\n * @property {Object.<string, string>} macros - A dictionary of objects, index by the name of\n * the macro, with the following keys:\n *    * args: an integer, the number of arguments, default 0. They can be referenced as #0,\n *       #1, #2... inside the definition of the macro\n *    * def: a string, the definition of the macro, which can reference other macros\n * @property {number} index - The current token to be parsed: index in `this.tokens`\n * @property {Atom[]} mathList - Accumulated result of the parsing by\n * `parseAtom()`\n * @property {object} style - The font, weight, color, etc. to apply to the\n * upcoming tokens\n * @property {string} parseMode - The parse mode indicates the syntax rules to\n * use to parse the upcoming tokens.\n *  Valid values include:\n *  - `'math'`: spaces are ignored, math functions are allowed\n *  - `'text'`: spaces are accounted for, math functions are ignored\n *  - `'string'`\n *  - `'color'`: color name, hex value: `'#fff'`, `'#a0a0a0'`\n *  - `'number'`: `+/-12.56`\n *  - `'dimen'`: `'25mu'`, `'2pt'`\n *  - `'skip'`: `'25mu plus 2em minus fiLll'`, `'2pt'`\n *  - `'colspec'`: formating of a column in tabular environment, e.g. `'r@{.}l'`\n * @property {boolean} tabularMode - When in tabular mode, `'&'` is interpreted as\n *  a column separator and `'\\'` as a row separator. Used for matrixes, etc...\n * @property {number} endCount - Counter to prevent deadlock. If `end()` is\n * called too many times (1,000) in a row for the same token, bail.\n */\nclass Parser {\n    tokens: Token[];\n    args: (string | Atom[])[];\n    macros: MacroDictionary;\n\n    onError: ErrorListener;\n    index = 0;\n    mathList: Atom[] = [];\n    style: Style = {};\n    parseMode: ParseModePrivate = 'math';\n    smartFence = false;\n    tabularMode = false;\n    endCount = 0;\n\n    constructor(\n        tokens: Token[],\n        args: (string | Atom[])[],\n        macros: MacroDictionary,\n        onError: ErrorListener\n    ) {\n        this.tokens = tokens;\n        this.args = args;\n        this.macros = macros;\n        this.onError = (err): void =>\n            onError({\n                before: tokensToString(\n                    this.tokens.slice(this.index, this.index + 10)\n                ),\n                after: tokensToString(\n                    this.tokens.slice(Math.max(0, this.index - 10), this.index)\n                ),\n                ...err,\n            });\n    }\n    swapMathList(newMathList: Atom[] = []): Atom[] {\n        const result = this.mathList;\n        this.mathList = newMathList;\n        return result;\n    }\n    swapParseMode(mode: ParseModePrivate): ParseModePrivate {\n        const result = this.parseMode;\n        this.parseMode = mode;\n        return result;\n    }\n    /**\n     * True if we've reached the end of the token stream.\n     */\n    end(): boolean {\n        // To prevent a deadlock, count how many times end() is called without the\n        // index advancing. If it happens more than 1,000 times in a row,\n        // assume something is broken and pretend the stream is finished.\n        this.endCount++;\n        return this.index >= this.tokens.length || this.endCount > 1000;\n    }\n    get(): Token | null {\n        this.endCount = 0;\n        return this.index < this.tokens.length\n            ? this.tokens[this.index++]\n            : null;\n    }\n    peek(offset = 0): Token | null {\n        const index = this.index + offset;\n        return index < this.tokens.length ? this.tokens[index] : null;\n    }\n    /**\n     * Return the last atom of the math list that can have a subsup attached to it.\n     * If there isn't one, insert a `msubsup` and return it.\n     */\n    lastSubsupAtom(): Atom {\n        const lastAtom =\n            this.mathList.length === 0\n                ? undefined\n                : this.mathList[this.mathList.length - 1];\n        if (\n            !lastAtom ||\n            (lastAtom.type !== 'mop' && lastAtom.type !== 'msubsup')\n        ) {\n            if (!lastAtom?.limits || lastAtom?.limits === 'nolimits') {\n                this.mathList.push(\n                    new Atom(this.parseMode, 'msubsup', '\\u200b')\n                );\n            }\n        }\n        return this.mathList[this.mathList.length - 1];\n    }\n    /**\n     * @return True if the next token is of the specified type\n     */\n    hasToken(type: string): boolean {\n        const index = this.index;\n        return index < this.tokens.length\n            ? this.tokens[index].type === type\n            : false;\n    }\n    /**\n     * @return True if the next token is of type `'literal` and has the\n     * specified value. If `value` is empty, return true if the token is of type\n     * `'literal'`\n     */\n    hasLiteral(value = ''): boolean {\n        const index = this.index;\n        return index < this.tokens.length\n            ? this.tokens[index].type === 'literal' &&\n                  (!value || this.tokens[index].value === value)\n            : false;\n    }\n    /**\n     * @param pattern\n     * @return True if the next token is of type `'literal` and matches\n     * the specified regular expression pattern.\n     */\n    hasLiteralPattern(pattern: RegExp): boolean {\n        return (\n            this.hasToken('literal') &&\n            pattern.test(this.tokens[this.index].value as string)\n        );\n    }\n    hasCommand(command: string): boolean {\n        console.assert(\n            command === '\\\\' || command.charAt(0) !== '\\\\',\n            'hasCommand() does not require a \\\\'\n        );\n        const index = this.index;\n        return index < this.tokens.length\n            ? this.tokens[index].type === 'command' &&\n                  this.tokens[index].value === command\n            : false;\n    }\n    hasInfixCommand(): boolean {\n        const index = this.index;\n        if (\n            index < this.tokens.length &&\n            this.tokens[index].type === 'command'\n        ) {\n            const info = getInfo(\n                '\\\\' + this.tokens[index].value,\n                this.parseMode,\n                this.macros\n            );\n            if (info?.mode && !info.mode.includes(this.parseMode)) return false;\n            return info?.infix;\n        }\n        return false;\n    }\n    hasColumnSeparator(): boolean {\n        const index = this.index;\n        return this.tabularMode && index < this.tokens.length\n            ? this.tokens[index].type === 'literal' &&\n                  this.tokens[index].value === '&'\n            : false;\n    }\n    hasRowSeparator(): boolean {\n        const index = this.index;\n        return this.tabularMode && index < this.tokens.length\n            ? this.tokens[index].type === 'command' &&\n                  (this.tokens[index].value === '\\\\' ||\n                      this.tokens[index].value === 'cr')\n            : false;\n    }\n    parseColumnSeparator(): boolean {\n        if (this.hasColumnSeparator()) {\n            this.index++;\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Return the appropriate value for a placeholder, either a default\n     * one, or if a value was provided for #? via args, that value.\n     */\n    placeholder(): Atom[] {\n        if (!this.args || typeof this.args['?'] === 'undefined') {\n            // U+2753 = BLACK QUESTION MARK ORNAMENT\n            const result = new Atom(\n                this.parseMode,\n                'placeholder',\n                '?',\n                this.style\n            );\n            result.captureSelection = true;\n            return [result];\n        }\n        if (typeof this.args?.['?'] === 'string') {\n            // If there is a specific value defined for the placeholder,\n            // use it.\n            return parseString(\n                this.args['?'],\n                this.parseMode,\n                null,\n                this.macros,\n                false,\n                this.onError\n            );\n        }\n        return this.args['?'];\n    }\n    hasImplicitCommand(commands: string[]): boolean {\n        if (this.index < this.tokens.length) {\n            const token = this.tokens[this.index];\n            if (token.type === 'command') {\n                return commands.includes(token.value as string);\n            }\n        }\n        return false;\n    }\n    parseRowSeparator(): boolean {\n        if (this.hasRowSeparator()) {\n            this.index++;\n            return true;\n        }\n        return false;\n    }\n\n    parseToken(type: string): boolean {\n        if (this.hasToken(type)) {\n            this.index++;\n            return true;\n        }\n        return false;\n    }\n    skipWhitespace(): boolean {\n        let found = false;\n        while (this.hasToken('space')) {\n            this.index++;\n            found = true;\n        }\n        return found;\n    }\n    skipUntilToken(type: string): void {\n        while (!this.end() && !this.parseToken(type)) {\n            this.get();\n        }\n    }\n    parseArguments(\n        info: FunctionDefinition\n    ): [\n        ParseModePrivate,\n        (string | number | BBoxParam | Colspec[] | Atom | Atom[])[]\n    ] {\n        if (!info || !info.params) return ['', []];\n        let explicitGroup: ParseModePrivate = '';\n        const args: (\n            | string\n            | number\n            | BBoxParam\n            | Colspec[]\n            | Atom\n            | Atom[]\n        )[] = [];\n        let i = info.infix ? 2 : 0;\n        while (i < info.params.length) {\n            const param = info.params[i];\n            // Parse an argument\n            if (param.isOptional) {\n                args.push(this.scanOptionalArg(param.type));\n            } else if (param.type.endsWith('*')) {\n                // For example 'math*'.\n                // In this case, indicate that a 'yet-to-be-parsed'\n                // argument (and 'explicit group') is present\n                explicitGroup = param.type.slice(0, -1) as ParseModePrivate;\n            } else {\n                // If it's not present, scanArg returns null.\n                const arg = this.scanArg(param.type);\n                if (arg) {\n                    args.push(arg);\n                } else {\n                    // Report an error\n                    this.onError({ code: 'missing-argument' });\n                    args.push(this.placeholder());\n                }\n            }\n            i += 1;\n        }\n        return [explicitGroup, args];\n    }\n    parseCommand(command: string): boolean {\n        if (this.hasCommand(command)) {\n            this.index++;\n            return true;\n        }\n        return false;\n    }\n    parseLiteral(literal: string): boolean {\n        if (this.hasLiteral(literal)) {\n            this.index++;\n            return true;\n        }\n        return false;\n    }\n    parseFiller(): boolean {\n        let skipped = false;\n        let done = false;\n        do {\n            const skippedSpace = this.skipWhitespace();\n            const skippedRelax = this.parseCommand('relax');\n            skipped = skipped || skippedSpace || skippedRelax;\n            done = !skippedSpace && !skippedRelax;\n        } while (!done);\n        return skipped;\n    }\n    /**\n     * Keywords are used to specify dimensions, and for various other\n     * syntactic constructs. Unlike commands, they are not case sensitive.\n     * There are 25 keywords:\n     * at by bp cc cm dd depth em ex fil fill filll height in minus\n     * mm mu pc plus pt sp spread to true width\n     *\n     * TeX: 8212\n     * @return true if the expected keyword is present\n     */\n    parseKeyword(keyword: string): boolean {\n        const savedIndex = this.index;\n        let done = this.end();\n        let value = '';\n        while (!done) {\n            const token = this.get();\n            if (token?.type === 'literal') {\n                value += token.value;\n            }\n            done =\n                this.end() ||\n                token?.type !== 'literal' ||\n                value.length >= keyword.length;\n        }\n        const hasKeyword = keyword.toUpperCase() === value.toUpperCase();\n        if (!hasKeyword) {\n            this.index = savedIndex;\n        }\n        return hasKeyword;\n    }\n    /**\n     * Return a sequence of characters as a string.\n     * i.e. 'abcd' returns 'abcd'.\n     * Terminates on the first non-character encountered\n     * e.g. '{', '}' etc...\n     * Will also terminate on ']'\n     */\n    scanString(): string {\n        let result = '';\n        let done = this.end();\n        while (!done) {\n            if (this.hasLiteral(']')) {\n                done = true;\n            } else if (this.hasToken('literal')) {\n                result += this.get()!.value;\n            } else if (this.skipWhitespace()) {\n                result += ' ';\n            } else if (this.hasToken('command')) {\n                const token = this.get();\n                if (token!.value === 'space') {\n                    // The 'space' command is the ~\n                    // which can be used for example in operator names, i.e.\n                    // \\operatorname{lim~inf}. It's interpreted as a nbs\n                    result += '\\u00a0'; // NO-BREAK SPACE\n                } else {\n                    // TeX will give a 'Missing \\endcsname inserted' error\n                    // if it encounters any command when expecting a string.\n                    // We're a bit more lax.\n                    this.onError({ code: 'unbalanced-braces' });\n                    result += token!.value;\n                }\n            } else {\n                done = true;\n            }\n            done = done || this.end();\n        }\n        return result;\n    }\n    /**\n     * Return the literal tokens, as a string, until a matching closing \"}\"\n     */\n    scanLiteralArg(): string {\n        let result = '';\n        if (this.hasToken('{')) {\n            this.get(); // Skip initial \"{\"\n            let depth = 1;\n            while (depth > 0 && !this.end()) {\n                const token = this.get()!;\n                if (token.type === 'space') {\n                    result += ' ';\n                } else if (token.type === '#') {\n                    result += '#' + token.value;\n                } else if (token.type === 'command') {\n                    result += '\\\\' + token.value;\n                } else if (token.type === '}') {\n                    depth -= 1;\n                    if (depth > 0) {\n                        // Don't include final '}'\n                        result += '}';\n                    }\n                } else if (token.type === '{') {\n                    depth += 1;\n                    result += '{';\n                } else {\n                    result += token.value;\n                }\n            }\n        }\n        return result;\n    }\n    /**\n     * Return a CSS color (#rrggbb)\n     */\n    scanColor(): string {\n        return stringToColor(this.scanString());\n    }\n    /**\n     * Return as a number a group of characters representing a\n     * numerical quantity.\n     *\n     * From TeX:8695 (scan_int):\n     * An integer number can be preceded by any number of spaces and `\\.+' or\n     * `\\.-' signs. Then comes either a decimal constant (i.e., radix 10), an\n     * octal constant (i.e., radix 8, preceded by~\\.\\'), a hexadecimal constant\n     * (radix 16, preceded by~\\.\"), an alphabetic constant (preceded by~\\.\\`), or\n     * an internal variable.\n     */\n    scanNumber(isInteger = true): number {\n        const negative = this.parseLiteral('-');\n        // Optional (ignorable) '+' sign\n        if (!negative) this.parseLiteral('+');\n        this.skipWhitespace();\n        isInteger = !!isInteger;\n        let radix = 10;\n        let digits = /[0-9]/;\n        if (this.parseLiteral(\"'\")) {\n            // Apostrophe indicates an octal value\n            radix = 8;\n            digits = /[0-7]/;\n            isInteger = true;\n        } else if (this.parseLiteral('\"') || this.parseLiteral('x')) {\n            // Double-quote indicates a hex value\n            // The 'x' prefix notation for the hexadecimal numbers is a MathJax extension.\n            // For example: 'x3a'\n            radix = 16;\n            // Hex digits have to be upper-case\n            digits = /[0-9A-F]/;\n            isInteger = true;\n        }\n        let value = '';\n        while (this.hasLiteralPattern(digits)) {\n            value += this.get()!.value;\n        }\n        // Parse the fractional part, if applicable\n        if (!isInteger && (this.parseLiteral('.') || this.parseLiteral(','))) {\n            value += '.';\n            while (this.hasLiteralPattern(digits)) {\n                value += this.get()!.value;\n            }\n        }\n        const result = isInteger ? parseInt(value, radix) : parseFloat(value);\n        return negative ? -result : result;\n    }\n    /**\n     * Return as a floating point number a dimension in pt (1 em = 10 pt)\n     *\n     * See TeX:8831\n     * @todo: note that some units depend on the font (em, ex). So it might be\n     * better to return a dimen struct with the value + unit and resolve\n     * later when we have a font context....\n     */\n    scanDimen(): number {\n        const value = this.scanNumber(false);\n        this.skipWhitespace();\n        let result;\n        if (this.parseKeyword('pt')) {\n            result = convertDimenToEm(value, 'pt');\n        } else if (this.parseKeyword('mm')) {\n            result = convertDimenToEm(value, 'mm');\n        } else if (this.parseKeyword('cm')) {\n            result = convertDimenToEm(value, 'cm');\n        } else if (this.parseKeyword('ex')) {\n            result = convertDimenToEm(value, 'ex');\n        } else if (this.parseKeyword('px')) {\n            result = convertDimenToEm(value, 'px');\n        } else if (this.parseKeyword('em')) {\n            result = convertDimenToEm(value, 'em');\n        } else if (this.parseKeyword('bp')) {\n            result = convertDimenToEm(value, 'bp');\n        } else if (this.parseKeyword('dd')) {\n            result = convertDimenToEm(value, 'dd');\n        } else if (this.parseKeyword('pc')) {\n            result = convertDimenToEm(value, 'pc');\n        } else if (this.parseKeyword('in')) {\n            result = convertDimenToEm(value, 'in');\n        } else if (this.parseKeyword('mu')) {\n            result = convertDimenToEm(value, 'mu');\n        } else {\n            // If the units are missing, TeX assumes 'pt'\n            this.onError({ code: 'missing-unit' });\n            result = convertDimenToEm(value, 'pt');\n        }\n        return result;\n    }\n    scanSkip(): number {\n        const result = this.scanDimen();\n        // We parse, but ignore the optional 'plus' and 'minus'\n        // arguments.\n        this.skipWhitespace();\n        // 'plus', optionally followed by 'minus'\n        // ('minus' cannot come before 'plus')\n        // dimen or 'hfill'\n        if (this.parseKeyword('plus')) {\n            // @todo there could also be a \\hFilLlL command here\n            this.scanDimen();\n        }\n        this.skipWhitespace();\n        if (this.parseKeyword('minus')) {\n            // @todo there could also be a \\hFilLlL command here\n            this.scanDimen();\n        }\n        return result;\n    }\n    scanColspec(): Colspec[] {\n        this.skipWhitespace();\n        const result: Colspec[] = [];\n        while (!this.end() && !(this.hasToken('}') || this.hasLiteral(']'))) {\n            if (this.hasLiteral()) {\n                const literal = this.get()!.value as string;\n                if ('lcr'.includes(literal)) {\n                    result.push({ align: literal as 'l' | 'c' | 'r' | 'm' });\n                } else if (literal === '|') {\n                    result.push({ rule: true });\n                } else if (literal === '@') {\n                    if (this.parseToken('{')) {\n                        const savedParsemode = this.swapParseMode('math');\n                        result.push({\n                            gap: this.scanImplicitGroup(\n                                (token) => token.type === '}'\n                            ),\n                        });\n                        this.swapParseMode(savedParsemode);\n                    }\n                    this.parseToken('}');\n                }\n            }\n        }\n        return result;\n    }\n    /**\n     * Parse a `\\(...\\)` or `\\[...\\]` sequence\n     * @return group for the sequence or null\n     */\n    scanModeSet(): Atom {\n        let final: string;\n        if (this.parseCommand('(')) final = ')';\n        if (!final && this.parseCommand('[')) final = ']';\n        if (!final) return null;\n        const savedParsemode = this.swapParseMode('math');\n        const result = new Atom('math', 'group');\n        result.mathstyle = final === ')' ? 'textstyle' : 'displaystyle';\n        result.body = this.scanImplicitGroup(\n            (token: Token) => token.type === 'command' && token.value === final\n        );\n        this.parseCommand(final);\n        this.swapParseMode(savedParsemode);\n        if (!result.body || result.body.length === 0) return null;\n        return result;\n    }\n    /**\n     * Parse a `$...$` or `$$...$$` sequence\n     */\n    scanModeShift(): Atom {\n        if (!this.hasToken('$') && !this.hasToken('$$')) return null;\n        const final = this.get()!.type;\n        const result = new Atom('math', 'group');\n        result.mathstyle = final === '$' ? 'textstyle' : 'displaystyle';\n        result.latexOpen = result.mathstyle === 'textstyle' ? '$' : '$$';\n        result.latexClose = result.latexOpen;\n        const savedParsemode = this.swapParseMode('math');\n        result.body = this.scanImplicitGroup(\n            (token: Token) => token.type === final\n        );\n        this.parseToken(final);\n        this.swapParseMode(savedParsemode);\n        if (!result.body || result.body.length === 0) return null;\n        return result;\n    }\n    /**\n     * Parse a \\begin{env}...\\end{end} sequence\n     */\n    scanEnvironment(): Atom {\n        // An environment starts with a \\begin command\n        if (!this.parseCommand('begin')) return null;\n\n        // The \\begin command is immediately followed by the environment\n        // name, as a string argument\n        const envName = this.scanArg('string') as string;\n        if (!envName) return null;\n        const def = getEnvironmentDefinition(envName);\n        if (!def) return null;\n\n        // If the environment has some arguments, parse them\n        const args: (string | number | BBoxParam | Colspec[] | Atom[])[] = [];\n        if (def?.params) {\n            for (const param of def.params) {\n                // Parse an argument\n                if (param.isOptional) {\n                    // If it's not present, scanArg returns null,\n                    // but push it on the list of arguments anyway.\n                    // The null value will be interpreted as unspecified\n                    // optional value by the command parse function.\n                    args.push(this.scanOptionalArg(param.type));\n                } else {\n                    const arg = this.scanArg(param.type);\n                    if (!arg) {\n                        this.onError({\n                            code: 'missing-argument',\n                            arg: envName,\n                        });\n                    }\n                    args.push(arg);\n                }\n            }\n        }\n        // Some environments change the mode\n        const savedMode = this.parseMode;\n        const savedTabularMode = this.tabularMode;\n        const savedMathList = this.swapMathList([]);\n        // @todo: since calling scanImplicitGroup(), may not need to save/restore the mathlist\n        this.tabularMode = def.tabular;\n        const array: Atom[][][] = [];\n        const rowGaps: number[] = [];\n        let row: Atom[][] = [];\n        let done = false;\n        do {\n            if (this.end()) {\n                this.onError({ code: 'unbalanced-environment', arg: envName });\n                done = true;\n            }\n            if (!done && this.parseCommand('end')) {\n                if (this.scanArg('string') !== envName) {\n                    this.onError({\n                        code: 'unbalanced-environment',\n                        arg: envName,\n                    });\n                }\n                done = true;\n            }\n            if (!done) {\n                if (this.parseColumnSeparator()) {\n                    row.push(this.swapMathList([]));\n                } else if (this.parseRowSeparator()) {\n                    row.push(this.swapMathList([]));\n                    let gap = 0;\n                    this.skipWhitespace();\n                    if (this.parseLiteral('[')) {\n                        gap = this.scanDimen();\n                        this.skipWhitespace();\n                        this.parseLiteral(']');\n                    }\n                    rowGaps.push(gap || 0);\n                    array.push(row);\n                    row = [];\n                } else {\n                    this.mathList = this.mathList.concat(\n                        this.scanImplicitGroup(\n                            (token: Token) =>\n                                token.type === '}' ||\n                                (token.type === 'literal' &&\n                                    token.value === '&') ||\n                                (token.type === 'command' &&\n                                    /^(end|cr|\\\\)$/.test(token.value as string)) // @revisit\n                        )\n                    );\n                }\n            }\n        } while (!done);\n        row.push(this.swapMathList([]));\n        if (row.length > 0) array.push(row);\n        const newMathList = this.swapMathList(savedMathList);\n        // If we're in tabular mode, we should end up with an empty mathlist\n        console.assert(\n            !this.tabularMode || newMathList.length === 0,\n            'Leftover atoms in tabular mode'\n        );\n        this.parseMode = savedMode;\n        this.tabularMode = savedTabularMode;\n\n        if (!def.tabular && newMathList.length === 0) return null;\n        if (def.tabular && array.length === 0) return null;\n\n        const result = new Atom(this.parseMode, 'array', newMathList);\n        Object.assign(result, def.parser(envName, args, array));\n        result.array = array;\n        result.rowGaps = rowGaps;\n        result.environmentName = envName;\n        return result;\n    }\n    /**\n     * Parse a sequence terminated with a group end marker, such as\n     * `}`, `\\end`, `&`, etc...\n     *\n     * Returns an array of atoms or an empty array if the sequence\n     * terminates right away.\n     *\n     * @param done - A predicate indicating if a\n     * token signals the end of an implicit group\n     */\n    scanImplicitGroup(done?: (token: Token) => boolean): Atom[] {\n        // An implicit group is a sequence of atoms that terminates with\n        // a `'}'`,\n        // For environments, they also terminate at\n        // `'&'`, `'\\'`, `'\\cr'` or `'\\end'` or the end of the stream\n        // and a specific 'done' callback is passed for that\n        const savedStyle = this.style;\n        if (!done) {\n            done = (token: Token): boolean => token.type === '}';\n        }\n        // To handle infix commands, we'll keep track of their prefix\n        // (tokens coming before them) and their arguments\n        let infix: Token | null = null;\n        let infixInfo = null;\n        let infixArgs: Atom[][] = [];\n        let prefix = null; // A mathlist\n        const savedMathlist = this.swapMathList([]);\n        // if (this.index >= this.tokens.length) return true;\n        // const token = this.tokens[this.index];\n        while (!this.end() && !done(this.peek())) {\n            if (\n                this.hasImplicitCommand([\n                    'displaystyle',\n                    'textstyle',\n                    'scriptstyle',\n                    'scriptscriptstyle',\n                ])\n            ) {\n                // Implicit math style commands such as \\displaystyle, \\textstyle...\n                // Note these commands switch to math mode and a specific size\n                // \\textsize is the mathstyle used for inlinemath, not for text\n                this.parseMode = 'math';\n                const atom = new Atom('math', 'mathstyle');\n                atom.mathstyle = this.get()!.value as\n                    | 'displaystyle'\n                    | 'textstyle'\n                    | 'scriptstyle'\n                    | 'scriptscriptstyle';\n                this.mathList.push(atom);\n            } else if (this.hasInfixCommand() && !infix) {\n                // The next token is an infix and we have not seen one yet\n                // (there can be only one infix command per implicit group).\n                infix = this.get();\n                // The current parseMode, this.parseMode, may no longer have the value\n                // it had when we encountered the infix. However, since all infix are\n                // only defined in 'math' mode, we can use the 'math' constant\n                // for the parseMode\n                infixInfo = getInfo('\\\\' + infix.value, 'math', this.macros);\n                if (infixInfo) {\n                    [, infixArgs] = this.parseArguments(infixInfo) as [\n                        ParseModePrivate,\n                        Atom[][]\n                    ];\n                }\n                // Save the math list so far and start a new one\n                prefix = this.swapMathList([]);\n            } else {\n                this.parseAtom();\n            }\n        }\n        let result: Atom[];\n        if (infix) {\n            console.assert(infixInfo);\n            infixArgs.unshift(this.swapMathList(savedMathlist)); // suffix\n            infixArgs.unshift(prefix);\n            result = [\n                new Atom(\n                    this.parseMode,\n                    infixInfo.type,\n                    infixInfo.value || infix.value, // Functions don't have\n                    infixInfo.parse\n                        ? infixInfo.parse('\\\\' + infix.value, infixArgs)\n                        : null\n                ),\n            ];\n            result[0].symbol = '\\\\' + infix.value;\n        } else {\n            result = this.swapMathList(savedMathlist);\n        }\n\n        this.style = savedStyle;\n\n        return result;\n    }\n    /**\n     * Parse a group enclosed in a pair of braces: `{...}`.\n     *\n     * Return either a group Atom or null if not a group.\n     *\n     * Return a group Atom with an empty body if an empty\n     * group (i.e. `{}`).\n     */\n    scanGroup(): Atom {\n        if (!this.parseToken('{')) return null;\n        const result = new Atom(this.parseMode, 'group');\n        result.body = this.scanImplicitGroup(\n            (token: Token) => token.type === '}'\n        );\n        this.parseToken('}');\n        result.latexOpen = '{';\n        result.latexClose = '}';\n        return result;\n    }\n    scanSmartFence(): Atom {\n        this.skipWhitespace();\n        if (!this.parseLiteral('(')) return null;\n        // We've found an open paren... Convert to a `\\mleft...\\mright`\n        const result = new Atom(this.parseMode, 'leftright');\n        result.leftDelim = '(';\n        result.inner = false; // It's a `\\mleft`, not a `\\left`\n        const savedMathList = this.swapMathList([]);\n        let nestLevel = 1;\n        while (!this.end() && nestLevel !== 0) {\n            if (this.hasLiteral('(')) nestLevel += 1;\n            if (this.hasLiteral(')')) nestLevel -= 1;\n            if (nestLevel !== 0) this.parseAtom();\n        }\n        if (nestLevel === 0) this.parseLiteral(')');\n        result.rightDelim = nestLevel === 0 ? ')' : '?';\n        result.body = this.swapMathList(savedMathList);\n        return result;\n    }\n    /**\n     * Scan a delimiter, e.g. '(', '|', '\\vert', '\\ulcorner'\n     *\n     * @return The delimiter (as a character or command) or null\n     */\n    scanDelim(): string {\n        this.skipWhitespace();\n        const token = this.get();\n        if (!token) {\n            this.onError({ code: 'unexpected-end-of-string' });\n            return null;\n        }\n        let delim = '.';\n        if (token.type === 'command') {\n            delim = '\\\\' + token.value;\n        } else if (token.type === 'literal') {\n            delim = token.value as string;\n        }\n        const info = getInfo(delim, 'math', this.macros);\n        if (!info) {\n            this.onError({ code: 'unknown-command', arg: delim });\n            return null;\n        }\n        if (info.mode && !info.mode.includes(this.parseMode)) {\n            this.onError({ code: 'unexpected-delimiter', arg: delim });\n            return null;\n        }\n        if (info.type === 'mopen' || info.type === 'mclose') {\n            return delim;\n        }\n        // Some symbols are not of type mopen/mclose, but are still\n        // valid delimiters...\n        // '?' is a special delimiter used as a 'placeholder'\n        // (when the closing delimiter is displayed greyed out)\n        if (\n            /^(\\.|\\?|\\||<|>|\\\\vert|\\\\Vert|\\\\\\||\\\\surd|\\\\uparrow|\\\\downarrow|\\\\Uparrow|\\\\Downarrow|\\\\updownarrow|\\\\Updownarrow|\\\\mid|\\\\mvert|\\\\mVert)$/.test(\n                delim\n            )\n        ) {\n            return delim;\n        }\n        this.onError({ code: 'unexpected-delimiter', arg: delim });\n        return null;\n    }\n    /**\n     * Parse a `/left.../right` sequence.\n     *\n     * Note: the `/middle` command can occur multiple times inside a\n     * `/left.../right` sequence, and is handled separately.\n     *\n     * Return either an atom of type `'leftright'` or null\n     */\n    scanLeftRight(): Atom {\n        if (this.parseCommand('right') || this.parseCommand('mright')) {\n            // We have an unbalanced left/right (there's a \\right, but no \\left)\n            this.onError({ code: 'unbalanced-braces' });\n            return null;\n        }\n\n        const savedStyle = this.style;\n\n        let close = 'right';\n        if (!this.parseCommand('left')) {\n            if (!this.parseCommand('mleft')) return null;\n            close = 'mright';\n        }\n        const leftDelim = this.scanDelim();\n        if (!leftDelim) return null;\n\n        const savedMathList = this.swapMathList([]);\n        while (!this.end() && !this.parseCommand(close)) {\n            this.parseAtom();\n        }\n        this.style = savedStyle;\n\n        // If we've reached the end and there was no `\\right` or\n        // there isn't a valid delimiter after `\\right`, we'll\n        // consider the `\\right` missing and set the `rightDelim` to undefined\n        const rightDelim = this.scanDelim();\n\n        const result = new Atom(this.parseMode, 'leftright');\n        result.leftDelim = leftDelim;\n        result.rightDelim = rightDelim;\n        result.inner = close === 'right';\n        result.body = this.swapMathList(savedMathList);\n        return result;\n    }\n    /**\n     * Parse a subscript/superscript: `^` and `_`.\n     *\n     * Modify the last atom accordingly.\n     *\n     */\n    parseSupSub(): boolean {\n        // No sup/sub in text or command mode.\n        if (this.parseMode !== 'math') return false;\n        // Apply the subscript/superscript to the last rendered atom.\n        // If none is present (beginning of the mathlist, i.e. `{^2}`,\n        // an empty atom will be created, equivalent to `{{}^2}`\n        let result = false;\n        while (\n            this.hasLiteral('^') ||\n            this.hasLiteral('_') ||\n            this.hasLiteral(\"'\")\n        ) {\n            const supsub = this.hasLiteral('_') ? 'subscript' : 'superscript';\n            if (this.parseLiteral('^') || this.parseLiteral('_')) {\n                const arg = this.scanArg();\n                if (arg) {\n                    const atom = this.lastSubsupAtom();\n                    atom[supsub] = (atom[supsub] ?? []).concat(arg as Atom[]);\n                    result = true;\n                }\n            } else if (this.parseLiteral(\"'\")) {\n                // A single quote (prime) is actually equivalent to a\n                // '^{\\prime}'\n                const base = this.lastSubsupAtom();\n                const atom = new Atom(base.mode, 'mord', '\\u2032');\n                atom.symbol = '\\\\prime';\n                base.superscript = base.superscript ?? [];\n                base.superscript.push(atom);\n                result = true;\n            }\n        }\n        return result;\n    }\n    /**\n     * Parse a `\\limits` or `\\nolimits` command.\n     *\n     * This will change the placement of limits to be either above or below\n     * (if `\\limits`) or in the superscript/subscript position (if `\\nolimits`).\n     *\n     * This overrides the calculation made for the placement, which is usually\n     * dependent on the displaystyle (`inlinemath` prefers `\\nolimits`, while\n     * `displaymath` prefers `\\limits`).\n     */\n    parseLimits(): boolean {\n        // Note: technically, \\limits and \\nolimits are only applicable\n        // after an operator. However, we apply them in all cases. They\n        // will simply be ignored when not applicable (i.e. on a literal)\n        // which is actually consistent with TeX.\n        if (this.parseCommand('limits')) {\n            const lastAtom = this.lastSubsupAtom();\n            lastAtom.limits = 'limits';\n            // Record that the limits was set through an explicit command\n            // so we can generate the appropriate LaTeX later\n            lastAtom.explicitLimits = true;\n            return true;\n        }\n        if (this.parseCommand('nolimits')) {\n            const lastAtom = this.lastSubsupAtom();\n            lastAtom.limits = 'nolimits';\n            // Record that the limits was set through an explicit command\n            // so we can generate the appropriate LaTeX later\n            lastAtom.explicitLimits = true;\n            return true;\n        }\n        return false;\n    }\n    scanOptionalArg(\n        parseMode: ParseModePrivate\n    ): string | number | BBoxParam | Colspec[] | Atom[] {\n        parseMode =\n            !parseMode || parseMode === 'auto' ? this.parseMode : parseMode;\n        this.skipWhitespace();\n        if (!this.parseLiteral('[')) return null;\n        const savedParseMode = this.parseMode;\n        this.parseMode = parseMode;\n        const savedMathlist = this.swapMathList();\n        let result: string | number | BBoxParam | Colspec[] | Atom[];\n        while (!this.end() && !this.parseLiteral(']')) {\n            if (parseMode === 'string') {\n                result = this.scanString();\n            } else if (parseMode === 'number') {\n                result = this.scanNumber();\n            } else if (parseMode === 'dimen') {\n                result = this.scanDimen();\n            } else if (parseMode === 'skip') {\n                result = this.scanSkip();\n            } else if (parseMode === 'colspec') {\n                result = this.scanColspec();\n            } else if (parseMode === 'color') {\n                result = this.scanColor() || '#ffffff';\n            } else if (parseMode === 'bbox') {\n                // The \\bbox command takes a very particular argument:\n                // a comma delimited list of up to three arguments:\n                // a color, a dimension and a string.\n                // Split the string by comma delimited sub-strings, ignoring commas\n                // that may be inside (). For example\"x, rgb(a, b, c)\" would return\n                // ['x', 'rgb(a, b, c)']\n                const list = this.scanString()\n                    .toLowerCase()\n                    .trim()\n                    .split(/,(?![^(]*\\)(?:(?:[^(]*\\)){2})*[^\"]*$)/);\n                const bboxParam: BBoxParam = {};\n                for (const elem of list) {\n                    const color = stringToColor(elem);\n                    if (color) {\n                        bboxParam.backgroundcolor = color;\n                    } else {\n                        const m = elem.match(/^\\s*([0-9.]+)\\s*([a-z][a-z])/);\n                        if (m) {\n                            bboxParam.padding = convertDimenToEm(m[1], m[2]);\n                        } else {\n                            const m = elem.match(/^\\s*border\\s*:\\s*(.*)/);\n                            if (m) {\n                                bboxParam.border = m[1];\n                            }\n                        }\n                    }\n                }\n                result = bboxParam;\n            } else {\n                console.assert(\n                    parseMode === 'math',\n                    'Unexpected parse mode: \"' + parseMode + '\"'\n                );\n                this.mathList = this.mathList.concat(\n                    this.scanImplicitGroup(\n                        (token) =>\n                            token.type === 'literal' && token.value === ']'\n                    )\n                );\n            }\n        }\n        this.parseMode = savedParseMode;\n        const mathList = this.swapMathList(savedMathlist);\n        return result ? result : mathList;\n    }\n    /**\n     * Parse a math field, an argument to a function.\n     *\n     * An argument can either be a single atom or\n     * a sequence of atoms enclosed in braces.\n     *\n     * @param parseMode Temporarily overrides the parser parsemode. For\n     * example: `'dimen'`, `'color'`, `'text'`, etc...\n     */\n    scanArg(\n        parseMode?: ParseModePrivate\n    ): string | number | Atom | Atom[] | Colspec[] {\n        parseMode =\n            !parseMode || parseMode === 'auto' ? this.parseMode : parseMode;\n        this.parseFiller();\n        let result: string | number | Atom | Atom[] | Colspec[];\n        // An argument (which is called a 'math field' in TeX)\n        // could be a single character or symbol, as in `\\frac12`\n        // Note that ``\\frac\\sqrt{-1}\\alpha\\beta`` is equivalent to\n        // ``\\frac{\\sqrt}{-1}{\\beta}``\n        if (!this.parseToken('{')) {\n            if (parseMode === 'delim') {\n                return this.scanDelim() || '.';\n            } else if (/^(math|text)$/.test(parseMode)) {\n                // Parse a single token.\n                const savedParseMode = this.parseMode;\n                this.parseMode = parseMode;\n                const atom = this.scanToken();\n                this.parseMode = savedParseMode;\n                return atom;\n            }\n        }\n        // If this is a param token, substitute it with the\n        // (optional) argument passed to the parser\n        if (this.hasToken('#')) {\n            const paramToken = this.get();\n            this.skipUntilToken('}');\n            if (paramToken.value === '?') {\n                return this.placeholder();\n            }\n            if (this.args) {\n                if (\n                    this.args[paramToken.value] === null ||\n                    typeof this.args[paramToken.value] === 'undefined'\n                ) {\n                    return this.placeholder();\n                }\n                return typeof this.args[paramToken.value] === 'string'\n                    ? parseString(\n                          this.args[paramToken.value],\n                          this.parseMode,\n                          null,\n                          this.macros,\n                          false,\n                          this.onError\n                      )\n                    : this.args[paramToken.value] ?? null;\n            }\n            return null;\n        }\n        const savedParseMode = this.parseMode;\n        this.parseMode = parseMode;\n        const savedMathList = this.swapMathList([]);\n        if (parseMode === 'string') {\n            result = this.scanString();\n            this.skipUntilToken('}');\n        } else if (parseMode === 'number') {\n            result = this.scanNumber();\n            this.skipUntilToken('}');\n        } else if (parseMode === 'dimen') {\n            result = this.scanDimen();\n            this.skipUntilToken('}');\n        } else if (parseMode === 'skip') {\n            result = this.scanSkip();\n            this.skipUntilToken('}');\n        } else if (parseMode === 'colspec') {\n            result = this.scanColspec();\n            this.skipUntilToken('}');\n        } else if (parseMode === 'color') {\n            result = this.scanColor() || '#ffffff';\n            this.skipUntilToken('}');\n        } else if (parseMode === 'delim') {\n            result = this.scanDelim() || '.';\n            this.skipUntilToken('}');\n        } else {\n            console.assert(\n                /^(math|text)$/.test(parseMode),\n                'Unexpected parse mode: \"' + parseMode + '\"'\n            );\n\n            // Collect an array of tokens until a balanced \"}\"\n            const initialIndex = this.index;\n            let depth = 1;\n            do {\n                const token = this.get();\n                if (token?.type === '}') depth -= 1;\n                if (token?.type === '{') depth += 1;\n            } while (depth > 0 && !this.end());\n            result = parseTokens(\n                parseMode,\n                this.tokens.slice(initialIndex, this.index - 1),\n                this.onError,\n                {\n                    args: this.args,\n                    macros: this.macros,\n                    smartFence: this.smartFence,\n                    style: this.style,\n                    parse: (\n                        mode: ParseModePrivate,\n                        tokens: Token[],\n                        options\n                    ): [Atom[], Token[]] => {\n                        const parser = new Parser(\n                            tokens,\n                            options.args,\n                            options.macros,\n                            this.onError\n                        );\n                        parser.parseMode = mode;\n                        parser.style = options.style;\n                        result = parser.scanImplicitGroup();\n                        return [result, tokens.slice(parser.index)];\n                    },\n                }\n            );\n            if (!result) {\n                // No mode-specific result. Try again from the start\n                this.index = initialIndex;\n                do {\n                    this.mathList = this.mathList.concat(\n                        this.scanImplicitGroup()\n                    );\n                } while (!this.parseToken('}') && !this.end());\n            }\n        }\n        this.parseMode = savedParseMode;\n        const mathList = this.swapMathList(savedMathList);\n        return result ? result : mathList;\n    }\n\n    scanToken(): Atom[] {\n        const token = this.get();\n        if (!token) return null;\n        let result: Atom | Atom[] | null = null;\n        if (token.type === 'space') {\n            if (this.parseMode === 'text') {\n                result = new Atom('text', '', ' ', this.style);\n                result.symbol = ' ';\n            }\n        } else if (token.type === 'placeholder') {\n            // RENDER PLACEHOLDER\n            result = new Atom(\n                this.parseMode,\n                'placeholder',\n                token.value as string\n            );\n            result.captureSelection = true;\n        } else if (token.type === 'command') {\n            // RENDER COMMAND\n            if (token.value === 'placeholder') {\n                result = new Atom(\n                    this.parseMode,\n                    'placeholder',\n                    this.scanArg('string') as string,\n                    this.style\n                );\n                result.captureSelection = true;\n            } else if (token.value === 'char') {\n                // \\char has a special syntax and requires a non-braced integer\n                // argument\n                const initialIndex = this.index;\n                let codepoint = Math.floor(this.scanNumber(true));\n                if (\n                    !isFinite(codepoint) ||\n                    codepoint < 0 ||\n                    codepoint > 0x10ffff\n                ) {\n                    codepoint = 0x2753; // BLACK QUESTION MARK\n                }\n                result = new Atom(\n                    this.parseMode,\n                    this.parseMode === 'math' ? 'mord' : '',\n                    String.fromCodePoint(codepoint)\n                );\n                result.symbol = '\\\\char';\n                result.latex =\n                    '\\\\char' + tokensToString(this.tokens.slice(initialIndex));\n            } else if (token.value === 'hskip' || token.value === 'kern') {\n                // \\hskip and \\kern have a special syntax and requires a non-braced\n                // 'skip' argument\n                const width = this.scanSkip();\n                if (isFinite(width)) {\n                    result = new Atom(\n                        this.parseMode,\n                        'spacing',\n                        null,\n                        this.style\n                    );\n                    result.width = width;\n                    result.symbol = '\\\\' + token.value;\n                    result.latex = '\\\\' + token.value;\n                }\n            } else {\n                result = this.scanMacro(token.value as string);\n                if (!result) {\n                    // This wasn't a macro, so let's see if it's a regular command\n                    const info = getInfo(\n                        '\\\\' + token.value,\n                        this.parseMode,\n                        {}\n                    );\n\n                    if (!info) {\n                        // An unknown command\n                        this.onError({\n                            code: 'unknown-command',\n                            arg: '\\\\' + token.value,\n                        });\n                        result = new Atom('math', 'error', '\\\\' + token.value);\n                        result.symbol = '\\\\' + token.value;\n                        result.latex = '\\\\' + token.value;\n                        return [result];\n                    }\n\n                    if (info.mode && !info.mode.includes(this.parseMode)) {\n                        // Command invalid in this mode\n                        this.onError({\n                            code: 'invalid-command',\n                            arg: '\\\\' + token.value,\n                        });\n                        result = new Atom('math', 'error', '\\\\' + token.value);\n                        result.symbol = '\\\\' + token.value;\n                        result.latex = '\\\\' + token.value;\n                        return [result];\n                    }\n\n                    // Parse the arguments\n                    // If explicitGroup is not empty, an explicit group is expected\n                    // to follow the command and will be parsed *after* the\n                    // command has been processed.\n                    // This is used for commands such as \\textcolor{color}{content}\n                    // that need to apply the color to the content *after* the\n                    // style has been changed.\n                    // In definitions, this is indicated with a parameter type\n                    // of 'auto*'\n                    const initialIndex = this.index;\n                    const [explicitGroup, args] = this.parseArguments(info);\n\n                    if (!args) return null; // Some required arguments were missing...\n\n                    if (info.infix) {\n                        // Infix commands should be handled in scanImplicitGroup\n                        // If we find an infix command here, it's a syntax error\n                        // (second infix command in an implicit group) and should be ignored.\n                        this.onError({\n                            code: 'too-many-infix-commands',\n                            arg: '\\\\' + token.value,\n                        });\n                    } else {\n                        //  Invoke the parse() function if present\n                        if (info.parse) {\n                            const attributes = info.parse(\n                                '\\\\' + token.value,\n                                args\n                            );\n                            if (attributes.type) {\n                                // A type was provided: create a new Atom\n                                result = new Atom(\n                                    this.parseMode,\n                                    info.type,\n                                    explicitGroup\n                                        ? (this.scanArg(\n                                              explicitGroup\n                                          ) as Atom[])\n                                        : null,\n                                    { ...this.style, ...attributes }\n                                );\n                            } else {\n                                // No type provided -> the parse function will modify\n                                // the current style rather than create a new Atom.\n                                const savedMode = this.parseMode;\n                                if (attributes.mode) {\n                                    // Change to 'text' (or 'math') mode if necessary\n                                    this.parseMode = attributes.mode;\n                                    delete attributes.mode;\n                                }\n\n                                // If an explicit group is expected, process it now\n                                if (explicitGroup) {\n                                    // Create a temporary style\n                                    const saveStyle = this.style;\n                                    this.style = {\n                                        ...this.style,\n                                        ...attributes,\n                                    };\n                                    result = this.scanArg(\n                                        explicitGroup\n                                    ) as Atom[];\n                                    this.style = saveStyle;\n                                } else {\n                                    // Merge the new style info with the current style\n                                    this.style = {\n                                        ...this.style,\n                                        ...attributes,\n                                    };\n                                }\n                                this.parseMode = savedMode;\n                            }\n                        } else {\n                            // The new atom will inherit the style of this atom\n                            // Only override the variant if it is not '' or undefined\n                            const style = {\n                                ...this.style,\n                                variant: info.variant || this.style.variant,\n                                variantStyle:\n                                    info.variantStyle ||\n                                    this.style.variantStyle,\n                            };\n                            result = new Atom(\n                                this.parseMode,\n                                info.type || 'mop',\n                                info.value || (token.value as string),\n                                style\n                            );\n                        }\n                        if (\n                            result instanceof Atom &&\n                            !/^(llap|rlap|class|cssId)$/.test(\n                                token.value as string\n                            )\n                        ) {\n                            result.symbol = '\\\\' + token.value;\n                            const argString = tokensToString(\n                                this.tokens.slice(initialIndex, this.index)\n                            );\n                            if (argString) {\n                                result.latex = result.symbol + argString;\n                            }\n                            if (result.isFunction && this.smartFence) {\n                                // The atom was a function that may be followed by\n                                // an argument, like `\\sin(`\n                                const smartFence = this.scanSmartFence();\n                                if (smartFence) {\n                                    result = [result, smartFence];\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        } else if (\n            token.type === 'literal' &&\n            typeof token.value === 'string'\n        ) {\n            const info = getInfo(token.value, this.parseMode, this.macros);\n            if (info) {\n                const style = { ...this.style };\n                result = new Atom(\n                    this.parseMode,\n                    info.type,\n                    info.value || token.value,\n                    style\n                );\n                if (info.isFunction) {\n                    result.isFunction = true;\n                }\n            } else {\n                result = new Atom(\n                    this.parseMode,\n                    this.parseMode === 'math' ? 'mord' : '',\n                    token.value,\n                    this.style\n                );\n            }\n            result.symbol = token.value;\n            result.latex = unicodeCharToLatex(this.parseMode, token.value);\n            if (info?.isFunction && this.smartFence) {\n                // The atom was a function that may be followed by\n                // an argument, like `f(`.\n                const smartFence = this.scanSmartFence();\n                if (smartFence) {\n                    result = [result, smartFence];\n                }\n            }\n        } else if (token.type === '#') {\n            // Parameter token\n            if (token.value === '?' || !this.args) {\n                // '#?' indicates that a placeholder should be used\n                result = this.placeholder();\n            } else {\n                // Otherwise, substitute the token with a provided argument\n                if (\n                    this.args[token.value] === null ||\n                    typeof this.args[token.value] === 'undefined'\n                ) {\n                    result = this.placeholder();\n                } else if (typeof this.args[token.value] === 'string') {\n                    result = parseString(\n                        this.args[token.value],\n                        this.parseMode,\n                        [],\n                        this.macros,\n                        false,\n                        this.onError\n                    );\n                } else {\n                    result = this.args[token.value];\n                }\n            }\n        } else {\n            if (token.type === '}') {\n                this.onError({ latex: '', code: 'unbalanced-braces' });\n            } else {\n                this.onError({\n                    latex: '',\n                    code: 'unexpected-token',\n                    arg: token.type + (token.value ?? ''),\n                });\n            }\n        }\n        // Always return an array of atoms\n        return result && !isArray(result)\n            ? [result as Atom]\n            : (result as Atom[]);\n    }\n    /**\n     * Attempt to scan the macro name and return an atom list if successful.\n     * Otherwise, it wasn't a macro.\n     */\n    scanMacro(macro: string): Atom {\n        if (!this.macros || !this.macros[macro]) return null;\n        const initialIndex = this.index;\n        const args: (string | Atom[])[] = [];\n        let def: string;\n        let argCount = 0;\n        if (typeof this.macros[macro] === 'string') {\n            def = this.macros[macro] as string;\n            // Let's see if there are arguments in the definition.\n            if (/(^|[^\\\\])#1/.test(def)) argCount = 1;\n            if (/(^|[^\\\\])#2/.test(def)) argCount = 2;\n            if (/(^|[^\\\\])#3/.test(def)) argCount = 3;\n            if (/(^|[^\\\\])#4/.test(def)) argCount = 4;\n            if (/(^|[^\\\\])#5/.test(def)) argCount = 5;\n            if (/(^|[^\\\\])#6/.test(def)) argCount = 6;\n            if (/(^|[^\\\\])#7/.test(def)) argCount = 7;\n            if (/(^|[^\\\\])#8/.test(def)) argCount = 8;\n            if (/(^|[^\\\\])#9/.test(def)) argCount = 9;\n        } else {\n            def = (this.macros[macro] as MacroDefinition).def;\n            argCount = (this.macros[macro] as MacroDefinition).args || 0;\n        }\n        for (let i = 1; i <= argCount; i++) {\n            // Parse each argument as a string. We don't know yet\n            // what the proper parse mode is, so defer parsing till later\n            // when invoking `parseString`\n            args[i] = this.scanLiteralArg();\n        }\n        // Carry forward the placeholder argument, if any.\n        args['?'] = this.args?.['?'];\n\n        // Group the result of the macro expansion, and set the\n        // captureSelection attribute so that it is handled as an unbreakable\n        // unit\n        const atom = new Atom(\n            this.parseMode,\n            'group',\n            parseString(\n                def,\n                this.parseMode,\n                args,\n                this.macros,\n                false,\n                this.onError\n            )\n        );\n        atom.captureSelection = true;\n        atom.symbol = '\\\\' + macro;\n        atom.latex =\n            '\\\\' + macro + tokensToString(this.tokens.slice(initialIndex));\n        return atom;\n    }\n    /**\n     * Make a Atom for the current token or token group and\n     * add it to the parser's current mathList\n     */\n    parseAtom(): boolean {\n        let result: Atom | Atom[] =\n            this.scanEnvironment() ||\n            this.scanModeShift() ||\n            this.scanModeSet() ||\n            this.scanGroup() ||\n            this.scanLeftRight();\n        if (!result && (this.parseSupSub() || this.parseLimits())) return true;\n        if (!result) result = this.scanToken();\n        // If we have an atom to add, push it at the end of the current math list\n        // We could have no atom for tokens that were skipped, a ' ' in math mode\n        // for example\n        if (isArray(result)) {\n            this.mathList = this.mathList.concat(result);\n        } else if (result) {\n            this.mathList.push(result);\n        }\n        return result !== null;\n    }\n}\n\n/**\n * Given a string of LaTeX, return a corresponding math list (array of atoms).\n * @param args - If there are any placeholder tokens, e.g.\n * `#0`, `#1`, etc... they will be replaced by the value provided by `args`.\n * @param smartFence - If true, promote plain fences, e.g. `(`,\n * as `\\left...\\right` or `\\mleft...\\mright`\n */\nexport function parseString(\n    s: string,\n    parseMode: ParseModePrivate,\n    args: (string | Atom[])[],\n    macros: MacroDictionary,\n    smartFence = false,\n    error?: ErrorListener\n): Atom[] {\n    let mathlist = [];\n    const parser = new Parser(tokenize(s), args, macros, (err) => {\n        if (error) {\n            error({ ...err, latex: s });\n        } else {\n            console.warn(\n                'MathLive parsing error: ' +\n                    err.code +\n                    (err.arg ? ' ' + err.arg + ' ' : ''),\n                'in \"' + s + '\"'\n            );\n        }\n    });\n    parser.parseMode = parseMode || 'math'; // other possible values: 'text', 'color', etc...\n    if (smartFence) parser.smartFence = true;\n\n    while (!parser.end()) {\n        mathlist = mathlist.concat(parser.scanImplicitGroup());\n    }\n    return mathlist;\n}\n","import type { ParseMode } from '../public/core';\nimport type { Mathfield } from '../public/mathfield';\nimport type { ModelPrivate } from './model-class';\n\nimport type { MacroDictionary } from '../core/definitions';\nimport type { Atom } from '../core/atom';\n\nexport type ModelOptions = {\n    mode: ParseMode;\n    macros: MacroDictionary;\n    removeExtraneousParentheses: boolean;\n};\n\nexport type ModelHooks = {\n    announce?: (\n        target: Mathfield, // @revisit: could drop this argument\n        command: string, // verb\n        // | 'plonk'\n        // | 'replacement'\n        //     | 'line'\n        //     | 'move'\n        //     | 'moveUp'\n        //     | 'moveDown'\n        //     | 'deleted'\n        //     | 'deleted: numerator'\n        //     | 'deleted: denominator'\n        //     | 'deleted: root'\n        //     | 'deleted: superscript',\n        modelBefore: ModelPrivate,\n        atoms: Atom[] // object of the command\n    ) => void;\n    moveOut?: (\n        sender: ModelPrivate,\n        direction: 'forward' | 'backward'\n    ) => boolean;\n    tabOut?: (\n        sender: ModelPrivate,\n        direction: 'forward' | 'backward'\n    ) => boolean;\n};\n\nexport function isEmptyMathlist(atoms: Atom[]): boolean {\n    return (\n        atoms.length === 0 || (atoms.length === 1 && atoms[0].type === 'first')\n    );\n}\n\nexport function removeSuggestion(model: ModelPrivate): void {\n    const siblings = model.siblings();\n    // Remove all `suggestion` atoms\n    for (let i = siblings.length - 1; i >= 0; i--) {\n        if (siblings[i].suggestion) {\n            siblings.splice(i, 1);\n        }\n    }\n}\n\n/**\n * Clear the verbatim Latex property for the parent node and its parents.\n * This will cause the latex value to be re-calculated.\n */\nexport function invalidateVerbatimLatex(model: ModelPrivate): void {\n    let depth = 1;\n    let atom = model.ancestor(depth);\n    while (atom) {\n        atom.latex = undefined;\n        depth += 1;\n        atom = model.ancestor(depth);\n    }\n}\n","export interface PathSegment {\n    relation: string;\n    offset: number;\n}\n\nexport type Path = PathSegment[];\n\nexport interface Selection {\n    path: Path;\n    extent: number;\n}\n\nexport function pathToString(path: Path, extent?: number): string {\n    let result = '';\n    for (const segment of path) {\n        result += segment.relation + ':' + segment.offset + '/';\n    }\n    if (extent) {\n        result += '#' + extent;\n    }\n    return result;\n}\n\nexport function pathFromString(string: string): Selection {\n    // Reset the path\n    const result: Selection = { path: [], extent: 0 };\n\n    // Parse the selection extent, if present\n    const components = string.split('#');\n    if (components.length > 1) {\n        result.extent = parseInt(components[1]);\n    }\n\n    // Parse the segments\n    const segments = components[0].split('/');\n    for (const segment of segments) {\n        const m2 = segment.match(/([^:]*):(.*)/);\n        if (m2) {\n            result.path.push({\n                relation: m2[1],\n                offset: parseInt(m2[2]),\n            });\n        }\n    }\n\n    return result;\n}\n\n/**\n * Given two paths, return a path representing their common ancestor.\n */\nexport function pathCommonAncestor(p: Path, q: Path): Path {\n    const result: Path = [];\n    const maxIndex = Math.min(p.length - 1, q.length - 1);\n    let i = 0;\n    while (\n        i <= maxIndex &&\n        p[i].relation === q[i].relation &&\n        p[i].offset === q[i].offset\n    ) {\n        result.push(p[i]);\n        i += 1;\n    }\n    return result;\n}\n\n/**\n *\n * @return 0 if the paths are identical\n *  - 1 if they are siblings\n *  - >1 if they are not siblings\n */\nexport function pathDistance(p: Path, q: Path): number {\n    let result = 0;\n    let i = -1;\n    let done = false;\n    while (!done) {\n        i += 1;\n        done = i >= p.length || i >= q.length;\n        done =\n            done ||\n            !(p[i].relation === q[i].relation && p[i].offset === q[i].offset);\n    }\n    if (i === p.length && i === q.length) {\n        // They're identical\n        result = 0;\n    } else if (\n        i + 1 === p.length &&\n        i + 1 === q.length &&\n        p[i].relation === q[i].relation\n    ) {\n        // They're siblings\n        result = 1;\n    } else {\n        result = 2;\n    }\n\n    return result;\n}\n\nexport function clone(path: Path): Path {\n    return pathFromString(pathToString(path)).path;\n}\n","import { isArray } from '../common/types';\n\nimport { Atom } from '../core/atom';\n\n/**\n * Convert an array row/col into an array index.\n */\nexport function arrayIndex(\n    array: Atom[][][],\n    rowCol: { col: number; row: number }\n): number {\n    let result = 0;\n\n    for (let i = 0; i < rowCol.row; i++) {\n        for (let j = 0; j < array[i].length; j++) {\n            result += 1;\n        }\n    }\n    result += rowCol.col;\n\n    return result;\n}\n\n/**\n * Convert an array index (scalar) to an array row/col.\n * @return {object}\n * - row: number\n * - col: number\n */\nexport function arrayColRow(\n    array: Atom[][][],\n    index: number | string\n): {\n    col: number;\n    row: number;\n} {\n    let i: number;\n    if (typeof index === 'string') {\n        const m = index.match(/cell([0-9]*)$/);\n        if (m) i = parseInt(m[1]);\n    } else {\n        i = index;\n    }\n    const result = { row: 0, col: 0 };\n    while (i > 0) {\n        result.col += 1;\n        if (!array[result.row] || result.col >= array[result.row].length) {\n            result.col = 0;\n            result.row += 1;\n        }\n        i -= 1;\n    }\n\n    return result;\n}\n\n/**\n * Return the array cell corresponding to colrow or null (for example in\n * a sparse array)\n */\nexport function arrayCell(\n    array: Atom[][][],\n    colrow: string | number | { col: number; row: number }\n): Atom[] {\n    if (typeof colrow !== 'object') colrow = arrayColRow(array, colrow);\n    let result: Atom[];\n    if (isArray(array[colrow.row])) {\n        result = array[colrow.row][colrow.col] || null;\n    }\n    // If the 'first' math atom is missing, insert it\n    if (result && (result.length === 0 || result[0].type !== 'first')) {\n        result.unshift(new Atom('', 'first'));\n    }\n    return result;\n}\n\n/**\n * Total numbers of cells (include sparse cells) in the array.\n */\nexport function arrayCellCount(array: Atom[][][]): number {\n    let result = 0;\n    let numRows = 0;\n    let numCols = 1;\n    for (const row of array) {\n        numRows += 1;\n        if (row.length > numCols) numCols = row.length;\n    }\n    result = numRows * numCols;\n    return result;\n}\n\n/**\n * Adjust colRow to point to the next/previous available row\n * If no more rows, go to the next/previous column\n * If no more columns, return null\n */\nexport function arrayAdjustRow(\n    array: Atom[][][],\n    colRow: { col: number; row: number },\n    dir: number\n): { col: number; row: number } {\n    const result = { ...colRow };\n    result.row += dir;\n    if (result.row < 0) {\n        result.col += dir;\n        result.row = array.length - 1;\n        if (result.col < 0) return null;\n        while (result.row >= 0 && !arrayCell(array, result)) {\n            result.row -= 1;\n        }\n        if (result.row < 0) return null;\n    } else if (result.row >= array.length) {\n        result.col += dir;\n        result.row = 0;\n        while (result.row < array.length && !arrayCell(array, result)) {\n            result.row += 1;\n        }\n        if (result.row > array.length - 1) return null;\n    }\n    return result;\n}\n","import { Atom, makeRoot } from '../core/atom';\nimport type { Model, Mathfield } from '../public/mathfield';\nimport type { MathfieldPrivate } from './mathfield-class';\nimport { Path, clone as clonePath, pathToString } from './path';\nimport { arrayCell } from './model-array-utils';\nimport { ModelListeners } from './model-listeners';\n\nimport { ModelOptions, ModelHooks } from './model-utils';\n\nexport class ModelPrivate implements Model {\n    mathfield: MathfieldPrivate;\n    options: ModelOptions;\n    listeners: ModelListeners;\n    hooks: Required<ModelHooks>;\n\n    root: Atom;\n\n    path: Path; // @revisit: could be called anchor\n    extent: number; // @revisit: could group anchor + extent = Selection\n\n    suppressChangeNotifications: boolean;\n\n    constructor(\n        options?: ModelOptions,\n        listeners?: ModelListeners,\n        hooks?: ModelHooks,\n        target?: Mathfield\n    ) {\n        this.options = {\n            mode: 'math',\n            removeExtraneousParentheses: false,\n            ...options,\n        };\n        this.root = makeRoot(this.options.mode);\n        this.path = [{ relation: 'body', offset: 0 }];\n        this.extent = 0;\n\n        this.setListeners(listeners);\n        this.setHooks(hooks);\n        this.mathfield = target as MathfieldPrivate;\n\n        this.suppressChangeNotifications = false;\n    }\n\n    clone(): ModelPrivate {\n        const result = new ModelPrivate(\n            this.options,\n            this.listeners,\n            this.hooks,\n            this.mathfield\n        );\n        result.root = this.root;\n        result.path = clonePath(this.path);\n        return result;\n    }\n    setListeners(listeners?: ModelListeners): void {\n        this.listeners = listeners;\n    }\n    setHooks(hooks?: ModelHooks): void {\n        this.hooks = {\n            announce: hooks?.announce\n                ? hooks.announce\n                : (\n                      _target: Mathfield,\n                      _command: string,\n                      _modelBefore: ModelPrivate,\n                      _atoms: Atom[]\n                  ): void => {\n                      return;\n                  },\n            moveOut: hooks?.moveOut\n                ? hooks.moveOut\n                : (): boolean => {\n                      return true;\n                  },\n            tabOut: hooks?.tabOut\n                ? hooks.tabOut\n                : (): boolean => {\n                      return true;\n                  },\n        };\n    }\n    announce(\n        command: string, // @revisit: be more explicit\n        modelBefore?: ModelPrivate,\n        atoms: Atom[] = []\n    ): void {\n        this.hooks.announce(this.mathfield, command, modelBefore, atoms);\n    }\n\n    /**\n     * Return a string representation of the selection.\n     * @todo This is a bad name for this function, since it doesn't return\n     * a representation of the content, which one might expect...\n     */\n    toString(): string {\n        return pathToString(this.path, this.extent);\n    }\n\n    /**\n     * @return array of children of the parent\n     */\n    siblings(): Atom[] {\n        if (this.path.length === 0) return [];\n\n        let siblings: Atom[];\n        if (this.parent().array) {\n            siblings = arrayCell(this.parent().array, this.relation());\n        } else {\n            siblings = this.parent()[this.relation()] || [];\n            if (typeof siblings === 'string') siblings = [];\n        }\n\n        // If the 'first' math atom is missing, insert it\n        if (siblings.length === 0 || siblings[0].type !== 'first') {\n            siblings.unshift(new Atom('', 'first'));\n        }\n\n        return siblings;\n    }\n\n    anchorOffset(): number {\n        return this.path.length > 0\n            ? this.path[this.path.length - 1].offset\n            : 0;\n    }\n\n    focusOffset(): number {\n        return this.path.length > 0\n            ? this.path[this.path.length - 1].offset + this.extent\n            : 0;\n    }\n\n    /**\n     * Offset of the first atom included in the selection\n     * i.e. `=1` => selection starts with and includes first atom\n     * With expression _x=_ and atoms :\n     * - 0: _<first>_\n     * - 1: _x_\n     * - 2: _=_\n     *\n     * - if caret is before _x_:  `start` = 0, `end` = 0\n     * - if caret is after _x_:   `start` = 1, `end` = 1\n     * - if _x_ is selected:      `start` = 1, `end` = 2\n     * - if _x=_ is selected:   `start` = 1, `end` = 3\n     */\n    startOffset(): number {\n        return Math.min(this.focusOffset(), this.anchorOffset());\n    }\n\n    /**\n     * Offset of the first atom not included in the selection\n     * i.e. max value of `siblings.length`\n     * `endOffset - startOffset = extent`\n     */\n    endOffset(): number {\n        return Math.max(this.focusOffset(), this.anchorOffset());\n    }\n    /**\n     * Sibling, relative to `anchor`\n     * `sibling(0)` = start of selection\n     * `sibling(-1)` = sibling immediately left of start offset\n     */\n    sibling(offset: number): Atom {\n        return this.siblings()[this.startOffset() + offset];\n    }\n\n    // @revisit: move ancestor, and anything related to the selection to model-selection\n    /**\n     * @param ancestor distance from self to ancestor.\n     * - `ancestor` = 0: self\n     * - `ancestor` = 1: parent\n     * - `ancestor` = 2: grand-parent\n     * - etc...\n     */\n    ancestor(ancestor: number): Atom {\n        // If the requested ancestor goes beyond what's available,\n        // return null\n        if (ancestor > this.path.length) return null;\n\n        // Start with the root\n        let result = this.root;\n\n        // Iterate over the path segments, selecting the appropriate\n        for (let i = 0; i < this.path.length - ancestor; i++) {\n            const segment = this.path[i];\n            if (result.array) {\n                result = arrayCell(result.array, segment.relation)[\n                    segment.offset\n                ];\n            } else if (!result[segment.relation]) {\n                // There is no such relation... (the path got out of sync with the tree)\n                return null;\n            } else {\n                // Make sure the 'first' atom has been inserted, otherwise\n                // the segment.offset might be invalid\n                if (\n                    result[segment.relation].length === 0 ||\n                    result[segment.relation][0].type !== 'first'\n                ) {\n                    result[segment.relation].unshift(new Atom('', 'first'));\n                }\n                const offset = Math.min(\n                    segment.offset,\n                    result[segment.relation].length - 1\n                );\n                result = result[segment.relation][offset];\n            }\n        }\n\n        return result;\n    }\n\n    parent(): Atom {\n        return this.ancestor(1);\n    }\n\n    relation(): string {\n        return this.path.length > 0\n            ? this.path[this.path.length - 1].relation\n            : '';\n    }\n\n    /**\n     * If necessary, insert a `first` atom in the sibling list.\n     * If there's already a `first` atom, do nothing.\n     * The `first` atom is used as a 'placeholder' to hold the blinking caret when\n     * the caret is positioned at the very beginning of the mathlist.\n     */\n    insertFirstAtom(): void {\n        this.siblings();\n    }\n}\n","import type { ErrorListener } from '../public/core';\nimport type { ModelPrivate } from './model-class';\n\nexport type ModelListeners = {\n    onContentWillChange: (sender: ModelPrivate) => void;\n    onContentDidChange: (sender: ModelPrivate) => void;\n    onSelectionWillChange: (sender: ModelPrivate) => void;\n    onSelectionDidChange: (sender: ModelPrivate) => void;\n    onError: ErrorListener;\n};\n\nexport function selectionWillChange(model: ModelPrivate): void {\n    if (\n        typeof model.listeners?.onSelectionWillChange === 'function' &&\n        !model.suppressChangeNotifications\n    ) {\n        model.listeners.onSelectionWillChange(model);\n    }\n}\n\nexport function selectionDidChange(model: ModelPrivate): void {\n    if (\n        typeof model.listeners?.onSelectionDidChange === 'function' &&\n        !model.suppressChangeNotifications\n    ) {\n        model.listeners.onSelectionDidChange(model);\n    }\n}\n\nexport function contentWillChange(model: ModelPrivate): void {\n    if (\n        typeof model.listeners?.onContentWillChange === 'function' &&\n        !model.suppressChangeNotifications\n    ) {\n        model.listeners.onContentWillChange(model);\n    }\n}\n\nexport function contentDidChange(model: ModelPrivate): void {\n    if (\n        typeof model.listeners?.onContentDidChange === 'function' &&\n        !model.suppressChangeNotifications\n    ) {\n        model.listeners.onContentDidChange(model);\n    }\n}\n\n//////\n\nexport interface Disposable {\n    dispose(): void;\n}\n\nexport type EventListener = (...payload: any[]) => void;\n\nexport class EventEmitter<T> {\n    events: Map<string, EventListener[]>;\n\n    constructor() {\n        this.events = new Map();\n    }\n\n    addListener(\n        event: string,\n        listener: EventListener,\n        options?: { once?: boolean }\n    ): Disposable {\n        if (!this.events.has(event)) {\n            this.events.set(event, []);\n        }\n        options = options ?? {};\n        if (options.once ?? false) {\n            listener = (...payload: any[]): void => {\n                this.events.get(event).filter((x) => x !== listener);\n                listener.apply(this, ...payload);\n            };\n        }\n\n        this.events.get(event).push(listener);\n        return {\n            dispose: (): void => {\n                this.events.set(\n                    event,\n                    this.events.get(event).filter((x) => x !== listener)\n                );\n            },\n        };\n    }\n\n    on(event: string, listener: EventListener): Disposable {\n        return this.addListener(event, listener);\n    }\n\n    once(event: string, listener: EventListener): Disposable {\n        return this.addListener(event, listener, { once: true });\n    }\n\n    emit(event: string, ...payload: any[]): boolean {\n        const listeners = this.events.get(event);\n        if (listeners && listeners.length > 0) {\n            listeners.forEach((listener) => {\n                listener.apply(this, ...payload);\n            });\n            return true;\n        }\n        return false;\n    }\n}\n\n/*\n// type User = { name: string };\n\n// interface UserEvents {\n//     login(user: User): void;\n//     logout(): string;\n// }\n\ntype Filter<T, Cond, U extends keyof T = keyof T> = {\n    [K in U]: T[K] extends Cond ? K : never;\n}[U];\n\ntype In<T> = T extends (...args: infer U) => any ? U : [];\ntype Out<T> = T extends () => infer U ? U : never;\n\n// Extract an array type of valid event keys\ntype EventKey<T> = Filter<T, Function> & string;\n\n// Extract the argument/return types of a valid event\ntype Arguments<T> = T extends (...args: infer U) => any ? U : [];\ntype Result<T> = T extends () => infer U ? U : never;\n\ntype EventIn<T, K extends EventKey<T>> = In<T[K]>;\ntype EventOut<T, K extends EventKey<T>> = Out<T[K]> | void;\n\nexport type Listener<T, K extends EventKey<T> = EventKey<T>> = (\n    ...args: EventIn<T, K>\n) => EventOut<T, K>;\n\nexport type ListenerMap<T> = Partial<{ [K in EventKey<T>]: Listener<T, K> }>;\n\ninterface Emitter<T> {\n    on<K extends EventKey<T>>(key: K, fn: Listener<T, K>): typeof fn;\n}\n\n// import { EventEmitter } from 'events';\n// const ee = (new EventEmitter() as unknown) as Emitter<UserEvents>;\n\n// ee.on('login', (user: string) => {});\n// ee.on('logout', () => {\n//     return 'done';\n// });\n*/\n","import { isArray } from '../common/types';\n\nimport type { ParseMode } from '../public/core';\n\nimport { LETTER_AND_DIGITS } from '../core/definitions';\nimport { Atom } from '../core/atom';\nimport {\n    Selection,\n    Path,\n    pathDistance,\n    clone as clonePath,\n    pathCommonAncestor,\n    pathFromString,\n} from './path';\n\nimport { ModelPrivate } from './model-class'; // @revisit. Circular dependency because\n// we need to create a model to make an iterator (we could use model-utils forward\n// declaration otherwise\nimport { isEmptyMathlist, removeSuggestion } from './model-utils';\nimport {\n    arrayCellCount,\n    arrayCell,\n    arrayIndex,\n    arrayColRow,\n    arrayAdjustRow,\n} from './model-array-utils';\nimport { selectionDidChange, selectionWillChange } from './model-listeners';\n\n/**\n * Return true if the atom could be a part of a number\n * i.e. \"-12354.568\"\n */\nfunction isNumber(atom: Atom): boolean {\n    if (!atom) return false;\n    return (\n        (atom.type === 'mord' && /[0-9.]/.test(atom.body as string)) ||\n        (atom.type === 'mpunct' && atom.body === ',')\n    );\n}\n\n/**\n * Return a `{start:, end:}` for the offsets of the command around the insertion\n * point, or null.\n * - `start` is the first atom which is of type `command`\n * - `end` is after the last atom of type `command`\n */\nexport function getCommandOffsets(\n    model: ModelPrivate\n): { start: number; end: number } {\n    const siblings = model.siblings();\n    if (siblings.length <= 1) return null;\n\n    let start = Math.min(model.endOffset(), siblings.length - 1);\n    // let start = Math.max(0, model.endOffset());\n    if (siblings[start].type !== 'command') return null;\n    while (start > 0 && siblings[start].type === 'command') start -= 1;\n\n    let end = model.startOffset() + 1;\n    while (end <= siblings.length - 1 && siblings[end].type === 'command') {\n        end += 1;\n    }\n    if (end > start) {\n        return { start: start + 1, end: end };\n    }\n    return null;\n}\n\nexport function positionInsertionPointAfterCommitedCommand(\n    model: ModelPrivate\n): void {\n    const siblings = model.siblings();\n    const command = getCommandOffsets(model);\n    let i = command.start;\n    while (i < command.end && !siblings[i].suggestion) {\n        i++;\n    }\n    setSelection(model, i - 1);\n}\n\nexport function getAnchorMode(model: ModelPrivate): ParseMode {\n    const anchor = selectionIsCollapsed(model)\n        ? getAnchor(model)\n        : model.sibling(1);\n    let result: ParseMode;\n    if (anchor) {\n        if (anchor.type === 'command') {\n            return 'command';\n        }\n        result = anchor.mode as ParseMode;\n    }\n    let i = 1;\n    let ancestor = model.ancestor(i);\n    while (!result && ancestor) {\n        if (ancestor) result = ancestor.mode as ParseMode;\n        i += 1;\n        ancestor = model.ancestor(i);\n    }\n    return result;\n}\n\n// @revisit any\nexport function getAnchorStyle(model: ModelPrivate): any {\n    const anchor = selectionIsCollapsed(model)\n        ? getAnchor(model)\n        : model.sibling(1);\n    let result;\n    if (anchor && anchor.type !== 'first') {\n        if (anchor.type === 'command') {\n            return {};\n        }\n        result = {\n            color: anchor.color,\n            backgroundColor: anchor.backgroundColor,\n            fontFamily: anchor.fontFamily,\n            fontShape: anchor.fontShape,\n            fontSeries: anchor.fontSeries,\n            fontSize: anchor.fontSize,\n        };\n    }\n    let i = 1;\n    let ancestor = model.ancestor(i);\n    while (!result && ancestor) {\n        if (ancestor) {\n            result = {\n                color: ancestor.color,\n                backgroundColor: ancestor.backgroundColor,\n                fontFamily: ancestor.fontFamily,\n                fontShape: ancestor.fontShape,\n                fontSeries: ancestor.fontSeries,\n                fontSize: ancestor.fontSize,\n            };\n        }\n        i += 1;\n        ancestor = model.ancestor(i);\n    }\n    return result;\n}\n\n/**\n * Move to the next/previous placeholder or empty child list.\n * @return False if no placeholder found and did not move\n */\nexport function leap(\n    model: ModelPrivate,\n    dir: -1 | 1 = 1,\n    callHooks = true\n): boolean {\n    const savedSuppressChangeNotifications = model.suppressChangeNotifications;\n    model.suppressChangeNotifications = true;\n    const oldPath = model.clone();\n    const oldExtent = model.extent;\n    move(model, dir);\n\n    if (getAnchor(model).type === 'placeholder') {\n        // If we're already at a placeholder, move by one more (the placeholder\n        // is right after the insertion point)\n        move(model, dir);\n    }\n    // Candidate placeholders are atom of type 'placeholder'\n    // or empty children list (except for the root: if the root is empty,\n    // it is not a valid placeholder)\n    const placeholders = filter(\n        model,\n        (path, atom) =>\n            atom.type === 'placeholder' ||\n            (path.length > 1 && model.siblings().length === 1),\n        dir\n    );\n\n    // If no placeholders were found, call handler or move to the next focusable\n    // element in the document\n    if (placeholders.length === 0) {\n        // Restore the selection\n        setPath(model, oldPath, oldExtent);\n        if (callHooks) {\n            if (\n                model.hooks?.tabOut &&\n                model.hooks.tabOut(model, dir > 0 ? 'forward' : 'backward') &&\n                document.activeElement\n            ) {\n                const focussableElements = `a[href]:not([disabled]),\n                    button:not([disabled]),\n                    textarea:not([disabled]),\n                    input[type=text]:not([disabled]),\n                    select:not([disabled]),\n                    [contentEditable=\"true\"],\n                    [tabindex]:not([disabled]):not([tabindex=\"-1\"])`;\n                // Get all the potentially focusable elements\n                // and exclude (1) those that are invisible (width and height = 0)\n                // (2) not the active element\n                // (3) the ancestor of the active element\n\n                const focussable = Array.prototype.filter.call(\n                    document.querySelectorAll(focussableElements),\n                    (element) =>\n                        ((element.offsetWidth > 0 ||\n                            element.offsetHeight > 0) &&\n                            !element.contains(document.activeElement)) ||\n                        element === document.activeElement\n                );\n                let index = focussable.indexOf(document.activeElement) + dir;\n                if (index < 0) index = focussable.length - 1;\n                if (index >= focussable.length) index = 0;\n                focussable[index].focus();\n            }\n        }\n        model.suppressChangeNotifications = savedSuppressChangeNotifications;\n        return false;\n    }\n\n    // Set the selection to the next placeholder\n    selectionWillChange(model);\n    setPath(model, placeholders[0]);\n    if (getAnchor(model).type === 'placeholder') setSelectionExtent(model, -1);\n    model.announce('move', oldPath);\n    selectionDidChange(model);\n    model.suppressChangeNotifications = savedSuppressChangeNotifications;\n    return true;\n}\n\n/**\n * @param offset\n * - &gt;0: index of the child in the group where the selection will start from\n * - <0: index counting from the end of the group\n * @param extent Number of items in the selection:\n * - 0: collapsed selection, single insertion point\n * - &gt;0: selection extending _after_ the offset\n * - <0: selection extending _before_ the offset\n * - `'end'`: selection extending to the end of the group\n * - `'start'`: selection extending to the beginning of the group\n * @param relation e.g. `'body'`, `'superscript'`, etc...\n * @return False if the relation is invalid (no such children)\n */\nexport function setSelection(\n    model: ModelPrivate,\n    offset = 0,\n    extent: number | 'end' | 'start' = 0,\n    relation = ''\n): boolean {\n    // If no relation (\"children\", \"superscript\", etc...) is specified\n    // keep the current relation\n    const oldRelation = model.path[model.path.length - 1].relation;\n    if (!relation) relation = oldRelation;\n\n    // If the relation is invalid, exit and return false\n    const parent = model.parent();\n    if (!parent && relation !== 'body') return false;\n    const arrayRelation = relation.startsWith('cell');\n    if (\n        (!arrayRelation && !parent[relation]) ||\n        (arrayRelation && !parent.array)\n    ) {\n        return false;\n    }\n\n    const relationChanged = relation !== oldRelation;\n    // Temporarily set the path to the potentially new relation to get the\n    // right siblings\n    model.path[model.path.length - 1].relation = relation;\n\n    // Invoking siblings() will have the side-effect of adding the 'first'\n    // atom if necessary\n    // ... and we want the siblings with the potentially new relation...\n    const siblings = model.siblings();\n    const siblingsCount = siblings.length;\n\n    // Restore the relation\n    model.path[model.path.length - 1].relation = oldRelation;\n\n    const oldExtent = model.extent;\n    if (extent === 'end') {\n        extent = siblingsCount - offset - 1;\n    } else if (extent === 'start') {\n        extent = -offset;\n    }\n    setSelectionExtent(model, extent);\n    const extentChanged = model.extent !== oldExtent;\n    setSelectionExtent(model, oldExtent);\n\n    // Calculate the new offset, and make sure it is in range\n    // (setSelection can be called with an offset that greater than\n    // the number of children, for example when doing an up from a\n    // numerator to a smaller denominator, e.g. \"1/(x+1)\".\n    if (offset < 0) {\n        offset = siblingsCount + offset;\n    }\n    offset = Math.max(0, Math.min(offset, siblingsCount - 1));\n\n    const oldOffset = model.path[model.path.length - 1].offset;\n    const offsetChanged = oldOffset !== offset;\n\n    if (relationChanged || offsetChanged || extentChanged) {\n        if (relationChanged) {\n            adjustPlaceholder(model);\n        }\n        selectionWillChange(model);\n\n        model.path[model.path.length - 1].relation = relation;\n        model.path[model.path.length - 1].offset = offset;\n        setSelectionExtent(model, extent);\n\n        selectionDidChange(model);\n    }\n\n    return true;\n}\n\n/**\n * Move the anchor to the next permissible atom\n */\nexport function next(\n    model: ModelPrivate,\n    options?: { iterateAll?: boolean }\n): void {\n    options = options ?? {};\n\n    const NEXT_RELATION = {\n        body: 'numer',\n        numer: 'denom',\n        denom: 'index',\n        index: 'overscript',\n        overscript: 'underscript',\n        underscript: 'subscript',\n        subscript: 'superscript',\n    };\n\n    if (model.anchorOffset() === model.siblings().length - 1) {\n        adjustPlaceholder(model);\n\n        // We've reached the end of this list.\n        // Is there another list to consider?\n        let relation = NEXT_RELATION[model.relation()];\n        const parent = model.parent();\n        while (relation && !parent[relation]) {\n            relation = NEXT_RELATION[relation];\n        }\n\n        // We found a new relation/set of siblings...\n        if (relation) {\n            setSelection(model, 0, 0, relation);\n            return;\n        }\n\n        // No more siblings, check if we have a sibling cell in an array\n        if (model.parent().array) {\n            const maxCellCount = arrayCellCount(model.parent().array);\n            let cellIndex =\n                parseInt(model.relation().match(/cell([0-9]*)$/)[1]) + 1;\n            while (cellIndex < maxCellCount) {\n                const cell = arrayCell(model.parent().array, cellIndex);\n                // Some cells could be null (sparse array), so skip them\n                if (cell && setSelection(model, 0, 0, 'cell' + cellIndex)) {\n                    selectionDidChange(model);\n                    return;\n                }\n                cellIndex += 1;\n            }\n        }\n\n        // No more siblings, go up to the parent.\n        if (model.path.length === 1) {\n            // Invoke handler and perform default if they return true.\n            if (\n                model.suppressChangeNotifications ||\n                !model.hooks?.moveOut ||\n                model.hooks.moveOut(model, 'forward')\n            ) {\n                // We're at the root, so loop back\n                model.path[0].offset = 0;\n            }\n        } else {\n            // We've reached the end of the siblings. If we're a group\n            // with skipBoundary, when exiting, move one past the next atom\n            const skip = !options.iterateAll && model.parent().skipBoundary;\n            model.path.pop();\n            if (skip) {\n                next(model, options);\n            }\n        }\n\n        selectionDidChange(model);\n        return;\n    }\n\n    // Still some siblings to go through. Move on to the next one.\n    setSelection(model, model.anchorOffset() + 1);\n    const anchor = getAnchor(model);\n\n    // Dive into its components, if the new anchor is a compound atom,\n    // and allows capture of the selection by its sub-elements\n    if (anchor && !anchor.captureSelection) {\n        let relation;\n        if (anchor.array) {\n            // Find the first non-empty cell in this array\n            let cellIndex = 0;\n            relation = '';\n            const maxCellCount = arrayCellCount(anchor.array);\n            while (!relation && cellIndex < maxCellCount) {\n                // Some cells could be null (sparse array), so skip them\n                if (arrayCell(anchor.array, cellIndex)) {\n                    relation = 'cell' + cellIndex.toString();\n                }\n                cellIndex += 1;\n            }\n            console.assert(relation);\n            model.path.push({ relation: relation, offset: 0 });\n            setSelection(model, 0, 0, relation);\n            return;\n        }\n        relation = 'body';\n        while (relation) {\n            if (isArray(anchor[relation])) {\n                model.path.push({ relation: relation, offset: 0 });\n                model.insertFirstAtom();\n                if (!options.iterateAll && anchor.skipBoundary) {\n                    next(model, options);\n                }\n                return;\n            }\n            relation = NEXT_RELATION[relation];\n        }\n    }\n}\n\nexport function previous(\n    model: ModelPrivate,\n    options?: { iterateAll?: boolean }\n): void {\n    options = options ?? {};\n\n    const PREVIOUS_RELATION = {\n        numer: 'body',\n        denom: 'numer',\n        index: 'denom',\n        overscript: 'index',\n        underscript: 'overscript',\n        subscript: 'underscript',\n        superscript: 'subscript',\n    };\n    if (\n        !options.iterateAll &&\n        model.anchorOffset() === 1 &&\n        model.parent() &&\n        model.parent().skipBoundary\n    ) {\n        setSelection(model, 0);\n    }\n    if (model.anchorOffset() < 1) {\n        // We've reached the first of these siblings.\n        // Is there another set of siblings to consider?\n        let relation = PREVIOUS_RELATION[model.relation()];\n        while (relation && !setSelection(model, -1, 0, relation)) {\n            relation = PREVIOUS_RELATION[relation];\n        }\n        // Ignore the body of the subsup scaffolding and of\n        // 'mop' atoms (for example, \\sum): their body is not editable.\n        const parentType = model.parent() ? model.parent().type : 'none';\n        if (\n            relation === 'body' &&\n            (parentType === 'msubsup' || parentType === 'mop')\n        ) {\n            relation = null;\n        }\n        // We found a new relation/set of siblings...\n        if (relation) return;\n\n        adjustPlaceholder(model);\n\n        selectionWillChange(model);\n\n        // No more siblings, check if we have a sibling cell in an array\n        if (model.relation().startsWith('cell')) {\n            let cellIndex =\n                parseInt(model.relation().match(/cell([0-9]*)$/)[1]) - 1;\n            while (cellIndex >= 0) {\n                const cell = arrayCell(model.parent().array, cellIndex);\n                if (cell && setSelection(model, -1, 0, 'cell' + cellIndex)) {\n                    selectionDidChange(model);\n                    return;\n                }\n                cellIndex -= 1;\n            }\n        }\n\n        // No more siblings, go up to the parent.\n        if (model.path.length === 1) {\n            // Invoke handler and perform default if they return true.\n            if (\n                model.suppressChangeNotifications ||\n                !model.hooks?.moveOut ||\n                model.hooks.moveOut(model, 'backward')\n            ) {\n                // We're at the root, so loop back\n                model.path[0].offset = model.root.body.length - 1;\n            }\n        } else {\n            model.path.pop();\n            setSelection(model, model.anchorOffset() - 1);\n        }\n\n        selectionDidChange(model);\n        return;\n    }\n\n    // If the new anchor is a compound atom, dive into its components\n    const anchor = getAnchor(model);\n    // Only dive in if the atom allows capture of the selection by\n    // its sub-elements\n    if (!anchor.captureSelection) {\n        let relation;\n        if (anchor.array) {\n            relation = '';\n            const maxCellCount = arrayCellCount(anchor.array);\n            let cellIndex = maxCellCount - 1;\n            while (!relation && cellIndex < maxCellCount) {\n                // Some cells could be null (sparse array), so skip them\n                if (arrayCell(anchor.array, cellIndex)) {\n                    relation = 'cell' + cellIndex.toString();\n                }\n                cellIndex -= 1;\n            }\n            cellIndex += 1;\n            console.assert(relation);\n            model.path.push({\n                relation: relation,\n                offset: arrayCell(anchor.array, cellIndex).length - 1,\n            });\n            setSelection(model, -1, 0, relation);\n            return;\n        }\n        relation = 'superscript';\n        while (relation) {\n            if (isArray(anchor[relation])) {\n                model.path.push({\n                    relation: relation,\n                    offset: anchor[relation].length - 1,\n                });\n\n                setSelection(model, -1, 0, relation);\n                return;\n            }\n            relation = PREVIOUS_RELATION[relation];\n        }\n    }\n    // There wasn't a component to navigate to, so...\n    // Still some siblings to go through: move on to the previous one.\n    setSelection(model, model.anchorOffset() - 1);\n\n    if (\n        !options.iterateAll &&\n        model.sibling(0) &&\n        model.sibling(0).skipBoundary\n    ) {\n        previous(model, options);\n    }\n}\n\nexport function move(\n    model: ModelPrivate,\n    dist: number,\n    options?: { extend: any }\n): boolean {\n    options = options ?? { extend: false };\n    const extend = options.extend ?? false;\n\n    removeSuggestion(model);\n\n    if (extend) {\n        extend(model, dist, options);\n    } else {\n        const oldPath = model.clone();\n        // const previousParent = model.parent();\n        // const previousRelation = model.relation();\n        // const previousSiblings = model.siblings();\n\n        if (dist > 0) {\n            if (collapseSelectionForward(model)) dist--;\n            while (dist > 0) {\n                next(model);\n                dist--;\n            }\n        } else if (dist < 0) {\n            if (collapseSelectionBackward(model)) dist++;\n            while (dist !== 0) {\n                previous(model);\n                dist++;\n            }\n        }\n\n        // ** @todo: can't do that without updating the path.\n        // If the siblings list we left was empty, remove the relation\n        // if (previousSiblings.length <= 1) {\n        //     if (['superscript', 'subscript', 'index'].includes(previousRelation)) {\n        //         previousParent[previousRelation] = null;\n        //     }\n        // }\n        model.announce('move', oldPath);\n    }\n    return true;\n}\n\nexport function up(\n    model: ModelPrivate,\n    options?: { extend: boolean }\n): boolean {\n    options = options ?? { extend: false };\n    const extend = options.extend ?? false;\n\n    collapseSelectionBackward(model);\n    const relation = model.relation();\n\n    if (relation === 'denom') {\n        if (extend) {\n            selectionWillChange(model);\n            model.path.pop();\n            model.path[model.path.length - 1].offset -= 1;\n            setSelectionExtent(model, 1);\n            selectionDidChange(model);\n        } else {\n            setSelection(model, model.anchorOffset(), 0, 'numer');\n        }\n        model.announce('moveUp');\n    } else if (model.parent().array) {\n        // In an array\n        let colRow = arrayColRow(model.parent().array, relation);\n        colRow = arrayAdjustRow(model.parent().array, colRow, -1);\n        if (colRow && arrayCell(model.parent().array, colRow)) {\n            model.path[model.path.length - 1].relation =\n                'cell' + arrayIndex(model.parent().array, colRow);\n            setSelection(model, model.anchorOffset());\n\n            model.announce('moveUp');\n        } else {\n            move(model, -1, options);\n        }\n    } else {\n        model.announce('line');\n    }\n    return true;\n}\n\nexport function down(\n    model: ModelPrivate,\n    options?: { extend: boolean }\n): boolean {\n    options = options ?? { extend: false };\n    const extend = options.extend ?? false;\n\n    collapseSelectionForward(model);\n    const relation = model.relation();\n    if (relation === 'numer') {\n        if (extend) {\n            selectionWillChange(model);\n            model.path.pop();\n            model.path[model.path.length - 1].offset -= 1;\n            setSelectionExtent(model, 1);\n            selectionDidChange(model);\n        } else {\n            setSelection(model, model.anchorOffset(), 0, 'denom');\n        }\n        model.announce('moveDown');\n    } else if (model.parent().array) {\n        // In an array\n        let colRow = arrayColRow(model.parent().array, relation);\n        colRow = arrayAdjustRow(model.parent().array, colRow, +1);\n        // @revisit: validate this codepath\n        if (colRow && arrayCell(model.parent().array, colRow)) {\n            model.path[model.path.length - 1].relation =\n                'cell' + arrayIndex(model.parent().array, colRow);\n            setSelection(model, model.anchorOffset());\n\n            model.announce('moveDown');\n        } else {\n            move(model, +1, options);\n        }\n    } else {\n        model.announce('line');\n    }\n    return true;\n}\n\n/**\n * Change the range of the selection\n *\n * @param dist - The change (positive or negative) to the extent\n * of the selection. The anchor point does not move.\n */\nexport function extend(model: ModelPrivate, dist: number): boolean {\n    let offset = model.path[model.path.length - 1].offset;\n    let extent = 0;\n    const oldPath = model.clone();\n\n    extent = model.extent + dist;\n\n    const newFocusOffset = offset + extent;\n    if (newFocusOffset < 0 && extent !== 0) {\n        // We're trying to extend beyond the first element.\n        // Go up to the parent.\n        if (model.path.length > 1) {\n            selectionWillChange(model);\n            model.path.pop();\n            // model.path[model.path.length - 1].offset -= 1;\n            setSelectionExtent(model, -1);\n            selectionDidChange(model);\n            model.announce('move', oldPath);\n            return true;\n        }\n        // @todo exit left extend\n        // If we're at the very beginning, nothing to do.\n        offset = model.path[model.path.length - 1].offset;\n        extent = model.extent;\n    } else if (newFocusOffset >= model.siblings().length) {\n        // We're trying to extend beyond the last element.\n        // Go up to the parent\n        if (model.path.length > 1) {\n            selectionWillChange(model);\n            model.path.pop();\n            model.path[model.path.length - 1].offset -= 1;\n            setSelectionExtent(model, 1);\n            selectionDidChange(model);\n            model.announce('move', oldPath);\n            return true;\n        }\n        // @todo exit right extend\n        if (selectionIsCollapsed(model)) {\n            offset -= 1;\n        }\n        extent -= 1;\n    }\n    setSelection(model, offset, extent);\n    model.announce('move', oldPath);\n    return true;\n}\n\n/**\n * Move the selection focus to the next/previous point of interest.\n * A point of interest is an atom of a different type (mbin, mord, etc...)\n * than the current focus.\n * If `extend` is true, the selection will be extended. Otherwise, it is\n * collapsed, then moved.\n * @param dir +1 to skip forward, -1 to skip back\n */\nexport function skip(\n    model: ModelPrivate,\n    dir: 1 | -1,\n    options?: { extend: boolean }\n): boolean {\n    options = options ?? { extend: false };\n    const extend = options.extend ?? false;\n    dir = dir < 0 ? -1 : +1;\n\n    const oldPath = model.clone();\n\n    const siblings = model.siblings();\n    const focus = model.focusOffset();\n    let offset = focus + dir;\n    if (extend) offset = Math.min(Math.max(0, offset), siblings.length - 1);\n    if (offset < 0 || offset >= siblings.length) {\n        // If we've reached the end, just move out of the list\n        move(model, dir, options);\n        return;\n    }\n    if (siblings[offset] && siblings[offset].mode === 'text') {\n        // We're in a text zone, skip word by word\n        offset = wordBoundaryOffset(model, offset, dir);\n        if (offset < 0 && !extend) {\n            setSelection(model, 0);\n            return;\n        }\n        if (offset > siblings.length) {\n            setSelection(model, siblings.length - 1);\n            move(model, dir, options);\n            return;\n        }\n    } else {\n        const type = siblings[offset] ? siblings[offset].type : '';\n        if ((type === 'mopen' && dir > 0) || (type === 'mclose' && dir < 0)) {\n            // We're right before (or after) an opening (or closing)\n            // fence. Skip to the balanced element (in level, but not necessarily in\n            // fence symbol).\n            let level = type === 'mopen' ? 1 : -1;\n            offset += dir > 0 ? 1 : -1;\n            while (offset >= 0 && offset < siblings.length && level !== 0) {\n                if (siblings[offset].type === 'mopen') {\n                    level += 1;\n                } else if (siblings[offset].type === 'mclose') {\n                    level -= 1;\n                }\n                offset += dir;\n            }\n            if (level !== 0) {\n                // We did not find a balanced element. Just move a little.\n                offset = focus + dir;\n            }\n            if (dir > 0) offset = offset - 1;\n        } else {\n            while (\n                siblings[offset] &&\n                siblings[offset].mode === 'math' &&\n                siblings[offset].type === type\n            ) {\n                offset += dir;\n            }\n            offset -= dir > 0 ? 1 : 0;\n        }\n    }\n\n    if (extend) {\n        const anchor = model.anchorOffset();\n        setSelection(model, anchor, offset - anchor);\n    } else {\n        setSelection(model, offset);\n    }\n    model.announce('move', oldPath);\n}\n\n/**\n * Move to the next/previous expression boundary\n */\nexport function jump(\n    model: ModelPrivate,\n    dir: number,\n    options?: { extend: boolean }\n): boolean {\n    options = options ?? { extend: false };\n    dir = dir < 0 ? -1 : +1;\n\n    const siblings = model.siblings();\n    let focus = model.focusOffset();\n    if (dir > 0) focus = Math.min(focus + 1, siblings.length - 1);\n\n    const offset = dir < 0 ? 0 : siblings.length - 1;\n\n    if (options.extend ?? false) {\n        extend(model, offset - focus);\n    } else {\n        move(model, offset - focus);\n    }\n    return true;\n}\n\nexport function jumpToMathFieldBoundary(\n    model: ModelPrivate,\n    dir = 1,\n    options?: { extend: boolean }\n): boolean {\n    options = options ?? { extend: false };\n    dir = dir < 0 ? -1 : +1;\n\n    const oldPath = model.clone();\n    const path = [{ relation: 'body', offset: model.path[0].offset }];\n    let extent;\n\n    if (!options.extend ?? false) {\n        // Change the anchor to the end/start of the root expression\n        path[0].offset = dir < 0 ? 0 : model.root.body.length - 1;\n        extent = 0;\n    } else {\n        // Don't change the anchor, but update the extent\n        if (dir < 0) {\n            if (path[0].offset > 0) {\n                extent = -path[0].offset;\n            } else {\n                // @todo exit left extend\n            }\n        } else {\n            if (path[0].offset < model.siblings().length - 1) {\n                extent = model.siblings().length - 1 - path[0].offset;\n            } else {\n                // @todo exit right extend\n            }\n        }\n    }\n\n    setPath(model, path, extent);\n    model.announce('move', oldPath);\n    return true;\n}\n\n/**\n * @return The currently selected atoms, or `null` if the\n * selection is collapsed\n */\nexport function getSelectedAtoms(model: ModelPrivate): Atom[] {\n    if (selectionIsCollapsed(model)) return null;\n    const result = [];\n    const siblings = model.siblings();\n    const firstOffset = model.startOffset() + 1;\n    const lastOffset = model.endOffset() + 1;\n    for (let i = firstOffset; i < lastOffset; i++) {\n        if (siblings[i] && siblings[i].type !== 'first') {\n            result.push(siblings[i]);\n        }\n    }\n\n    return result;\n}\n\n/**\n * @return True if `atom` is within the selection range\n * @todo: poorly named, since this is specific to the selection, not the math\n * field\n */\n// export function contains(model: Model, atom) {\n//     if (selectionIsCollapsed(model)) return false;\n//     const siblings = model.siblings();\n//     const firstOffset = model.startOffset();\n//     const lastOffset = model.endOffset();\n//     for (let i = firstOffset; i < lastOffset; i++) {\n//         if (atomContains(siblings[i], atom)) return true;\n//     }\n//     return false;\n// }\n\n/**\n * Select all the atoms in the current group, that is all the siblings.\n * When the selection is in a numerator, the group is the numerator. When\n * the selection is a superscript or subscript, the group is the supsub.\n * When the selection is in a text zone, the \"group\" is a word.\n */\nexport function selectGroup(model: ModelPrivate): boolean {\n    const siblings = model.siblings();\n    if (getAnchorMode(model) === 'text') {\n        let start = model.startOffset();\n        let end = model.endOffset();\n        //\n        while (\n            siblings[start] &&\n            siblings[start].mode === 'text' &&\n            LETTER_AND_DIGITS.test(siblings[start].body as string)\n        ) {\n            start -= 1;\n        }\n        while (\n            siblings[end] &&\n            siblings[end].mode === 'text' &&\n            LETTER_AND_DIGITS.test(siblings[end].body as string)\n        ) {\n            end += 1;\n        }\n        end -= 1;\n        if (start >= end) {\n            // No word found. Select a single character\n            setSelection(model, model.endOffset() - 1, 1);\n            return true;\n        }\n\n        setSelection(model, start, end - start);\n    } else {\n        // In a math zone, select all the sibling nodes\n        if (\n            model.sibling(0).type === 'mord' &&\n            /[0-9,.]/.test(model.sibling(0).body as string)\n        ) {\n            // In a number, select all the digits\n            let start = model.startOffset();\n            let end = model.endOffset();\n            //\n            while (isNumber(siblings[start])) start -= 1;\n            while (isNumber(siblings[end])) end += 1;\n            end -= 1;\n            setSelection(model, start, end - start);\n        } else {\n            setSelection(model, 0, 'end');\n        }\n    }\n    return true;\n}\n\nexport function selectAll(model: ModelPrivate): boolean {\n    model.path = [{ relation: 'body', offset: 0 }];\n    return setSelection(model, 0, 'end');\n}\n\n/**\n * @return {boolean} True if the selection is an insertion point.\n */\nexport function selectionIsCollapsed(model: ModelPrivate): boolean {\n    return model.extent === 0;\n}\n\nexport function setSelectionExtent(\n    model: ModelPrivate,\n    extent: number\n): boolean {\n    model.extent = extent;\n    return true;\n}\n\nexport function collapseSelectionForward(model: ModelPrivate): boolean {\n    if (model.extent === 0) return false;\n\n    setSelection(model, model.endOffset());\n    return true;\n}\n\nexport function collapseSelectionBackward(model: ModelPrivate): boolean {\n    if (model.extent === 0) return false;\n\n    setSelection(model, model.startOffset());\n    return true;\n}\n\nexport function moveAfterParent(model: ModelPrivate): boolean {\n    if (model.path.length > 1) {\n        const oldPath = model.clone();\n        model.path.pop();\n        setSelectionExtent(model, 0);\n        model.announce('move', oldPath);\n        return true;\n    }\n    model.announce('plonk');\n    return false;\n}\n\n/**\n * The atom where the selection starts.\n *\n * When the selection is extended the anchor remains fixed. The anchor\n * could be either before or after the focus.\n */\nexport function getAnchor(model: ModelPrivate): Atom {\n    if (model.parent().array) {\n        return arrayCell(model.parent().array, model.relation())[\n            model.anchorOffset()\n        ];\n    }\n    const siblings = model.siblings();\n    return siblings[Math.min(siblings.length - 1, model.anchorOffset())];\n}\n\n/**\n * Extend the selection between `from` and `to` nodes\n *\n * @param {object} options\n * - options.extendToWordBoundary\n * @return true if the range was actually changed\n */\nexport function setRange(\n    model: ModelPrivate,\n    from: Path,\n    to: Path,\n    options: { extendToWordBoundary?: boolean } = {\n        extendToWordBoundary: false,\n    }\n): boolean {\n    // Measure the 'distance' between `from` and `to`\n    const distance = pathDistance(from, to);\n    if (distance === 0) {\n        // `from` and `to` are equal.\n\n        if (options.extendToWordBoundary) {\n            from = wordBoundary(model, from, -1);\n            to = wordBoundary(model, to, +1);\n            return setRange(model, from, to);\n        }\n\n        // Set the path to a collapsed insertion point\n        return setPath(model, clonePath(from), 0);\n    }\n\n    if (distance === 1) {\n        const extent = to[to.length - 1].offset - from[from.length - 1].offset;\n        if (options.extendToWordBoundary) {\n            from = wordBoundary(model, from, extent < 0 ? +1 : -1);\n            to = wordBoundary(model, to, extent < 0 ? -1 : +1);\n            return setRange(model, from, to);\n        }\n        // They're siblings, set an extent\n        return setPath(model, clonePath(from), extent);\n    }\n\n    // They're neither identical, not siblings.\n\n    // Find the common ancestor between the nodes\n    let commonAncestor = pathCommonAncestor(from, to);\n    const ancestorDepth = commonAncestor.length;\n    if (\n        from.length === ancestorDepth ||\n        to.length === ancestorDepth ||\n        from[ancestorDepth].relation !== to[ancestorDepth].relation\n    ) {\n        return setPath(model, commonAncestor, -1);\n    }\n\n    commonAncestor.push(from[ancestorDepth]);\n    commonAncestor = clonePath(commonAncestor);\n\n    let extent = to[ancestorDepth].offset - from[ancestorDepth].offset + 1;\n\n    if (extent <= 0) {\n        if (to.length > ancestorDepth + 1) {\n            // axb/c+y -> select from y to x\n            commonAncestor[ancestorDepth].relation = to[ancestorDepth].relation;\n            commonAncestor[ancestorDepth].offset = to[ancestorDepth].offset;\n            commonAncestor[commonAncestor.length - 1].offset -= 1;\n            extent = -extent + 2;\n        } else {\n            // x+(ayb/c) -> select from y to x\n            commonAncestor[ancestorDepth].relation = to[ancestorDepth].relation;\n            commonAncestor[ancestorDepth].offset = to[ancestorDepth].offset;\n            extent = -extent + 1;\n        }\n    } else if (to.length <= from.length) {\n        // axb/c+y -> select from x to y\n        commonAncestor[commonAncestor.length - 1].offset -= 1;\n    } else if (to.length > from.length) {\n        commonAncestor[ancestorDepth].offset -= 1;\n    }\n\n    return setPath(model, commonAncestor, extent);\n}\n\n/**\n *\n * @param  extent the length of the selection\n * @return true if the path has actually changed\n */\nexport function setPath(\n    model: ModelPrivate,\n    inSelection: string | Path | Selection,\n    extent = 0\n): boolean {\n    let selection: Selection;\n    // Convert to a path array if necessary\n    if (typeof inSelection === 'string') {\n        selection = pathFromString(inSelection);\n    } else if (isArray(inSelection)) {\n        // need to temporarily change the path of this to use 'sibling()'\n        const newPath = clonePath(inSelection as Path);\n        const oldPath = model.path;\n        model.path = newPath;\n        if (extent === 0 && getAnchor(model).type === 'placeholder') {\n            // select the placeholder\n            newPath[newPath.length - 1].offset = model.anchorOffset() - 1;\n            extent = 1;\n        }\n        selection = {\n            path: newPath,\n            extent: extent || 0,\n        };\n        model.path = oldPath;\n    } else {\n        selection = inSelection;\n    }\n\n    const pathChanged = pathDistance(model.path, selection.path) !== 0;\n    const extentChanged = selection.extent !== model.extent;\n\n    if (pathChanged || extentChanged) {\n        if (pathChanged) {\n            adjustPlaceholder(model);\n        }\n        selectionWillChange(model);\n\n        model.path = clonePath(selection.path);\n\n        if (model.siblings().length < model.anchorOffset()) {\n            // The new path is out of bounds.\n            // Reset the path to something valid\n            console.warn(\n                'Invalid selection: ' +\n                    model.toString() +\n                    ' in \"' +\n                    model.root.toLatex(false) +\n                    '\"'\n            );\n\n            model.path = [{ relation: 'body', offset: 0 }];\n            model.extent = 0;\n        } else {\n            setSelectionExtent(model, selection.extent);\n        }\n\n        selectionDidChange(model);\n    }\n\n    return pathChanged || extentChanged;\n}\n\n/**\n * Locate the offset before the insertion point that would indicate\n * a good place to select as an implicit argument.\n * For example with '1+\\sin(x)', if the insertion point is at the\n * end, the implicit arg offset would be after the plus. As a result,\n * inserting a fraction after the sin would yield: '1+\\frac{\\sin(c)}{\\placeholder{}}'\n */\nexport function getImplicitArgOffset(model: ModelPrivate): number {\n    const siblings = model.siblings();\n\n    let result = model.startOffset();\n    if (siblings[result].mode === 'text') {\n        while (result >= 1 && siblings[result].mode === 'text') {\n            result--;\n        }\n    } else {\n        // Find the first 'mrel', etc... to the left of the insertion point\n        while (\n            result >= 1 &&\n            /^(mord|surd|msubsup|leftright|mop)$/.test(siblings[result].type)\n        ) {\n            result--;\n        }\n    }\n\n    return result;\n}\n\n/**\n *\n * @param cb - A callback called for each selected atom in the\n * mathlist.\n */\nexport function forEachSelected(\n    model: ModelPrivate,\n    cb: (atom: Atom) => void,\n    options?: { recursive?: boolean }\n): void {\n    options = options ?? {};\n    options.recursive = options.recursive ?? false;\n\n    const siblings = model.siblings();\n    const firstOffset = model.startOffset() + 1;\n    const lastOffset = model.endOffset() + 1;\n\n    if (options.recursive) {\n        for (let i = firstOffset; i < lastOffset; i++) {\n            if (siblings[i] && siblings[i].type !== 'first') {\n                siblings[i].forEach(cb);\n            }\n        }\n    } else {\n        for (let i = firstOffset; i < lastOffset; i++) {\n            if (siblings[i] && siblings[i].type !== 'first') {\n                cb(siblings[i]);\n            }\n        }\n    }\n}\n\nexport function getContentFromSiblings(\n    model: ModelPrivate,\n    start: number,\n    end: number\n): string {\n    const siblings = model.siblings();\n    if (isEmptyMathlist(siblings)) return '';\n    if (siblings[0].type === 'first' && start === 0) {\n        start = 1;\n    }\n    if (\n        model.parent().type === 'root' &&\n        start === 1 &&\n        end === siblings.length - 1\n    ) {\n        // It's the entire sibling list. Get the parent's latex\n        return model.parent().toLatex(false);\n    }\n    let result = '';\n    let i = start;\n    while (i <= end) {\n        result += siblings[i].toLatex(false);\n        i++;\n    }\n    return result;\n}\n\n/**\n * When changing the selection, if the former selection is an empty list,\n * insert a placeholder if necessary. For example, if in an empty numerator.\n */\nfunction adjustPlaceholder(model: ModelPrivate): void {\n    // Should we insert a placeholder?\n    // Check if we're an empty list that is the child of a fraction\n    const siblings = model.siblings();\n    if (siblings && siblings.length <= 1) {\n        let placeholder;\n        const relation = model.relation();\n        if (relation === 'numer') {\n            placeholder = 'numerator';\n        } else if (relation === 'denom') {\n            placeholder = 'denominator';\n        } else if (model.parent().type === 'surd' && relation === 'body') {\n            // Surd (roots)\n            placeholder = 'radicand';\n        } else if (model.parent().type === 'overunder' && relation === 'body') {\n            placeholder = 'base';\n        } else if (relation === 'underscript' || relation === 'overscript') {\n            placeholder = 'annotation';\n        }\n        if (placeholder) {\n            // ◌ ⬚\n            // const placeholderAtom = [\n            //     new Atom('math', 'placeholder', '⬚', getAnchorStyle(model)),\n            // ];\n            // Array.prototype.splice.apply(\n            //     siblings,\n            //     [1, 0].concat(placeholderAtom)\n            // );\n            // @revisit\n            siblings.splice(\n                1,\n                0,\n                new Atom('math', 'placeholder', '⬚', getAnchorStyle(model))\n            );\n        }\n    }\n}\n\nfunction wordBoundary(model: ModelPrivate, path, dir): Path {\n    dir = dir < 0 ? -1 : +1;\n\n    const iter = new ModelPrivate();\n    iter.path = clonePath(path);\n    iter.root = model.root;\n\n    let i = 0;\n    while (\n        iter.sibling(i) &&\n        iter.sibling(i).mode === 'text' &&\n        LETTER_AND_DIGITS.test(iter.sibling(i).body as string)\n    ) {\n        i += dir;\n    }\n    if (!iter.sibling(i)) i -= dir;\n    iter.path[iter.path.length - 1].offset += i;\n    return iter.path;\n}\n\n/*\n * Calculates the offset of the \"next word\".\n * This is inspired by the behavior of text editors on macOS, namely:\n    blue   yellow\n      ^-\n         ^-------\n * That is:\n\n * (1) If starts with an alphanumerical character, find the first alphanumerical\n * character which is followed by a non-alphanumerical character\n *\n * The behavior regarding non-alphanumeric characters is less consistent.\n * Here's the behavior we use:\n *\n *   +=-()_:”     blue\n * ^---------\n *   +=-()_:”     blue\n *      ^---------\n *   +=-()_:”blue\n *      ^--------\n *\n * (2) If starts in whitespace, skip whitespace, then find first non-whitespace*\n *    followed by whitespace\n * (*) Pages actually uses the character class of the first non-whitespace\n * encountered.\n *\n * (3) If starts in a non-whitespace, non alphanumerical character, find the first\n *      whitespace\n *\n */\nfunction wordBoundaryOffset(\n    model: ModelPrivate,\n    offset: number,\n    dir: number\n): number {\n    dir = dir < 0 ? -1 : +1;\n\n    const siblings = model.siblings();\n    if (!siblings[offset]) return offset;\n    if (siblings[offset].mode !== 'text') return offset;\n\n    let result;\n    if (LETTER_AND_DIGITS.test(siblings[offset].body as string)) {\n        // (1) We start with an alphanumerical character\n        let i = offset;\n        let match;\n        do {\n            match =\n                siblings[i].mode === 'text' &&\n                LETTER_AND_DIGITS.test(siblings[i].body as string);\n            i += dir;\n        } while (siblings[i] && match);\n        result = siblings[i] ? i - 2 * dir : i - dir;\n    } else if (/\\s/.test(siblings[offset].body as string)) {\n        // (2) We start with whitespace\n\n        // Skip whitespace\n        let i = offset;\n        while (\n            siblings[i] &&\n            siblings[i].mode === 'text' &&\n            /\\s/.test(siblings[i].body as string)\n        ) {\n            i += dir;\n        }\n        if (!siblings[i]) {\n            // We've reached the end\n            result = i - dir;\n        } else {\n            let match = true;\n            do {\n                match =\n                    siblings[i].mode === 'text' &&\n                    !/\\s/.test(siblings[i].body as string);\n                i += dir;\n            } while (siblings[i] && match);\n            result = siblings[i] ? i - 2 * dir : i - dir;\n        }\n    } else {\n        // (3)\n        let i = offset;\n        // Skip non-whitespace\n        while (\n            siblings[i] &&\n            siblings[i].mode === 'text' &&\n            !/\\s/.test(siblings[i].body as string)\n        ) {\n            i += dir;\n        }\n        result = siblings[i] ? i : i - dir;\n        let match = true;\n        while (siblings[i] && match) {\n            match =\n                siblings[i].mode === 'text' &&\n                /\\s/.test(siblings[i].body as string);\n            if (match) result = i;\n            i += dir;\n        }\n        result = siblings[i] ? i - 2 * dir : i - dir;\n    }\n\n    return result - (dir > 0 ? 0 : 1);\n}\n\n/**\n * Iterate over each atom in the expression, starting with the focus.\n *\n * Return an array of all the paths for which the callback predicate\n * returned true.\n *\n * @param {function} cb - A predicate being passed a path and the atom at this\n * path. Return true to include the designated atom in the result.\n * @param {number} dir - `+1` to iterate forward, `-1` to iterate backward.\n * @return The paths (as a string) for all the atoms which the predicate is true\n */\nexport function filter(\n    model: ModelPrivate,\n    cb: (path: Path, anchor: Atom) => boolean,\n    dir: -1 | 1 = +1\n): string[] {\n    dir = dir < 0 ? -1 : +1;\n\n    const result = [];\n\n    const iter = new ModelPrivate();\n    iter.path = clonePath(model.path);\n    iter.extent = model.extent;\n    iter.root = model.root;\n\n    if (dir >= 0) {\n        collapseSelectionForward(iter);\n    } else {\n        collapseSelectionBackward(iter);\n        move(iter, 1);\n    }\n    const initialAnchor = getAnchor(iter);\n    do {\n        if (cb.bind(iter)(iter.path, getAnchor(iter))) {\n            result.push(iter.toString());\n        }\n        if (dir >= 0) {\n            next(iter, { iterateAll: true });\n        } else {\n            previous(iter, { iterateAll: true });\n        }\n    } while (initialAnchor !== getAnchor(iter));\n\n    return result;\n}\n","import type { KeyboardLayoutName as KeyboardLayoutId } from '../public/config';\n\n// From https://www.w3.org/TR/uievents-code/\ntype Keycode =\n    | 'Sleep'\n    | 'WakeUp'\n    | 'KeyA'\n    | 'KeyB'\n    | 'KeyC'\n    | 'KeyD'\n    | 'KeyE'\n    | 'KeyF'\n    | 'KeyG'\n    | 'KeyH'\n    | 'KeyI'\n    | 'KeyJ'\n    | 'KeyK'\n    | 'KeyL'\n    | 'KeyM'\n    | 'KeyN'\n    | 'KeyO'\n    | 'KeyP'\n    | 'KeyQ'\n    | 'KeyR'\n    | 'KeyS'\n    | 'KeyT'\n    | 'KeyU'\n    | 'KeyV'\n    | 'KeyW'\n    | 'KeyX'\n    | 'KeyY'\n    | 'KeyZ'\n    | 'Digit1'\n    | 'Digit2'\n    | 'Digit3'\n    | 'Digit4'\n    | 'Digit5'\n    | 'Digit6'\n    | 'Digit7'\n    | 'Digit8'\n    | 'Digit9'\n    | 'Digit0'\n    | 'Enter'\n    | 'Escape'\n    | 'Backspace'\n    | 'Tab'\n    | 'Space'\n    | 'Minus'\n    | 'Equal'\n    | 'BracketLeft'\n    | 'BracketRight'\n    | 'Backslash'\n    | 'Semicolon'\n    | 'Quote'\n    | 'Backquote'\n    | 'Comma'\n    | 'Period'\n    | 'Slash'\n    | 'CapsLock'\n    | 'F1'\n    | 'F2'\n    | 'F3'\n    | 'F4'\n    | 'F5'\n    | 'F6'\n    | 'F7'\n    | 'F8'\n    | 'F9'\n    | 'F10'\n    | 'F11'\n    | 'F12'\n    | 'F13'\n    | 'F14'\n    | 'F15'\n    | 'F16'\n    | 'F17'\n    | 'F18'\n    | 'F19'\n    | 'F20'\n    | 'F21'\n    | 'F22'\n    | 'F23'\n    | 'F24'\n    | 'PrintScreen'\n    | 'ScrollLock'\n    | 'Pause'\n    | 'Insert'\n    | 'Home'\n    | 'PageUp'\n    | 'Delete'\n    | 'End'\n    | 'PageDown'\n    | 'ArrowRight'\n    | 'ArrowLeft'\n    | 'ArrowDown'\n    | 'ArrowUp'\n    | 'NumLock'\n    | 'Numpad1'\n    | 'Numpad2'\n    | 'Numpad3'\n    | 'Numpad4'\n    | 'Numpad5'\n    | 'Numpad6'\n    | 'Numpad7'\n    | 'Numpad8'\n    | 'Numpad9'\n    | 'Numpad0'\n    | 'NumpadDivide'\n    | 'NumpadMultiply'\n    | 'NumpadSubtract'\n    | 'NumpadAdd'\n    | 'NumpadEnter'\n    | 'NumpadDecimal'\n    | 'NumpadEqual'\n    | 'NumpadParenLeft'\n    | 'NumpadParenRight'\n    | 'IntlBackslash'\n    | 'ContextMenu'\n    | 'Power'\n    | 'Help'\n    | 'Undo'\n    | 'Cut'\n    | 'Copy'\n    | 'Paste'\n    | 'AudioVolumeMute'\n    | 'AudioVolumeUp'\n    | 'AudioVolumeDown'\n    | 'NumpadComma'\n    | 'IntlRo'\n    | 'KanaMode'\n    | 'IntlYen'\n    | 'Convert'\n    | 'NonConvert'\n    | 'Lang1'\n    | 'Lang2'\n    | 'Lang3'\n    | 'Lang4'\n    | 'ControlLeft'\n    | 'ShiftLeft'\n    | 'AltLeft'\n    | 'MetaLeft'\n    | 'ControlRight'\n    | 'ShiftRight'\n    | 'AltRight'\n    | 'MetaRight'\n    | 'MediaTrackNext'\n    | 'MediaTrackPrevious'\n    | 'MediaStop'\n    | 'Eject'\n    | 'MediaPlayPause'\n    | 'MediaSelect'\n    | 'LaunchMail'\n    | 'LaunchApp2'\n    | 'LaunchApp1'\n    | 'BrowserSearch'\n    | 'BrowserHome'\n    | 'BrowserBack'\n    | 'BrowserForward'\n    | 'BrowserStop'\n    | 'BrowserRefresh'\n    | 'BrowserFavorites';\n\ntype KeyboardLayout = {\n    id: KeyboardLayoutId;\n    displayName: string; // Doesn't have to be unique\n    locale: string;\n    platform: 'windows' | 'apple' | 'linux';\n    score: number;\n    mapping: { [K in Keycode]?: [string, string, string, string] };\n};\n\nconst DEFAULT_KEYBOARD_LAYOUT: KeyboardLayout =\n    platform() === 'apple'\n        ? {\n              id: 'apple.en-intl',\n              displayName: 'English (international)',\n              platform: 'apple',\n              locale: 'en',\n              score: 0,\n              mapping: {\n                  KeyA: ['a', 'A', 'å', 'Å'],\n                  KeyB: ['b', 'B', '∫', 'ı'],\n                  KeyC: ['c', 'C', 'ç', 'Ç'],\n                  KeyD: ['d', 'D', '∂', 'Î'],\n                  KeyE: ['e', 'E', '´', '´'],\n                  KeyF: ['f', 'F', 'ƒ', 'Ï'],\n                  KeyG: ['g', 'G', '©', '˝'],\n                  KeyH: ['h', 'H', '˙', 'Ó'],\n                  KeyI: ['i', 'I', 'ˆ', 'ˆ'],\n                  KeyJ: ['j', 'J', '∆', 'Ô'],\n                  KeyK: ['k', 'K', '˚', ''],\n                  KeyL: ['l', 'L', '¬', 'Ò'],\n                  KeyM: ['m', 'M', 'µ', 'Â'],\n                  KeyN: ['n', 'N', '˜', '˜'],\n                  KeyO: ['o', 'O', 'ø', 'Ø'],\n                  KeyP: ['p', 'P', 'π', '∏'],\n                  KeyQ: ['q', 'Q', 'œ', 'Œ'],\n                  KeyR: ['r', 'R', '®', '‰'],\n                  KeyS: ['s', 'S', 'ß', 'Í'],\n                  KeyT: ['t', 'T', '†', 'ˇ'],\n                  KeyU: ['u', 'U', '¨', '¨'],\n                  KeyV: ['v', 'V', '√', '◊'],\n                  KeyW: ['w', 'W', '∑', '„'],\n                  KeyX: ['x', 'X', '≈', '˛'],\n                  KeyY: ['y', 'Y', '¥', 'Á'],\n                  KeyZ: ['z', 'Z', 'Ω', '¸'],\n                  Digit1: ['1', '!', '¡', '⁄'],\n                  Digit2: ['2', '@', '™', '€'],\n                  Digit3: ['3', '#', '£', '‹'],\n                  Digit4: ['4', '$', '¢', '›'],\n                  Digit5: ['5', '%', '∞', 'ﬁ'],\n                  Digit6: ['6', 'ˆ', '§', 'ﬂ'],\n                  Digit7: ['7', '&', '¶', '‡'],\n                  Digit8: ['8', '*', '•', '°'],\n                  Digit9: ['9', '(', 'ª', '·'],\n                  Digit0: ['0', ')', 'º', '‚'],\n                  Space: [' ', ' ', ' ', ' '],\n                  Minus: ['-', '_', '–', '—'],\n                  Equal: ['=', '+', '≠', '±'],\n                  BracketLeft: ['[', '{', '“', '”'],\n                  BracketRight: [']', '}', '‘', '’'],\n                  Backslash: ['\\\\', '|', '«', '»'],\n                  Semicolon: [';', ':', '…', 'Ú'],\n                  Quote: [\"'\", '\"', 'æ', 'Æ'],\n                  Backquote: ['`', '˜', '`', '`'],\n                  Comma: [',', '<', '≤', '¯'],\n                  Period: ['.', '>', '≥', '˘'],\n                  Slash: ['/', '?', '÷', '¿'],\n                  NumpadDivide: ['/', '/', '/', '/'],\n                  NumpadMultiply: ['*', '*', '*', '*'],\n                  NumpadSubtract: ['-', '-', '-', '-'],\n                  NumpadAdd: ['+', '+', '+', '+'],\n                  Numpad1: ['1', '1', '1', '1'],\n                  Numpad2: ['2', '2', '2', '2'],\n                  Numpad3: ['3', '3', '3', '3'],\n                  Numpad4: ['4', '4', '4', '4'],\n                  Numpad5: ['5', '5', '5', '5'],\n                  Numpad6: ['6', '6', '6', '6'],\n                  Numpad7: ['7', '7', '7', '7'],\n                  Numpad8: ['8', '8', '8', '8'],\n                  Numpad9: ['9', '9', '9', '9'],\n                  Numpad0: ['0', '0', '0', '0'],\n                  NumpadDecimal: ['.', '.', '.', '.'],\n                  IntlBackslash: ['§', '±', '§', '±'],\n                  NumpadEqual: ['=', '=', '=', '='],\n                  AudioVolumeUp: ['', '=', '', '='],\n              },\n          }\n        : platform() === 'windows'\n        ? {\n              id: 'windows.en-intl',\n              displayName: 'English (international)',\n              platform: 'windows',\n              locale: 'en',\n              score: 0,\n              mapping: {\n                  KeyA: ['a', 'A', 'á', 'Á'],\n                  KeyB: ['b', 'B', '', ''],\n                  KeyC: ['c', 'C', '©', '¢'],\n                  KeyD: ['d', 'D', 'ð', 'Ð'],\n                  KeyE: ['e', 'E', 'é', 'É'],\n                  KeyF: ['f', 'F', '', ''],\n                  KeyG: ['g', 'G', '', ''],\n                  KeyH: ['h', 'H', '', ''],\n                  KeyI: ['i', 'I', 'í', 'Í'],\n                  KeyJ: ['j', 'J', '', ''],\n                  KeyK: ['k', 'K', '', ''],\n                  KeyL: ['l', 'L', 'ø', 'Ø'],\n                  KeyM: ['m', 'M', 'µ', ''],\n                  KeyN: ['n', 'N', 'ñ', 'Ñ'],\n                  KeyO: ['o', 'O', 'ó', 'Ó'],\n                  KeyP: ['p', 'P', 'ö', 'Ö'],\n                  KeyQ: ['q', 'Q', 'ä', 'Ä'],\n                  KeyR: ['r', 'R', '®', ''],\n                  KeyS: ['s', 'S', 'ß', '§'],\n                  KeyT: ['t', 'T', 'þ', 'Þ'],\n                  KeyU: ['u', 'U', 'ú', 'Ú'],\n                  KeyV: ['v', 'V', '', ''],\n                  KeyW: ['w', 'W', 'å', 'Å'],\n                  KeyX: ['x', 'X', '', ''],\n                  KeyY: ['y', 'Y', 'ü', 'Ü'],\n                  KeyZ: ['z', 'Z', 'æ', 'Æ'],\n                  Digit1: ['1', '!', '¡', '¹'],\n                  Digit2: ['2', '@', '²', ''],\n                  Digit3: ['3', '#', '³', ''],\n                  Digit4: ['4', '$', '¤', '£'],\n                  Digit5: ['5', '%', '€', ''],\n                  Digit6: ['6', '^', '¼', ''],\n                  Digit7: ['7', '&', '½', ''],\n                  Digit8: ['8', '*', '¾', ''],\n                  Digit9: ['9', '(', '‘', ''],\n                  Digit0: ['0', ')', '’', ''],\n                  Space: [' ', ' ', '', ''],\n                  Minus: ['-', '_', '¥', ''],\n                  Equal: ['=', '+', '×', '÷'],\n                  BracketLeft: ['[', '{', '«', ''],\n                  BracketRight: [']', '}', '»', ''],\n                  Backslash: ['\\\\', '|', '¬', '¦'],\n                  Semicolon: [';', ':', '¶', '°'],\n                  Quote: [\"'\", '\"', '´', '¨'],\n                  Backquote: ['`', '~', '', ''],\n                  Comma: [',', '<', 'ç', 'Ç'],\n                  Period: ['.', '>', '', ''],\n                  Slash: ['/', '?', '¿', ''],\n                  NumpadDivide: ['/', '/', '', ''],\n                  NumpadMultiply: ['*', '*', '', ''],\n                  NumpadSubtract: ['-', '-', '', ''],\n                  NumpadAdd: ['+', '+', '', ''],\n                  IntlBackslash: ['\\\\', '|', '', ''],\n              },\n          }\n        : {\n              id: 'linux.en',\n              displayName: 'English',\n              platform: 'linux',\n              locale: 'en',\n              score: 0,\n              mapping: {\n                  KeyA: ['a', 'A', 'a', 'A'],\n                  KeyB: ['b', 'B', 'b', 'B'],\n                  KeyC: ['c', 'C', 'c', 'C'],\n                  KeyD: ['d', 'D', 'd', 'D'],\n                  KeyE: ['e', 'E', 'e', 'E'],\n                  KeyF: ['f', 'F', 'f', 'F'],\n                  KeyG: ['g', 'G', 'g', 'G'],\n                  KeyH: ['h', 'H', 'h', 'H'],\n                  KeyI: ['i', 'I', 'i', 'I'],\n                  KeyJ: ['j', 'J', 'j', 'J'],\n                  KeyK: ['k', 'K', 'k', 'K'],\n                  KeyL: ['l', 'L', 'l', 'L'],\n                  KeyM: ['m', 'M', 'm', 'M'],\n                  KeyN: ['n', 'N', 'n', 'N'],\n                  KeyO: ['o', 'O', 'o', 'O'],\n                  KeyP: ['p', 'P', 'p', 'P'],\n                  KeyQ: ['q', 'Q', 'q', 'Q'],\n                  KeyR: ['r', 'R', 'r', 'R'],\n                  KeyS: ['s', 'S', 's', 'S'],\n                  KeyT: ['t', 'T', 't', 'T'],\n                  KeyU: ['u', 'U', 'u', 'U'],\n                  KeyV: ['v', 'V', 'v', 'V'],\n                  KeyW: ['w', 'W', 'w', 'W'],\n                  KeyX: ['x', 'X', 'x', 'X'],\n                  KeyY: ['y', 'Y', 'y', 'Y'],\n                  KeyZ: ['z', 'Z', 'z', 'Z'],\n                  Digit1: ['1', '!', '1', '!'],\n                  Digit2: ['2', '@', '2', '@'],\n                  Digit3: ['3', '#', '3', '#'],\n                  Digit4: ['4', '$', '4', '$'],\n                  Digit5: ['5', '%', '5', '%'],\n                  Digit6: ['6', '^', '6', '^'],\n                  Digit7: ['7', '&', '7', '&'],\n                  Digit8: ['8', '*', '8', '*'],\n                  Digit9: ['9', '(', '9', '('],\n                  Digit0: ['0', ')', '0', ')'],\n                  Space: [' ', ' ', ' ', ' '],\n                  Minus: ['-', '_', '-', '_'],\n                  Equal: ['=', '+', '=', '+'],\n                  BracketLeft: ['[', '{', '[', '{'],\n                  BracketRight: [']', '}', ']', '}'],\n                  Backslash: ['\\\\', '|', '\\\\', '|'],\n                  Semicolon: [';', ':', ';', ':'],\n                  Quote: [\"'\", '\"', \"'\", '\"'],\n                  Backquote: ['`', '~', '`', '~'],\n                  Comma: [',', '<', ',', '<'],\n                  Period: ['.', '>', '.', '>'],\n                  Slash: ['/', '?', '/', '?'],\n                  NumpadDivide: ['/', '/', '/', '/'],\n                  NumpadMultiply: ['*', '*', '*', '*'],\n                  NumpadSubtract: ['-', '-', '-', '-'],\n                  NumpadAdd: ['+', '+', '+', '+'],\n                  Numpad1: ['1', '1', '1', '1'],\n                  Numpad2: ['2', '2', '2', '2'],\n                  Numpad3: ['3', '3', '3', '3'],\n                  Numpad4: ['4', '4', '4', '4'],\n                  Numpad5: ['5', '5', '5', '5'],\n                  Numpad6: ['6', '6', '6', '6'],\n                  Numpad7: ['7', '7', '7', '7'],\n                  Numpad8: ['8', '8', '8', '8'],\n                  Numpad9: ['9', '9', '9', '9'],\n                  Numpad0: ['0', '0', '0', '0'],\n                  NumpadDecimal: ['', '.', '', '.'],\n                  IntlBackslash: ['<', '>', '|', '¦'],\n                  NumpadEqual: ['=', '=', '=', '='],\n                  NumpadComma: ['.', '.', '.', '.'],\n                  NumpadParenLeft: ['(', '(', '(', '('],\n                  NumpadParenRight: [')', ')', ')', ')'],\n              },\n          };\n\n/* prettier-ignore */\nconst BASE_LAYOUT_MAPPING = {\n    enter: '[Enter]',\n    escape: '[Escape]',\n    backspace: '[Backspace]',\n    tab: '[Tab]',\n    space: '[Space]',\n    pausebreak: '[Pause]',\n    insert: '[Insert]',\n    home: '[Home]',\n    pageup: '[PageUp]',\n    delete: '[Delete]',\n    end: '[End]',\n    pagedown: '[PageDown]',\n    right: '[ArrowRight]',\n    left: '[ArrowLeft]',\n    down: '[ArrowDown]',\n    up: '[ArrowUp]',\n    numpad0: '[Numpad0]',\n    numpad1: '[Numpad1]',\n    numpad2: '[Numpad2]',\n    numpad3: '[Numpad3]',\n    numpad4: '[Numpad4]',\n    numpad5: '[Numpad5]',\n    numpad6: '[Numpad6]',\n    numpad7: '[Numpad7]',\n    numpad8: '[Numpad8]',\n    numpad9: '[Numpad9]',\n    'numpad_divide': '[NumpadDivide]',\n    'numpad_multiply': '[NumpadMultiply]',\n    'numpad_subtract': '[NumpadSubtract]',\n    'numpad_add': '[NumpadAdd]',\n    'numpad_decimal': '[NumpadDecimal]',\n    'numpad_separator': '[NumpadComma]',\n    capslock: '[Capslock]',\n    f1: '[F1]',\n    f2: '[F2]',\n    f3: '[F3]',\n    f4: '[F4]',\n    f5: '[F5]',\n    f6: '[F6]',\n    f7: '[F7]',\n    f8: '[F8]',\n    f9: '[F9]',\n    f10: '[F10]',\n    f11: '[F11]',\n    f12: '[F12]',\n    f13: '[F13]',\n    f14: '[F14]',\n    f15: '[F15]',\n    f16: '[F16]',\n    f17: '[F17]',\n    f18: '[F18]',\n    f19: '[F19]',\n};\n\nconst gKeyboardLayouts: KeyboardLayout[] = [];\n\nlet gKeyboardLayout: KeyboardLayout;\n\nexport function platform(): 'apple' | 'windows' | 'linux' {\n    let result: 'apple' | 'windows' | 'linux';\n    if (navigator?.platform && navigator?.userAgent) {\n        if (/^(mac)/i.test(navigator.platform)) {\n            result = 'apple';\n        } else if (/^(win)/i.test(navigator.platform)) {\n            result = 'windows';\n        } else if (/(android)/i.test(navigator.userAgent)) {\n            result = 'linux';\n        } else if (\n            /(iphone)/i.test(navigator.userAgent) ||\n            /(ipod)/i.test(navigator.userAgent) ||\n            /(ipad)/i.test(navigator.userAgent)\n        ) {\n            result = 'apple';\n        } else if (/\\bCrOS\\b/i.test(navigator.userAgent)) {\n            result = 'linux';\n        }\n    }\n\n    return result;\n}\n\nexport function register(layout: KeyboardLayout): void {\n    if (layout.platform === platform()) {\n        gKeyboardLayouts.push(layout);\n    }\n}\n\n/** Given the current estimated keyboard layout,\n *  return the unmodified key for the event.\n * For example, on AZERTY option+shift+'A' = 'Æ' -> 'a'\n * (event though the code is KeyQ)\n */\n// export function getUnmodifiedKey(evt: KeyboardEvent): string {\n//     if (!evt.shiftKey && !evt.altKey) {\n//         return evt.key;\n//     }\n//     // @todo: iterate over the entries for the current layout,\n//     // with the alt+shift modifiers set accordingly\n//     // and find the (first) entry that matches\n//     const layout = gKeyboardLayouts[0] ?? DEFAULT_KEYBOARD_LAYOUT;\n//     const index =\n//         evt.shiftKey && evt.altKey ? 3 : evt.altKey ? 2 : evt.shiftKey ? 1 : 0;\n\n//     for (const [key, value] of Object.entries(layout.mapping)) {\n//         if (key === evt.code && value[index] === evt.key) {\n//             return value[0];\n//         }\n//     }\n\n//     // We did not find a perfect match...\n//     // Look for an entry even if the keycode doesn't match...\n//     for (const [, value] of Object.entries(layout.mapping)) {\n//         if (value[index] === evt.key) {\n//             return value[0];\n//         }\n//     }\n\n//     // Really? Nothing matched?! Just return the key...\n//     return evt.key;\n// }\n\nexport function getCodeForKey(k: string): string {\n    const layout = gKeyboardLayouts[0] ?? DEFAULT_KEYBOARD_LAYOUT;\n\n    for (const [key, value] of Object.entries(layout.mapping)) {\n        if (value[0] === k) return '[' + key + ']';\n    }\n\n    return BASE_LAYOUT_MAPPING[k] ?? '';\n}\n\nexport function normalizeKeyboardEvent(evt: KeyboardEvent): KeyboardEvent {\n    if (!evt.code) {\n        // For virtual keyboards (iOS, Android) and Microsoft Edge (!)\n        // the `evt.code`, which represents the physical key pressed, is set\n        // to undefined. In that case, map the virtual key (\"q\") to a\n        // pseudo-hardware key (\"KeyQ\")\n        const mapping = Object.entries(getActiveKeyboardLayout().mapping);\n        let altKey = false;\n        let shiftKey = false;\n        let code: string;\n        for (let index = 0; index < 4; index++) {\n            for (const [key, value] of mapping) {\n                if (value[index] === evt.key) {\n                    code = key;\n                    if (index === 3) {\n                        altKey = true;\n                        shiftKey = true;\n                    } else if (index === 2) {\n                        altKey = true;\n                    } else if (index === 1) {\n                        shiftKey = true;\n                    }\n                    break;\n                }\n            }\n            if (code) break;\n        }\n        return new KeyboardEvent(evt.type, { ...evt, altKey, shiftKey, code });\n    }\n    return new KeyboardEvent(evt.type, evt);\n}\n\n// Given this keyboard event, and the `code`, `key` and modifiers\n// in it, increase the score of layouts that do match it.\n// Calling repeatedly this function will improve the accuracy of the\n// keyboard layout estimate.\nexport function validateKeyboardLayout(evt: KeyboardEvent): void {\n    const index =\n        evt.shiftKey && evt.altKey ? 3 : evt.altKey ? 2 : evt.shiftKey ? 1 : 0;\n\n    if (evt.key === 'Unidentified') return;\n\n    // Dead keys do not have enough info to validate the keyboard\n    // (we dont' know what char they could produce, only the physical key associated with them )\n    if (evt.key === 'Dead') return;\n\n    const layouts = gKeyboardLayouts.filter(\n        (layout) => layout.mapping[evt.code]?.[index] === evt.key\n    );\n    if (layouts.length === 0) return;\n\n    // Increase the score of the layouts that have a mapping compatible with this keyboard event.\n    layouts.forEach((x) => {\n        x.score += 1;\n    });\n    gKeyboardLayouts.sort((a, b) => b.score - a.score);\n}\n\nexport function setKeyboardLayoutLocale(locale: string): void {\n    gKeyboardLayout = gKeyboardLayouts.find((x) => locale.startsWith(x.locale));\n}\n\nexport function setKeyboardLayout(\n    name: KeyboardLayoutId | 'auto'\n): KeyboardLayout {\n    // If name is 'auto', the layout is not found, and set to undefined\n    gKeyboardLayout = gKeyboardLayouts.find((x) => x.id === name);\n    return gKeyboardLayout;\n}\n\nexport function getActiveKeyboardLayout(): KeyboardLayout {\n    return gKeyboardLayout ?? gKeyboardLayouts[0];\n}\n\nexport function getKeyboardLayouts(): KeyboardLayout[] {\n    return gKeyboardLayouts;\n}\n\nregister(DEFAULT_KEYBOARD_LAYOUT);\n\nregister({\n    id: 'apple.french',\n    locale: 'fr',\n    displayName: 'French',\n    platform: 'apple',\n    score: 0,\n    mapping: {\n        KeyA: ['q', 'Q', '‡', 'Ω'],\n        KeyB: ['b', 'B', 'ß', '∫'],\n        KeyC: ['c', 'C', '©', '¢'],\n        KeyD: ['d', 'D', '∂', '∆'],\n        KeyE: ['e', 'E', 'ê', 'Ê'],\n        KeyF: ['f', 'F', 'ƒ', '·'],\n        KeyG: ['g', 'G', 'ﬁ', 'ﬂ'],\n        KeyH: ['h', 'H', 'Ì', 'Î'],\n        KeyI: ['i', 'I', 'î', 'ï'],\n        KeyJ: ['j', 'J', 'Ï', 'Í'],\n        KeyK: ['k', 'K', 'È', 'Ë'],\n        KeyL: ['l', 'L', '¬', '|'],\n        KeyM: [',', '?', '∞', '¿'],\n        KeyN: ['n', 'N', '~', 'ı'],\n        KeyO: ['o', 'O', 'œ', 'Œ'],\n        KeyP: ['p', 'P', 'π', '∏'],\n        KeyQ: ['a', 'A', 'æ', 'Æ'],\n        KeyR: ['r', 'R', '®', '‚'],\n        KeyS: ['s', 'S', 'Ò', '∑'],\n        KeyT: ['t', 'T', '†', '™'],\n        KeyU: ['u', 'U', 'º', 'ª'],\n        KeyV: ['v', 'V', '◊', '√'],\n        KeyW: ['z', 'Z', 'Â', 'Å'],\n        KeyX: ['x', 'X', '≈', '⁄'],\n        KeyY: ['y', 'Y', 'Ú', 'Ÿ'],\n        KeyZ: ['w', 'W', '‹', '›'],\n        Digit1: ['&', '1', '', '´'],\n        Digit2: ['é', '2', 'ë', '„'],\n        Digit3: ['\"', '3', '“', '”'],\n        Digit4: [\"'\", '4', '‘', '’'],\n        Digit5: ['(', '5', '{', '['],\n        Digit6: ['§', '6', '¶', 'å'],\n        Digit7: ['è', '7', '«', '»'],\n        Digit8: ['!', '8', '¡', 'Û'],\n        Digit9: ['ç', '9', 'Ç', 'Á'],\n        Digit0: ['à', '0', 'ø', 'Ø'],\n        Space: [' ', ' ', ' ', ' '],\n        Minus: [')', '°', '}', ']'],\n        Equal: ['-', '_', '—', '–'],\n        BracketLeft: ['^', '¨', 'ô', 'Ô'],\n        BracketRight: ['$', '*', '€', '¥'],\n        Backslash: ['`', '£', '@', '#'],\n        Semicolon: ['m', 'M', 'µ', 'Ó'],\n        Quote: ['ù', '%', 'Ù', '‰'],\n        Backquote: ['<', '>', '≤', '≥'],\n        Comma: [';', '.', '…', '•'],\n        Period: [':', '/', '÷', '\\\\'],\n        Slash: ['=', '+', '≠', '±'],\n        NumpadDivide: ['/', '/', '/', '/'],\n        NumpadMultiply: ['*', '*', '*', '*'],\n        NumpadSubtract: ['-', '-', '-', '-'],\n        NumpadAdd: ['+', '+', '+', '+'],\n        NumpadDecimal: [',', '.', ',', '.'],\n        IntlBackslash: ['@', '#', '•', 'Ÿ'],\n        NumpadEqual: ['=', '=', '=', '='],\n    },\n});\n\nregister({\n    id: 'linux.french',\n    locale: 'fr',\n    displayName: 'French',\n    platform: 'apple',\n    score: 0,\n    mapping: {\n        KeyA: ['q', 'Q', '@', 'Ω'],\n        KeyB: ['b', 'B', '”', '’'],\n        KeyC: ['c', 'C', '¢', '©'],\n        KeyD: ['d', 'D', 'ð', 'Ð'],\n        KeyE: ['e', 'E', '€', '¢'],\n        KeyF: ['f', 'F', 'đ', 'ª'],\n        KeyG: ['g', 'G', 'ŋ', 'Ŋ'],\n        KeyH: ['h', 'H', 'ħ', 'Ħ'],\n        KeyI: ['i', 'I', '→', 'ı'],\n        KeyJ: ['j', 'J', '̉', '̛'],\n        KeyK: ['k', 'K', 'ĸ', '&'],\n        KeyL: ['l', 'L', 'ł', 'Ł'],\n        KeyM: [',', '?', '́', '̋'],\n        KeyN: ['n', 'N', 'n', 'N'],\n        KeyO: ['o', 'O', 'ø', 'Ø'],\n        KeyP: ['p', 'P', 'þ', 'Þ'],\n        KeyQ: ['a', 'A', 'æ', 'Æ'],\n        KeyR: ['r', 'R', '¶', '®'],\n        KeyS: ['s', 'S', 'ß', '§'],\n        KeyT: ['t', 'T', 'ŧ', 'Ŧ'],\n        KeyU: ['u', 'U', '↓', '↑'],\n        KeyV: ['v', 'V', '“', '‘'],\n        KeyW: ['z', 'Z', '«', '<'],\n        KeyX: ['x', 'X', '»', '>'],\n        KeyY: ['y', 'Y', '←', '¥'],\n        KeyZ: ['w', 'W', 'ł', 'Ł'],\n        Digit1: ['&', '1', '¹', '¡'],\n        Digit2: ['é', '2', '~', '⅛'],\n        Digit3: ['\"', '3', '#', '£'],\n        Digit4: [\"'\", '4', '{', '$'],\n        Digit5: ['(', '5', '[', '⅜'],\n        Digit6: ['-', '6', '|', '⅝'],\n        Digit7: ['è', '7', '`', '⅞'],\n        Digit8: ['_', '8', '\\\\', '™'],\n        Digit9: ['ç', '9', '^', '±'],\n        Digit0: ['à', '0', '@', '°'],\n        Enter: ['\\r', '\\r', '\\r', '\\r'],\n        Escape: ['\\u001b', '\\u001b', '\\u001b', '\\u001b'],\n        Backspace: ['\\b', '\\b', '\\b', '\\b'],\n        Tab: ['\\t', '', '\\t', ''],\n        Space: [' ', ' ', ' ', ' '],\n        Minus: [')', '°', ']', '¿'],\n        Equal: ['=', '+', '}', '̨'],\n        BracketLeft: ['̂', '̈', '̈', '̊'],\n        BracketRight: ['$', '£', '¤', '̄'],\n        Backslash: ['*', 'µ', '̀', '̆'],\n        Semicolon: ['m', 'M', 'µ', 'º'],\n        Quote: ['ù', '%', '̂', '̌'],\n        Backquote: ['²', '~', '¬', '¬'],\n        Comma: [';', '.', '─', '×'],\n        Period: [':', '/', '·', '÷'],\n        Slash: ['!', '§', '̣', '̇'],\n        NumpadMultiply: ['*', '*', '*', '*'],\n        NumpadSubtract: ['-', '-', '-', '-'],\n        NumpadAdd: ['+', '+', '+', '+'],\n        NumpadDecimal: ['', '.', '', '.'],\n        IntlBackslash: ['<', '>', '|', '¦'],\n    },\n});\n\nregister({\n    id: 'windows.french',\n    locale: 'fr',\n    displayName: 'French',\n    platform: 'windows',\n    score: 0,\n    mapping: {\n        KeyA: ['q', 'Q', '', ''],\n        KeyB: ['b', 'B', '', ''],\n        KeyC: ['c', 'C', '', ''],\n        KeyD: ['d', 'D', '', ''],\n        KeyE: ['e', 'E', '€', ''],\n        KeyF: ['f', 'F', '', ''],\n        KeyG: ['g', 'G', '', ''],\n        KeyH: ['h', 'H', '', ''],\n        KeyI: ['i', 'I', '', ''],\n        KeyJ: ['j', 'J', '', ''],\n        KeyK: ['k', 'K', '', ''],\n        KeyL: ['l', 'L', '', ''],\n        KeyM: [',', '?', '', ''],\n        KeyN: ['n', 'N', '', ''],\n        KeyO: ['o', 'O', '', ''],\n        KeyP: ['p', 'P', '', ''],\n        KeyQ: ['a', 'A', '', ''],\n        KeyR: ['r', 'R', '', ''],\n        KeyS: ['s', 'S', '', ''],\n        KeyT: ['t', 'T', '', ''],\n        KeyU: ['u', 'U', '', ''],\n        KeyV: ['v', 'V', '', ''],\n        KeyW: ['z', 'Z', '', ''],\n        KeyX: ['x', 'X', '', ''],\n        KeyY: ['y', 'Y', '', ''],\n        KeyZ: ['w', 'W', '', ''],\n        Digit1: ['&', '1', '', ''],\n        Digit2: ['é', '2', '~', ''],\n        Digit3: ['\"', '3', '#', ''],\n        Digit4: [\"'\", '4', '{', ''],\n        Digit5: ['(', '5', '[', ''],\n        Digit6: ['-', '6', '|', ''],\n        Digit7: ['è', '7', '`', ''],\n        Digit8: ['_', '8', '\\\\', ''],\n        Digit9: ['ç', '9', '^', ''],\n        Digit0: ['à', '0', '@', ''],\n        Space: [' ', ' ', '', ''],\n        Minus: [')', '°', ']', ''],\n        Equal: ['=', '+', '}', ''],\n        BracketLeft: ['^', '¨', '', ''],\n        BracketRight: ['$', '£', '¤', ''],\n        Backslash: ['*', 'µ', '', ''],\n        Semicolon: ['m', 'M', '', ''],\n        Quote: ['ù', '%', '', ''],\n        Backquote: ['²', '', '', ''],\n        Comma: [';', '.', '', ''],\n        Period: [':', '/', '', ''],\n        Slash: ['!', '§', '', ''],\n        NumpadDivide: ['/', '/', '', ''],\n        NumpadMultiply: ['*', '*', '', ''],\n        NumpadSubtract: ['-', '-', '', ''],\n        NumpadAdd: ['+', '+', '', ''],\n        IntlBackslash: ['<', '>', '', ''],\n    },\n});\n\nregister({\n    id: 'windows.german',\n    locale: 'de',\n    displayName: 'German',\n    platform: 'windows',\n    score: 0,\n    mapping: {\n        KeyA: ['a', 'A', '', ''],\n        KeyB: ['b', 'B', '', ''],\n        KeyC: ['c', 'C', '', ''],\n        KeyD: ['d', 'D', '', ''],\n        KeyE: ['e', 'E', '€', ''],\n        KeyF: ['f', 'F', '', ''],\n        KeyG: ['g', 'G', '', ''],\n        KeyH: ['h', 'H', '', ''],\n        KeyI: ['i', 'I', '', ''],\n        KeyJ: ['j', 'J', '', ''],\n        KeyK: ['k', 'K', '', ''],\n        KeyL: ['l', 'L', '', ''],\n        KeyM: ['m', 'M', 'µ', ''],\n        KeyN: ['n', 'N', '', ''],\n        KeyO: ['o', 'O', '', ''],\n        KeyP: ['p', 'P', '', ''],\n        KeyQ: ['q', 'Q', '@', ''],\n        KeyR: ['r', 'R', '', ''],\n        KeyS: ['s', 'S', '', ''],\n        KeyT: ['t', 'T', '', ''],\n        KeyU: ['u', 'U', '', ''],\n        KeyV: ['v', 'V', '', ''],\n        KeyW: ['w', 'W', '', ''],\n        KeyX: ['x', 'X', '', ''],\n        KeyY: ['z', 'Z', '', ''],\n        KeyZ: ['y', 'Y', '', ''],\n        Digit1: ['1', '!', '', ''],\n        Digit2: ['2', '\"', '²', ''],\n        Digit3: ['3', '§', '³', ''],\n        Digit4: ['4', '$', '', ''],\n        Digit5: ['5', '%', '', ''],\n        Digit6: ['6', '&', '', ''],\n        Digit7: ['7', '/', '{', ''],\n        Digit8: ['8', '(', '[', ''],\n        Digit9: ['9', ')', ']', ''],\n        Digit0: ['0', '=', '}', ''],\n        Space: [' ', ' ', '', ''],\n        Minus: ['ß', '?', '\\\\', 'ẞ'],\n        Equal: ['´', '`', '', ''],\n        BracketLeft: ['ü', 'Ü', '', ''],\n        BracketRight: ['+', '*', '~', ''],\n        Backslash: ['#', \"'\", '', ''],\n        Semicolon: ['ö', 'Ö', '', ''],\n        Quote: ['ä', 'Ä', '', ''],\n        Backquote: ['^', '°', '', ''],\n        Comma: [',', ';', '', ''],\n        Period: ['.', ':', '', ''],\n        Slash: ['-', '_', '', ''],\n        NumpadDivide: ['/', '/', '', ''],\n        NumpadMultiply: ['*', '*', '', ''],\n        NumpadSubtract: ['-', '-', '', ''],\n        NumpadAdd: ['+', '+', '', ''],\n        IntlBackslash: ['<', '>', '|', ''],\n    },\n});\n\nregister({\n    id: 'apple.german',\n    locale: 'de',\n    displayName: 'German',\n    platform: 'apple',\n    score: 0,\n    mapping: {\n        KeyA: ['a', 'A', 'å', 'Å'],\n        KeyB: ['b', 'B', '∫', '‹'],\n        KeyC: ['c', 'C', 'ç', 'Ç'],\n        KeyD: ['d', 'D', '∂', '™'],\n        KeyE: ['e', 'E', '€', '‰'],\n        KeyF: ['f', 'F', 'ƒ', 'Ï'],\n        KeyG: ['g', 'G', '©', 'Ì'],\n        KeyH: ['h', 'H', 'ª', 'Ó'],\n        KeyI: ['i', 'I', '⁄', 'Û'],\n        KeyJ: ['j', 'J', 'º', 'ı'],\n        KeyK: ['k', 'K', '∆', 'ˆ'],\n        KeyL: ['l', 'L', '@', 'ﬂ'],\n        KeyM: ['m', 'M', 'µ', '˘'],\n        KeyN: ['n', 'N', '~', '›'],\n        KeyO: ['o', 'O', 'ø', 'Ø'],\n        KeyP: ['p', 'P', 'π', '∏'],\n        KeyQ: ['q', 'Q', '«', '»'],\n        KeyR: ['r', 'R', '®', '¸'],\n        KeyS: ['s', 'S', '‚', 'Í'],\n        KeyT: ['t', 'T', '†', '˝'],\n        KeyU: ['u', 'U', '¨', 'Á'],\n        KeyV: ['v', 'V', '√', '◊'],\n        KeyW: ['w', 'W', '∑', '„'],\n        KeyX: ['x', 'X', '≈', 'Ù'],\n        KeyY: ['z', 'Z', 'Ω', 'ˇ'],\n        KeyZ: ['y', 'Y', '¥', '‡'],\n        Digit1: ['1', '!', '¡', '¬'],\n        Digit2: ['2', '\"', '“', '”'],\n        Digit3: ['3', '§', '¶', '#'],\n        Digit4: ['4', '$', '¢', '£'],\n        Digit5: ['5', '%', '[', 'ﬁ'],\n        Digit6: ['6', '&', ']', '^'],\n        Digit7: ['7', '/', '|', '\\\\'],\n        Digit8: ['8', '(', '{', '˜'],\n        Digit9: ['9', ')', '}', '·'],\n        Digit0: ['0', '=', '≠', '¯'],\n        Space: [' ', ' ', ' ', ' '],\n        Minus: ['ß', '?', '¿', '˙'],\n        Equal: ['´', '`', \"'\", '˚'],\n        BracketLeft: ['ü', 'Ü', '•', '°'],\n        BracketRight: ['+', '*', '±', ''],\n        Backslash: ['#', \"'\", '‘', '’'],\n        Semicolon: ['ö', 'Ö', 'œ', 'Œ'],\n        Quote: ['ä', 'Ä', 'æ', 'Æ'],\n        Backquote: ['<', '>', '≤', '≥'],\n        Comma: [',', ';', '∞', '˛'],\n        Period: ['.', ':', '…', '÷'],\n        Slash: ['-', '_', '–', '—'],\n        NumpadDivide: ['/', '/', '/', '/'],\n        NumpadMultiply: ['*', '*', '*', '*'],\n        NumpadSubtract: ['-', '-', '-', '-'],\n        NumpadAdd: ['+', '+', '+', '+'],\n        NumpadDecimal: [',', ',', '.', '.'],\n        IntlBackslash: ['^', '°', '„', '“'],\n        NumpadEqual: ['=', '=', '=', '='],\n    },\n});\n","import type { Keybinding } from '../public/config';\n\nexport const DEFAULT_KEYBINDINGS: Keybinding[] = [\n    { key: 'ctrl+alt+e', command: ['insert', '\\\\text{cmd+alt+e}'] },\n    { key: 'cmd+alt+a', command: ['insert', '\\\\text{cmd+alt+a}'] },\n    { key: 'ctrl+alt+a', command: ['insert', '\\\\text{ctrl+alt+a}'] },\n    { key: 'meta+alt+2', command: ['insert', '\\\\text{meta+alt+2}'] },\n    {\n        key: 'ctrl+alt+shift+a',\n        command: ['insert', '\\\\text{ctrl+alt+shift+a}'],\n    },\n    // { key: 'meta+alt+@', command: ['insert', '\\\\text{cmd+alt+@}'] },\n\n    { key: 'left', command: 'moveToPreviousChar' },\n    { key: 'right', command: 'moveToNextChar' },\n    { key: 'up', command: 'moveUp' },\n    { key: 'down', command: 'moveDown' },\n\n    { key: 'shift+[ArrowLeft]', command: 'extendToPreviousChar' },\n    { key: 'shift+[ArrowRight]', command: 'extendToNextChar' },\n    { key: 'shift+[ArrowUp]', command: 'extendUp' },\n    { key: 'shift+[ArrowDown]', command: 'extendDown' },\n\n    { key: '[Backspace]', command: 'deletePreviousChar' },\n    { key: 'alt+[Delete]', command: 'deletePreviousChar' },\n\n    { key: '[Delete]', command: 'deleteNextChar' },\n    { key: 'alt+[Backspace]', command: 'deleteNextChar' },\n\n    { key: 'alt+[ArrowLeft]', command: 'moveToPreviousWord' },\n    { key: 'alt+[ArrowRight]', command: 'moveToNextWord' },\n\n    { key: 'alt+shift+[ArrowLeft]', command: 'extendToPreviousWord' },\n    { key: 'alt+shift+[ArrowRight]', command: 'extendToNextWord' },\n\n    { key: 'ctrl+[ArrowLeft]', command: 'moveToGroupStart' },\n    { key: 'ctrl+[ArrowRight]', command: 'moveToGroupEnd' },\n\n    { key: 'ctrl+shift+[ArrowLeft]', command: 'extendToGroupStart' },\n    { key: 'ctrl+shift+[ArrowRight]', command: 'extendToGroupEnd' },\n\n    { key: '[Space]', ifMode: 'math', command: 'moveAfterParent' },\n    { key: 'shift+[Space]', ifMode: 'math', command: 'moveBeforeParent' },\n\n    { key: '[Home]', command: 'moveToMathFieldStart' },\n    { key: 'cmd+[ArrowLeft]', command: 'moveToMathFieldStart' },\n    { key: 'shift+[Home]', command: 'extendToMathFieldStart' },\n    { key: 'cmd+shift+[ArrowLeft]', command: 'extendToMathFieldStart' },\n\n    { key: '[End]', command: 'moveToMathFieldEnd' },\n    { key: 'cmd+[ArrowRight]', command: 'moveToMathFieldEnd' },\n    { key: 'shift+[End]', command: 'extendToMathFieldEnd' },\n    { key: 'cmd+shift+[ArrowRight]', command: 'extendToMathFieldEnd' },\n\n    { key: '[Pageup]', command: 'moveToGroupStart' },\n    { key: '[Pagedown]', command: 'moveToGroupEnd' },\n\n    { key: '[Tab]', ifMode: 'math', command: 'moveToNextPlaceholder' },\n    {\n        key: 'shift+[Tab]',\n        ifMode: 'math',\n        command: 'moveToPreviousPlaceholder',\n    },\n\n    { key: '[Tab]', ifMode: 'text', command: 'moveToNextPlaceholder' },\n    {\n        key: 'shift+[Tab]',\n        ifMode: 'text',\n        command: 'moveToPreviousPlaceholder',\n    },\n\n    { key: '[Escape]', ifMode: 'math', command: ['switch-mode', 'command'] },\n    { key: '\\\\', ifMode: 'math', command: ['switch-mode', 'command'] },\n\n    {\n        key: 'alt+[Equal]',\n        ifMode: 'math',\n        command: ['applyStyle', { mode: 'text' }],\n    },\n    {\n        key: 'alt+[Equal]',\n        ifMode: 'text',\n        command: ['applyStyle', { mode: 'math' }],\n    },\n\n    {\n        key: '[Escape]',\n        ifMode: 'command',\n        command: ['complete', { discard: true }],\n    }, // discard the command} insert nothing\n    {\n        key: '[Tab]',\n        ifMode: 'command',\n        command: ['complete', { acceptSuggestion: true }],\n    }, // complete the suggestion\n    { key: '[Return]', ifMode: 'command', command: 'complete' },\n    { key: '[Enter]', ifMode: 'command', command: 'complete' },\n    {\n        key: 'shift+[Escape]',\n        ifMode: 'command',\n        command: ['complete', { discard: true }],\n    }, // Some keyboards can't generate\n    // this combination, for example in 60% keyboards it is mapped to ~\n    { key: '[ArrowDown]', ifMode: 'command', command: 'nextSuggestion' },\n    // { key: 'ios:command:[Tab]', ifMode: 'command',command: 'nextSuggestion' },\n    { key: '[ArrowUp]', ifMode: 'command', command: 'previousSuggestion' },\n\n    { key: 'ctrl+a', ifPlatform: '!macos', command: 'selectAll' },\n    { key: 'cmd+a', command: 'selectAll' },\n\n    // Rare keys on some extended keyboards\n    { key: '[Cut]', command: 'cutToClipboard' },\n    { key: '[Copy]', command: 'copyToClipboard' },\n    { key: '[Paste]', command: 'pasteFromClipboard' },\n    { key: '[Clear]', command: 'deletePreviousChar' },\n\n    { key: 'ctrl+z', ifPlatform: '!macos', command: 'undo' },\n    { key: 'cmd+z', command: 'undo' },\n    { key: '[Undo]', command: 'undo' },\n    { key: 'ctrl+y', ifPlatform: '!macos', command: 'redo' }, // ARIA recommendation\n    { key: 'cmd+shift+y', command: 'redo' },\n    { key: 'ctrl+shift+z', ifPlatform: '!macos', command: 'redo' },\n    { key: 'cmd+shift+z', command: 'redo' },\n    { key: '[Redo]', command: 'redo' },\n\n    { key: '[EraseEof]', command: 'deleteToGroupEnd' },\n\n    // EMACS/MACOS BINDINGS\n    { key: 'ctrl+b', ifPlatform: 'macos', command: 'moveToPreviousChar' },\n    { key: 'ctrl+f', ifPlatform: 'macos', command: 'moveToNextChar' },\n    { key: 'ctrl+p', ifPlatform: 'macos', command: 'moveUp' },\n    { key: 'ctrl+n', ifPlatform: 'macos', command: 'moveDown' },\n    { key: 'ctrl+a', ifPlatform: 'macos', command: 'moveToMathFieldStart' },\n    { key: 'ctrl+e', ifPlatform: 'macos', command: 'moveToMathFieldEnd' },\n    {\n        key: 'ctrl+shift+b',\n        ifPlatform: 'macos',\n        command: 'extendToPreviousChar',\n    },\n    { key: 'ctrl+shift+f', ifPlatform: 'macos', command: 'extendToNextChar' },\n    { key: 'ctrl+shift+p', ifPlatform: 'macos', command: 'extendUp' },\n    { key: 'ctrl+shift+n', ifPlatform: 'macos', command: 'extendDown' },\n    {\n        key: 'ctrl+shift+a',\n        ifPlatform: 'macos',\n        command: 'extendToMathFieldStart',\n    },\n    {\n        key: 'ctrl+shift+e',\n        ifPlatform: 'macos',\n        command: 'extendToMathFieldEnd',\n    },\n    { key: 'ctrl+alt+b', ifPlatform: 'macos', command: 'moveToPreviousWord' },\n    { key: 'ctrl+alt+f', ifPlatform: 'macos', command: 'moveToNextWord' },\n    {\n        key: 'ctrl+shift+alt+b',\n        ifPlatform: 'macos',\n        command: 'extendToPreviousWord',\n    },\n    {\n        key: 'ctrl+shift+alt+f',\n        ifPlatform: 'macos',\n        command: 'extendToNextWord',\n    },\n\n    { key: 'ctrl+h', ifPlatform: 'macos', command: 'deletePreviousChar' },\n    { key: 'ctrl+d', ifPlatform: 'macos', command: 'deleteNextChar' },\n    { key: 'ctrl+l', ifPlatform: 'macos', command: 'scrollIntoView' },\n    // { key: 'ctrl+t', ifPlatform: 'macos', command: 'transpose' },\n\n    {\n        key: 'shift+[Quote]',\n        ifMode: 'math',\n        command: ['switchMode', 'text', '', '“'],\n    }, // ??\n    {\n        key: 'shift+[Quote]',\n        ifMode: 'text',\n        command: ['switch-mode', 'math', '”', ''],\n    }, // ??\n\n    // WOLFRAM MATHEMATICA BINDINGS\n    {\n        key: 'ctrl+[Digit2]',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\sqrt{#0}$$'],\n    },\n    { key: 'ctrl+[Digit5]', ifMode: 'math', command: 'moveToOpposite' },\n    { key: 'ctrl+[Digit6]', ifMode: 'math', command: 'moveToSuperscript' },\n    { key: 'ctrl+[Minus]', ifMode: 'math', command: 'moveToSubscript' }, // ??\n    {\n        key: 'alt+[BracketLeft]',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\left\\\\lbrack #0 \\\\right\\\\rbrack$$'],\n    }, // ??\n    {\n        key: 'alt+shift+[BracketLeft]',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\left\\\\lbrace #0 \\\\right\\\\rbrace$$'],\n    }, // ??\n\n    { key: '[Return]', ifMode: 'math', command: 'addRowAfter' },\n    { key: '[Enter]', ifMode: 'math', command: 'addRowAfter' },\n    { key: 'ctrl+[Comma]', ifMode: 'math', command: 'addColumnAfter' },\n    { key: '[Return]', ifMode: 'text', command: 'addRowAfter' },\n    { key: '[Enter]', ifMode: 'text', command: 'addRowAfter' },\n    { key: 'ctrl+[Comma]', ifMode: 'text', command: 'addColumnAfter' },\n\n    // Excel keybindings:\n    // shift+space: select entire row, ctrl+space: select an entire column\n    // ctrl+shift++ or ctrl+numpad+\n    // ctrl+- to delete a row or columns\n\n    // MATHLIVE BINDINGS\n    // { key: 'alt+a', command: ['insert', '$$\\\\theta$$'] },\n    { key: 'alt+p', ifMode: 'math', command: ['insert', '$$\\\\pi$$'] },\n    { key: 'alt+v', ifMode: 'math', command: ['insert', '$$\\\\sqrt{#0}$$'] },\n    {\n        key: 'alt+w',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\sum_{i=#?}^{#?}$$'],\n    },\n    // { key: 'alt+b', command: ['insert', '$$\\\\int_{#?}^{#?}$$'] },\n    { key: 'alt+u', ifMode: 'math', command: ['insert', '$$\\\\cup$$'] },\n    { key: 'alt+n', ifMode: 'math', command: ['insert', '$$\\\\cap$$'] },\n    { key: 'alt+o', ifMode: 'math', command: ['insert', '$$\\\\emptyset$$'] },\n    {\n        key: 'alt+d',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\differentialD$$'],\n    },\n    {\n        key: 'alt+shift+o',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\varnothing$$'],\n    },\n    {\n        key: 'alt+shift+d',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\partial$$'],\n    },\n    {\n        key: 'alt+shift+p',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\prod_{i=#?}^{#?}$$'],\n    },\n    { key: 'alt+shift+u', ifMode: 'math', command: ['insert', '$$\\\\bigcup$$'] },\n    { key: 'alt+shift+n', ifMode: 'math', command: ['insert', '$$\\\\bigcap$$'] },\n    { key: 'alt+shift+a', ifMode: 'math', command: ['insert', '$$\\\\forall$$'] },\n    { key: 'alt+shift+e', ifMode: 'math', command: ['insert', '$$\\\\exists$$'] },\n    { key: 'alt+[Digit5]', ifMode: 'math', command: ['insert', '$\\\\infty$$'] }, // \"%\" key\n    { key: 'alt+[Digit6]', ifMode: 'math', command: ['insert', '$$\\\\wedge$$'] }, // \"^\" key\n    {\n        key: 'alt+shift+[Digit6]',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\vee$$'],\n    }, // \"^\" key\n    { key: 'alt+[Digit9]', ifMode: 'math', command: ['insert', '('] }, // \"(\" key} override smartFence\n    { key: 'alt+[Digit0]', ifMode: 'math', command: ['insert', ')'] }, // \")\" key} override smartFence\n    { key: 'alt+shift+[Backslash]', ifMode: 'math', command: ['insert', '|'] }, // \"|\" key} override smartFence\n    {\n        key: 'alt+[Backslash]',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\backslash$$'],\n    }, // \"|\" key} override command mode\n    {\n        key: '[Slash]',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\frac{#@}{#?}$$'],\n    },\n    {\n        key: 'alt+[Slash]',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\frac{#?}{#@}$$'],\n    },\n    {\n        key: '[NumpadDivide]',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\frac{#@}{#?}$$'],\n    }, // ??\n    {\n        key: 'alt+[NumpadDivide]',\n        ifMode: 'math',\n        command: ['insert', '\\\\frac{#?}{#@}'],\n    }, // ??\n    {\n        key: 'shift+[Backquote]',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\~$$'],\n    }, // ??\n    {\n        key: 'alt+shift+[Slash]',\n        ifMode: 'math',\n        command: ['insert', '$$\\\\/$$'],\n    }, // ??\n\n    // Accessibility\n    { key: 'alt+shift+k', command: 'toggleKeystrokeCaption' },\n    { key: 'alt+[Space]', command: 'toggleVirtualKeyboard' },\n\n    // Note: On Mac OS (as of 10.12), there is a bug/behavior that causes\n    // a beep to be generated with certain command+control key combinations.\n    // The workaround is to create a default binding file to silence them.\n    // In ~/Library/KeyBindings/DefaultKeyBinding.dict add these entries:\n    /*\n {\n    \"^@\\UF701\" = \"noop:\";\n    \"^@\\UF702\" = \"noop:\";\n    \"^@\\UF703\" = \"noop:\";\n}\n*/\n    {\n        key: 'ctrl+alt+[ArrowUp]',\n        command: ['speak', 'parent', { withHighlighting: false }],\n    },\n    {\n        key: 'ctrl+alt+[ArrowDown]',\n        command: ['speak', 'all', { withHighlighting: false }],\n    },\n];\n\n/**\n * Most commands can be associated to their keyboard shortcuts from the\n * DEFAULT_KEYBINDINGS table above, for example 'speakSelection' -> 'ctrl+KeyR'\n * However, those that contain complex commands are more ambiguous.\n * For example, '\\sqrt' -> 'math:alt+KeyV'. This table provides the reverse\n * mapping for those more complex commands. It is used when displaying\n * keybindings for specific commands in the popover.\n */\nexport const REVERSE_KEYBINDINGS = {\n    '\\\\theta': 'alt+q',\n    '\\\\sqrt': ['alt+v', 'ctrl+[Digit2]'],\n    '\\\\pi': 'alt+p',\n    '\\\\prod': 'alt+shift+p',\n    '\\\\sum': 'alt+w',\n    '\\\\int': 'alt+b',\n    '\\\\cup': 'alt+u',\n    '\\\\cap': 'alt+n',\n    '\\\\bigcup': 'alt+shift+u',\n    '\\\\bigcap': 'alt+shift+n',\n    '\\\\forall': 'alt+shift+a',\n    '\\\\exists': 'alt+shift+e',\n    '\\\\infty': 'alt+[Digit5]',\n    '\\\\wedge': 'alt+[Digit5]',\n    '\\\\vee': 'alt+shift+[Digit6]',\n    '\\\\differentialD': 'alt+d',\n    '\\\\partial': 'alt+shift+d',\n    '\\\\frac': 'Slash',\n    '\\\\emptyset': 'alt+o',\n    '\\\\varnothing': 'alt+shift+o',\n    '\\\\~': '~',\n};\n","import { isArray } from '../common/types';\n\nimport type { ParseMode } from '../public/core';\nimport type { Selector } from '../public/commands';\nimport type { Keybinding } from '../public/config';\n\nimport { getCodeForKey } from './keyboard-layout';\nimport { REVERSE_KEYBINDINGS } from './keybindings-definitions';\n\ntype KeybindingPlatform =\n    | 'macos'\n    | 'windows'\n    | 'android'\n    | 'ios'\n    | 'chromeos'\n    | 'other';\n\n/**\n * @param p The platform to test against.\n */\nfunction matchPlatform(p: string): boolean {\n    if (navigator?.platform && navigator?.userAgent) {\n        let plat: KeybindingPlatform;\n        if (/^(mac)/i.test(navigator.platform)) {\n            plat = 'macos';\n        } else if (/^(win)/i.test(navigator.platform)) {\n            plat = 'windows';\n        } else if (/(android)/i.test(navigator.userAgent)) {\n            plat = 'android';\n        } else if (\n            /(iphone)/i.test(navigator.userAgent) ||\n            /(ipod)/i.test(navigator.userAgent) ||\n            /(ipad)/i.test(navigator.userAgent)\n        ) {\n            plat = 'ios';\n        } else if (/\\bCrOS\\b/i.test(navigator.userAgent)) {\n            plat = 'chromeos';\n        }\n        if (p.startsWith('!') && !p.endsWith(plat)) return true;\n        if (p.endsWith(plat)) return true;\n    }\n\n    return false;\n}\n\n/**\n * Return the selector matching the keystroke.\n * The keybindings and keystroke should be in normalized form\n * (i.e. using key code, e.g. `[KeyQ]`\n *\n */\nexport function getCommandForKeybinding(\n    keybindings: Keybinding[],\n    mode: ParseMode,\n    keystroke: string\n): Selector | any[] | '' {\n    if (keybindings.length === 0) return '';\n    for (let i = keybindings.length - 1; i--; i >= 0) {\n        if (keybindings[i].key === keystroke) {\n            if (!keybindings[i].ifMode || keybindings[i].ifMode === mode) {\n                return keybindings[i].command;\n            }\n        }\n    }\n\n    return '';\n}\n\nfunction commandToString(command: string | Selector | string[]): string {\n    let result: string | string[] = command;\n\n    if (isArray(result)) {\n        if (result.length > 0) {\n            result = result[0] + '(' + result.slice(1).join('') + ')';\n        } else {\n            result = '';\n        }\n    }\n\n    return result;\n}\n\nexport function getKeybindingsForCommand(\n    keybindings: Keybinding[],\n    command: string\n): string[] {\n    let result = [];\n\n    if (typeof command === 'string') {\n        const candidate = REVERSE_KEYBINDINGS[command];\n        if (isArray(candidate)) {\n            result = candidate.slice();\n        } else if (candidate) {\n            result.push(candidate);\n        }\n    }\n\n    // A command can be either a simple selector, or a selector\n    // with arguments. Normalize it to a string\n    const normalizedCommand = commandToString(command);\n\n    const regex = new RegExp(\n        '^' +\n            normalizedCommand\n                .replace('\\\\', '\\\\\\\\')\n                .replace('|', '\\\\|')\n                .replace('*', '\\\\*')\n                .replace('$', '\\\\$')\n                .replace('^', '\\\\^') +\n            '([^*a-zA-Z]|$)'\n    );\n    keybindings.forEach((keybinding) => {\n        if (regex.test(commandToString(keybinding.command))) {\n            result.push(keybinding);\n        }\n    });\n\n    return result.map(getKeybindingMarkup);\n}\n\n/**\n * Return a human readable representation of a shortcut as a markup string\n * @revisit\n */\nexport function getKeybindingMarkup(keystroke: string): string {\n    const useSymbol = matchPlatform('macos') || matchPlatform('ios');\n    const segments = keystroke.split('+');\n    let result = '';\n    for (const segment of segments) {\n        if (!useSymbol && result) {\n            result += '<span class=\"ML__shortcut-join\">+</span>';\n        }\n        if (segment.startsWith('Key')) {\n            result += segment.substr(3, 1);\n        } else if (segment.startsWith('Digit')) {\n            result += segment.substr(5, 1);\n        } else {\n            result +=\n                {\n                    cmd: '\\u2318',\n                    meta: useSymbol ? '\\u2318' : 'command',\n                    shift: useSymbol ? '\\u21e7' : 'shift',\n                    alt: useSymbol ? '\\u2325' : 'alt',\n                    ctrl: useSymbol ? '\\u2303' : 'control',\n                    '\\n': useSymbol ? '\\u23ce' : 'return',\n                    '[return]': useSymbol ? '\\u23ce' : 'return',\n                    '[enter]': useSymbol ? '\\u2324' : 'enter',\n                    '[tab]': useSymbol ? '\\u21e5' : 'tab',\n                    // 'Esc':          useSymbol ? '\\u238b' : 'esc',\n                    '[escape]': 'esc',\n\n                    '[backspace]': useSymbol ? '\\u232b' : 'backspace',\n                    '[delete]': useSymbol ? '\\u2326' : 'del',\n                    '[pageup]': useSymbol ? '\\u21de' : 'page up',\n                    '[pagedown]': useSymbol ? '\\u21df' : 'page down',\n                    '[home]': useSymbol ? '\\u2912' : 'home',\n                    '[end]': useSymbol ? '\\u2913' : 'end',\n                    '[space]': 'space',\n                    '[equal]': '=',\n                    '[minus]': '-',\n                    '[comma]': ',',\n                    '[backslash]': '\\\\',\n                    '[bracketleft]': '[',\n                    '[bracketright]': ']',\n                    semicolon: ';',\n                    period: '.',\n                    comma: ',',\n                    minus: '-',\n                    equal: '=',\n                    quote: \"'\",\n                    bracketLeft: '[',\n                    bracketRight: ']',\n                    backslash: '\\\\',\n                    intlbackslash: '\\\\',\n                    backquote: '`',\n                    slash: '/',\n                    numpadmultiply: '* &#128290;',\n                    numpaddivide: '/ &#128290;', // Numeric keypad\n                    numpadsubtract: '- &#128290;',\n                    numpadadd: '+ &#128290;',\n                    numpaddecimal: '. &#128290;',\n                    numpadcomma: ', &#128290;',\n                    help: 'help',\n                    left: '\\u21E0',\n                    up: '\\u21E1',\n                    right: '\\u21E2',\n                    down: '\\u21E3',\n                    '[arrowleft]': '\\u21E0',\n                    '[arrowup]': '\\u21E1',\n                    '[arrowright]': '\\u21E2',\n                    '[arrowdown]': '\\u21E3',\n                    '[digit0]': '0',\n                    '[digit1]': '1',\n                    '[digit2]': '2',\n                    '[digit3]': '3',\n                    '[digit4]': '4',\n                    '[digit5]': '5',\n                    '[digit6]': '6',\n                    '[digit7]': '7',\n                    '[digit8]': '8',\n                    '[digit9]': '9',\n                }[segment.toLowerCase()] || segment.toUpperCase();\n        }\n    }\n    return result;\n}\n\nfunction normalizeKeybinding(keybinding: Keybinding): Keybinding {\n    if (\n        keybinding.ifPlatform &&\n        !/^!?(macos|windows|android|ios|chromeos|other)$/.test(\n            keybinding.ifPlatform\n        )\n    ) {\n        throw new Error(\n            `Unexpected platform \"${keybinding.ifPlatform}\" for keybinding ${keybinding.key}`\n        );\n    }\n    let segments = keybinding.key.split('+');\n    const key = segments.pop();\n    let platform = keybinding.ifPlatform;\n\n    segments = segments.map((segment) => {\n        const x = segment.toLowerCase();\n        if (x === 'cmd') {\n            if (platform && platform !== 'macos' && platform !== 'ios') {\n                throw new Error(\n                    'Unexpected \"cmd\" modifier with platform \"' + platform + '\"'\n                );\n            }\n            if (!platform) {\n                platform = matchPlatform('ios') ? 'ios' : 'macos';\n            }\n\n            return 'meta';\n        } else if (x === 'win') {\n            if (platform && platform !== 'windows') {\n                throw new Error(\n                    'Unexpected \"win\" modifier with platform \"' + platform + '\"'\n                );\n            }\n            platform = 'windows';\n            return 'meta';\n        }\n        return x;\n    });\n\n    if (platform && !matchPlatform(platform)) return undefined;\n\n    if (!/^\\[(.*)\\]$/.test(key)) {\n        // This is not a key code (e.g. `[KeyQ]`) it's a simple key (e.g. `a`)\n        // Convert it to a key code\n        const code = getCodeForKey(key);\n        if (!code) {\n            throw new Error('Invalid keybinding key \"' + keybinding.key + '\"');\n        }\n        segments.push(code);\n    } else {\n        segments.push(key);\n    }\n\n    return { ...keybinding, ifPlatform: platform, key: segments.join('+') };\n}\n\n/**\n * Parse the input keybindings and return them normalized:\n * - 'keys' are transformed to 'code' according to the current keyboard layout\n * - keybindings that don't apply to the current platform are removed\n */\nexport function normalizeKeybindings(\n    keybindings: Keybinding[],\n    onError: (e: any) => void\n): Keybinding[] {\n    const result = [];\n    const errors = [];\n    keybindings.forEach((x) => {\n        try {\n            const keybinding = normalizeKeybinding(x);\n            if (keybinding) {\n                result.push(keybinding);\n            }\n        } catch (e) {\n            errors.push(e.message);\n        }\n    });\n    if (errors.length > 0) {\n        onError(errors);\n    }\n    return result;\n}\n","import { MathfieldPrivate } from './mathfield-class';\n\nexport function on(\n    el: EventTarget,\n    inSelectors: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: AddEventListenerOptions\n): void {\n    const selectors = inSelectors.split(' ');\n    for (const sel of selectors) {\n        const m = sel.match(/(.*):(.*)/);\n        if (m) {\n            const options2 = options ?? {};\n            if (m[2] === 'active') {\n                options2.passive = false;\n            } else {\n                options2[m[2]] = true;\n            }\n            el.addEventListener(m[1], listener, options2);\n        } else {\n            el.addEventListener(sel, listener, options);\n        }\n    }\n}\n\nexport function off(\n    el: EventTarget,\n    inSelectors: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: AddEventListenerOptions\n): void {\n    const selectors = inSelectors.split(' ');\n    for (const sel of selectors) {\n        const m = sel.match(/(.*):(.*)/);\n        if (m) {\n            const options2 = options ?? {};\n            if (m[2] === 'active') {\n                options2.passive = false;\n            } else {\n                options2[m[2]] = true;\n            }\n            el.removeEventListener(m[1], listener, options2);\n        } else {\n            el.removeEventListener(sel, listener, options);\n        }\n    }\n}\n\nexport function getSharedElement(id: string, cls: string): HTMLElement {\n    let result = document.getElementById(id);\n    if (result) {\n        result.setAttribute(\n            'data-refcount',\n            Number(\n                parseInt(result.getAttribute('data-refcount')) + 1\n            ).toString()\n        );\n    } else {\n        result = document.createElement('div');\n        result.setAttribute('aria-hidden', 'true');\n        result.setAttribute('data-refcount', '1');\n        result.className = cls;\n        result.id = id;\n        document.body.appendChild(result);\n    }\n    return result;\n}\n\n// @revisit: check the elements are correctly released\nexport function releaseSharedElement(el: HTMLElement): void {\n    if (!el) return;\n    const refcount = parseInt(el.getAttribute('data-refcount'));\n    if (refcount <= 1) {\n        el.remove();\n    } else {\n        el.setAttribute('data-refcount', Number(refcount - 1).toString());\n    }\n}\n\n/**\n * Checks if the argument is a valid Mathfield.\n * After a Mathfield has been destroyed (for example by calling revertToOriginalContent()\n * the Mathfield is no longer valid. However, there may be some pending\n * operations invoked via requestAnimationFrame() for example, that would\n * need to ensure the mathfield is still valid by the time they're executed.\n */\nexport function isValidMathfield(mf: MathfieldPrivate): boolean {\n    return mf.element && mf.element['mathfield'] === mf;\n}\n\n/**\n * Return the element which has the caret\n */\nfunction findElementWithCaret(el: Element): Element {\n    if (\n        el.classList.contains('ML__caret') ||\n        el.classList.contains('ML__text-caret') ||\n        el.classList.contains('ML__command-caret')\n    ) {\n        return el;\n    }\n    let result;\n    for (const child of el.children) {\n        result = findElementWithCaret(child);\n        if (result) break;\n    }\n    return result;\n}\n\n/**\n * Return the (x,y) client coordinates of the caret\n */\nexport function getCaretPosition(\n    el: Element\n): { x: number; y: number; height: number } {\n    const caret = findElementWithCaret(el);\n    if (caret) {\n        const bounds = caret.getBoundingClientRect();\n        const position = {\n            x: bounds.right,\n            y: bounds.bottom,\n            height: bounds.height,\n        };\n        return position;\n    }\n    return null;\n}\nexport function getSelectionBounds(\n    field: Element\n): { top: number; bottom: number; left: number; right: number } {\n    const selectedNodes = field.querySelectorAll('.ML__selected');\n    if (selectedNodes && selectedNodes.length > 0) {\n        const selectionRect = {\n            top: Infinity,\n            bottom: -Infinity,\n            left: Infinity,\n            right: -Infinity,\n        };\n        // Calculate the union of the bounds of all the selected spans\n        selectedNodes.forEach((node) => {\n            const bounds = node.getBoundingClientRect();\n            if (bounds.left < selectionRect.left) {\n                selectionRect.left = bounds.left;\n            }\n            if (bounds.right > selectionRect.right) {\n                selectionRect.right = bounds.right;\n            }\n            if (bounds.bottom > selectionRect.bottom) {\n                selectionRect.bottom = bounds.bottom;\n            }\n            if (bounds.top < selectionRect.top) {\n                selectionRect.top = bounds.top;\n            }\n        });\n        const fieldRect = field.getBoundingClientRect();\n        const w = selectionRect.right - selectionRect.left;\n        const h = selectionRect.bottom - selectionRect.top;\n        selectionRect.left = Math.ceil(\n            selectionRect.left - fieldRect.left + field.scrollLeft\n        );\n        selectionRect.right = selectionRect.left + w;\n        selectionRect.top = Math.ceil(selectionRect.top - fieldRect.top);\n        selectionRect.bottom = selectionRect.top + h;\n        return selectionRect;\n    }\n    return null;\n}\n","import { on } from './mathfield-utils';\nimport type { MathfieldPrivate } from './mathfield-class';\n\n/**\n * Attach event handlers to an element so that it will react by executing\n * a command when pressed.\n * `\"command\"` can be:\n * - a string, a single selector\n * - an array, whose first element is a selector followed by one or more arguments.\n * - an object, with the following keys:\n *    * 'default': command performed on up, with a down + up sequence with no\n *      delay between down and up\n *    * 'alt', 'shift', 'altshift' keys: command performed on up with\n *      one of these modifiers pressed\n *    * 'pressed': command performed on 'down'\n *    * 'pressAndHoldStart': command performed after a tap/down followed by a\n * delay (optional)\n *    * 'pressAndHoldEnd': command performed on up, if there was a delay\n *     between down and up, if absent, 'default' is performed\n * The value of the keys specify which selector (string\n * or array) to perform depending on the keyboard state when the button is\n * pressed.\n *\n * The 'pressed' and 'active' classes will get added to\n * the element, as the :hover and :active pseudo-classes are not reliable\n * (at least on Chrome Android).\n *\n */\nexport function attachButtonHandlers(\n    mathfield: MathfieldPrivate,\n    el: Element,\n    command:\n        | string\n        | {\n              default: string | any[];\n              pressed?: string | any[];\n              acceptSuggestion?: boolean;\n              alt?: string | any[];\n              altshift?: string | any[];\n              shift?: string | any[];\n              pressAndHoldStart?: string | any[];\n              pressAndHoldEnd?: string | any[];\n          }\n): void {\n    if (typeof command === 'object' && (command.default || command.pressed)) {\n        // Attach the default (no modifiers pressed) command to the element\n        if (command.default) {\n            el.setAttribute(\n                'data-' + mathfield.config.namespace + 'command',\n                JSON.stringify(command.default)\n            );\n        }\n        if (command.alt) {\n            el.setAttribute(\n                'data-' + mathfield.config.namespace + 'command-alt',\n                JSON.stringify(command.alt)\n            );\n        }\n        if (command.altshift) {\n            el.setAttribute(\n                'data-' + mathfield.config.namespace + 'command-altshift',\n                JSON.stringify(command.altshift)\n            );\n        }\n        if (command.shift) {\n            el.setAttribute(\n                'data-' + mathfield.config.namespace + 'command-shift',\n                JSON.stringify(command.shift)\n            );\n        }\n        // .pressed: command to perform when the button is pressed (i.e.\n        // on mouse down/touch). Otherwise the command is performed when\n        // the button is released\n        if (command.pressed) {\n            el.setAttribute(\n                'data-' + mathfield.config.namespace + 'command-pressed',\n                JSON.stringify(command.pressed)\n            );\n        }\n        if (command.pressAndHoldStart) {\n            el.setAttribute(\n                'data-' +\n                    mathfield.config.namespace +\n                    'command-pressAndHoldStart',\n                JSON.stringify(command.pressAndHoldStart)\n            );\n        }\n        if (command.pressAndHoldEnd) {\n            el.setAttribute(\n                'data-' +\n                    mathfield.config.namespace +\n                    'command-pressAndHoldEnd',\n                JSON.stringify(command.pressAndHoldEnd)\n            );\n        }\n    } else {\n        // We need to turn the command into a string to attach it to the dataset\n        // associated with the button (the command could be an array made of a\n        // selector and one or more parameters)\n        el.setAttribute(\n            'data-' + mathfield.config.namespace + 'command',\n            JSON.stringify(command)\n        );\n    }\n    let pressHoldStart;\n    let pressHoldElement;\n    let touchID;\n    let syntheticTarget; // Target while touch move\n    let pressAndHoldTimer;\n    on(\n        el,\n        'mousedown touchstart:passive',\n        (ev: MouseEvent & TouchEvent & PointerEvent) => {\n            if (ev.type !== 'mousedown' || ev.buttons === 1) {\n                // The primary button was pressed or the screen was tapped.\n                ev.stopPropagation();\n                ev.preventDefault();\n                el.classList.add('pressed');\n                pressHoldStart = Date.now();\n                // Record the ID of the primary touch point for tracking on touchmove\n                if (ev.type === 'touchstart') {\n                    touchID = ev.changedTouches[0].identifier;\n                }\n                // Parse the JSON to get the command (and its optional arguments)\n                // and perform it immediately\n                const command = el.getAttribute(\n                    'data-' + mathfield.config.namespace + 'command-pressed'\n                );\n                if (command) {\n                    mathfield.$perform(JSON.parse(command));\n                }\n                // If there is a `press and hold start` command, perform it\n                // after a delay, if we're still pressed by then.\n                const pressAndHoldStartCommand = el.getAttribute(\n                    'data-' +\n                        mathfield.config.namespace +\n                        'command-pressAndHoldStart'\n                );\n                if (pressAndHoldStartCommand) {\n                    pressHoldElement = el;\n                    if (pressAndHoldTimer) {\n                        clearTimeout(pressAndHoldTimer);\n                    }\n                    pressAndHoldTimer = window.setTimeout(function () {\n                        if (el.classList.contains('pressed')) {\n                            mathfield.$perform(\n                                JSON.parse(pressAndHoldStartCommand)\n                            );\n                        }\n                    }, 300);\n                }\n            }\n        }\n    );\n    on(el, 'mouseleave touchcancel', () => {\n        el.classList.remove('pressed');\n        // let command = el.getAttribute('data-' + mathfield.config.namespace +\n        //     'command-pressAndHoldEnd');\n        // const now = Date.now();\n        // if (command && now > pressHoldStart + 300) {\n        //     mathfield.$perform(JSON.parse(command));\n        // }\n    });\n    on(\n        el,\n        'touchmove:passive',\n        (ev: MouseEvent & TouchEvent & PointerEvent) => {\n            // Unlike with mouse tracking, touch tracking only sends events\n            // to the target that was originally tapped on. For consistency,\n            // we want to mimic the behavior of the mouse interaction by\n            // tracking the touch events and dispatching them to potential targets\n            ev.preventDefault();\n            for (let i = 0; i < ev.changedTouches.length; i++) {\n                if (ev.changedTouches[i].identifier === touchID) {\n                    // Found a touch matching our primary/tracked touch\n                    const target = document.elementFromPoint(\n                        ev.changedTouches[i].clientX,\n                        ev.changedTouches[i].clientY\n                    );\n                    if (target !== syntheticTarget && syntheticTarget) {\n                        syntheticTarget.dispatchEvent(\n                            new MouseEvent('mouseleave'),\n                            { bubbles: true }\n                        );\n                        syntheticTarget = null;\n                    }\n                    if (target) {\n                        syntheticTarget = target;\n                        target.dispatchEvent(\n                            new MouseEvent('mouseenter', {\n                                bubbles: true,\n                                buttons: 1,\n                            })\n                        );\n                    }\n                }\n            }\n        }\n    );\n    on(el, 'mouseenter', (ev: MouseEvent & TouchEvent & PointerEvent) => {\n        if (ev.buttons === 1) {\n            el.classList.add('pressed');\n        }\n    });\n    on(\n        el,\n        'mouseup touchend click',\n        (ev: MouseEvent & TouchEvent & PointerEvent) => {\n            if (syntheticTarget) {\n                ev.stopPropagation();\n                ev.preventDefault();\n                const target = syntheticTarget;\n                syntheticTarget = null;\n                target.dispatchEvent(\n                    new MouseEvent('mouseup', { bubbles: true })\n                );\n                return;\n            }\n            el.classList.remove('pressed');\n            el.classList.add('active');\n            if (ev.type === 'click' && ev.detail !== 0) {\n                // This is a click event triggered by a mouse interaction\n                // (and not a keyboard interaction)\n                // Ignore it, we'll handle the mouseup (or touchend) instead.\n                ev.stopPropagation();\n                ev.preventDefault();\n                return;\n            }\n            // Since we want the active state to be visible for a while,\n            // use a timer to remove it after a short delay\n            window.setTimeout(function () {\n                el.classList.remove('active');\n            }, 150);\n            let command = el.getAttribute(\n                'data-' + mathfield.config.namespace + 'command-pressAndHoldEnd'\n            );\n            const now = Date.now();\n            // If the button has not been pressed for very long or if we were\n            // not the button that started the press and hold, don't consider\n            // it a press-and-hold.\n            if (el !== pressHoldElement || now < pressHoldStart + 300) {\n                command = undefined;\n            }\n            if (!command && ev.altKey && ev.shiftKey) {\n                command = el.getAttribute(\n                    'data-' + mathfield.config.namespace + 'command-altshift'\n                );\n            }\n            if (!command && ev.altKey) {\n                command = el.getAttribute(\n                    'data-' + mathfield.config.namespace + 'command-alt'\n                );\n            }\n            if (!command && ev.shiftKey) {\n                command = el.getAttribute(\n                    'data-' + mathfield.config.namespace + 'command-shift'\n                );\n            }\n            if (!command) {\n                command = el.getAttribute(\n                    'data-' + mathfield.config.namespace + 'command'\n                );\n            }\n            if (command) {\n                // Parse the JSON to get the command (and its optional arguments)\n                // and perform it\n                mathfield.$perform(JSON.parse(command));\n            }\n            ev.stopPropagation();\n            ev.preventDefault();\n        }\n    );\n}\n","import { isArray } from '../common/types';\n\nimport {\n    MATHSTYLES,\n    decompose,\n    makeSpan,\n    makeStruts,\n    parseString,\n} from '../core/core';\n\nimport { getAnchor } from './model-selection';\nimport { getKeybindingsForCommand } from './keybindings';\nimport { attachButtonHandlers } from './mathfield-buttons';\nimport { getCaretPosition } from './mathfield-utils';\n\nimport type { MathfieldPrivate } from './mathfield-class';\n\n// A textual description of a LaTeX command.\n// The value can be either a single string, or an array of string\n// in order to provide alternatives or additional context.\n// In that case, the first string in the array should be appropriate\n// to be spoken for accessibility.\nexport const NOTES = {\n    '\\\\text': 'roman text',\n    '\\\\textrm': 'roman text',\n    '\\\\textnormal': 'roman text',\n    '\\\\textit': 'italic text',\n    '\\\\textbf': 'bold text',\n    '\\\\texttt': 'monospaced text',\n    '\\\\textsf': 'sans-serif text',\n    '\\\\mathrm': ['roman', '(upright)'],\n    '\\\\mathbf': 'bold',\n    '\\\\bf': 'bold',\n    '\\\\bold': 'bold',\n    '\\\\mathit': 'italic',\n    '\\\\mathbb': 'blackboard',\n    '\\\\mathscr': 'script',\n    '\\\\mathtt': ['typewriter', '(monospaced)'],\n    '\\\\mathsf': 'sans-serif',\n    '\\\\mathcal': 'caligraphic',\n    '\\\\frak': ['fraktur', '(gothic)'],\n    '\\\\mathfrak': ['fraktur', '(gothic)'],\n\n    '\\\\textcolor': 'text color',\n    '\\\\color': 'color',\n\n    '\\\\forall': 'for all',\n    '\\\\exists': 'there exists',\n    '\\\\nexists': 'there does not exist',\n    '\\\\frac': 'fraction',\n    '\\\\dfrac': 'display fraction',\n    '\\\\cfrac': 'continuous fraction',\n    '\\\\tfrac': 'text fraction',\n    '\\\\binom': 'binomial coefficient',\n    '\\\\dbinom': 'display binomial coefficient',\n    '\\\\tbinom': 'text binomial coefficient',\n    '\\\\pdiff': 'partial differential',\n\n    '\\\\vec': 'vector',\n    '\\\\check': 'caron',\n    '\\\\acute': 'acute',\n    '\\\\breve': 'breve',\n    '\\\\tilde': 'tilde',\n    '\\\\dot': 'dot',\n    '\\\\hat': ['hat', 'circumflex'],\n    '\\\\ddot': 'double dot',\n    '\\\\bar': 'bar',\n\n    '\\\\prime': 'prime',\n    '\\\\doubleprime': 'double prime',\n    '\\\\varnothing': 'empty set',\n    '\\\\emptyset': 'empty set',\n    '\\\\subseteq': 'subset of or <br>equal to',\n    '\\\\supseteq': 'superset of or <br>equal to',\n    '\\\\supset': 'superset of',\n    '\\\\subset': 'subset of',\n    '\\\\partial': 'partial derivative',\n    '\\\\bigcup': 'union',\n    '\\\\bigcap': 'intersection',\n    '\\\\approx': 'approximately equal to',\n    '\\\\notin': 'not an element of',\n    '\\\\in': ['element of', 'included in'],\n    '\\\\infty': 'infinity',\n    '\\\\land': 'logical and',\n    '\\\\sqrt': 'square root',\n    '\\\\prod': 'product',\n    '\\\\sum': 'summation',\n    '\\\\amalg': ['amalgamation', 'coproduct', 'free product', 'disjoint union'],\n    '\\\\cup': 'union with',\n    '\\\\cap': 'intersection with',\n    '\\\\int': 'integral',\n    '\\\\iint': 'surface integral',\n    '\\\\oint': 'curve integral',\n    '\\\\iiint': 'volume integral',\n    '\\\\iff': 'if and only if',\n    '\\\\ln': 'natural logarithm',\n    '\\\\boldsymbol': 'bold',\n    '\\\\setminus': 'set subtraction',\n    '\\\\stackrel': 'relation with symbol above',\n    '\\\\stackbin': 'operator with symbol above',\n    '\\\\underset': 'symbol with annotation below',\n    '\\\\overset': 'symbol with annotation above',\n    '\\\\hslash': ['h-bar', 'Planck constant'],\n    '\\\\gtrsim': 'greater than or <br>similar to',\n    '\\\\propto': 'proportional to',\n    '\\\\equiv': 'equivalent to',\n\n    '\\\\!': ['negative thin space', '(-3 mu)'],\n    '\\\\ ': ['space', '(6 mu)'],\n    '\\\\,': ['thin space', '(3 mu)'],\n    '\\\\:': ['medium space', '(4 mu)'],\n    '\\\\;': ['thick space', '(5 mu)'],\n    '\\\\quad': ['1 em space', '(18 mu)'],\n    '\\\\qquad': ['2 em space', '(36 mu)'],\n    '\\\\enskip': ['&#189; em space', '(9 mu)'],\n\n    '\\\\mp': 'minus or plus',\n    '\\\\pm': 'plus or minus',\n    '\\\\Im': 'Imaginary part of',\n    '\\\\Re': 'Real part of',\n    '\\\\gothicCapitalR': 'Real part of',\n    '\\\\gothicCapitalI': 'Imaginary part part of',\n    '\\\\differentialD': 'differential d',\n    '\\\\aleph': [\n        'aleph',\n        'infinite cardinal',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Cardinal_number\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n    '\\\\beth': [\n        'beth',\n        'beth number',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Beth_number\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n    '\\\\gimel': [\n        'gimel',\n        'gimel function',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Gimel_function\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n\n    '\\\\O': 'empty set',\n    '\\\\N': 'set of <br>natural numbers',\n    '\\\\Z': 'set of <br>integers',\n    '\\\\Q': 'set of <br>rational numbers',\n    '\\\\C': 'set of <br>complex numbers',\n    '\\\\R': 'set of <br>real numbers',\n    '\\\\P': 'set of <br>prime numbers',\n\n    '\\\\lesseqqgtr': 'less than, equal to or<br> greater than',\n    '\\\\gnapprox': 'greater than and <br>not approximately',\n    '\\\\lnapprox': 'lesser than and <br>not approximately',\n\n    '\\\\j': 'dotless j',\n    '\\\\i': 'dotless i',\n    '\\\\cdot': 'centered dot',\n    '\\\\lmoustache': 'left moustache',\n    '\\\\rmoustache': 'right moustache',\n    '\\\\nabla': ['nabla', 'del', 'differential vector operator'],\n\n    '\\\\square': [\n        'square',\n        'd’Alembert operator',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/D%27Alembert_operator\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n    '\\\\blacksquare': [\n        'black square',\n        'end of proof',\n        'tombstone',\n        'Halmos symbol',\n    ],\n    '\\\\Box': 'end of proof',\n    '\\\\colon': ['such that', 'ratio'],\n    '\\\\coloneq': ['is defined by', 'is assigned'],\n    '\\\\Colon': ['is defined by', 'as'],\n    '\\\\_': ['underbar', 'underscore'],\n    '\\\\ll': 'much less than',\n    '\\\\gg': 'much greater than',\n    '\\\\doteq': 'approximately equal to',\n    '\\\\Doteq': 'approximately equal to',\n    '\\\\doteqdot': 'approximately equal to',\n    '\\\\cong': ['isomorphism of', '(for algebras, modules...)'],\n    '\\\\det': ['determinant of', '(of a matrix)'],\n    '\\\\dotplus': 'Cartesian product algebra',\n    '\\\\otimes': [\n        'tensor product',\n        '(of algebras)',\n        'Kronecker product',\n        '(of matrices)',\n    ],\n    '\\\\oplus': ['direct sum', '(of modules)'],\n    '\\\\lb': 'base-2 logarithm',\n    '\\\\lg': 'base-10 logarithm',\n    '\\\\wp': [\n        'Weierstrass P',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Weierstrass%27s_elliptic_functions\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n    '\\\\wr': [\n        'wreath product',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Wreath_product\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n    '\\\\top': ['tautology', 'Proposition P is universally true'],\n    '\\\\bot': ['contradiction', 'Proposition P is contradictory'],\n    '\\\\mid': ['probability', 'of event A given B'],\n    '\\\\mho': [\n        'Siemens',\n        'electrical conductance in SI unit',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Siemens_(unit)\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n\n    '\\\\Longrightarrow': 'implies',\n    '\\\\Longleftrightarrow': 'if, and only if,',\n\n    '\\\\prec': 'precedes',\n    '\\\\preceq': 'precedes or is equal to',\n    '\\\\succ': 'succeedes',\n    '\\\\succeq': 'succeedes or is equal to',\n    '\\\\perp': ['is perpendicular to', 'is independent of'],\n\n    '\\\\models': [\n        'entails',\n        'double-turnstyle, models',\n        'is a semantic consequence of',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Double_turnstile\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n    '\\\\vdash': [\n        'satisfies',\n        'turnstyle, assertion sign',\n        'syntactic inference',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Turnstile_(symbol)\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n\n    '\\\\implies': ['implies', 'logical consequence'],\n    '\\\\impliedby': ['implied by', 'logical consequence'],\n\n    '\\\\surd': ['surd', 'root of', 'checkmark'],\n    '\\\\ltimes': [\n        'semi direct product',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Semidirect_product\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n    '\\\\rtimes': [\n        'semi direct product',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Semidirect_product\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n    '\\\\leftthreetimes': [\n        'semi direct product',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Semidirect_product\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n    '\\\\rightthreetimes': [\n        'semi direct product',\n        '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Semidirect_product\">Wikipedia <big>&#x203A;</big></a>',\n    ],\n    '\\\\divideontimes': ['divide on times'],\n    '\\\\curlywedge': 'nor',\n    '\\\\curlyvee': 'nand',\n\n    '\\\\simeq': 'is group isomorphic with',\n    '\\\\vartriangleleft': ['is a normal subgroup of', 'is an ideal ring of'],\n\n    '\\\\circ': ['circle', 'ring', 'function composition'],\n\n    '\\\\rlap': ['overlap right', '\\\\rlap{x}o'],\n    '\\\\llap': ['overlap left', 'o\\\\llap{/}'],\n    '\\\\colorbox': ['color box', '\\\\colorbox{#fbc0bd}{...}'],\n    '\\\\ast': ['asterisk', 'reflexive closure (as a superscript)'],\n    '\\\\bullet': 'bullet',\n\n    '\\\\lim': 'limit',\n};\n\nfunction getNote(symbol): string {\n    let result = NOTES[symbol] || '';\n    if (isArray(result)) {\n        result = result.join('<br>');\n    }\n\n    return result;\n}\n\nfunction latexToMarkup(latex: string, mf: MathfieldPrivate): string {\n    const parse = parseString(latex, 'math', null, mf.config.macros);\n    const spans = decompose(\n        {\n            mathstyle: MATHSTYLES.displaystyle,\n            macros: mf.config.macros,\n        },\n        parse\n    );\n\n    const wrapper = makeStruts(makeSpan(spans, 'ML__base'), 'ML__mathlive');\n\n    return wrapper.toMarkup();\n}\n\nexport function showPopoverWithLatex(\n    mf: MathfieldPrivate,\n    latex: string,\n    displayArrows: boolean\n): void {\n    if (!latex || latex.length === 0) {\n        hidePopover(mf);\n        return;\n    }\n\n    const command = latex;\n    const commandMarkup = latexToMarkup(latex, mf);\n    const commandNote = getNote(command);\n    const keybinding = getKeybindingsForCommand(mf.keybindings, command).join(\n        '<br>'\n    );\n\n    let template = displayArrows\n        ? '<div class=\"ML__popover__prev-shortcut\" role=\"button\" aria-label=\"Previous suggestion\"><span><span>&#x25B2;</span></span></div>'\n        : '';\n    template += '<span class=\"ML__popover__content\" role=\"button\">';\n    template += '<div class=\"ML__popover__command\">' + commandMarkup + '</div>';\n    if (commandNote) {\n        template += '<div class=\"ML__popover__note\">' + commandNote + '</div>';\n    }\n    if (keybinding) {\n        template +=\n            '<div class=\"ML__popover__shortcut\">' + keybinding + '</div>';\n    }\n    template += '</span>';\n    template += displayArrows\n        ? '<div class=\"ML__popover__next-shortcut\" role=\"button\" aria-label=\"Next suggestion\"><span><span>&#x25BC;</span></span></div>'\n        : '';\n    showPopover(mf, template);\n\n    let el = mf.popover.getElementsByClassName('ML__popover__content');\n    if (el && el.length > 0) {\n        attachButtonHandlers(mf, el[0], {\n            default: ['complete', { acceptSuggestion: true }],\n        });\n    }\n\n    el = mf.popover.getElementsByClassName('ML__popover__prev-shortcut');\n    if (el && el.length > 0) {\n        attachButtonHandlers(mf, el[0], 'previousSuggestion');\n    }\n\n    el = mf.popover.getElementsByClassName('ML__popover__next-shortcut');\n    if (el && el.length > 0) {\n        attachButtonHandlers(mf, el[0], 'nextSuggestion');\n    }\n}\n\nexport function updatePopoverPosition(\n    mf: MathfieldPrivate,\n    options?: { deferred: boolean }\n): void {\n    // Check that the mathfield is still valid\n    // (we're calling ourselves from requestAnimationFrame() and the mathfield\n    // could have gotten destroyed\n    if (!mf.element || mf.element['mathfield'] !== mf) return;\n\n    // If the popover pane is visible...\n    if (mf.popover.classList.contains('is-visible')) {\n        if (options?.deferred) {\n            // Call ourselves again later, typically after the\n            // rendering/layout of the DOM has been completed\n            window.requestAnimationFrame(() => updatePopoverPosition(mf));\n        } else {\n            if (\n                !getAnchor(mf.model) ||\n                getAnchor(mf.model).type !== 'command'\n            ) {\n                hidePopover(mf);\n            } else {\n                // ... get the caret position\n                const position = getCaretPosition(mf.field);\n                if (position) setPopoverPosition(mf, position);\n            }\n        }\n    }\n}\n\nexport function showPopover(mf: MathfieldPrivate, markup: string): void {\n    mf.popover.innerHTML = mf.config.createHTML(markup);\n\n    const position = getCaretPosition(mf.field);\n    if (position) setPopoverPosition(mf, position);\n\n    mf.popover.classList.add('is-visible');\n}\n\nfunction setPopoverPosition(mf, position): void {\n    // get screen width & height (browser compatibility)\n    const screenHeight =\n        window.innerHeight ||\n        document.documentElement.clientHeight ||\n        document.body.clientHeight;\n    const screenWidth =\n        window.innerWidth ||\n        document.documentElement.clientWidth ||\n        document.body.clientWidth;\n\n    // get scrollbar size. This would be 0 in mobile device (also no needed).\n    const scrollbarWidth =\n        window.innerWidth - document.documentElement.clientWidth;\n    const scrollbarHeight =\n        window.innerHeight - document.documentElement.clientHeight;\n    const virtualkeyboardHeight = mf.virtualKeyboardVisible\n        ? mf.virtualKeyboard.offsetHeight\n        : 0;\n    // prevent screen overflow horizontal.\n    if (\n        position.x + mf.popover.offsetWidth / 2 >\n        screenWidth - scrollbarWidth\n    ) {\n        mf.popover.style.left =\n            screenWidth - mf.popover.offsetWidth - scrollbarWidth + 'px';\n    } else if (position.x - mf.popover.offsetWidth / 2 < 0) {\n        mf.popover.style.left = 0;\n    } else {\n        mf.popover.style.left = position.x - mf.popover.offsetWidth / 2 + 'px';\n    }\n\n    // and position the popover right below or above the caret\n    if (\n        position.y + mf.popover.offsetHeight + 5 >\n        screenHeight - scrollbarHeight - virtualkeyboardHeight\n    ) {\n        mf.popover.classList.add('reverse-direction');\n        mf.popover.style.top =\n            position.y - position.height - mf.popover.offsetHeight - 5 + 'px';\n    } else {\n        mf.popover.classList.remove('reverse-direction');\n        mf.popover.style.top = position.y + 5 + 'px';\n    }\n}\n\nexport function hidePopover(mf: MathfieldPrivate): void {\n    mf.popover.classList.remove('is-visible');\n}\n","import { isArray } from '../common/types';\n\nimport type { Atom } from '../core/atom';\n\nimport type { ModelPrivate } from './model-class';\nimport { contentDidChange, contentWillChange } from './model-listeners';\nimport { arrayCellCount, arrayCell } from './model-array-utils';\nimport {\n    getCommandOffsets,\n    setSelectionExtent,\n    setSelection,\n    leap,\n} from './model-selection';\n\nexport function extractCommandStringAroundInsertionPoint(\n    model: ModelPrivate,\n    beforeInsertionPointOnly = false\n): string {\n    let result = '';\n\n    const command = getCommandOffsets(model);\n    if (command) {\n        const end = beforeInsertionPointOnly\n            ? model.anchorOffset() + 1\n            : command.end;\n        const siblings = model.siblings();\n        for (let i = command.start; i < end; i++) {\n            // All these atoms are 'command' atom with a body that's\n            // a single character\n            result += siblings[i].body || '';\n        }\n    }\n    return result;\n}\n\n/**\n * @param value - If true, decorate the command string around the\n * insertion point with an error indicator (red dotted underline). If false,\n * remove it.\n */\nexport function decorateCommandStringAroundInsertionPoint(\n    model: ModelPrivate,\n    hasError: boolean\n): void {\n    const command = getCommandOffsets(model);\n    if (command) {\n        const siblings = model.siblings();\n        for (let i = command.start; i < command.end; i++) {\n            siblings[i].error = hasError;\n        }\n    }\n}\n\nexport function commitCommandStringBeforeInsertionPoint(\n    model: ModelPrivate\n): void {\n    const command = getCommandOffsets(model);\n    if (command) {\n        const siblings = model.siblings();\n        const anchorOffset = model.anchorOffset() + 1;\n        for (let i = command.start; i < anchorOffset; i++) {\n            if (siblings[i]) {\n                siblings[i].suggestion = false;\n            }\n        }\n    }\n}\n\nexport function spliceCommandStringAroundInsertionPoint(\n    model: ModelPrivate,\n    mathlist: Atom[]\n): void {\n    const command = getCommandOffsets(model);\n    if (command) {\n        // Dispatch notifications\n        contentWillChange(model);\n\n        if (!mathlist) {\n            model.siblings().splice(command.start, command.end - command.start);\n            setSelection(model, command.start - 1, 0);\n        } else {\n            // Array.prototype.splice.apply(\n            //     model.siblings(),\n            //     [command.start, command.end - command.start].concat(mathlist)\n            // );\n            // @revisit\n            model\n                .siblings()\n                .splice(\n                    command.start,\n                    command.end - command.start,\n                    ...mathlist\n                );\n            let newPlaceholders = [];\n            for (const atom of mathlist) {\n                newPlaceholders = newPlaceholders.concat(\n                    atom.filter((atom) => atom.type === 'placeholder')\n                );\n            }\n            setSelectionExtent(model, 0);\n\n            // Set the anchor offset to a reasonable value that can be used by\n            // leap(). In particular, the current offset value may be invalid\n            // if the length of the mathlist is shorter than the name of the command\n            model.path[model.path.length - 1].offset = command.start - 1;\n\n            if (newPlaceholders.length === 0 || !leap(model, +1, false)) {\n                setSelection(model, command.start + mathlist.length - 1);\n            }\n        }\n\n        // Dispatch notifications\n        contentDidChange(model);\n    }\n}\n\nfunction removeCommandStringFromAtom(atom: Atom | Atom[]): void {\n    if (!atom) return;\n    if (isArray(atom)) {\n        for (let i = atom.length - 1; i >= 0; i--) {\n            if (atom[i].type === 'command') {\n                atom.splice(i, 1);\n                // i += 1;\n            } else {\n                removeCommandStringFromAtom(atom[i]);\n            }\n        }\n        return;\n    }\n\n    removeCommandStringFromAtom(atom.body as Atom[]);\n    removeCommandStringFromAtom(atom.superscript);\n    removeCommandStringFromAtom(atom.subscript);\n    removeCommandStringFromAtom(atom.underscript);\n    removeCommandStringFromAtom(atom.overscript);\n    removeCommandStringFromAtom(atom.numer);\n    removeCommandStringFromAtom(atom.denom);\n    removeCommandStringFromAtom(atom.index);\n\n    if (atom.array) {\n        for (let j = arrayCellCount(atom.array); j >= 0; j--) {\n            removeCommandStringFromAtom(arrayCell(atom.array, j));\n        }\n    }\n}\n\nexport function removeCommandString(model: ModelPrivate): void {\n    contentWillChange(model);\n    const contentWasChanging = model.suppressChangeNotifications;\n    model.suppressChangeNotifications = true;\n\n    removeCommandStringFromAtom(model.root.body as Atom[]);\n\n    model.suppressChangeNotifications = contentWasChanging;\n    contentDidChange(model);\n}\n","import type { MathfieldConfig } from '../public/config';\nimport { Atom } from '../core/atom';\nimport { stringToColor } from '../core/color';\nconst SPECIAL_OPERATORS = {\n    '\\\\pm': '&#177;',\n    '\\\\times': '&#215;',\n    '\\\\colon': ':',\n    '\\\\vert': '|',\n    '\\\\Vert': '\\u2225',\n    '\\\\mid': '\\u2223',\n    '\\\\lbrace': '{',\n    '\\\\rbrace': '}',\n    '\\\\langle': '\\u27e8',\n    '\\\\rangle': '\\u27e9',\n    '\\\\lfloor': '\\u230a',\n    '\\\\rfloor': '\\u230b',\n    '\\\\lceil': '\\u2308',\n    '\\\\rceil': '\\u2309',\n\n    '\\\\vec': '&#x20d7;',\n    '\\\\acute': '&#x00b4;',\n    '\\\\grave': '&#x0060;',\n    '\\\\dot': '&#x02d9;',\n    '\\\\ddot': '&#x00a8;',\n    '\\\\tilde': '&#x007e;',\n    '\\\\bar': '&#x00af;',\n    '\\\\breve': '&#x02d8;',\n    '\\\\check': '&#x02c7;',\n    '\\\\hat': '&#x005e;',\n};\n\nfunction xmlEscape(str: string): string {\n    return (\n        str\n            // .replace(/&/g, '&amp;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#39;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n    );\n}\n\nfunction makeID(id, options) {\n    if (!id || !options.generateID) return '';\n    // Note: the 'extid' attribute is recognized by SRE as an attribute\n    // to be passed to SSML as a <mark> tag.\n    return ' extid=\"' + id + '\"';\n}\n\nfunction scanIdentifier(stream, final, options) {\n    let result = false;\n    final = final || stream.atoms.length;\n    let mathML = '';\n    let body = '';\n    let superscript = -1;\n    let subscript = -1;\n    const atom = stream.atoms[stream.index];\n\n    if (\n        stream.index < final &&\n        (atom.type === 'mord' || atom.type === 'textord') &&\n        '0123456789,.'.indexOf(atom.body) < 0\n    ) {\n        body = atomToMathML(atom, options);\n        if (atom.superscript) {\n            superscript = stream.index;\n        }\n        if (atom.subscript) {\n            subscript = stream.index;\n        }\n        stream.index += 1;\n    }\n\n    if (body.length > 0) {\n        result = true;\n\n        // If there are separate atoms for sub/sup, record them\n        if (isSuperscriptAtom(stream)) {\n            superscript = stream.index;\n            stream.index += 1;\n        }\n        if (isSubscriptAtom(stream)) {\n            subscript = stream.index;\n            stream.index += 1;\n        }\n\n        if (superscript >= 0 && subscript >= 0) {\n            mathML = '<msubsup>' + body;\n            mathML += toMathML(stream.atoms[subscript].subscript, 0, 0, options)\n                .mathML;\n            mathML += toMathML(\n                stream.atoms[superscript].superscript,\n                0,\n                0,\n                options\n            ).mathML;\n            mathML += '</msubsup>';\n        } else if (superscript >= 0) {\n            mathML = '<msup>' + body;\n            if (isSuperscriptAtom(stream)) {\n                // There's another superscript after this one. Maybe double-prime?\n                const sup = toMathML(\n                    stream.atoms[superscript].superscript,\n                    0,\n                    0,\n                    options\n                ).mathML;\n\n                const sup2 = toMathML(\n                    stream.atoms[superscript + 1].superscript,\n                    0,\n                    0,\n                    options\n                ).mathML;\n                if (\n                    (sup === '<mi>\\u2032</mi>' ||\n                        sup === '<mi>&#x2032;</mi>') &&\n                    (sup2 === '<mi>\\u2032</mi>' || sup2 === '<mi>&#x2032;</mi>')\n                ) {\n                    mathML += '<mi>&#x2033;</mi>';\n                } else if (\n                    sup === '<mi>\\u2032</mi>' ||\n                    sup === '<mi>&#x2032;</mi>'\n                ) {\n                    mathML += '<mi>&#x2032;</mi>';\n                } else {\n                    mathML += sup;\n                }\n            } else {\n                mathML += toMathML(\n                    stream.atoms[superscript].superscript,\n                    0,\n                    0,\n                    options\n                ).mathML;\n            }\n            mathML += '</msup>';\n        } else if (subscript >= 0) {\n            mathML = '<msub>' + body;\n            mathML += toMathML(stream.atoms[subscript].subscript, 0, 0, options)\n                .mathML;\n            mathML += '</msub>';\n        } else {\n            mathML = body;\n        }\n\n        if (\n            (stream.lastType === 'mi' ||\n                stream.lastType === 'mn' ||\n                stream.lastType === 'mtext' ||\n                stream.lastType === 'fence') &&\n            !/^<mo>(.*)<\\/mo>$/.test(mathML)\n        ) {\n            mathML = '<mo>&#8290;</mo>' + mathML; // &InvisibleTimes;\n        }\n\n        if (body.endsWith('>f</mi>') || body.endsWith('>g</mi>')) {\n            mathML += '<mo>&x2061;</mo>'; // &ApplyFunction;\n            stream.lastType = 'applyfunction';\n        } else {\n            stream.lastType = /^<mo>(.*)<\\/mo>$/.test(mathML) ? 'mo' : 'mi';\n        }\n\n        stream.mathML += mathML;\n    }\n\n    return result;\n}\n\n/**\n * Return true if the current atom is a standalone superscript atom\n * i.e. an atom with no content, except of a superscript.\n * Superscripts can be encoded either as an attribute on the last atom\n * or as a standalone, empty, atom following the one to which it applies.\n * @param {object} stream\n */\nfunction isSuperscriptAtom(stream) {\n    return (\n        stream.index < stream.atoms.length &&\n        stream.atoms[stream.index].superscript &&\n        stream.atoms[stream.index].type === 'msubsup'\n    );\n}\n\nfunction isSubscriptAtom(stream) {\n    return (\n        stream.index < stream.atoms.length &&\n        stream.atoms[stream.index].subscript &&\n        stream.atoms[stream.index].type === 'msubsup'\n    );\n}\n\nfunction indexOfSuperscriptInNumber(stream) {\n    let result = -1;\n    let i = stream.index;\n    let done = false;\n    let found = false;\n    while (i < stream.atoms.length && !done && !found) {\n        done =\n            stream.atoms[i].type !== 'mord' ||\n            '0123456789,.'.indexOf(stream.atoms[i].body) < 0;\n        found = !done && stream.atoms[i].superscript;\n        i++;\n    }\n\n    if (found) {\n        result = i - 1;\n    }\n\n    return result;\n}\n\nfunction parseSubsup(base, stream, options) {\n    let result = false;\n    let mathML = '';\n    let atom = stream.atoms[stream.index - 1];\n\n    if (!atom) return false;\n\n    if (!atom.superscript && !atom.subscript) {\n        if (isSuperscriptAtom(stream) || isSubscriptAtom(stream)) {\n            atom = stream.atoms[stream.index];\n            stream.index += 1;\n        }\n    }\n    if (!atom) return false;\n\n    if (atom.superscript && atom.subscript) {\n        mathML = '<msubsup>' + base;\n        mathML += toMathML(atom.subscript, 0, 0, options).mathML;\n        mathML += toMathML(atom.superscript, 0, 0, options).mathML;\n        mathML += '</msubsup>';\n    } else if (atom.superscript) {\n        mathML = '<msup>' + base;\n        mathML += toMathML(atom.superscript, 0, 0, options).mathML;\n        mathML += '</msup>';\n    } else if (atom.subscript) {\n        mathML = '<msub>' + base;\n        mathML += toMathML(atom.subscript, 0, 0, options).mathML;\n        mathML += '</msub>';\n    }\n\n    if (mathML.length > 0) {\n        result = true;\n        stream.mathML += mathML;\n        stream.lastType = '';\n    }\n    return result;\n}\n\nfunction scanText(stream, final, options) {\n    let result = false;\n    final = final || stream.atoms.length;\n    const initial = stream.index;\n    let mathML = '';\n    while (stream.index < final && stream.atoms[stream.index].mode === 'text') {\n        mathML += stream.atoms[stream.index].body\n            ? stream.atoms[stream.index].body\n            : ' ';\n        stream.index += 1;\n    }\n\n    if (mathML.length > 0) {\n        result = true;\n        mathML =\n            '<mtext' +\n            makeID(stream.atoms[initial].id, options) +\n            '>' +\n            mathML +\n            '</mtext>';\n\n        stream.mathML += mathML;\n        stream.lastType = 'mtext';\n    }\n\n    return result;\n}\n\nfunction scanNumber(stream, final, options) {\n    let result = false;\n    final = final || stream.atoms.length;\n    const initial = stream.index;\n    let mathML = '';\n\n    let superscript = indexOfSuperscriptInNumber(stream);\n    if (superscript >= 0 && superscript < final) {\n        final = superscript;\n    }\n\n    while (\n        stream.index < final &&\n        stream.atoms[stream.index].type === 'mord' &&\n        '0123456789,.'.indexOf(stream.atoms[stream.index].body) >= 0\n    ) {\n        mathML += stream.atoms[stream.index].body;\n        stream.index += 1;\n    }\n\n    if (mathML.length > 0) {\n        result = true;\n        mathML =\n            '<mn' +\n            makeID(stream.atoms[initial].id, options) +\n            '>' +\n            mathML +\n            '</mn>';\n\n        if (superscript < 0 && isSuperscriptAtom(stream)) {\n            superscript = stream.index;\n            stream.index += 1;\n        }\n\n        if (superscript >= 0) {\n            mathML = '<msup>' + mathML;\n            mathML += toMathML(\n                stream.atoms[superscript].superscript,\n                0,\n                0,\n                options\n            ).mathML;\n            mathML += '</msup>';\n        }\n\n        stream.mathML += mathML;\n        stream.lastType = 'mn';\n    }\n\n    return result;\n}\n\nfunction scanFence(stream, final, options) {\n    let result = false;\n    final = final || stream.atoms.length;\n    let mathML = '';\n    let lastType = '';\n\n    if (stream.index < final && stream.atoms[stream.index].type === 'mopen') {\n        let found = false;\n        let depth = 0;\n        const openIndex = stream.index;\n        let closeIndex = -1;\n        let index = openIndex + 1;\n        while (index < final && !found) {\n            if (stream.atoms[index].type === 'mopen') {\n                depth += 1;\n            } else if (stream.atoms[index].type === 'mclose') {\n                depth -= 1;\n            }\n            if (depth === -1) {\n                found = true;\n                closeIndex = index;\n            }\n            index += 1;\n        }\n        if (found) {\n            // TODO: could add attribute indicating it's a fence (fence=true)\n            mathML = '<mrow>';\n            mathML += toMo(stream.atoms[openIndex], options);\n\n            mathML += toMathML(stream.atoms, openIndex + 1, closeIndex, options)\n                .mathML;\n\n            // TODO: could add attribute indicating it's a fence (fence=true)\n            mathML += toMo(stream.atoms[closeIndex], options);\n            mathML += '</mrow>';\n\n            if (\n                stream.lastType === 'mi' ||\n                stream.lastType === 'mn' ||\n                stream.lastType === 'mfrac' ||\n                stream.lastType === 'fence'\n            ) {\n                mathML = '<mo>&#8290;</mo>' + mathML; // &InvisibleTimes;\n            }\n            stream.index = closeIndex + 1;\n\n            if (parseSubsup(mathML, stream, options)) {\n                result = true;\n                stream.lastType = '';\n                mathML = '';\n            }\n\n            lastType = 'fence';\n        }\n    }\n\n    if (mathML.length > 0) {\n        result = true;\n        stream.mathML += mathML;\n        stream.lastType = lastType;\n    }\n\n    return result;\n}\n\nfunction scanOperator(stream, final, options) {\n    let result = false;\n    final = final || stream.atoms.length;\n    let mathML = '';\n    let lastType = '';\n    const atom = stream.atoms[stream.index];\n\n    if (\n        stream.index < final &&\n        (atom.type === 'mbin' || atom.type === 'mrel')\n    ) {\n        mathML += atomToMathML(stream.atoms[stream.index], options);\n        stream.index += 1;\n        lastType = 'mo';\n    } else if (stream.index < final && atom.type === 'mop') {\n        // mathML += '<mrow>';\n\n        if (atom.limits === 'limits' && (atom.superscript || atom.subscript)) {\n            // Operator with limits, e.g. \\sum\n            const op = toMo(atom, options);\n            if (atom.superscript && atom.subscript) {\n                // Both superscript and subscript\n                mathML +=\n                    (atom.limits !== 'nolimits'\n                        ? '<munderover>'\n                        : '<msubsup>') + op;\n                mathML += toMathML(atom.subscript, 0, 0, options).mathML;\n                mathML += toMathML(atom.superscript, 0, 0, options).mathML;\n                mathML +=\n                    atom.limits !== 'nolimits' ? '</munderover>' : '</msubsup>';\n            } else if (atom.superscript) {\n                // Superscript only\n                mathML +=\n                    (atom.limits !== 'nolimits' ? '<mover>' : '<msup>') + op;\n                mathML += toMathML(atom.superscript, 0, 0, options).mathML;\n                mathML += atom.limits !== 'nolimits' ? '</mover>' : '</msup>';\n            } else {\n                // Subscript only\n                mathML +=\n                    (atom.limits !== 'nolimits' ? '<munder>' : '<msub>') + op;\n                mathML += toMathML(atom.subscript, 0, 0, options).mathML;\n                mathML += atom.limits !== 'nolimits' ? '</munder>' : '</msub>';\n            }\n            lastType = 'mo';\n        } else {\n            const atom = stream.atoms[stream.index];\n            const isUnit = atom.symbol === '\\\\operatorname';\n            const op = isUnit\n                ? '<mi class=\"MathML-Unit\"' +\n                  makeID(atom.id, options) +\n                  '>' +\n                  toString(atom.body) +\n                  '</mi>'\n                : toMo(atom, options);\n            mathML += op;\n            stream.index += 1;\n            if (parseSubsup(mathML, stream, options)) {\n                result = true;\n                stream.lastType = '';\n                mathML = '';\n            }\n            stream.index -= 1;\n            if (!isUnit && !/^<mo>(.*)<\\/mo>$/.test(op)) {\n                mathML += '<mo>&#x2061;</mo>'; // APPLY FUNCTION\n                // mathML += scanArgument(stream);\n                lastType = 'applyfunction';\n            } else {\n                lastType = isUnit ? 'mi' : 'mo';\n            }\n        }\n        // mathML += '</mrow>';\n\n        if (\n            (stream.lastType === 'mi' || stream.lastType === 'mn') &&\n            !/^<mo>(.*)<\\/mo>$/.test(mathML)\n        ) {\n            mathML = '<mo>&#8290;</mo>' + mathML; // &InvisibleTimes;\n        }\n        stream.index += 1;\n    }\n\n    if (mathML.length > 0) {\n        result = true;\n        stream.mathML += mathML;\n        stream.lastType = lastType;\n    }\n\n    return result;\n}\n\n/**\n * Given an atom or an array of atoms, return their MathML representation as\n * a string.\n * @param {string|Atom|Atom[]} input\n * @param initial index of the input to start conversion from\n * @param final last index of the input to stop conversion to\n */\nfunction toMathML(\n    input: number | boolean | string | Atom | Atom[],\n    initial: number,\n    final: number,\n    options: MathfieldConfig\n): {\n    atoms: number | boolean | string | Atom | Atom[];\n    index: number;\n    mathML: string;\n    lastType: string;\n} {\n    const result = {\n        atoms: input,\n        index: initial ?? 0,\n        mathML: '',\n        lastType: '',\n    };\n\n    if (typeof input === 'number' || typeof input === 'boolean') {\n        result.mathML = input.toString();\n    } else if (typeof input === 'string') {\n        result.mathML = input;\n    } else if (input instanceof Atom) {\n        result.mathML = atomToMathML(input, options);\n    } else if (Array.isArray(input)) {\n        let count = 0;\n        final = final ?? (input ? input.length : 0);\n\n        while (result.index < final) {\n            if (\n                scanText(result, final, options) ||\n                scanNumber(result, final, options) ||\n                scanIdentifier(result, final, options) ||\n                scanOperator(result, final, options) ||\n                scanFence(result, final, options)\n            ) {\n                count += 1;\n            } else if (result.index < final) {\n                let mathML = atomToMathML(result.atoms[result.index], options);\n                if (\n                    result.lastType === 'mn' &&\n                    mathML.length > 0 &&\n                    result.atoms[result.index].type === 'genfrac'\n                ) {\n                    // If this is a fraction preceded by a number (e.g. 2 1/2),\n                    // add an \"invisible plus\" (U+0264) character in front of it\n                    mathML = '<mo>&#x2064;</mo>' + mathML;\n                }\n                if (result.atoms[result.index].type === 'genfrac') {\n                    result.lastType = 'mfrac';\n                } else {\n                    result.lastType = '';\n                }\n                if (mathML.length > 0) {\n                    result.mathML += mathML;\n                    count += 1;\n                }\n                result.index += 1;\n            }\n        }\n\n        // If there are more than a single element, wrap them in a mrow tag.\n        if (count > 1) {\n            result.mathML = '<mrow>' + result.mathML + '</mrow>';\n        }\n    }\n\n    return result;\n}\n\nfunction toMo(atom, options) {\n    let result = '';\n    const body = toString(atom.body);\n    if (body) {\n        result = '<mo' + makeID(atom.id, options) + '>' + body + '</mo>';\n    }\n    return result;\n}\n\nfunction toString(atoms) {\n    if (!atoms) return '';\n    if (typeof atoms === 'string') return xmlEscape(atoms);\n    if (!Array.isArray(atoms) && typeof atoms.body === 'string') {\n        return xmlEscape(atoms.body);\n    }\n    let result = '';\n    for (const atom of atoms) {\n        if (typeof atom.body === 'string') {\n            result += atom.body;\n        }\n    }\n    return xmlEscape(result);\n}\n\n/**\n * Return a MathML fragment representation of a single atom\n *\n */\nfunction atomToMathML(atom, options): string {\n    // For named SVG atoms, map to a Unicode char\n    const SVG_CODE_POINTS = {\n        widehat: '^',\n        widecheck: 'ˇ',\n        widetilde: '~',\n        utilde: '~',\n        overleftarrow: '\\u2190',\n        underleftarrow: '\\u2190',\n        xleftarrow: '\\u2190',\n        overrightarrow: '\\u2192',\n        underrightarrow: '\\u2192',\n        xrightarrow: '\\u2192',\n        underbrace: '\\u23df',\n        overbrace: '\\u23de',\n        overgroup: '\\u23e0',\n        undergroup: '\\u23e1',\n        overleftrightarrow: '\\u2194',\n        underleftrightarrow: '\\u2194',\n        xleftrightarrow: '\\u2194',\n        Overrightarrow: '\\u21d2',\n        xRightarrow: '\\u21d2',\n        overleftharpoon: '\\u21bc',\n        xleftharpoonup: '\\u21bc',\n        overrightharpoon: '\\u21c0',\n        xrightharpoonup: '\\u21c0',\n        xLeftarrow: '\\u21d0',\n        xLeftrightarrow: '\\u21d4',\n        xhookleftarrow: '\\u21a9',\n        xhookrightarrow: '\\u21aa',\n        xmapsto: '\\u21a6',\n        xrightharpoondown: '\\u21c1',\n        xleftharpoondown: '\\u21bd',\n        xrightleftharpoons: '\\u21cc',\n        xleftrightharpoons: '\\u21cb',\n        xtwoheadleftarrow: '\\u219e',\n        xtwoheadrightarrow: '\\u21a0',\n        xlongequal: '=',\n        xtofrom: '\\u21c4',\n        xrightleftarrows: '\\u21c4',\n        xrightequilibrium: '\\u21cc', // Not a perfect match.\n        xleftequilibrium: '\\u21cb', // None better available.\n    };\n\n    const SPECIAL_IDENTIFIERS = {\n        '\\\\exponentialE': '&#x02147;',\n        '\\\\imaginaryI': '&#x2148;',\n        '\\\\differentialD': '&#x2146;',\n        '\\\\capitalDifferentialD': '&#x2145;',\n        '\\\\alpha': '&#x03b1;',\n        '\\\\pi': '&#x03c0;',\n        '\\\\infty': '&#x221e;',\n        '\\\\forall': '&#x2200;',\n        '\\\\nexists': '&#x2204;',\n        '\\\\exists': '&#x2203;',\n        '\\\\hbar': '\\u210f',\n        '\\\\cdotp': '\\u22c5',\n        '\\\\ldots': '\\u2026',\n        '\\\\cdots': '\\u22ef',\n        '\\\\ddots': '\\u22f1',\n        '\\\\vdots': '\\u22ee',\n        '\\\\ldotp': '\\u002e',\n        // TODO: include all the 'textord' that are identifiers, not operators.\n    };\n\n    const MATH_VARIANTS = {\n        cal: 'script',\n        frak: 'fraktur',\n        bb: 'double-struck',\n        scr: 'script',\n        cmtt: 'monospace',\n        cmss: 'sans-serif',\n    };\n    const SPACING = {\n        '\\\\!': -3 / 18,\n        '\\\\ ': 6 / 18,\n        '\\\\,': 3 / 18,\n        '\\\\:': 4 / 18,\n        '\\\\;': 5 / 18,\n        '\\\\enspace': 0.5,\n        '\\\\quad': 1,\n        '\\\\qquad': 2,\n        '\\\\enskip': 0.5,\n    };\n\n    let result = '';\n    let sep = '';\n    let col, row, i;\n    let underscript, overscript, body;\n    let variant = MATH_VARIANTS[atom.fontFamily || atom.font] || '';\n    if (variant) {\n        variant = ' mathvariant=\"' + variant + '\"';\n    }\n\n    const command = atom.symbol;\n    if (atom.mode === 'text') {\n        result = '<mi' + makeID(atom.id, options) + '>' + atom.body + '</mi>';\n    } else {\n        switch (atom.type) {\n            case 'first':\n                break; // nothing to do\n            case 'group':\n            case 'root':\n                result = toMathML(atom.body, 0, 0, options).mathML;\n                break;\n\n            case 'array':\n                if (\n                    (atom.lFence && atom.lFence !== '.') ||\n                    (atom.rFence && atom.rFence !== '.')\n                ) {\n                    result += '<mrow>';\n                    if (atom.lFence && atom.lFence !== '.') {\n                        result +=\n                            '<mo>' +\n                            (SPECIAL_OPERATORS[atom.lFence] || atom.lFence) +\n                            '</mo>';\n                    }\n                }\n                result += '<mtable';\n                if (atom.colFormat) {\n                    result += ' columnalign=\"';\n                    for (i = 0; i < atom.colFormat.length; i++) {\n                        if (atom.colFormat[i].align) {\n                            result +=\n                                { l: 'left', c: 'center', r: 'right' }[\n                                    atom.colFormat[i].align\n                                ] + ' ';\n                        }\n                    }\n                    result += '\"';\n                }\n\n                result += '>';\n                for (row = 0; row < atom.array.length; row++) {\n                    result += '<mtr>';\n                    for (col = 0; col < atom.array[row].length; col++) {\n                        result +=\n                            '<mtd>' +\n                            toMathML(atom.array[row][col], 0, 0, options)\n                                .mathML +\n                            '</mtd>';\n                    }\n                    result += '</mtr>';\n                }\n\n                result += '</mtable>';\n\n                if (\n                    (atom.lFence && atom.lFence !== '.') ||\n                    (atom.rFence && atom.rFence !== '.')\n                ) {\n                    if (atom.rFence && atom.rFence !== '.') {\n                        result +=\n                            '<mo>' +\n                            (SPECIAL_OPERATORS[atom.lFence] || atom.rFence) +\n                            '</mo>';\n                    }\n                    result += '</mrow>';\n                }\n                break;\n\n            case 'genfrac':\n                if (atom.leftDelim || atom.rightDelim) {\n                    result += '<mrow>';\n                }\n                if (atom.leftDelim && atom.leftDelim !== '.') {\n                    result +=\n                        '<mo' +\n                        makeID(atom.id, options) +\n                        '>' +\n                        (SPECIAL_OPERATORS[atom.leftDelim] || atom.leftDelim) +\n                        '</mo>';\n                }\n                if (atom.hasBarLine) {\n                    result += '<mfrac>';\n                    result +=\n                        toMathML(atom.numer, 0, 0, options).mathML ||\n                        '<mi>&nbsp;</mi>';\n                    result +=\n                        toMathML(atom.denom, 0, 0, options).mathML ||\n                        '<mi>&nbsp;</mi>';\n                    result += '</mfrac>';\n                } else {\n                    // No bar line, i.e. \\choose, etc...\n                    result += '<mtable' + makeID(atom.id, options) + '>';\n                    result +=\n                        '<mtr>' +\n                        toMathML(atom.numer, 0, 0, options).mathML +\n                        '</mtr>';\n                    result +=\n                        '<mtr>' +\n                        toMathML(atom.denom, 0, 0, options).mathML +\n                        '</mtr>';\n                    result += '</mtable>';\n                }\n                if (atom.rightDelim && atom.rightDelim !== '.') {\n                    result +=\n                        '<mo' +\n                        makeID(atom.id, options) +\n                        '>' +\n                        (SPECIAL_OPERATORS[atom.rightDelim] ||\n                            atom.rightDelim) +\n                        '</mo>';\n                }\n                if (atom.leftDelim || atom.rightDelim) {\n                    result += '</mrow>';\n                }\n                break;\n\n            case 'surd':\n                if (atom.index) {\n                    result += '<mroot' + makeID(atom.id, options) + '>';\n                    result += toMathML(atom.body, 0, 0, options).mathML;\n                    result += toMathML(atom.index, 0, 0, options).mathML;\n                    result += '</mroot>';\n                } else {\n                    result += '<msqrt' + makeID(atom.id, options) + '>';\n                    result += toMathML(atom.body, 0, 0, options).mathML;\n                    result += '</msqrt>';\n                }\n                break;\n\n            case 'leftright':\n                // TODO: could add fence=true attribute\n                result = '<mrow>';\n                if (atom.leftDelim && atom.leftDelim !== '.') {\n                    result +=\n                        '<mo' +\n                        makeID(atom.id, options) +\n                        '>' +\n                        (SPECIAL_OPERATORS[atom.leftDelim] || atom.leftDelim) +\n                        '</mo>';\n                }\n                if (atom.body) {\n                    result += toMathML(atom.body, 0, 0, options).mathML;\n                }\n                if (atom.rightDelim && atom.rightDelim !== '.') {\n                    result +=\n                        '<mo' +\n                        makeID(atom.id, options) +\n                        '>' +\n                        (SPECIAL_OPERATORS[atom.rightDelim] ||\n                            atom.rightDelim) +\n                        '</mo>';\n                }\n                result += '</mrow>';\n                break;\n\n            case 'sizeddelim':\n            case 'delim':\n                result +=\n                    '<mo separator=\"true\"' +\n                    makeID(atom.id, options) +\n                    '>' +\n                    (SPECIAL_OPERATORS[atom.delim] || atom.delim) +\n                    '</mo>';\n                break;\n\n            case 'accent':\n                result +=\n                    '<mover accent=\"true\"' + makeID(atom.id, options) + '>';\n                result += toMathML(atom.body, 0, 0, options).mathML;\n                result +=\n                    '<mo>' +\n                    (SPECIAL_OPERATORS[command] || atom.accent) +\n                    '</mo>';\n                result += '</mover>';\n                break;\n\n            case 'line':\n            case 'overlap':\n                break;\n\n            case 'overunder':\n                overscript = atom.overscript;\n                underscript = atom.underscript;\n                if (\n                    (atom.svgAbove || overscript) &&\n                    (atom.svgBelow || underscript)\n                ) {\n                    body = atom.body;\n                } else if (overscript) {\n                    body = atom.body;\n                    if (atom.body && atom.body[0] && atom.body[0].underscript) {\n                        underscript = atom.body[0].underscript;\n                        body = atom.body[0].body;\n                    } else if (\n                        atom.body &&\n                        atom.body[0] &&\n                        atom.body[0].type === 'first' &&\n                        atom.body[1] &&\n                        atom.body[1].underscript\n                    ) {\n                        underscript = atom.body[1].underscript;\n                        body = atom.body[1].body;\n                    }\n                } else if (underscript) {\n                    body = atom.body;\n                    if (atom.body && atom.body[0] && atom.body[0].overscript) {\n                        overscript = atom.body[0].overscript;\n                        body = atom.body[0].body;\n                    } else if (\n                        atom.body &&\n                        atom.body[0] &&\n                        atom.body[0].type === 'first' &&\n                        atom.body[1] &&\n                        atom.body[1].overscript\n                    ) {\n                        overscript = atom.body[1].overscript;\n                        body = atom.body[1].body;\n                    }\n                }\n\n                if (\n                    (atom.svgAbove || overscript) &&\n                    (atom.svgBelow || underscript)\n                ) {\n                    result += `<munderover ${variant} ${makeID(\n                        atom.id,\n                        options\n                    )}>`;\n                    result +=\n                        SVG_CODE_POINTS[atom.svgBody] ||\n                        toMathML(body, 0, 0, options).mathML;\n                    result +=\n                        SVG_CODE_POINTS[atom.svgBelow] ||\n                        toMathML(underscript, 0, 0, options).mathML;\n                    result +=\n                        SVG_CODE_POINTS[atom.svgAbove] ||\n                        toMathML(overscript, 0, 0, options).mathML;\n                    result += '</munderover>';\n                } else if (atom.svgAbove || overscript) {\n                    result +=\n                        `<mover ${variant} ${makeID(atom.id, options)}>` +\n                        (SVG_CODE_POINTS[atom.svgBody] ||\n                            toMathML(body, 0, 0, options).mathML);\n                    result +=\n                        SVG_CODE_POINTS[atom.svgAbove] ||\n                        toMathML(overscript, 0, 0, options).mathML;\n                    result += '</mover>';\n                } else if (atom.svgBelow || underscript) {\n                    result +=\n                        `<munder ${variant} ${makeID(atom.id, options)}>` +\n                        (SVG_CODE_POINTS[atom.svgBody] ||\n                            toMathML(body, 0, 0, options).mathML);\n                    result +=\n                        SVG_CODE_POINTS[atom.svgBelow] ||\n                        toMathML(underscript, 0, 0, options).mathML;\n                    result += '</munder>';\n                }\n                break;\n\n            case 'placeholder': // no real equivalent in MathML -- will generate a '?'qq\n            case 'mord': {\n                result =\n                    SPECIAL_IDENTIFIERS[command] ||\n                    command ||\n                    (typeof atom.body === 'string' ? atom.body : '');\n                const m = command\n                    ? command.match(/[{]?\\\\char\"([0-9abcdefABCDEF]*)[}]?/)\n                    : null;\n                if (m) {\n                    // It's a \\char command\n                    result = '&#x' + m[1] + ';';\n                } else if (result.length > 0 && result.charAt(0) === '\\\\') {\n                    // This is an identifier with no special handling. Use the\n                    // Unicode value\n                    if (\n                        typeof atom.body === 'string' &&\n                        atom.body.charCodeAt(0) > 255\n                    ) {\n                        result =\n                            '&#x' +\n                            (\n                                '000000' + atom.body.charCodeAt(0).toString(16)\n                            ).substr(-4) +\n                            ';';\n                    } else if (typeof atom.body === 'string') {\n                        result = atom.body.charAt(0);\n                    } else {\n                        result = atom.body;\n                    }\n                }\n                const tag = /\\d/.test(result) ? 'mn' : 'mi';\n                result =\n                    '<' +\n                    tag +\n                    variant +\n                    makeID(atom.id, options) +\n                    '>' +\n                    xmlEscape(result) +\n                    '</' +\n                    tag +\n                    '>';\n                break;\n            }\n            case 'mbin':\n            case 'mrel':\n            case 'textord':\n            case 'minner':\n                if (command && SPECIAL_IDENTIFIERS[command]) {\n                    // Some 'textord' are actually identifiers. Check them here.\n                    result =\n                        '<mi' +\n                        makeID(atom.id, options) +\n                        '>' +\n                        SPECIAL_IDENTIFIERS[command] +\n                        '</mi>';\n                } else if (command && SPECIAL_OPERATORS[command]) {\n                    result =\n                        '<mo' +\n                        makeID(atom.id, options) +\n                        '>' +\n                        SPECIAL_OPERATORS[command] +\n                        '</mo>';\n                } else {\n                    result = toMo(atom, options);\n                }\n                break;\n\n            case 'mpunct':\n                result =\n                    '<mo separator=\"true\"' +\n                    makeID(atom.id, options) +\n                    '>' +\n                    (SPECIAL_OPERATORS[command] || command) +\n                    '</mo>';\n                break;\n\n            case 'mop':\n                if (atom.body !== '\\u200b') {\n                    // Not ZERO-WIDTH\n                    result = '<mo' + makeID(atom.id, options) + '>';\n                    if (command === '\\\\operatorname') {\n                        result += atom.body;\n                    } else {\n                        result += command || atom.body;\n                    }\n                    result += '</mo>';\n                }\n                break;\n\n            case 'mathstyle':\n                // TODO: mathstyle is a switch. Need to figure out its scope to properly wrap it around a <mstyle> tag\n                // if (atom.mathstyle === 'displaystyle') {\n                //     result += '<mstyle displaystyle=\"true\">';\n                //     result += '</mstyle>';\n                // } else {\n                //     result += '<mstyle displaystyle=\"false\">';\n                //     result += '</mstyle>';\n                // };\n                break;\n\n            case 'box':\n                result = '<menclose notation=\"box\"';\n                if (atom.backgroundcolor) {\n                    result +=\n                        ' mathbackground=\"' +\n                        stringToColor(atom.backgroundcolor) +\n                        '\"';\n                }\n                result +=\n                    makeID(atom.id, options) +\n                    '>' +\n                    toMathML(atom.body, 0, 0, options).mathML +\n                    '</menclose>';\n                break;\n\n            case 'spacing':\n                result += '<mspace width=\"' + (SPACING[command] || 0) + 'em\"/>';\n                break;\n\n            case 'enclose':\n                result = '<menclose notation=\"';\n                for (const notation in atom.notation) {\n                    if (\n                        Object.prototype.hasOwnProperty.call(\n                            atom.notation,\n                            notation\n                        ) &&\n                        atom.notation[notation]\n                    ) {\n                        result += sep + notation;\n                        sep = ' ';\n                    }\n                }\n                result +=\n                    makeID(atom.id, options) +\n                    '\">' +\n                    toMathML(atom.body, 0, 0, options).mathML +\n                    '</menclose>';\n                break;\n\n            case 'space':\n                result += '&nbsp;';\n                break;\n            default:\n                console.log(\n                    'In conversion to MathML, unknown type : ' + atom.type\n                );\n        }\n    }\n    return result;\n}\n\nexport function atomsToMathML(\n    atoms: Atom | Atom[],\n    options: MathfieldConfig\n): string {\n    return toMathML(atoms, 0, 0, options).mathML;\n}\n","import { decompose } from '../core/atom-utils';\nimport { makeSpan, makeStruts } from '../core/span';\nimport { MATHSTYLES } from '../core/mathstyle';\n\nimport { pathToString } from './path';\nimport {\n    selectionIsCollapsed,\n    getAnchor,\n    forEachSelected,\n} from './model-selection';\nimport { getSelectionBounds, isValidMathfield } from './mathfield-utils';\nimport type { MathfieldPrivate } from './mathfield-class';\n\nimport { atomsToMathML } from '../addons/math-ml';\n\n/*\n * Return a hash (32-bit integer) representing the content of the mathfield\n * (but not the selection state)\n */\nfunction hash(latex: string): number {\n    let result = 0;\n    for (let i = 0; i < latex.length; i++) {\n        result = result * 31 + latex.charCodeAt(i);\n        result = result | 0; // Force it to a 32-bit number\n    }\n    return Math.abs(result);\n}\n\nexport function requestUpdate(mathfield: MathfieldPrivate): void {\n    if (!mathfield.dirty) {\n        mathfield.dirty = true;\n        requestAnimationFrame(() => {\n            if (isValidMathfield(mathfield) && mathfield.dirty) {\n                render(mathfield);\n            }\n        });\n    }\n}\n\n/**\n * Lay-out the mathfield and generate the DOM.\n *\n * This is usually done automatically, but if the font-size, or other geometric\n * attributes are modified, outside of MathLive, this function may need to be\n * called explicitly.\n *\n */\nexport function render(\n    mathfield: MathfieldPrivate,\n    renderOptions?: { forHighlighting?: boolean }\n): void {\n    renderOptions = renderOptions ?? {};\n    mathfield.dirty = false;\n    //\n    // 1. Stop and reset read aloud state\n    //\n    if (!window['mathlive']) {\n        window['mathlive'] = {};\n    }\n    //\n    // 2. Validate selection\n    //\n    if (!getAnchor(mathfield.model)) {\n        console.warn(\n            'Invalid selection, resetting it. ' +\n                pathToString(mathfield.model.path)\n        );\n        mathfield.model.path = [{ relation: 'body', offset: 0 }];\n    }\n    //\n    // 3. Update selection state and blinking cursor (caret)\n    //\n    mathfield.model.root.forEach((a) => {\n        a.caret = '';\n        a.isSelected = false;\n        a.containsCaret = false;\n    });\n    const hasFocus = mathfield.$hasFocus();\n    if (selectionIsCollapsed(mathfield.model)) {\n        getAnchor(mathfield.model).caret =\n            hasFocus && !mathfield.config.readOnly ? mathfield.mode : '';\n    } else {\n        forEachSelected(mathfield.model, (a) => {\n            a.isSelected = true;\n        });\n    }\n\n    if (hasFocus && !mathfield.config.readOnly) {\n        let ancestor = mathfield.model.ancestor(1);\n        let i = 1;\n        let done = false;\n        while (ancestor && !done) {\n            if (ancestor.type === 'surd' || ancestor.type === 'leftright') {\n                ancestor.containsCaret = true;\n                done = true;\n            }\n            i += 1;\n            ancestor = mathfield.model.ancestor(i);\n        }\n    }\n    //\n    // 4. Create spans corresponding to the updated mathlist\n    //\n    const spans = decompose(\n        {\n            mathstyle: MATHSTYLES.displaystyle,\n            letterShapeStyle: mathfield.config.letterShapeStyle,\n            atomIdsSettings: {\n                // Using the hash as a seed for the ID\n                // keeps the IDs the same until the content of the field changes.\n                seed: hash(mathfield.model.root.toLatex(false)),\n                // The `groupNumbers` flag indicates that extra spans should be generated\n                // to represent group of atoms, for example, a span to group\n                // consecutive digits to represent a number.\n                groupNumbers: renderOptions.forHighlighting,\n            },\n            smartFence: mathfield.config.smartFence,\n            macros: mathfield.config.macros,\n        },\n        mathfield.model.root\n    );\n    //\n    // 5. Construct struts around the spans\n    //\n    const base = makeSpan(spans, 'ML__base');\n    base.attributes = {\n        // Sometimes Google Translate kicks in an attempts to 'translate' math\n        // This doesn't work very well, so turn off translate\n        translate: 'no',\n        // Hint to screen readers to not attempt to read this span\n        // They should use instead the 'aria-label' below.\n        'aria-hidden': 'true',\n    };\n    const wrapper = makeStruts(base, 'ML__mathlive');\n\n    //\n    // 6. Generate markup and accessible node\n    //\n    mathfield.field.innerHTML = mathfield.config.createHTML(\n        wrapper.toMarkup(0, mathfield.config.horizontalSpacingScale)\n    );\n    mathfield.field.classList.toggle(\n        'ML__focused',\n        hasFocus && !mathfield.config.readOnly\n    );\n\n    mathfield.accessibleNode.innerHTML = mathfield.config.createHTML(\n        '<math xmlns=\"http://www.w3.org/1998/Math/MathML\">' +\n            atomsToMathML(mathfield.model.root, mathfield.config) +\n            '</math>'\n    );\n    //mathfield.ariaLiveText.textContent = \"\";\n\n    //\n    // 7. Calculate selection rectangle\n    //\n    const selectionRect = getSelectionBounds(mathfield.field);\n    if (selectionRect) {\n        const selectionElement = document.createElement('div');\n        selectionElement.classList.add('ML__selection');\n        selectionElement.style.position = 'absolute';\n        selectionElement.style.left = selectionRect.left + 'px';\n        selectionElement.style.top = selectionRect.top + 'px';\n        selectionElement.style.width =\n            Math.ceil(selectionRect.right - selectionRect.left) + 'px';\n        selectionElement.style.height =\n            Math.ceil(selectionRect.bottom - selectionRect.top - 1) + 'px';\n        mathfield.field.insertBefore(\n            selectionElement,\n            mathfield.field.childNodes[0]\n        );\n    }\n}\n","import { isArray } from '../common/types';\n\nimport { hidePopover, showPopoverWithLatex } from './popover'; // @revisit\nimport { suggest } from '../core/definitions';\nimport type { MathfieldPrivate } from './mathfield-class';\nimport { selectionIsCollapsed } from './model-selection';\nimport { extractCommandStringAroundInsertionPoint } from './model-command-mode';\nimport { requestUpdate } from './mathfield-render';\nimport { SelectorPrivate, CommandRegistry } from './commands-definitions';\nexport { SelectorPrivate };\n\n// @revisit: move to mathfield.vibrate()\nexport const HAPTIC_FEEDBACK_DURATION = 3; // in ms\n\ninterface RegisterCommandOptions {\n    target: 'model' | 'mathfield' | 'virtual-keyboard';\n    category?:\n        | 'delete'\n        | 'edit' // Changes the content\n        | 'array-edit' // Changes the content\n        | 'autocomplete'\n        | 'clipboard'\n        | 'scroll'\n        | 'selection-anchor'\n        | 'selection-extend'\n        | 'speech'\n        | 'virtual-keyboard'\n        | '';\n    audioFeedback?: string;\n    canUndo?: boolean;\n    changeContent?: boolean; // To update popover\n    changeSelection?: boolean; // To update inline shortcut buffer\n}\n\nconst COMMANDS: CommandRegistry<RegisterCommandOptions> = {};\n\nexport function register(\n    commands: { [selector: string]: (...args: any[]) => boolean },\n    options?: RegisterCommandOptions\n): void {\n    options = options ?? { target: 'mathfield', canUndo: false };\n\n    Object.keys(commands).forEach((selector) => {\n        console.assert(\n            !COMMANDS[selector],\n            'Selector already defined: ',\n            selector\n        );\n        COMMANDS[selector] = { ...options, fn: commands[selector] };\n    });\n}\n\nexport function perform(\n    mathfield: MathfieldPrivate,\n    command: SelectorPrivate | any[]\n): boolean {\n    if (!command) {\n        return false;\n    }\n\n    let selector: SelectorPrivate;\n    let args: string[] = [];\n    let handled = false;\n    let dirty = false;\n\n    if (isArray(command)) {\n        selector = command[0] as SelectorPrivate;\n        args = command.slice(1);\n    } else {\n        selector = command;\n    }\n\n    // Convert kebab case (like-this) to camel case (likeThis).\n    selector = selector.replace(/-\\w/g, (m) =>\n        m[1].toUpperCase()\n    ) as SelectorPrivate;\n    if (COMMANDS[selector]?.target === 'model') {\n        if (/^(delete|transpose|add)/.test(selector)) {\n            mathfield.resetKeystrokeBuffer();\n        }\n        if (\n            /^(delete|transpose|add)/.test(selector) &&\n            mathfield.mode !== 'command'\n        ) {\n            // Update the undo state to account for the current selection\n            mathfield.popUndoStack();\n            mathfield.snapshot();\n        }\n        COMMANDS[selector].fn(mathfield.model, ...args);\n        if (\n            /^(delete|transpose|add)/.test(selector) &&\n            mathfield.mode !== 'command'\n        ) {\n            mathfield.snapshot();\n        }\n        if (/^(delete)/.test(selector) && mathfield.mode === 'command') {\n            const command = extractCommandStringAroundInsertionPoint(\n                mathfield.model\n            );\n            const suggestions = suggest(command);\n            if (suggestions.length === 0) {\n                hidePopover(mathfield);\n            } else {\n                showPopoverWithLatex(\n                    mathfield,\n                    suggestions[0].match,\n                    suggestions.length > 1\n                );\n            }\n        }\n        dirty = true;\n        handled = true;\n    } else if (COMMANDS[selector]) {\n        dirty = COMMANDS[selector].fn(mathfield, ...args);\n        handled = true;\n    } else {\n        throw Error('Unknown command \"' + selector + '\"');\n    }\n    // If the command changed the selection so that it is no longer\n    // collapsed, or if it was an editing command, reset the inline\n    // shortcut buffer and the user style\n    if (\n        !selectionIsCollapsed(mathfield.model) ||\n        /^(transpose|paste|complete|((moveToNextChar|moveToPreviousChar|extend).*))_$/.test(\n            selector\n        )\n    ) {\n        mathfield.resetKeystrokeBuffer();\n        mathfield.style = {};\n    }\n    // Render the mathlist\n    if (dirty) {\n        requestUpdate(mathfield);\n    }\n    return handled;\n}\n\n/**\n * Perform a command, but:\n * * focus the mathfield\n * * provide haptic and audio feedback\n * This is used by the virtual keyboard when command keys (delete, arrows, etc..)\n * are pressed.\n */\n\nexport function performWithFeedback(\n    mathfield: MathfieldPrivate,\n    selector: SelectorPrivate\n): boolean {\n    // @revisit: have a registry of commands -> sound\n    mathfield.$focus();\n    if (mathfield.config.keypressVibration && navigator?.vibrate) {\n        navigator.vibrate(HAPTIC_FEEDBACK_DURATION);\n    }\n    // Convert kebab case to camel case.\n    selector = selector.replace(/-\\w/g, (m) =>\n        m[1].toUpperCase()\n    ) as SelectorPrivate;\n    if (\n        selector === 'moveToNextPlaceholder' ||\n        selector === 'moveToPreviousPlaceholder' ||\n        selector === 'complete'\n    ) {\n        if (mathfield.returnKeypressSound) {\n            mathfield.returnKeypressSound.load();\n            mathfield.returnKeypressSound\n                .play()\n                .catch((err) => console.warn(err));\n        } else if (mathfield.keypressSound) {\n            mathfield.keypressSound.load();\n            mathfield.keypressSound.play().catch((err) => console.warn(err));\n        }\n    } else if (\n        selector === 'deletePreviousChar' ||\n        selector === 'deleteNextChar' ||\n        selector === 'deletePreviousWord' ||\n        selector === 'deleteNextWord' ||\n        selector === 'deleteToGroupStart' ||\n        selector === 'deleteToGroupEnd' ||\n        selector === 'deleteToMathFieldStart' ||\n        selector === 'deleteToMathFieldEnd'\n    ) {\n        if (mathfield.deleteKeypressSound) {\n            mathfield.deleteKeypressSound.load();\n            mathfield.deleteKeypressSound\n                .play()\n                .catch((err) => console.warn(err));\n        } else if (mathfield.keypressSound) {\n            mathfield.keypressSound.load();\n            mathfield.keypressSound.play().catch((err) => console.warn(err));\n        }\n    } else if (mathfield.keypressSound) {\n        mathfield.keypressSound.load();\n        mathfield.keypressSound.play().catch((err) => console.warn(err));\n    }\n    return mathfield.$perform(selector);\n}\n\nregister({\n    performWithFeedback: (\n        mathfield: MathfieldPrivate,\n        command: SelectorPrivate\n    ): boolean => performWithFeedback(mathfield, command),\n});\n","import { isArray } from '../common/types';\n\nimport { getEnvironmentDefinition } from '../core/definitions';\nimport { Atom } from '../core/atom';\nimport type { ModelPrivate } from './model-class';\nimport { contentDidChange, contentWillChange } from './model-listeners';\nimport { getAnchorMode } from './model-selection';\nimport { register as registerCommand } from './commands';\nimport { arrayIndex, arrayColRow, arrayCell } from './model-array-utils';\nimport { Style } from '../public/core';\nexport * from './model-array-utils';\n\n/**\n * Join all the cells at the indicated row into a single mathlist\n */\nexport function arrayJoinColumns(\n    row: Atom[][],\n    separator = ',',\n    style?: Style\n): Atom[] {\n    if (!row) return [];\n    let result: Atom[] = [];\n    let sep: Atom;\n    for (let cell of row) {\n        if (cell && cell.length > 0 && cell[0].type === 'first') {\n            // Remove the 'first' atom, if present\n            cell = cell.slice(1);\n        }\n        if (cell && cell.length > 0) {\n            if (sep) {\n                result.push(sep);\n            } else {\n                sep = new Atom('math', 'mpunct', separator, style);\n            }\n            result = result.concat(cell);\n        }\n    }\n    return result;\n}\n\n/**\n * Join all the rows into a single atom list\n */\nexport function arrayJoinRows(\n    array: Atom[][][],\n    separators = [';', ','],\n    style?: Style\n): Atom[] {\n    let result: Atom[] = [];\n    let sep: Atom;\n    for (const row of array) {\n        if (sep) {\n            result.push(sep);\n        } else {\n            sep = new Atom('math', 'mpunct', separators[0], style);\n        }\n        result = result.concat(arrayJoinColumns(row, separators[1]));\n    }\n    return result;\n}\n\n/**\n * Return the number of non-empty cells in that column\n */\nexport function arrayColumnCellCount(array: Atom[][][], col: number): number {\n    let result = 0;\n    const colRow = { col: col, row: 0 };\n    while (colRow.row < array.length) {\n        const cell = arrayCell(array, colRow);\n        if (cell && cell.length > 0) {\n            let cellLen = cell.length;\n            if (cell[0].type === 'first') cellLen -= 1;\n            if (cellLen > 0) {\n                result += 1;\n            }\n        }\n        colRow.row += 1;\n    }\n    return result;\n}\n\n/**\n * Remove the indicated column from the array\n */\nexport function arrayRemoveColumn(array: Atom[][][], col: number): void {\n    let row = 0;\n    while (row < array.length) {\n        if (array[row][col]) {\n            array[row].splice(col, 1);\n        }\n        row += 1;\n    }\n}\n\n/**\n * Remove the indicated row from the array\n */\nexport function arrayRemoveRow(array: Atom[][][], row: number): void {\n    array.splice(row, 1);\n}\n\n/**\n * Return the first non-empty cell, row by row\n */\nexport function arrayFirstCellByRow(array: Atom[][][]): string {\n    const colRow = { col: 0, row: 0 };\n    while (colRow.row < array.length && !arrayCell(array, colRow)) {\n        colRow.row += 1;\n    }\n    return arrayCell(array, colRow) ? 'cell' + arrayIndex(array, colRow) : '';\n}\n\n/**\n * Internal primitive to add a column/row in a matrix\n */\nfunction addCell(\n    model: ModelPrivate,\n    where: 'after row' | 'before row' | 'after column' | 'before column'\n): void {\n    // This command is only applicable if we're in an array\n    const parent = model.parent();\n    if (parent && parent.type === 'array' && isArray(parent.array)) {\n        const relation = model.relation();\n        if (parent.array) {\n            const colRow = arrayColRow(parent.array, relation);\n\n            if (where === 'after row' || where === 'before row') {\n                // Insert a row\n                colRow.col = 0;\n                colRow.row = colRow.row + (where === 'after row' ? 1 : 0);\n\n                parent.array.splice(colRow.row, 0, [[]]);\n            } else {\n                // Insert a column\n                colRow.col += where === 'after column' ? 1 : 0;\n                parent.array[colRow.row].splice(colRow.col, 0, []);\n            }\n\n            const cellIndex = arrayIndex(parent.array, colRow);\n\n            model.path.pop();\n            model.path.push({\n                relation: 'cell' + cellIndex.toString(),\n                offset: 0,\n            });\n            model.insertFirstAtom();\n        }\n    }\n}\n\nexport function convertParentToArray(model: ModelPrivate): void {\n    const parent = model.parent();\n    if (parent.type === 'leftright') {\n        parent.type = 'array';\n        const envName =\n            { '(': 'pmatrix', '\\\\lbrack': 'bmatrix', '\\\\lbrace': 'cases' }[\n                parent.leftDelim\n            ] ?? 'matrix';\n        const env = getEnvironmentDefinition(envName);\n        const array = [[parent.body as Atom[]]];\n        Object.assign(parent, env.parser(envName, [], array));\n        parent.mode = getAnchorMode(model);\n        parent.environmentName = envName;\n        parent.array = array;\n        parent.rowGaps = [0];\n        delete parent.body;\n        model.path[model.path.length - 1].relation = 'cell0';\n    }\n    // Note: could also be a group, or we could be a subscript or an\n    // underscript (for multi-valued conditions on a \\sum, for example)\n    // Or if at root, this could be a 'align*' environment\n}\n\nexport function addRowAfter(model: ModelPrivate): boolean {\n    contentWillChange(model);\n    convertParentToArray(model);\n    addCell(model, 'after row');\n    contentDidChange(model);\n    return true;\n}\n\nexport function addRowBefore(model: ModelPrivate): boolean {\n    contentWillChange(model);\n    convertParentToArray(model);\n    addCell(model, 'before row');\n    contentDidChange(model);\n    return true;\n}\nexport function addColumnAfter(model: ModelPrivate): boolean {\n    contentWillChange(model);\n    convertParentToArray(model);\n    addCell(model, 'after column');\n    contentDidChange(model);\n    return true;\n}\n\nexport function addColumnBefore(model: ModelPrivate): boolean {\n    contentWillChange(model);\n    convertParentToArray(model);\n    addCell(model, 'before column');\n    contentDidChange(model);\n    return true;\n}\n\nregisterCommand(\n    {\n        addRowAfter: addRowAfter,\n        addColumnAfter: addColumnAfter,\n        addRowBefore: addRowBefore,\n        addColumnBefore: addColumnBefore,\n    },\n    { target: 'model', category: 'array-edit' }\n);\n","import type { ModelPrivate } from './model-class';\nimport { removeSuggestion, invalidateVerbatimLatex } from './model-utils';\nimport {\n    selectionWillChange,\n    selectionDidChange,\n    contentDidChange,\n    contentWillChange,\n} from './model-listeners';\nimport { setSelection, move, selectionIsCollapsed } from './model-selection';\nimport {\n    arrayFirstCellByRow,\n    arrayColRow,\n    arrayAdjustRow,\n    arrayIndex,\n    arrayJoinColumns,\n    arrayRemoveRow,\n    arrayColumnCellCount,\n    arrayRemoveColumn,\n    arrayJoinRows,\n} from './model-array';\n\n/**\n * @param dir If the selection is not collapsed, and dir is\n * negative, delete backwards, starting with the anchor atom.\n * That is, delete(-1) will delete only the anchor atom.\n * If dir = 0, delete only if the selection is not collapsed\n */\nfunction delete_(model: ModelPrivate, dir: 0 | -1 | 1 = 0): void {\n    // Dispatch notifications\n    contentWillChange(model);\n    selectionWillChange(model);\n    const contentWasChanging = model.suppressChangeNotifications;\n    model.suppressChangeNotifications = true;\n\n    dir = dir < 0 ? -1 : dir > 0 ? +1 : dir;\n\n    removeSuggestion(model);\n\n    if (model.parent().array) {\n        if (dir < 0 && model.startOffset() === 0) {\n            const array = model.parent().array;\n            if (arrayFirstCellByRow(array) === model.relation()) {\n                // (1) First cell:\n                // delete array, replace it with linearized content\n                const atoms = arrayJoinRows(array);\n                model.path.pop();\n                model.siblings().splice(model.anchorOffset(), 1, ...atoms);\n                setSelection(model, model.anchorOffset() - 1, atoms.length);\n            } else {\n                const colRow = arrayColRow(array, model.relation());\n                if (colRow.col === 0) {\n                    // (2) First (non-empty) column (but not first row):\n\n                    // Move to the end of the last cell of the previous row\n                    const dest = arrayAdjustRow(array, colRow, -1);\n                    dest.col = array[dest.row].length - 1;\n\n                    model.path[model.path.length - 1].relation =\n                        'cell' + arrayIndex(array, dest);\n                    const destLength = array[dest.row][dest.col].length;\n\n                    // (2.1) Linearize it and merge it with last cell of previous row\n                    // (note that atoms could be empty if there are no non-empty\n                    // cells left in the row)\n                    const atoms = arrayJoinColumns(array[colRow.row]);\n                    array[dest.row][dest.col] = array[dest.row][\n                        dest.col\n                    ].concat(atoms);\n                    setSelection(model, destLength - 1, atoms.length);\n\n                    // (2.2) Remove row\n                    arrayRemoveRow(array, colRow.row);\n                } else {\n                    // (3) Non-first column\n                    // (3.1) If column is empty, remove it\n                    if (arrayColumnCellCount(array, colRow.col) === 0) {\n                        arrayRemoveColumn(array, colRow.col);\n                        colRow.col -= 1;\n                        model.path[model.path.length - 1].relation =\n                            'cell' + arrayIndex(array, colRow);\n                        const destCell = array[colRow.row][colRow.col];\n                        setSelection(model, destCell.length - 1, 0);\n                    }\n                    // (3.2) merge cell with cell in previous column\n                }\n            }\n\n            // Dispatch notifications\n            model.suppressChangeNotifications = contentWasChanging;\n            selectionDidChange(model);\n            contentDidChange(model);\n            return;\n        }\n    }\n\n    const siblings = model.siblings();\n\n    if (!selectionIsCollapsed(model)) {\n        // There is a selection extent. Delete all the atoms within it.\n        const first = model.startOffset() + 1;\n        const last = model.endOffset() + 1;\n\n        model.announce('deleted', null, siblings.slice(first, last));\n        siblings.splice(first, last - first);\n\n        // Adjust the anchor\n        setSelection(model, first - 1);\n    } else {\n        const anchorOffset = model.anchorOffset();\n        if (dir < 0) {\n            if (anchorOffset !== 0) {\n                // We're not at the begining of the sibling list.\n                // If the previous sibling is a compound (fractions, group),\n                // just move into it, otherwise delete it\n                const sibling = model.sibling(0);\n                if (sibling.type === 'leftright') {\n                    sibling.rightDelim = '?';\n                    move(model, -1);\n                } else if (\n                    !sibling.captureSelection &&\n                    /^(group|array|genfrac|surd|leftright|overlap|overunder|box|mathstyle|sizing)$/.test(\n                        sibling.type\n                    )\n                ) {\n                    move(model, -1);\n                } else {\n                    model.announce(\n                        'deleted',\n                        null,\n                        siblings.slice(anchorOffset, anchorOffset + 1)\n                    );\n                    siblings.splice(anchorOffset, 1);\n                    setSelection(model, anchorOffset - 1);\n                }\n            } else {\n                // We're at the beginning of the sibling list.\n                // Delete what comes before\n                const relation = model.relation();\n                if (relation === 'superscript' || relation === 'subscript') {\n                    const supsub = model\n                        .parent()\n                        [relation].filter(\n                            (atom) =>\n                                atom.type !== 'placeholder' &&\n                                atom.type !== 'first'\n                        );\n                    model.parent()[relation] = null;\n                    model.path.pop();\n                    // Array.prototype.splice.apply(\n                    //     model.siblings(),\n                    //     [model.anchorOffset(), 0].concat(supsub)\n                    // );\n                    // @revisit\n                    model.siblings().splice(model.anchorOffset(), 0, ...supsub);\n                    setSelection(model, model.anchorOffset() - 1);\n                    model.announce('deleted: ' + relation);\n                } else if (relation === 'denom') {\n                    // Fraction denominator\n                    const numer = model\n                        .parent()\n                        .numer.filter(\n                            (atom) =>\n                                atom.type !== 'placeholder' &&\n                                atom.type !== 'first'\n                        );\n                    const denom = model\n                        .parent()\n                        .denom.filter(\n                            (atom) =>\n                                atom.type !== 'placeholder' &&\n                                atom.type !== 'first'\n                        );\n                    model.path.pop();\n                    // Array.prototype.splice.apply(\n                    //     model.siblings(),\n                    //     [model.anchorOffset(), 1].concat(denom)\n                    // );\n                    // @revisit\n                    model.siblings().splice(model.anchorOffset(), 1, ...denom);\n                    // Array.prototype.splice.apply(\n                    //     model.siblings(),\n                    //     [model.anchorOffset(), 0].concat(numer)\n                    // );\n                    // @revisit\n                    model.siblings().splice(model.anchorOffset(), 0, ...numer);\n                    setSelection(\n                        model,\n                        model.anchorOffset() + numer.length - 1\n                    );\n                    model.announce('deleted: denominator');\n                } else if (relation === 'body') {\n                    const body = model\n                        .siblings()\n                        .filter((atom) => atom.type !== 'placeholder');\n                    if (model.path.length > 1) {\n                        body.shift(); // Remove the 'first' atom\n                        model.path.pop();\n                        // Array.prototype.splice.apply(\n                        //     model.siblings(),\n                        //     [model.anchorOffset(), 1].concat(body)\n                        // );\n                        // @revisit\n                        model\n                            .siblings()\n                            .splice(model.anchorOffset(), 1, ...body);\n                        setSelection(model, model.anchorOffset() - 1);\n                        model.announce('deleted: root');\n                    }\n                } else {\n                    move(model, -1);\n                    deleteChar(model, -1);\n                }\n            }\n        } else if (dir > 0) {\n            if (anchorOffset !== siblings.length - 1) {\n                if (\n                    /^(group|array|genfrac|surd|leftright|overlap|overunder|box|mathstyle|sizing)$/.test(\n                        model.sibling(1).type\n                    )\n                ) {\n                    move(model, +1);\n                } else {\n                    model.announce(\n                        'deleted',\n                        null,\n                        siblings.slice(anchorOffset + 1, anchorOffset + 2)\n                    );\n                    siblings.splice(anchorOffset + 1, 1);\n                }\n            } else {\n                // We're at the end of the sibling list, delete what comes next\n                const relation = model.relation();\n                if (relation === 'numer') {\n                    const numer = model\n                        .parent()\n                        .numer.filter(\n                            (atom) =>\n                                atom.type !== 'placeholder' &&\n                                atom.type !== 'first'\n                        );\n                    const denom = model\n                        .parent()\n                        .denom.filter(\n                            (atom) =>\n                                atom.type !== 'placeholder' &&\n                                atom.type !== 'first'\n                        );\n                    model.path.pop();\n                    // Array.prototype.splice.apply(\n                    //     model.siblings(),\n                    //     [model.anchorOffset(), 1].concat(denom)\n                    // );\n                    // Array.prototype.splice.apply(\n                    //     model.siblings(),\n                    //     [model.anchorOffset(), 0].concat(numer)\n                    // );\n                    // @revisit\n                    model.siblings().splice(model.anchorOffset(), 1, ...denom);\n                    model.siblings().splice(model.anchorOffset(), 0, ...numer);\n                    setSelection(\n                        model,\n                        model.anchorOffset() + numer.length - 1\n                    );\n                    model.announce('deleted: numerator');\n                } else {\n                    move(model, 1);\n                    deleteChar(model, -1);\n                }\n            }\n        }\n    }\n\n    // Something has been deleted and the parent latex is no longer valid\n    invalidateVerbatimLatex(model);\n\n    // Dispatch notifications\n    model.suppressChangeNotifications = contentWasChanging;\n    selectionDidChange(model);\n    contentDidChange(model);\n}\n\n/**\n * Delete sibling atoms\n */\nexport function deleteAtoms(model: ModelPrivate, count: number): void {\n    if (count > 0) {\n        model.siblings().splice(model.anchorOffset() + 1, count);\n    } else {\n        model.siblings().splice(model.anchorOffset() + count + 1, -count);\n        setSelection(model, model.anchorOffset() + count);\n    }\n}\n\n/**\n * Delete the selection, or multiple characters\n */\nexport function deleteChar(model: ModelPrivate, count = 0): boolean {\n    if (count === 0) {\n        delete_(model, 0);\n    } else if (count > 0) {\n        while (count > 0) {\n            delete_(model, +1);\n            count--;\n        }\n    } else {\n        while (count < 0) {\n            delete_(model, -1);\n            count++;\n        }\n    }\n    return true;\n}\n","import type { InlineShortcutDefinition } from '../public/config';\n\n/**\n * These shortcut strings are replaced with the corresponding LaTeX expression\n * without requiring an escape sequence or command.\n */\nexport const INLINE_SHORTCUTS: {\n    [shorcut: string]: InlineShortcutDefinition;\n} = {\n    // Primes\n    \"''\": { mode: 'math', value: '^{\\\\doubleprime}' },\n\n    // Greek letters\n    alpha: '\\\\alpha',\n    delta: '\\\\delta',\n    Delta: '\\\\Delta',\n    pi: { mode: 'math', value: '\\\\pi' },\n    'pi ': { mode: 'text', value: '\\\\pi ' },\n    Pi: { mode: 'math', value: '\\\\Pi' },\n    theta: '\\\\theta',\n    Theta: '\\\\Theta',\n\n    // Letter-like\n    ii: {\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\imaginaryI',\n    },\n    jj: {\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\imaginaryJ',\n    },\n    ee: {\n        mode: 'math',\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\exponentialE',\n    },\n\n    nabla: { mode: 'math', value: '\\\\nabla' },\n    grad: { mode: 'math', value: '\\\\nabla' },\n    del: { mode: 'math', value: '\\\\partial' },\n\n    '\\u221e': '\\\\infty', // @TODO: doesn't work\n    // '&infin;': '\\\\infty',\n    // '&#8734;': '\\\\infty',\n    oo: {\n        mode: 'math',\n        after:\n            'nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space',\n        value: '\\\\infty',\n    },\n\n    // Big operators\n    '∑': { mode: 'math', value: '\\\\sum' },\n    sum: { mode: 'math', value: '\\\\sum_{#?}^{#?}' },\n    prod: { mode: 'math', value: '\\\\prod_{#?}^{#?}' },\n    sqrt: { mode: 'math', value: '\\\\sqrt' },\n    // '∫':                    '\\\\int',             // There's a alt-B command for this\n    '∆': { mode: 'math', value: '\\\\differentialD' }, // @TODO: is \\\\diffD most common?\n    '∂': { mode: 'math', value: '\\\\differentialD' },\n\n    // Functions\n    arcsin: { mode: 'math', value: '\\\\arcsin' },\n    arccos: { mode: 'math', value: '\\\\arccos' },\n    arctan: { mode: 'math', value: '\\\\arctan' },\n    sin: { mode: 'math', value: '\\\\sin' },\n    sinh: { mode: 'math', value: '\\\\sinh' },\n    cos: { mode: 'math', value: '\\\\cos' },\n    cosh: { mode: 'math', value: '\\\\cosh' },\n    tan: { mode: 'math', value: '\\\\tan' },\n    tanh: { mode: 'math', value: '\\\\tanh' },\n    sec: { mode: 'math', value: '\\\\sec' },\n    csc: { mode: 'math', value: '\\\\csc' },\n    cot: { mode: 'math', value: '\\\\cot' },\n\n    log: { mode: 'math', value: '\\\\log' },\n    ln: { mode: 'math', value: '\\\\ln' },\n    exp: { mode: 'math', value: '\\\\exp' },\n    lim: { mode: 'math', value: '\\\\lim_{#?}' },\n\n    // Differentials\n    // According to ISO31/XI (ISO 80000-2), differentials should be upright\n    dx: '\\\\differentialD x',\n    dy: '\\\\differentialD y',\n    dt: '\\\\differentialD t',\n\n    // Logic\n    AA: { mode: 'math', value: '\\\\forall' },\n    EE: { mode: 'math', value: '\\\\exists' },\n    '!EE': { mode: 'math', value: '\\\\nexists' },\n    '&&': { mode: 'math', value: '\\\\land' },\n    // The shortcut for the greek letter \"xi\" is interfering with \"x in\"\n    xin: {\n        mode: 'math',\n        after: 'nothing+text+relop+punct+openfence+space',\n        value: 'x \\\\in',\n    },\n    in: {\n        mode: 'math',\n        after: 'nothing+letter+closefence',\n        value: '\\\\in',\n    },\n    '!in': { mode: 'math', value: '\\\\notin' },\n\n    // Sets\n    NN: '\\\\N', // Natural numbers\n    ZZ: '\\\\Z', // Integers\n    QQ: '\\\\Q', // Rational numbers\n    RR: '\\\\R', // Real numbers\n    CC: '\\\\C', // Complex numbers\n    PP: '\\\\P', // Prime numbers\n\n    // Operators\n    xx: '\\\\times',\n    '+-': '\\\\pm',\n\n    // Relational operators\n    '!=': '\\\\ne',\n    '>=': '\\\\ge',\n    '<=': '\\\\le',\n    '<<': '\\\\ll',\n    '>>': '\\\\gg',\n    '~~': '\\\\approx',\n\n    // More operators\n    '≈': '\\\\approx',\n    '?=': '\\\\questeq',\n    '÷': '\\\\div',\n    '¬': '\\\\neg',\n    ':=': '\\\\coloneq',\n    '::': '\\\\Colon',\n\n    // Fences\n    '(:': '\\\\langle',\n    ':)': '\\\\rangle',\n\n    // More Greek letters\n    beta: '\\\\beta',\n    chi: '\\\\chi',\n    epsilon: '\\\\epsilon',\n    varepsilon: '\\\\varepsilon',\n    eta: {\n        mode: 'math',\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\eta',\n    },\n    'eta ': {\n        mode: 'text',\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\eta ',\n    },\n    gamma: '\\\\gamma',\n    Gamma: '\\\\Gamma',\n    iota: '\\\\iota',\n    kappa: '\\\\kappa',\n    lambda: '\\\\lambda',\n    Lambda: '\\\\Lambda',\n    mu: {\n        mode: 'math',\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\mu',\n    },\n    'mu ': {\n        mode: 'text',\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\mu ',\n    },\n    nu: {\n        mode: 'math',\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\nu',\n    },\n    'nu ': {\n        mode: 'text',\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\nu ',\n    },\n    µ: '\\\\mu', // @TODO: or micro?\n    phi: {\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\phi',\n    },\n    Phi: {\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\Phi',\n    },\n    varphi: '\\\\varphi',\n    psi: {\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\psi',\n    },\n    Psi: {\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\Psi',\n    },\n    rho: {\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\rho',\n    },\n    sigma: '\\\\sigma',\n    Sigma: '\\\\Sigma',\n    tau: {\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\tau',\n    },\n    vartheta: '\\\\vartheta',\n    upsilon: '\\\\upsilon',\n    xi: {\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\xi',\n    },\n    Xi: {\n        after:\n            'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n        value: '\\\\Xi',\n    },\n    zeta: '\\\\zeta',\n    omega: '\\\\omega',\n    Omega: '\\\\Omega',\n    Ω: '\\\\omega', // @TODO: or ohm?\n\n    // More Logic\n    forall: '\\\\forall',\n    exists: {\n        mode: 'math',\n        value: '\\\\exists',\n    },\n    '!exists': {\n        mode: 'math',\n        value: '\\\\nexists',\n    },\n    ':.': {\n        mode: 'math',\n        value: '\\\\therefore',\n    },\n\n    // MORE FUNCTIONS\n    // 'arg': '\\\\arg',\n    liminf: '\\\\operatorname*{lim~inf}_{#?}',\n    limsup: '\\\\operatorname*{lim~sup}_{#?}',\n    argmin: '\\\\operatorname*{arg~min}_{#?}',\n    argmax: '\\\\operatorname*{arg~max}_{#?}',\n    det: '\\\\det',\n    mod: {\n        mode: 'math',\n        value: '\\\\mod',\n    },\n    max: {\n        mode: 'math',\n        value: '\\\\max',\n    },\n    min: {\n        mode: 'math',\n        value: '\\\\min',\n    },\n    erf: '\\\\operatorname{erf}',\n    erfc: '\\\\operatorname{erfc}',\n    bessel: {\n        mode: 'math',\n        value: '\\\\operatorname{bessel}',\n    },\n    mean: {\n        mode: 'math',\n        value: '\\\\operatorname{mean}',\n    },\n    median: {\n        mode: 'math',\n        value: '\\\\operatorname{median}',\n    },\n    fft: {\n        mode: 'math',\n        value: '\\\\operatorname{fft}',\n    },\n    lcm: {\n        mode: 'math',\n        value: '\\\\operatorname{lcm}',\n    },\n    gcd: {\n        mode: 'math',\n        value: '\\\\operatorname{gcd}',\n    },\n    randomReal: '\\\\operatorname{randomReal}',\n    randomInteger: '\\\\operatorname{randomInteger}',\n    Re: {\n        mode: 'math',\n        value: '\\\\operatorname{Re}',\n    },\n    Im: {\n        mode: 'math',\n        value: '\\\\operatorname{Im}',\n    },\n\n    // UNITS\n    mm: {\n        mode: 'math',\n        after: 'nothing+digit',\n        value: '\\\\operatorname{mm}', // millimeter\n    },\n    cm: {\n        mode: 'math',\n        after: 'nothing+digit',\n        value: '\\\\operatorname{cm}', // centimeter\n    },\n    km: {\n        mode: 'math',\n        after: 'nothing+digit',\n        value: '\\\\operatorname{km}', // kilometer\n    },\n    kg: {\n        mode: 'math',\n        after: 'nothing+digit',\n        value: '\\\\operatorname{kg}', // kilogram\n    },\n\n    // '||':                   '\\\\lor',\n    '...': '\\\\ldots', // In general, use \\ldots\n    '+...': '+\\\\cdots', // ... but use \\cdots after + ...\n    '-...': '-\\\\cdots', // ... - and ...\n    '->...': '\\\\to\\\\cdots', // ->\n\n    '->': '\\\\to',\n    '|->': '\\\\mapsto',\n    '-->': '\\\\longrightarrow',\n    //    '<-':                   '\\\\leftarrow',\n    '<--': '\\\\longleftarrow',\n    '=>': '\\\\Rightarrow',\n    '==>': '\\\\Longrightarrow',\n    // '<=': '\\\\Leftarrow',     // CONFLICTS WITH LESS THAN OR EQUAL\n    '<=>': '\\\\Leftrightarrow',\n    '<->': '\\\\leftrightarrow',\n\n    '(.)': '\\\\odot',\n    '(+)': '\\\\oplus',\n    '(/)': '\\\\oslash',\n    '(*)': '\\\\otimes',\n    '(-)': '\\\\ominus',\n    // '(-)':                  '\\\\circleddash',\n\n    '||': '\\\\Vert',\n    '{': '\\\\{',\n    '}': '\\\\}',\n\n    '*': '\\\\cdot',\n\n    /*\n    //\n    // ASCIIIMath\n    //\n    // Binary operation symbols\n    '**':                   '\\\\ast',\n    '***':                  '\\\\star',\n    '//':                   '\\\\slash',\n    '\\\\\\\\':                 '\\\\backslash',\n    'setminus':             '\\\\backslash',\n    '|><':                  '\\\\ltimes',\n    '><|':                  '\\\\rtimes',\n    '|><|':                 '\\\\bowtie',\n    '-:':                   '\\\\div',\n    'divide':               '\\\\div',\n    '@':                    '\\\\circ',\n    'o+':                   '\\\\oplus',\n    'ox':                   '\\\\otimes',\n    'o.':                   '\\\\odot',\n    '^^':                   '\\\\wedge',\n    '^^^':                  '\\\\bigwedge',\n    'vv':                   '\\\\vee',\n    'vvv':                  '\\\\bigvee',\n    'nn':                   '\\\\cap',\n    'nnn':                  '\\\\bigcap',\n    'uu':                   '\\\\cup',\n    'uuu':                  '\\\\bigcup',\n\n    // Binary relation symbols\n    '-=':                   '\\\\equiv',\n    '~=':                   '\\\\cong',\n    'lt':                   '<',\n    'lt=':                  '\\\\leq',\n    'gt':                   '>',\n    'gt=':                  '\\\\geq',\n    '-<':                   '\\\\prec',\n    '-lt':                  '\\\\prec',\n    '-<=':                  '\\\\preceq',\n    // '>-':                   '\\\\succ',\n    '>-=':                  '\\\\succeq',\n    'prop':                 '\\\\propto',\n    'diamond':              '\\\\diamond',\n    'square':               '\\\\square',\n    'iff':                  '\\\\iff',\n\n    'sub':                  '\\\\subset',\n    'sup':                  '\\\\supset',\n    'sube':                 '\\\\subseteq',\n    'supe':                 '\\\\supseteq',\n    'uarr':                 '\\\\uparrow',\n    'darr':                 '\\\\downarrow',\n    'rarr':                 '\\\\rightarrow',\n    'rArr':                 '\\\\Rightarrow',\n    'larr':                 '\\\\leftarrow',\n    'lArr':                 '\\\\Leftarrow',\n    'harr':                 '\\\\leftrightarrow',\n    'hArr':                 '\\\\Leftrightarrow',\n    'aleph':                '\\\\aleph',\n\n    // Logic\n    'and':                  '\\\\land',\n    'or':                   '\\\\lor',\n    'not':                  '\\\\neg',\n    '_|_':                   '\\\\bot',\n    'TT':                   '\\\\top',\n    '|--':                  '\\\\vdash',\n    '|==':                  '\\\\models',\n    \n    // Other functions\n    '|__':                  '\\\\lfloor',\n    '__|':                  '\\\\rfloor',\n\n    '|~':                   '\\\\lceil',\n    '~|':                   '\\\\rceil',\n\n    // Arrows\n    '>->':                   '\\\\rightarrowtail',\n    '->>':                   '\\\\twoheadrightarrow',\n    '>->>':                  '\\\\twoheadrightarrowtail'\n*/\n};\n","import type { InlineShortcutDefinition } from '../public/config';\nimport { LETTER } from '../core/definitions';\nimport type { Atom } from '../core/atom';\n\nimport { MathfieldConfigPrivate } from './config';\nimport { INLINE_SHORTCUTS } from './shortcuts-definitions';\n\nexport { InlineShortcutDefinition };\nexport { INLINE_SHORTCUTS } from './shortcuts-definitions';\n\n/**\n * Return an array of potential shortcuts\n */\nexport function getInlineShortcutsStartingWith(\n    s: string,\n    config: MathfieldConfigPrivate\n): string[] {\n    const result = [];\n\n    const skipDefaultShortcuts = config.overrideDefaultInlineShortcuts;\n\n    for (let i = 0; i <= s.length - 1; i++) {\n        const s2 = s.substring(i);\n        if (!skipDefaultShortcuts) {\n            Object.keys(INLINE_SHORTCUTS).forEach((key) => {\n                if (key.startsWith(s2) && !result.includes(key)) {\n                    result.push(key);\n                }\n            });\n        }\n\n        const customInlineShortcuts = config?.inlineShortcuts\n            ? config.inlineShortcuts\n            : null;\n        if (customInlineShortcuts) {\n            Object.keys(customInlineShortcuts).forEach((key) => {\n                if (key.startsWith(s2)) {\n                    result.push(key);\n                }\n            });\n        }\n    }\n    return result;\n}\n\n/**\n *\n * @param siblings atoms preceding this potential shortcut\n */\nfunction validateShortcut(\n    siblings: Atom[],\n    shortcut: InlineShortcutDefinition\n): string {\n    if (!shortcut) return '';\n\n    // If it's a simple shortcut (no conditional), it's always valid\n    if (typeof shortcut === 'string') return shortcut;\n\n    // If we have no context, we assume all the shortcuts are valid\n    if (!siblings) return shortcut.value;\n\n    let nothing = false;\n    let letter = false;\n    let digit = false;\n    let isFunction = false;\n    let frac = false;\n    let surd = false;\n    let binop = false;\n    let relop = false;\n    let punct = false;\n    let array = false;\n    let openfence = false;\n    let closefence = false;\n    let text = false;\n    let space = false;\n    let sibling = siblings[siblings.length - 1];\n    let index = siblings.length - 1;\n    while (sibling && /msubsup|placeholder/.test(sibling.type)) {\n        index -= 1;\n        sibling = siblings[index];\n    }\n    nothing = !sibling || sibling.type === 'first'; // start of a group\n    if (sibling) {\n        if (\n            typeof shortcut.mode !== 'undefined' &&\n            sibling.mode !== shortcut.mode\n        ) {\n            return '';\n        }\n        text = sibling.mode === 'text';\n        letter =\n            !text &&\n            sibling.type === 'mord' &&\n            LETTER.test(sibling.body as string);\n        digit =\n            !text &&\n            sibling.type === 'mord' &&\n            /[0-9]+$/.test(sibling.body as string);\n        isFunction = !text && sibling.isFunction;\n        frac = sibling.type === 'genfrac';\n        surd = sibling.type === 'surd';\n        binop = sibling.type === 'mbin';\n        relop = sibling.type === 'mrel';\n        punct = sibling.type === 'mpunct' || sibling.type === 'minner';\n        array = !!sibling.array;\n        openfence = sibling.type === 'mopen';\n        closefence = sibling.type === 'mclose' || sibling.type === 'leftright';\n        space = sibling.type === 'space';\n    }\n\n    if (typeof shortcut.after !== 'undefined') {\n        // If this is a conditional shortcut, consider the conditions now\n        if (\n            (/nothing/.test(shortcut.after) && nothing) ||\n            (/letter/.test(shortcut.after) && letter) ||\n            (/digit/.test(shortcut.after) && digit) ||\n            (/function/.test(shortcut.after) && isFunction) ||\n            (/frac/.test(shortcut.after) && frac) ||\n            (/surd/.test(shortcut.after) && surd) ||\n            (/binop/.test(shortcut.after) && binop) ||\n            (/relop/.test(shortcut.after) && relop) ||\n            (/punct/.test(shortcut.after) && punct) ||\n            (/array/.test(shortcut.after) && array) ||\n            (/openfence/.test(shortcut.after) && openfence) ||\n            (/closefence/.test(shortcut.after) && closefence) ||\n            (/text/.test(shortcut.after) && text) ||\n            (/space/.test(shortcut.after) && space)\n        ) {\n            return shortcut.value;\n        }\n        return '';\n    }\n\n    return shortcut.value;\n}\n\n/**\n *\n * @param context - atoms preceding the candidate, potentially used\n * to reduce which shortcuts are applicable. If 'null', no restrictions are\n * applied.\n * @param s - candidate inline shortcuts (e.g. `'pi'`)\n * @return A replacement string matching the shortcut (e.g. `'\\pi'`)\n */\nexport function getInlineShortcut(\n    context: Atom[],\n    s: string,\n    shortcuts?: { [key: string]: InlineShortcutDefinition }\n): string {\n    return validateShortcut(context, shortcuts?.[s] ?? INLINE_SHORTCUTS[s]);\n}\n","import { InlineShortcutDefinition, getInlineShortcut } from './shortcuts';\n\n/**\n * Attempts to parse and interpret a string in an unknown format, possibly\n * ASCIIMath and return a canonical LaTeX string.\n *\n * The format recognized are one of these variations:\n * - ASCIIMath: Only supports a subset\n * (1/2x)\n * 1/2sin x                     -> \\frac {1}{2}\\sin x\n * 1/2sinx                      -> \\frac {1}{2}\\sin x\n * (1/2sin x (x^(2+1))          // Unbalanced parentheses\n * (1/2sin(x^(2+1))             -> \\left(\\frac {1}{2}\\sin \\left(x^{2+1}\\right)\\right)\n * alpha + (pi)/(4)             -> \\alpha +\\frac {\\pi }{4}\n * x=(-b +- sqrt(b^2 – 4ac))/(2a)\n * alpha/beta\n * sqrt2 + sqrtx + sqrt(1+a) + sqrt(1/2)\n * f(x) = x^2 \"when\" x >= 0\n * AA n in QQ\n * AA x in RR \",\" |x| > 0\n * AA x in RR \",\" abs(x) > 0\n *\n * - UnicodeMath (generated by Microsoft Word): also only supports a subset\n *      - See https://www.unicode.org/notes/tn28/UTN28-PlainTextMath-v3.1.pdf\n * √(3&x+1)\n * {a+b/c}\n * [a+b/c]\n * _a^b x\n * lim_(n->\\infty) n\n * \\iint_(a=0)^\\infty  a\n *\n * - \"JavaScript Latex\": a variant that is LaTeX, but with escaped backslashes\n *  \\\\frac{1}{2} \\\\sin x\n */\nexport function parseMathString(\n    s: string,\n    options?: {\n        format?: string;\n        inlineShortcuts?: { [key: string]: InlineShortcutDefinition };\n    }\n): [string, string] {\n    if (!s) return ['latex', ''];\n\n    // Nothing to do if a single character\n    if (s.length <= 1) return ['latex', s];\n\n    if (!options || options.format !== 'ASCIIMath') {\n        // This is not explicitly ASCIIMath. Try to infer if this is LaTex...\n\n        // If the strings is surrounded by `$..$` or `$$..$$`, assumes it is LaTeX\n        const trimedString = s.trim();\n        if (\n            (trimedString.startsWith('$$') && trimedString.endsWith('$$')) ||\n            (trimedString.startsWith('\\\\[') && trimedString.endsWith('\\\\]')) ||\n            (trimedString.startsWith('\\\\(') && trimedString.endsWith('\\\\)'))\n        ) {\n            return [\n                'latex',\n                trimedString.substring(2, trimedString.length - 2),\n            ];\n        }\n\n        if (trimedString.startsWith('$') && trimedString.endsWith('$')) {\n            return [\n                'latex',\n                trimedString.substring(1, trimedString.length - 1),\n            ];\n        }\n\n        // Replace double-backslash (coming from JavaScript) to a single one\n        s = s.replace(/\\\\\\\\([^\\s\\n])/g, '\\\\$1');\n\n        if (/\\\\/.test(s)) {\n            // If the string includes a '\\' it's probably a LaTeX string\n            // (that's not completely true, it could be a UnicodeMath string, since\n            // UnicodeMath supports some LaTeX commands. However, we need to pick\n            // one in order to correctly interpret {} (which are argument delimiters\n            // in LaTeX, and are fences in UnicodeMath)\n            return ['latex', s];\n        }\n    }\n\n    s = s.replace(/\\u2061/gu, ''); // Remove function application\n    s = s.replace(/\\u3016/gu, '{'); // WHITE LENTICULAR BRACKET (grouping)\n    s = s.replace(/\\u3017/gu, '}'); // WHITE LENTICULAR BRACKET (grouping)\n\n    s = s.replace(/([^\\\\])sinx/g, '$1\\\\sin x'); // common typo\n    s = s.replace(/([^\\\\])cosx/g, '$1\\\\cos x '); // common typo\n    s = s.replace(/\\u2013/g, '-'); // EN-DASH, sometimes used as a minus sign\n\n    return [\n        options?.format || 'ASCIIMath',\n        parseMathExpression(s, options ?? {}),\n    ];\n}\n\nfunction parseMathExpression(\n    s: string,\n    options: {\n        format?: string;\n        inlineShortcuts?: { [key: string]: InlineShortcutDefinition };\n    }\n): string {\n    if (!s) return '';\n    let done = false;\n    let m;\n\n    if (!done && (s[0] === '^' || s[0] === '_')) {\n        // Superscript and subscript\n        m = parseMathArgument(s.substr(1), {\n            inlineShortcuts: options?.inlineShortcuts ?? {},\n            noWrap: true,\n        });\n        s = s[0] + '{' + m.match + '}';\n        s += parseMathExpression(m.rest, options);\n        done = true;\n    }\n\n    if (!done) {\n        m = s.match(/^(sqrt|\\u221a)(.*)/);\n        if (m) {\n            // Square root\n            m = parseMathArgument(m[2], {\n                inlineShortcuts: options?.inlineShortcuts ?? {},\n                noWrap: true,\n            });\n            s = '\\\\sqrt{' + m.match + '}';\n            s += parseMathExpression(m.rest, options);\n            done = true;\n        }\n    }\n\n    if (!done) {\n        m = s.match(/^(\\\\cbrt|\\u221b)(.*)/);\n        if (m) {\n            // Cube root\n            m = parseMathArgument(m[2], {\n                inlineShortcuts: options?.inlineShortcuts ?? {},\n                noWrap: true,\n            });\n            s = '\\\\sqrt[3]{' + m.match + '}';\n            s += parseMathExpression(m.rest, options);\n            done = true;\n        }\n    }\n\n    if (!done) {\n        m = s.match(/^abs(.*)/);\n        if (m) {\n            // Absolute value\n            m = parseMathArgument(m[1], {\n                inlineShortcuts: options?.inlineShortcuts ?? {},\n                noWrap: true,\n            });\n            s = '\\\\left|' + m.match + '\\\\right|';\n            s += parseMathExpression(m.rest, options);\n            done = true;\n        }\n    }\n\n    if (!done) {\n        m = s.match(/^[\"”“](.*?)[\"”“](.*)/);\n        if (m) {\n            // Quoted text\n            s = '\\\\text{' + m[1] + '}';\n            s += parseMathExpression(m[2], options);\n            done = true;\n        }\n    }\n\n    if (!done) {\n        m = s.match(/^([^a-zA-Z({[_^\\\\\\s\"]+)(.*)/);\n        // A string of symbols...\n        // Could be a binary or relational operator, etc...\n        if (m) {\n            s = paddedShortcut(m[1], options);\n            s += parseMathExpression(m[2], options);\n            done = true;\n        }\n    }\n\n    if (!done && /^(f|g|h)[^a-zA-Z]/.test(s)) {\n        // This could be a function...\n        m = parseMathArgument(s.substring(1), {\n            inlineShortcuts: options.inlineShortcuts ?? {},\n            noWrap: true,\n        });\n        if (s[1] === '(') {\n            s = s[0] + '\\\\mleft(' + m.match + '\\\\mright)';\n        } else {\n            s = s[0] + m.match;\n        }\n        s += parseMathExpression(m.rest, options);\n        done = true;\n    }\n\n    if (!done) {\n        m = s.match(/^([a-zA-Z]+)(.*)/);\n        if (m) {\n            // Some alphabetical string...\n            // Could be a function name (sin) or symbol name (alpha)\n            s = paddedShortcut(m[1], options);\n            s += parseMathExpression(m[2], options);\n            done = true;\n        }\n    }\n\n    if (!done) {\n        m = parseMathArgument(s, {\n            inlineShortcuts: options.inlineShortcuts ?? {},\n            noWrap: true,\n        });\n        if (m.match && m.rest[0] === '/') {\n            // Fraction\n            const m2 = parseMathArgument(m.rest.substr(1), {\n                inlineShortcuts: options.inlineShortcuts ?? {},\n                noWrap: true,\n            });\n            if (m2.match) {\n                s =\n                    '\\\\frac{' +\n                    m.match +\n                    '}{' +\n                    m2.match +\n                    '}' +\n                    parseMathExpression(m2.rest, options);\n            }\n            done = true;\n        } else if (m.match) {\n            if (s[0] === '(') {\n                s =\n                    '\\\\left(' +\n                    m.match +\n                    '\\\\right)' +\n                    parseMathExpression(m.rest, options);\n            } else {\n                s = m.match + parseMathExpression(m.rest, options);\n            }\n            done = true;\n        }\n    }\n\n    if (!done) {\n        m = s.match(/^(\\s+)(.*)$/);\n        // Whitespace\n        if (m) {\n            s = ' ' + parseMathExpression(m[2], options);\n            done = true;\n        }\n    }\n\n    return s;\n}\n\n/**\n * Parse a math argument, as defined by ASCIIMath and UnicodeMath:\n * - Either an expression fenced in (), {} or []\n * - a number (- sign, digits, decimal point, digits)\n * - a single [a-zA-Z] letter (an identifier)\n * - a multi-letter shortcut (e.g., pi)\n * - a LaTeX command (\\pi) (for UnicodeMath)\n * @return\n * - match: the parsed (and converted) portion of the string that is an argument\n * - rest: the raw, unconverted, rest of the string\n */\nfunction parseMathArgument(\n    s: string,\n    options: {\n        noWrap?: boolean;\n        format?: string;\n        inlineShortcuts?: { [key: string]: InlineShortcutDefinition };\n    }\n): { match: string; rest: string } {\n    let match = '';\n    s = s.trim();\n    let rest = s;\n    let lFence = s.charAt(0);\n    let rFence = { '(': ')', '{': '}', '[': ']' }[lFence];\n    if (rFence) {\n        // It's a fence\n        let level = 1;\n        let i = 1;\n        while (i < s.length && level > 0) {\n            if (s[i] === lFence) level++;\n            if (s[i] === rFence) level--;\n            i++;\n        }\n        if (level === 0) {\n            // We've found the matching closing fence\n            if (options.noWrap && lFence === '(') {\n                match = parseMathExpression(s.substring(1, i - 1), options);\n            } else {\n                if (lFence === '{' && rFence === '}') {\n                    lFence = '\\\\{';\n                    rFence = '\\\\}';\n                }\n                match =\n                    '\\\\left' +\n                    lFence +\n                    parseMathExpression(s.substring(1, i - 1), options) +\n                    '\\\\right' +\n                    rFence;\n            }\n            rest = s.substring(i);\n        } else {\n            // Unbalanced fence...\n            match = s.substring(1, i);\n            rest = '';\n        }\n    } else {\n        let m = s.match(/^([a-zA-Z]+)/);\n        if (m) {\n            // It's a string of letter, maybe a shortcut\n            let shortcut = getInlineShortcut(null, s, options.inlineShortcuts);\n            if (shortcut) {\n                shortcut = shortcut.replace('_{#?}', '');\n                shortcut = shortcut.replace('^{#?}', '');\n                return { match: shortcut, rest: s.substring(shortcut.length) };\n            }\n        }\n\n        m = s.match(/^([a-zA-Z])/);\n        if (m) {\n            // It's a single letter\n            return { match: m[1], rest: s.substring(1) };\n        }\n\n        m = s.match(/^(-)?\\d+(\\.\\d*)?/);\n        if (m) {\n            // It's a number\n            return { match: m[0], rest: s.substring(m[0].length) };\n        }\n\n        if (!/^\\\\(left|right)/.test(s)) {\n            // It's a LaTeX command (but not a \\left\\right)\n            m = s.match(/^(\\\\[a-zA-Z]+)/);\n            if (m) {\n                rest = s.substring(m[1].length);\n                match = m[1];\n            }\n        }\n    }\n\n    return { match: match, rest: rest };\n}\n\nfunction paddedShortcut(s: string, options: { format?: string }): string {\n    let result = getInlineShortcut(null, s, options);\n    if (result) {\n        result = result.replace('_{#?}', '');\n        result = result.replace('^{#?}', '');\n        result += ' ';\n    } else {\n        result = s;\n    }\n    return result;\n}\n","import type { Style } from '../public/core';\nimport { RIGHT_DELIM } from '../core/definitions';\nimport type { Atom } from '../core/atom';\nimport type { ModelPrivate } from './model-class';\nimport { contentDidChange, contentWillChange } from './model-listeners';\nimport {\n    selectionIsCollapsed,\n    setSelection,\n    getAnchor,\n    move,\n} from './model-selection';\nimport { insert } from './model-insert';\n\n// const MATCHING_FENCE = {\n//     '\\\\lbrace': ['\\\\rbrace'],\n//     '(': [')', ']', '\\\\rbrack'],\n//     // For (open/closed) intervals\n//     '\\\\rbrack': [')', ']', '\\\\rbrack', '[', '\\\\lbrack'],\n//     '\\\\lbrack': [')', ']', '\\\\rbrack', '[', '\\\\lbrack'],\n// };\n\n/**\n * Insert a smart fence '(', '{', '[', etc...\n * If not handled (because `fence` wasn't a fence), return false.\n */\nexport function insertSmartFence(\n    model: ModelPrivate,\n    fence: string,\n    style: Style\n): boolean {\n    const parent = model.parent();\n    let delims =\n        parent.type === 'leftright' ? parent.leftDelim + parent.rightDelim : '';\n    if (delims === '\\\\lbrace\\\\rbrace') delims = '{}';\n    if (delims === '\\\\{\\\\}') delims = '{}';\n\n    //\n    // 1. Are we inserting a middle fence?\n    // ...as in {...|...}\n    //\n    if (delims === '{}' && /\\||\\\\vert|\\\\Vert|\\\\mvert|\\\\mid/.test(fence)) {\n        insert(model, '\\\\,\\\\middle' + fence + '\\\\, ', {\n            mode: 'math',\n            format: 'latex',\n            style: style,\n        });\n        return true;\n    }\n    // Normalize some fences.\n    // Note that '{' and '}' are not valid braces.\n    // They should be '\\{' or '\\lbrace' and '\\}' or '\\rbrace'\n    if (fence === '{' || fence === '\\\\{') fence = '\\\\lbrace';\n    if (fence === '}' || fence === '\\\\}') fence = '\\\\rbrace';\n    if (fence === '[' || fence === '\\\\[') fence = '\\\\lbrack';\n    if (fence === ']' || fence === '\\\\]') fence = '\\\\rbrock';\n\n    //\n    // 2. Is it an open fence?\n    //\n    const rDelim = RIGHT_DELIM[fence];\n    if (rDelim && !(parent.type === 'leftright' && parent.leftDelim === '|')) {\n        // We have a valid open fence as input\n        let s = '';\n        const collapsed =\n            selectionIsCollapsed(model) ||\n            getAnchor(model).type === 'placeholder';\n\n        if (model.sibling(0).isFunction) {\n            // We're before a function (e.g. `\\sin`, or 'f'):  this is an\n            // argument list.\n            // Use `\\mleft...\\mright'.\n            s = '\\\\mleft' + fence + '\\\\mright';\n        } else {\n            s = '\\\\left' + fence + '\\\\right';\n        }\n        s += collapsed ? '?' : rDelim;\n\n        let content = [];\n        if (collapsed) {\n            // content = model.siblings().slice(model.anchorOffset() + 1);\n            content = model\n                .siblings()\n                .splice(model.anchorOffset() + 1, model.siblings().length);\n        }\n        insert(model, s, { mode: 'math', format: 'latex', style: style });\n        if (collapsed) {\n            // Move everything that was after the anchor into the leftright\n            model.sibling(0).body = content;\n            move(model, -1);\n        }\n        return true;\n    }\n\n    //\n    // 3. Is it a close fence?\n    //\n    let lDelim: string;\n    Object.keys(RIGHT_DELIM).forEach((delim) => {\n        if (fence === RIGHT_DELIM[delim]) lDelim = delim;\n    });\n    if (lDelim) {\n        // We found the matching open fence, so it was a valid close fence.\n        // Note that `lDelim` may not match `fence`. That's OK.\n\n        // If we're the last atom inside a 'leftright',\n        // update the parent\n        if (\n            parent &&\n            parent.type === 'leftright' &&\n            model.endOffset() === model.siblings().length - 1\n        ) {\n            contentWillChange(model);\n            parent.rightDelim = fence;\n            move(model, +1);\n            contentDidChange(model);\n            return true;\n        }\n\n        // If we have a `leftright` sibling to our left\n        // with an indeterminate right fence,\n        // move what's between us and the `leftright` inside the `leftright`\n        const siblings = model.siblings();\n        let i: number;\n        for (i = model.endOffset(); i >= 0; i--) {\n            if (\n                siblings[i].type === 'leftright' &&\n                siblings[i].rightDelim === '?'\n            ) {\n                break;\n            }\n        }\n        if (i >= 0) {\n            contentWillChange(model);\n            siblings[i].rightDelim = fence;\n            siblings[i].body = (siblings[i].body as Atom[]).concat(\n                siblings.slice(i + 1, model.endOffset() + 1)\n            );\n            siblings.splice(i + 1, model.endOffset() - i);\n            setSelection(model, i);\n            contentDidChange(model);\n            return true;\n        }\n\n        // If we're inside a `leftright`, but not the last atom,\n        // and the `leftright` right delim is indeterminate\n        // adjust the body (put everything after the insertion point outside)\n        if (\n            parent &&\n            parent.type === 'leftright' &&\n            parent.rightDelim === '?'\n        ) {\n            contentWillChange(model);\n            parent.rightDelim = fence;\n\n            const tail = siblings.slice(model.endOffset() + 1);\n            siblings.splice(model.endOffset() + 1);\n            model.path.pop();\n\n            // Array.prototype.splice.apply(\n            //     model.siblings(),\n            //     [model.endOffset() + 1, 0].concat(tail)\n            // );\n            // @revisit: veryfiy this does the right thing\n            model.siblings().splice(model.endOffset() + 1, 0, ...tail);\n            contentDidChange(model);\n\n            return true;\n        }\n\n        // Is our grand-parent a 'leftright'?\n        // If `\\left(\\frac{1}{x|}\\right?` with the caret at `|`\n        // go up to the 'leftright' and apply it there instead\n        const grandparent = model.ancestor(2);\n        if (\n            grandparent &&\n            grandparent.type === 'leftright' &&\n            grandparent.rightDelim === '?' &&\n            model.endOffset() === siblings.length - 1\n        ) {\n            move(model, 1);\n            return insertSmartFence(model, fence, style);\n        }\n\n        // Meh... We couldn't find a matching open fence. Just insert the\n        // closing fence as a regular character\n        return false;\n        // insert(model, fence, { mode: 'math', format: 'latex', style: style });\n        // return true;\n    }\n\n    return false;\n}\n","import { Atom, isAtomArray } from '../core/atom';\nimport type { ModelPrivate } from './model-class';\nimport { contentDidChange, contentWillChange } from './model-listeners';\nimport { selectionIsCollapsed, forEachSelected } from './model-selection';\n\nimport { Style, FontSeries, FontShape } from '../public/core';\n\nexport function applyStyleToUnstyledAtoms(\n    atom: Atom | Atom[],\n    style: Style\n): void {\n    if (!atom || !style) return;\n    if (isAtomArray(atom)) {\n        // Apply styling options to each atom\n        atom.forEach((x) => applyStyleToUnstyledAtoms(x, style));\n    } else if (typeof atom === 'object') {\n        if (\n            !atom.color &&\n            !atom.backgroundColor &&\n            !atom.fontFamily &&\n            !atom.fontShape &&\n            !atom.fontSeries &&\n            !atom.fontSize\n        ) {\n            atom.applyStyle(style);\n            applyStyleToUnstyledAtoms(atom.body as Atom[], style);\n            applyStyleToUnstyledAtoms(atom.numer, style);\n            applyStyleToUnstyledAtoms(atom.denom, style);\n            applyStyleToUnstyledAtoms(atom.index, style);\n            applyStyleToUnstyledAtoms(atom.overscript, style);\n            applyStyleToUnstyledAtoms(atom.underscript, style);\n            applyStyleToUnstyledAtoms(atom.subscript, style);\n            applyStyleToUnstyledAtoms(atom.superscript, style);\n        }\n    }\n}\n\n/**\n * Apply a style (color, background) to the selection.\n *\n * If the style is already applied to the selection, remove it. If the selection\n * has the style partially applied (i.e. only some sections), remove it from\n * those sections, and apply it to the entire selection.\n */\n\nexport function applyStyle(\n    model: ModelPrivate,\n    style: Style & { series?: FontSeries; shape?: FontShape; size?: string }\n): boolean {\n    // No selection, nothing to do.\n    if (selectionIsCollapsed(model)) return false;\n\n    function everyStyle(property, value): boolean {\n        let result = true;\n        forEachSelected(\n            model,\n            (x) => {\n                result = result && x[property] === value;\n            },\n            { recursive: true }\n        );\n        return result;\n    }\n\n    if (style.color && everyStyle('color', style.color)) {\n        // If the selection already has this color, turn it off\n        style.color = 'none';\n    }\n\n    if (\n        style.backgroundColor &&\n        everyStyle('backgroundColor', style.backgroundColor)\n    ) {\n        // If the selection already has this color, turn it off\n        style.backgroundColor = 'none';\n    }\n\n    if (style.fontFamily && everyStyle('fontFamily', style.fontFamily)) {\n        // If the selection already has this font family, turn it off\n        style.fontFamily = 'none';\n    }\n\n    if (style.series) style.fontSeries = style.series;\n    if (style.fontSeries && everyStyle('fontSeries', style.fontSeries)) {\n        // If the selection already has this series (weight), turn it off\n        style.fontSeries = 'auto';\n    }\n\n    if (style.shape) style.fontShape = style.shape;\n    if (style.fontShape && everyStyle('fontShape', style.fontShape)) {\n        // If the selection already has this shape (italic), turn it off\n        style.fontShape = 'auto';\n    }\n\n    if (style.size) style.fontSize = style.size;\n    if (style.fontSize && everyStyle('fontSize', style.fontSize)) {\n        // If the selection already has this size, reset it to default size\n        style.fontSize = 'size5';\n    }\n\n    contentWillChange(model);\n    forEachSelected(model, (x) => x.applyStyle(style), { recursive: true });\n    contentDidChange(model);\n\n    return true;\n}\n","import { InsertOptions } from '../public/mathfield';\n\nimport {\n    Atom,\n    COMMAND_MODE_CHARACTERS,\n    isAtomArray,\n    parseString,\n} from '../core/core';\n\nimport { parseMathString } from './parse-math-string';\n\nimport type { ModelPrivate } from './model-class';\nimport { invalidateVerbatimLatex, isEmptyMathlist } from './model-utils';\nimport { arrayCellCount, arrayCell } from './model-array-utils';\nimport { deleteAtoms, deleteChar } from './model-delete';\nimport { insertSmartFence } from './model-smartfence';\nimport { applyStyleToUnstyledAtoms } from './model-styling';\nimport { contentDidChange, contentWillChange } from './model-listeners';\n\nimport {\n    selectionIsCollapsed,\n    getAnchorMode,\n    setSelection,\n    leap,\n    move,\n    getSelectedAtoms,\n    collapseSelectionBackward,\n    collapseSelectionForward,\n    getImplicitArgOffset,\n    getContentFromSiblings,\n} from './model-selection';\n\nexport function insert(\n    model: ModelPrivate,\n    s: string,\n    options: InsertOptions\n): void {\n    // Try to insert a smart fence.\n    if (!(options.smartFence ?? false)) {\n        // When smartFence is turned off, only do a \"smart\" fence insert\n        // if we're inside a `leftright`, at the last char\n        const parent = model.parent();\n        if (\n            parent?.type === 'leftright' &&\n            parent.rightDelim === '?' &&\n            model.endOffset() === model.siblings().length - 1 &&\n            /^[)}\\]|]$/.test(s)\n        ) {\n            contentWillChange(model);\n            parent.rightDelim = s;\n            move(model, +1);\n            contentDidChange(model);\n            return;\n        }\n    } else if (insertSmartFence(model, s, options.style)) {\n        return;\n    }\n\n    const suppressChangeNotifications = model.suppressChangeNotifications;\n    if (options.suppressChangeNotifications) {\n        model.suppressChangeNotifications = true;\n    }\n    // Dispatch notifications\n    contentWillChange(model);\n    const contentWasChanging = model.suppressChangeNotifications;\n    model.suppressChangeNotifications = true;\n\n    if (!options.insertionMode) options.insertionMode = 'replaceSelection';\n    if (!options.selectionMode) options.selectionMode = 'placeholder';\n    if (!options.format) options.format = 'auto';\n    options.macros = options.macros ?? model.options.macros;\n\n    const mode = options.mode || getAnchorMode(model);\n    let mathlist;\n\n    // Save the content of the selection, if any\n    const args: (string | Atom[])[] = [getSelectedAtoms(model)];\n\n    // If a placeholder was specified, use it\n    const placeholder = options.placeholder ?? '\\\\placeholder{}';\n    args['?'] = placeholder;\n\n    // Delete any selected items\n    if (\n        options.insertionMode === 'replaceSelection' &&\n        !selectionIsCollapsed(model)\n    ) {\n        deleteChar(model);\n    } else if (options.insertionMode === 'replaceAll') {\n        model.root.body = [];\n        model.root.latex = '';\n        model.path = [{ relation: 'body', offset: 0 }];\n        model.extent = 0;\n    } else if (options.insertionMode === 'insertBefore') {\n        collapseSelectionBackward(model);\n    } else if (options.insertionMode === 'insertAfter') {\n        collapseSelectionForward(model);\n    }\n\n    // Delete any placeholders before or after the insertion point\n    const siblings = model.siblings();\n    const firstOffset = model.startOffset();\n    if (\n        firstOffset + 1 < siblings.length &&\n        siblings[firstOffset + 1] &&\n        siblings[firstOffset + 1].type === 'placeholder'\n    ) {\n        deleteChar(model, 1);\n    } else if (\n        firstOffset > 0 &&\n        siblings[firstOffset] &&\n        siblings[firstOffset].type === 'placeholder'\n    ) {\n        deleteChar(model, -1);\n    }\n\n    if (mode === 'math' && options.format === 'ASCIIMath') {\n        [, s] = parseMathString(s, { format: 'ASCIIMath' });\n        mathlist = parseString(\n            s,\n            'math',\n            null,\n            options?.macros,\n            false,\n            model.listeners.onError\n        );\n\n        // Simplify result.\n        simplifyParen(model, mathlist);\n    } else if (\n        mode !== 'text' &&\n        (options.format === 'auto' || options.format === 'latex')\n    ) {\n        if (mode === 'command') {\n            // Short-circuit the tokenizer and parser if in command mode\n            mathlist = [];\n            for (const c of s) {\n                if (COMMAND_MODE_CHARACTERS.test(c)) {\n                    mathlist.push(new Atom('command', 'command', c));\n                }\n            }\n        } else if (s === '\\u001b') {\n            // Insert an 'esc' character triggers the command mode\n            mathlist = [new Atom('command', 'command', '\\\\')];\n        } else {\n            if (options.format === 'auto') {\n                [options.format, s] = parseMathString(s);\n            }\n\n            if (args[0]) {\n                // There was a selection, we'll use it for #@\n                s = s.replace(/(^|[^\\\\])#@/g, '$1#0');\n            } else if (/(^|[^\\\\])#@/.test(s)) {\n                // If we're inserting a latex fragment that includes a #@ argument\n                // substitute the preceding `mord`s or text mode atoms for it (implicit argument)\n                const offset = getImplicitArgOffset(model);\n                s = s.replace(\n                    /(^|[^\\\\])#@/g,\n                    '$1' +\n                        getContentFromSiblings(\n                            model,\n                            offset + 1,\n                            model.startOffset()\n                        )\n                );\n                // Delete the implicit argument\n                deleteAtoms(model, offset - model.startOffset());\n            } else {\n                // No selection, no 'mord' before. Let's make '#@' a placeholder.\n                s = s.replace(/(^|[^\\\\])#@/g, '$1#?');\n            }\n            // If the whole string is bracketed by a mode shift command, remove it\n            if (/^\\$\\$(.*)\\$\\$$/.test(s)) {\n                s = s.substring(2, s.length - 2);\n            }\n            mathlist = parseString(\n                s,\n                mode,\n                args,\n                options.macros,\n                options.smartFence ?? false,\n                model.listeners.onError\n            );\n\n            // Simplify result.\n            if (options.format !== 'latex') {\n                simplifyParen(model, mathlist);\n            }\n        }\n    } else if (mode === 'text' || options.format === 'text') {\n        // Map special TeX characters to alternatives\n        // Must do this one first, since other replacements include backslash\n        s = s.replace(/\\\\/g, '\\\\textbackslash ');\n\n        s = s.replace(/#/g, '\\\\#');\n        s = s.replace(/\\$/g, '\\\\$');\n        s = s.replace(/%/g, '\\\\%');\n        s = s.replace(/&/g, '\\\\&');\n        // s = s.replace(/:/g, '\\\\colon');     // text colon?\n        // s = s.replace(/\\[/g, '\\\\lbrack');\n        // s = s.replace(/]/g, '\\\\rbrack');\n        s = s.replace(/_/g, '\\\\_');\n        s = s.replace(/{/g, '\\\\textbraceleft ');\n        s = s.replace(/}/g, '\\\\textbraceright ');\n        s = s.replace(/\\^/g, '\\\\textasciicircum ');\n        s = s.replace(/~/g, '\\\\textasciitilde ');\n        s = s.replace(/£/g, '\\\\textsterling ');\n\n        mathlist = parseString(\n            s,\n            'text',\n            args,\n            options.macros,\n            false,\n            model.listeners.onError\n        );\n    }\n\n    // Something has been inserted, and the parent's verbatim latex is no longer valid\n    invalidateVerbatimLatex(model);\n\n    // Some atoms may already have a style (for example if there was an\n    // argument, i.e. the selection, that this was applied to).\n    // So, don't apply style to atoms that are already styled, but *do*\n    // apply it to newly created atoms that have no style yet.\n    applyStyleToUnstyledAtoms(mathlist, options.style);\n\n    // Insert the mathlist at the position following the anchor\n    const parent = model.parent();\n    if (\n        options.format !== 'latex' &&\n        model.options.removeExtraneousParentheses &&\n        parent &&\n        parent.type === 'leftright' &&\n        parent.leftDelim === '(' &&\n        isEmptyMathlist(parent.body as Atom[]) &&\n        mathlist &&\n        mathlist.length === 1 &&\n        mathlist[0].type === 'genfrac'\n    ) {\n        // If the insert is fraction inside a lefright, remove the leftright\n        model.path.pop();\n        model.siblings()[model.anchorOffset()] = mathlist[0];\n    } else {\n        if (options.format === 'latex' && args.length === 1 && !args[0]) {\n            // If we are given a latex string with no arguments, store it verbatim\n            // Caution: we can only do this if the toLatex() for this parent\n            // would return an empty string. If the latex is generated using other\n            // properties than parent.body, for example by adding '\\left.' and\n            // '\\right.' with a 'leftright' type, we can't use this shortcut.\n            if (\n                parent.type === 'root' &&\n                isEmptyMathlist(parent.body as Atom[])\n            ) {\n                parent.latex = s;\n            }\n        }\n        Array.prototype.splice.apply(\n            model.siblings(),\n            [model.anchorOffset() + 1, 0].concat(mathlist)\n        );\n    }\n\n    // If needed, make sure there's a first atom in the siblings list\n    model.insertFirstAtom();\n\n    // Prepare to dispatch notifications\n    // (for selection changes, then content change)\n    model.suppressChangeNotifications = contentWasChanging;\n\n    // Update the anchor's location\n    if (options.selectionMode === 'placeholder') {\n        // Move to the next placeholder\n        let newPlaceholders = [];\n        for (const atom of mathlist) {\n            newPlaceholders = newPlaceholders.concat(\n                atom.filter((atom) => atom.type === 'placeholder')\n            );\n        }\n        if (newPlaceholders.length === 0 || !leap(model, +1, false)) {\n            // No placeholder found, move to right after what we just inserted\n            setSelection(model, model.anchorOffset() + mathlist.length);\n            // model.path[model.path.length - 1].offset += mathlist.length;\n        } else {\n            model.announce('move'); // should have placeholder selected\n        }\n    } else if (options.selectionMode === 'before') {\n        // Do nothing: don't change the anchorOffset.\n    } else if (options.selectionMode === 'after') {\n        setSelection(model, model.anchorOffset() + mathlist.length);\n    } else if (options.selectionMode === 'item') {\n        setSelection(model, model.anchorOffset(), mathlist.length);\n    }\n\n    contentDidChange(model);\n\n    model.suppressChangeNotifications = suppressChangeNotifications;\n}\n\nfunction removeParen(list: Atom[]): Atom[] {\n    if (!list) return undefined;\n\n    if (\n        list.length === 1 &&\n        list[0].type === 'leftright' &&\n        list[0].leftDelim === '('\n    ) {\n        list = list[0].body as Atom[];\n    }\n\n    return list;\n}\n\n/**\n * If it's a fraction with a parenthesized numerator or denominator\n * remove the parentheses\n *\n */\nfunction simplifyParen(model: ModelPrivate, atoms: Atom[]): void {\n    if (atoms && model.options.removeExtraneousParentheses) {\n        for (let i = 0; atoms[i]; i++) {\n            if (atoms[i].type === 'leftright' && atoms[i].leftDelim === '(') {\n                if (isAtomArray(atoms[i].body)) {\n                    let genFracCount = 0;\n                    let genFracIndex = 0;\n                    let nonGenFracCount = 0;\n                    for (let j = 0; atoms[i].body[j]; j++) {\n                        if ((atoms[i].body[j] as Atom).type === 'genfrac') {\n                            genFracCount++;\n                            genFracIndex = j;\n                        }\n                        if ((atoms[i].body[j] as Atom).type !== 'first') {\n                            nonGenFracCount++;\n                        }\n                    }\n                    if (nonGenFracCount === 0 && genFracCount === 1) {\n                        // This is a single frac inside a leftright: remove the leftright\n                        atoms[i] = atoms[i].body[genFracIndex] as Atom;\n                    }\n                }\n            }\n        }\n\n        atoms.forEach((atom) => {\n            if (atom.type === 'genfrac') {\n                simplifyParen(model, atom.numer);\n                simplifyParen(model, atom.denom);\n                atom.numer = removeParen(atom.numer);\n                atom.denom = removeParen(atom.denom);\n            }\n            if (atom.superscript) {\n                simplifyParen(model, atom.superscript);\n                atom.superscript = removeParen(atom.superscript);\n            }\n            if (atom.subscript) {\n                simplifyParen(model, atom.subscript);\n                atom.subscript = removeParen(atom.subscript);\n            }\n            if (atom.underscript) {\n                simplifyParen(model, atom.underscript);\n                atom.underscript = removeParen(atom.underscript);\n            }\n            if (atom.overscript) {\n                simplifyParen(model, atom.overscript);\n                atom.overscript = removeParen(atom.overscript);\n            }\n            if (atom.index) {\n                simplifyParen(model, atom.index);\n                atom.index = removeParen(atom.index);\n            }\n            if (atom.type === 'surd') {\n                simplifyParen(model, atom.body as Atom[]);\n                atom.body = removeParen(atom.body as Atom[]);\n            } else if (isAtomArray(atom.body)) {\n                simplifyParen(model, atom.body);\n            }\n\n            if (atom.array) {\n                for (let i = arrayCellCount(atom.array); i >= 0; i--) {\n                    simplifyParen(model, arrayCell(atom.array, i));\n                }\n            }\n        });\n    }\n}\n","import { register } from './commands';\nimport type { ModelPrivate } from './model-class';\nimport {\n    setSelection,\n    move,\n    leap,\n    skip,\n    jumpToMathFieldBoundary,\n    up,\n    down,\n    collapseSelectionForward,\n    getAnchor,\n    getAnchorStyle,\n    selectGroup,\n    extend,\n    setSelectionExtent,\n    selectAll,\n    moveAfterParent,\n} from './model-selection';\nimport { deleteChar } from './model-delete';\nimport { Atom } from '../core/atom';\n\n/**\n * Switch the cursor to the superscript and select it. If there is no subscript\n * yet, create one.\n */\nexport function moveToSuperscript(model: ModelPrivate): boolean {\n    collapseSelectionForward(model);\n    if (!getAnchor(model).superscript) {\n        if (getAnchor(model).subscript) {\n            getAnchor(model).superscript = [new Atom('', 'first')];\n        } else {\n            const sibling = model.sibling(1);\n            if (sibling?.superscript) {\n                model.path[model.path.length - 1].offset += 1;\n                //            setSelection(model, model.anchorOffset() + 1);\n            } else if (sibling?.subscript) {\n                model.path[model.path.length - 1].offset += 1;\n                //            setSelection(model, model.anchorOffset() + 1);\n                getAnchor(model).superscript = [new Atom('', 'first')];\n            } else {\n                if (getAnchor(model).limits !== 'limits') {\n                    model\n                        .siblings()\n                        .splice(\n                            model.anchorOffset() + 1,\n                            0,\n                            new Atom(\n                                model.parent().mode,\n                                'msubsup',\n                                '\\u200b',\n                                getAnchorStyle(model)\n                            )\n                        );\n                    model.path[model.path.length - 1].offset += 1;\n                    //            setSelection(model, model.anchorOffset() + 1);\n                }\n                getAnchor(model).superscript = [new Atom('', 'first')];\n            }\n        }\n    }\n    model.path.push({ relation: 'superscript', offset: 0 });\n    selectGroup(model);\n    return true;\n}\n\n/**\n * Switch the cursor to the subscript and select it. If there is no subscript\n * yet, create one.\n */\nexport function moveToSubscript(model: ModelPrivate): boolean {\n    collapseSelectionForward(model);\n    if (!getAnchor(model).subscript) {\n        if (getAnchor(model).superscript) {\n            getAnchor(model).subscript = [new Atom('', 'first')];\n        } else {\n            const sibling = model.sibling(1);\n            if (sibling?.subscript) {\n                model.path[model.path.length - 1].offset += 1;\n                // setSelection(model, model.anchorOffset() + 1);\n            } else if (sibling?.superscript) {\n                model.path[model.path.length - 1].offset += 1;\n                // setSelection(model, model.anchorOffset() + 1);\n                getAnchor(model).subscript = [new Atom('', 'first')];\n            } else {\n                if (getAnchor(model).limits !== 'limits') {\n                    model\n                        .siblings()\n                        .splice(\n                            model.anchorOffset() + 1,\n                            0,\n                            new Atom(\n                                model.parent().mode,\n                                'msubsup',\n                                '\\u200b',\n                                getAnchorStyle(model)\n                            )\n                        );\n                    model.path[model.path.length - 1].offset += 1;\n                    // setSelection(model, model.anchorOffset() + 1);\n                }\n                getAnchor(model).subscript = [new Atom('', 'first')];\n            }\n        }\n    }\n    model.path.push({ relation: 'subscript', offset: 0 });\n    selectGroup(model);\n    return true;\n}\n\n/**\n * If cursor is currently in:\n * - superscript: move to subscript, creating it if necessary\n * - subscript: move to superscript, creating it if necessary\n * - numerator: move to denominator\n * - denominator: move to numerator\n * - otherwise: move to superscript\n */\nregister(\n    {\n        moveToOpposite: (model: ModelPrivate): boolean => {\n            const OPPOSITE_RELATIONS = {\n                superscript: 'subscript',\n                subscript: 'superscript',\n                denom: 'numer',\n                numer: 'denom',\n            };\n            const oppositeRelation = OPPOSITE_RELATIONS[model.relation()];\n            if (!oppositeRelation) {\n                moveToSuperscript(model);\n            }\n\n            if (!model.parent()[oppositeRelation]) {\n                // Don't have children of the opposite relation yet\n                // Add them\n                model.parent()[oppositeRelation] = [new Atom('', 'first')];\n            }\n\n            setSelection(model, 0, 'end', oppositeRelation);\n            return true;\n        },\n        moveBeforeParent: (model: ModelPrivate): boolean => {\n            if (model.path.length > 1) {\n                model.path.pop();\n                setSelection(model, model.anchorOffset() - 1);\n                return true;\n            }\n            model.announce('plonk');\n            return false;\n        },\n        moveAfterParent: (model: ModelPrivate): boolean =>\n            moveAfterParent(model),\n\n        moveToNextPlaceholder: (model: ModelPrivate): boolean =>\n            leap(model, +1),\n        moveToPreviousPlaceholder: (model: ModelPrivate): boolean =>\n            leap(model, -1),\n        moveToNextChar: (model: ModelPrivate): boolean => move(model, +1),\n        moveToPreviousChar: (model: ModelPrivate): boolean => move(model, -1),\n        moveUp: (model: ModelPrivate): boolean => up(model),\n        moveDown: (model: ModelPrivate): boolean => down(model),\n        moveToNextWord: (model: ModelPrivate): boolean => skip(model, +1),\n        moveToPreviousWord: (model: ModelPrivate): boolean => skip(model, -1),\n        moveToGroupStart: (model: ModelPrivate): boolean =>\n            setSelection(model, 0),\n        moveToGroupEnd: (model: ModelPrivate): boolean =>\n            setSelection(model, -1),\n        moveToMathFieldStart: (model: ModelPrivate): boolean =>\n            jumpToMathFieldBoundary(model, -1),\n        moveToMathFieldEnd: (model: ModelPrivate): boolean =>\n            jumpToMathFieldBoundary(model, +1),\n        moveToSuperscript: (model: ModelPrivate): boolean =>\n            moveToSuperscript(model),\n        moveToSubscript: (model: ModelPrivate): boolean =>\n            moveToSubscript(model),\n    },\n    { target: 'model', category: 'selection-anchor' }\n);\n\nregister(\n    {\n        selectGroup: (model: ModelPrivate): boolean => selectGroup(model),\n\n        selectAll: (model: ModelPrivate): boolean => selectAll(model),\n        extendToNextChar: (model: ModelPrivate): boolean => extend(model, +1),\n        extendToPreviousChar: (model: ModelPrivate): boolean =>\n            extend(model, -1),\n        extendToNextWord: (model: ModelPrivate): boolean =>\n            skip(model, +1, { extend: true }),\n        extendToPreviousWord: (model: ModelPrivate): boolean =>\n            skip(model, -1, { extend: true }),\n        extendUp: (model: ModelPrivate): boolean => up(model, { extend: true }),\n        extendDown: (model: ModelPrivate): boolean =>\n            down(model, { extend: true }),\n        /**\n         * Extend the selection until the next boundary is reached. A boundary\n         * is defined by an atom of a different type (mbin, mord, etc...)\n         * than the current focus. For example, in \"1234+x=y\", if the focus is between\n         * \"1\" and \"2\", invoking `extendToNextBoundary_` would extend the selection\n         * to \"234\".\n         */\n        extendToNextBoundary: (model: ModelPrivate): boolean =>\n            skip(model, +1, { extend: true }),\n\n        /**\n         * Extend the selection until the previous boundary is reached. A boundary\n         * is defined by an atom of a different type (mbin, mord, etc...)\n         * than the current focus. For example, in \"1+23456\", if the focus is between\n         * \"5\" and \"6\", invoking `extendToPreviousBoundary` would extend the selection\n         * to \"2345\".\n         */\n        extendToPreviousBoundary: (model: ModelPrivate): boolean =>\n            skip(model, -1, { extend: true }),\n        extendToGroupStart: (model: ModelPrivate): boolean =>\n            setSelectionExtent(model, -model.anchorOffset()),\n        extendToGroupEnd: (model: ModelPrivate): boolean =>\n            setSelectionExtent(\n                model,\n                model.siblings().length - model.anchorOffset()\n            ),\n        extendToMathFieldStart: (model: ModelPrivate): boolean =>\n            jumpToMathFieldBoundary(model, -1, { extend: true }),\n        extendToMathFieldEnd: (model: ModelPrivate): boolean =>\n            jumpToMathFieldBoundary(model, +1, { extend: true }),\n    },\n    { target: 'model', category: 'selection-extend' }\n);\n\nregister(\n    {\n        deleteAll: (model: ModelPrivate): boolean => {\n            selectAll(model);\n            return deleteChar(model);\n        },\n        deleteNextChar: (model: ModelPrivate): boolean => deleteChar(model, +1),\n        deletePreviousChar: (model: ModelPrivate): boolean =>\n            deleteChar(model, -1),\n        deleteNextWord: (model: ModelPrivate): boolean => {\n            skip(model, +1, { extend: true });\n            return deleteChar(model);\n        },\n        deletePreviousWord: (model: ModelPrivate): boolean => {\n            skip(model, -1, { extend: true });\n            return deleteChar(model);\n        },\n        deleteToGroupStart: (model: ModelPrivate): boolean => {\n            setSelectionExtent(model, -model.anchorOffset());\n            return deleteChar(model);\n        },\n        deleteToGroupEnd: (model: ModelPrivate): boolean => {\n            jumpToMathFieldBoundary(model, -1, { extend: true });\n            return deleteChar(model);\n        },\n        deleteToMathFieldStart: (model: ModelPrivate): boolean => {\n            jumpToMathFieldBoundary(model, -1, { extend: true });\n            return deleteChar(model);\n        },\n        deleteToMathFieldEnd: (model: ModelPrivate): boolean => {\n            jumpToMathFieldBoundary(model, +1, { extend: true });\n            return deleteChar(model);\n        },\n    },\n    { target: 'model', category: 'delete' }\n);\n","/**\n * This modules handles low-level keyboard events and normalize them across\n * browsers.\n *\n * See https://dvcs.w3.org/hg/d4e/raw-file/tip/key-event-test.html\n * (also at https://w3c.github.io/uievents/tools/key-event-viewer.html)\n *\n *\n * - **KeyboardEvent.key** (the printable value associated with the key or a string\n * for special keys)\n *  https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\n *  https://www.w3.org/TR/uievents-key/\n *\n * - **KeyboardEvent.code** (the physical key being pressed. On an AZERTY keyboard\n * the key labelled \"A\" is KeyQ)\n *  https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code/code_values\n *  https://www.w3.org/TR/uievents-code/\n *\n * Note:\n * - `charCode`, `keyCode` and `which` are deprecated\n *\n * For background, see this info regarding keybinding in VSCode:\n * - https://github.com/microsoft/vscode/tree/master/src/vs/workbench/services/keybinding\n * - https://github.com/microsoft/vscode/wiki/Keybinding-Issues\n */\n\nimport { normalizeKeyboardEvent } from './keyboard-layout';\n\nconst PRINTABLE_KEYCODE = [\n    'Backquote', // Japanese keyboard: hankaku/zenkaku/kanji key, which is non-printable\n    'Digit0',\n    'Digit1',\n    'Digit2',\n    'Digit3',\n    'Digit4',\n    'Digit5',\n    'Digit6',\n    'Digit7',\n    'Digit8',\n    'Digit9',\n    'Minus',\n    'Equal',\n    'IntlYen', // Japanese Keyboard. Russian keyboard: \\/\n\n    'KeyQ', // AZERTY keyboard: labeled 'a'\n    'KeyW', // AZERTY keyboard: labeled 'z'\n    'KeyE',\n    'KeyR',\n    'KeyT',\n    'KeyY', // QWERTZ keyboard: labeled 'z'\n    'KeyU',\n    'KeyI',\n    'KeyO',\n    'KeyP',\n    'BracketLeft',\n    'BracketRight',\n    'Backslash', // May be labeled #~ on UK 102 keyboard\n    'KeyA', // AZERTY keyboard: labeled 'q'\n    'KeyS',\n    'KeyD',\n    'KeyF',\n    'KeyG',\n    'KeyH',\n    'KeyJ',\n    'KeyK',\n    'KeyL',\n    'Semicolon',\n    'Quote',\n    'IntlBackslash', // QWERTZ keyboard '><'\n    'KeyZ', // AZERTY: 'w', QWERTZ: 'y'\n    'KeyX',\n    'KeyC',\n    'KeyV',\n    'KeyB',\n    'KeyN',\n    'KeyM',\n    'Comma',\n    'Period',\n    'Slash',\n    'IntlRo', // Japanse keyboard '\\ろ'\n\n    'Space',\n\n    'Numpad0',\n    'Numpad1',\n    'Numpad2',\n    'Numpad3',\n    'Numpad4',\n    'Numpad5',\n    'Numpad6',\n    'Numpad7',\n    'Numpad8',\n    'Numpad9',\n    'NumpadAdd',\n    'NumpadComma',\n    'NumpadDecimal',\n    'NumpadDivide',\n    'NumpadEqual',\n    'NumpadHash',\n    'NumpadMultiply',\n    'NumpadParenLeft',\n    'NumpadParenRight',\n    'NumpadStar',\n    'NumpadSubstract',\n];\n\nexport function mightProducePrintableCharacter(evt: KeyboardEvent): boolean {\n    if (evt.ctrlKey || evt.metaKey) {\n        // ignore ctrl/cmd-combination but not shift/alt-combinatios\n        return false;\n    }\n\n    if (evt.key === 'Dead') {\n        return false;\n    }\n\n    return PRINTABLE_KEYCODE.indexOf(evt.code) >= 0;\n}\n\n/**\n * Create a normalized representation of a keyboard event,\n * i.e., key code and modifier keys. For example:\n * - `ctrl+Shift+alt+[KeyF]`\n *\n * Note: the key code corresponds to a physical key, e.g. 'KeyQ' is\n * the key labeled 'A' on a French keyboard\n *\n */\nfunction keyboardEventToString(evt: KeyboardEvent): string {\n    evt = normalizeKeyboardEvent(evt);\n\n    const modifiers = [];\n\n    if (evt.ctrlKey) modifiers.push('ctrl');\n    if (evt.metaKey) modifiers.push('meta');\n    if (evt.altKey) modifiers.push('alt');\n    if (evt.shiftKey) modifiers.push('shift');\n\n    // If no modifiers, simply return the key name\n    if (modifiers.length === 0) return '[' + evt.code + ']';\n\n    modifiers.push('[' + evt.code + ']');\n\n    return modifiers.join('+');\n}\n\n/**\n * Setup to capture the keyboard events from a `TextArea` and redispatch them to\n * handlers.\n *\n * In general, commands (arrows, delete, etc..) should be handled\n * in the `keystroke()` handler while text input should be handled in\n * `typedtext()`.\n *\n * @param {HTMLElement} textarea A `TextArea` element that will capture the keyboard\n * events. While this element will usually be a `TextArea`, it could be any\n * element that is focusable and can receive keyboard events.\n * @param {Object.<string, any>} handlers\n * @param {function} handlers.keystroke invoked on a key down event, including\n * for special keys such as ESC, arrow keys, tab, etc... and their variants\n * with modifiers.\n * @param {function} handlers.typedtext invoked on a keypress or other events\n * when a key corresponding to a character has been pressed. This include `a-z`,\n * `0-9`, `{}`, `^_()`, etc...\n * This does not include arrow keys, tab, etc... but does include 'space'\n * When a 'character' key is pressed, both `keystroke()` and `typedtext()` will\n * be invoked. When a control/function key is pressed, only `keystroke()` will\n * be invoked. In some cases, for example when using input methods or entering\n * emoji, only `typedtext()` will be invoked.\n */\nexport function delegateKeyboardEvents(\n    textarea: HTMLElement,\n    handlers: {\n        allowDeadKey: () => boolean;\n        typedText: (text: string) => void;\n        paste: (text: string) => void;\n        keystroke: (keystroke: string, e: KeyboardEvent) => void;\n        focus: () => void;\n        blur: () => void;\n    }\n): void {\n    let keydownEvent = null;\n    let keypressEvent = null;\n    let compositionInProgress = false;\n    let deadKey = false;\n\n    // This callback is invoked after a keyboard event has been processed\n    // by the textarea\n    let callbackTimeoutID: number;\n    function defer(cb: () => void): void {\n        clearTimeout(callbackTimeoutID);\n        callbackTimeoutID = setTimeout(function () {\n            clearTimeout(callbackTimeoutID);\n            cb();\n        });\n    }\n\n    function handleTypedText(): void {\n        // Some browsers (Firefox, Opera) fire a keypress event for commands\n        // such as command-C where there might be a non-empty selection.\n        // We need to ignore these.\n        if (hasSelection(textarea)) return;\n\n        const text = textarea['value'];\n        textarea['value'] = '';\n        if (text.length > 0) handlers.typedText(text);\n    }\n\n    const target = textarea;\n\n    target.addEventListener(\n        'keydown',\n        (e) => {\n            const allowDeadKey = handlers.allowDeadKey();\n            if (\n                !allowDeadKey &&\n                (e.key === 'Dead' ||\n                    e.key === 'Unidentified' ||\n                    e.keyCode === 229)\n            ) {\n                deadKey = true;\n                compositionInProgress = false;\n                // This sequence seems to cancel dead keys\n                // but don't call our blur/focus handlers\n                const savedBlur = handlers.blur;\n                const savedFocus = handlers.focus;\n                handlers.blur = null;\n                handlers.focus = null;\n                if (typeof textarea.blur === 'function') {\n                    textarea.blur();\n                    textarea.focus();\n                }\n                handlers.blur = savedBlur;\n                handlers.focus = savedFocus;\n            } else {\n                deadKey = false;\n            }\n            if (\n                !compositionInProgress &&\n                e.code !== 'CapsLock' &&\n                !/(Control|Meta|Alt|Shift)(Right|Left)/.test(e.code)\n            ) {\n                keydownEvent = e;\n                keypressEvent = null;\n                return handlers.keystroke(keyboardEventToString(e), e);\n            }\n            return true;\n        },\n        true\n    );\n    target.addEventListener(\n        'keypress',\n        (e) => {\n            // If this is not the first keypress after a keydown, that is,\n            // if this is a repeated keystroke, call the keystroke handler.\n            if (!compositionInProgress) {\n                if (keydownEvent && keypressEvent) {\n                    handlers.keystroke(\n                        keyboardEventToString(keydownEvent),\n                        keydownEvent\n                    );\n                }\n\n                keypressEvent = e;\n                defer(handleTypedText);\n            }\n        },\n        true\n    );\n    target.addEventListener(\n        'keyup',\n        () => {\n            // If we've received a keydown, but no keypress, check what's in the\n            // textarea field.\n            if (!compositionInProgress && keydownEvent && !keypressEvent) {\n                handleTypedText();\n            }\n        },\n        true\n    );\n    target.addEventListener(\n        'paste',\n        () => {\n            // In some cases (Linux browsers), the text area might not be focused\n            // when doing a middle-click paste command.\n            textarea.focus();\n            const text = textarea['value'];\n            textarea['value'] = '';\n            if (text.length > 0) handlers.paste(text);\n        },\n        true\n    );\n    target.addEventListener(\n        'blur',\n        () => {\n            keydownEvent = null;\n            keypressEvent = null;\n            if (handlers.blur) handlers.blur();\n        },\n        true\n    );\n    target.addEventListener(\n        'focus',\n        () => {\n            if (handlers.focus) handlers.focus();\n        },\n        true\n    );\n    target.addEventListener(\n        'compositionstart',\n        () => {\n            compositionInProgress = true;\n        },\n        true\n    );\n    target.addEventListener(\n        'compositionend',\n        () => {\n            compositionInProgress = false;\n            if (deadKey && handlers.allowDeadKey()) {\n                defer(handleTypedText);\n            }\n        },\n        true\n    );\n\n    // The `input` handler gets called when the field is changed,\n    // for example with input methods or emoji input...\n    target.addEventListener('input', () => {\n        if (deadKey) {\n            const savedBlur = handlers.blur;\n            const savedFocus = handlers.focus;\n            handlers.blur = null;\n            handlers.focus = null;\n            textarea.blur();\n            textarea.focus();\n            handlers.blur = savedBlur;\n            handlers.focus = savedFocus;\n            deadKey = false;\n            compositionInProgress = false;\n            if (handlers.allowDeadKey()) {\n                defer(handleTypedText);\n            }\n        } else if (!compositionInProgress) {\n            defer(handleTypedText);\n        }\n    });\n}\n\nfunction hasSelection(textarea): boolean {\n    return textarea.selectionStart !== textarea.selectionEnd;\n}\n\nexport function eventToChar(evt: KeyboardEvent): string {\n    if (!evt) return '';\n    let result: string;\n    if (evt.key === 'Unidentified') {\n        // On Android, the evt.key seems to always be 'Unidentified'.\n        // Get the value entered in the event target\n        if (evt.target) {\n            result = evt.target['value'];\n        }\n    }\n    result = result ?? evt.key ?? evt.code;\n    if (\n        /^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(\n            result\n        )\n    ) {\n        result = '';\n    }\n    return result;\n}\n","import type { ModelPrivate } from './model';\nimport { insert } from './model-insert';\nimport { setPath } from './model-selection';\nimport { UndoStateChangeListener } from '../public/config';\n\nexport type UndoRecord = {\n    latex: string;\n    selection: string;\n};\n\ninterface UndoOptions {\n    onUndoStateWillChange?: UndoStateChangeListener;\n    onUndoStateDidChange?: UndoStateChangeListener;\n    suppressChangeNotifications?: boolean;\n}\n\n/**\n *\n * @class UndoManager\n * @property {Atom[]} mathlist\n * @property {object[]} stack Stack of undo/redo states\n * @property {number} index Index pointing to the undo/redo stack\n * @property {number} maximumDepth Maximum number of undo/redo states\n */\nexport class UndoManager {\n    mathlist: ModelPrivate;\n    maximumDepth: number;\n    record: boolean;\n    canCoalesce: boolean;\n    stack: UndoRecord[];\n    index: number;\n\n    constructor(mathlist: ModelPrivate) {\n        this.mathlist = mathlist;\n        this.maximumDepth = 1000;\n        this.record = false;\n        this.canCoalesce = false;\n        this.reset();\n    }\n\n    reset(): void {\n        this.stack = [];\n        this.index = -1;\n    }\n\n    startRecording(): void {\n        this.record = true;\n    }\n\n    canUndo(): boolean {\n        return this.index > 0;\n    }\n\n    canRedo(): boolean {\n        return this.index !== this.stack.length - 1;\n    }\n\n    undo(options: UndoOptions): void {\n        if (this.canUndo()) {\n            if (typeof options?.onUndoStateWillChange === 'function') {\n                options.onUndoStateWillChange(this.mathlist.mathfield, 'undo');\n            }\n            this.restore(this.stack[this.index - 1], options);\n            this.index -= 1;\n            if (options && typeof options.onUndoStateDidChange === 'function') {\n                options.onUndoStateDidChange(this.mathlist.mathfield, 'undo');\n            }\n            this.canCoalesce = false;\n        }\n    }\n    redo(options: UndoOptions): void {\n        if (this.canRedo()) {\n            if (typeof options?.onUndoStateWillChange === 'function') {\n                options.onUndoStateWillChange(this.mathlist.mathfield, 'redo');\n            }\n            this.index += 1;\n            this.restore(this.stack[this.index], options);\n            if (options && typeof options.onUndoStateDidChange === 'function') {\n                options.onUndoStateDidChange(this.mathlist.mathfield, 'redo');\n            }\n            this.canCoalesce = false;\n        }\n    }\n    pop(): void {\n        if (this.canUndo()) {\n            this.index -= 1;\n            this.stack.pop();\n        }\n    }\n    /**\n     * Push a snapshot of the content and selection of the mathfield onto the\n     * undo stack so that it can potentially be reverted to later.\n     */\n    snapshot(options: UndoOptions): void {\n        if (!this.record) return;\n\n        if (typeof options?.onUndoStateWillChange === 'function') {\n            options.onUndoStateWillChange(this.mathlist.mathfield, 'snapshot');\n        }\n        // Drop any entries that are part of the redo stack\n        this.stack.splice(this.index + 1, this.stack.length - this.index - 1);\n        // Add a new entry\n        this.stack.push({\n            latex: this.mathlist.root.toLatex(false),\n            selection: this.mathlist.toString(),\n        });\n\n        this.index++;\n        // If we've reached the maximum number of undo operations, forget the\n        // oldest one.\n        if (this.stack.length > this.maximumDepth) {\n            this.stack.shift();\n        }\n        if (options && typeof options.onUndoStateDidChange === 'function') {\n            options.onUndoStateDidChange(this.mathlist.mathfield, 'snapshot');\n        }\n        this.canCoalesce = false;\n    }\n\n    snapshotAndCoalesce(options: UndoOptions): void {\n        if (this.canCoalesce) {\n            this.pop();\n        }\n        this.snapshot(options);\n        this.canCoalesce = true;\n    }\n\n    /**\n     * Return an object capturing the state of the content and selection of the\n     * mathfield. Pass this object to restore() to reset the value of the math\n     * field to this saved value. This does not affect the undo stack.\n     */\n    save(): UndoRecord {\n        return {\n            latex: this.mathlist.root.toLatex(false),\n            selection: this.mathlist.toString(),\n        };\n    }\n    /**\n     * Set the content and selection of the mathfield to a value previously\n     * captured with save() or stored in the undo stack.\n     * This does not affect the undo stack.\n     */\n    restore(state: UndoRecord, options: UndoOptions): void {\n        const wasSuppressing = this.mathlist.suppressChangeNotifications;\n        if (typeof options.suppressChangeNotifications !== 'undefined') {\n            this.mathlist.suppressChangeNotifications =\n                options.suppressChangeNotifications;\n        }\n\n        // Restore the content\n        insert(this.mathlist, state ? state.latex : '', {\n            ...options,\n            format: 'latex',\n            mode: 'math',\n            insertionMode: 'replaceAll',\n            selectionMode: 'after',\n            smartFence: false,\n        });\n\n        // Restore the selection\n        setPath(\n            this.mathlist,\n            state ? state.selection : [{ relation: 'body', offset: 0 }]\n        );\n\n        this.mathlist.suppressChangeNotifications = wasSuppressing;\n    }\n}\n","import { isArray } from '../common/types';\n\nimport type { Atom } from '../core/atom';\n\nconst SPECIAL_IDENTIFIERS = {\n    '\\u2212': '-', // MINUS SIGN\n    '-': '-',\n    '\\\\alpha': 'alpha',\n    '\\\\beta': 'beta',\n    '\\\\gamma': 'gamma',\n    '\\\\delta': 'delta',\n    '\\\\epsilon': 'epsilon',\n    '\\\\varepsilon': 'varepsilon',\n    '\\\\zeta': 'zeta',\n    '\\\\eta': 'eta',\n    '\\\\theta': 'theta',\n    '\\\\vartheta': 'vartheta',\n    '\\\\iota': 'iota',\n    '\\\\kappa': 'kappa',\n    '\\\\lambda': 'lambda',\n    '\\\\mu': 'mu',\n    '\\\\nu': 'nu',\n    '\\\\xi': 'xi',\n    '\\\\pi': 'pi',\n    '\\\\rho': 'rho',\n    '\\\\sigma': 'sigma',\n    '\\\\tau': 'tau',\n    '\\\\upsilon': 'upsilon',\n    '\\\\phi': 'phi',\n    '\\\\varphi': 'varphi',\n    '\\\\chi': 'chi',\n    '\\\\psi': 'psi',\n    '\\\\omega': 'omega',\n    '\\\\Gamma': 'Gamma',\n    '\\\\Delta': 'Delta',\n    '\\\\Theta': 'Theta',\n    '\\\\Lambda': 'Lambda',\n    '\\\\Xi': 'Xi',\n    '\\\\Pi': 'Pi',\n    '\\\\Sigma': 'Sigma',\n    '\\\\Phi': 'Phi',\n    '\\\\Psi': 'Psi',\n    '\\\\Omega': 'Omega',\n};\n\nconst SPECIAL_OPERATORS = {\n    '\\\\pm': '+-',\n    '\\\\times': 'xx',\n    '\\\\colon': ':',\n    '\\\\vert': '|',\n    '\\\\Vert': '||',\n    '\\\\mid': '|',\n    '\\\\lbrace': '{',\n    '\\\\rbrace': '}',\n    '\\\\langle': '(:',\n    '\\\\rangle': ':)',\n    // '\\\\lfloor': '\\u230a',\n    // '\\\\rfloor': '\\u230b',\n    // '\\\\lceil': '\\u2308',\n    // '\\\\rceil': '\\u2309',\n\n    // '\\\\vec': '&#x20d7;',\n    // '\\\\acute': '&#x00b4;',\n    // '\\\\grave': '&#x0060;',\n    // '\\\\dot': '&#x02d9;',\n    // '\\\\ddot': '&#x00a8;',\n    // '\\\\tilde': '&#x007e;',\n    // '\\\\bar': '&#x00af;',\n    // '\\\\breve': '&#x02d8;',\n    // '\\\\check': '&#x02c7;',\n    // '\\\\hat': '&#x005e;'\n};\n\nexport function atomToAsciiMath(atom: Atom | Atom[]): string {\n    if (!atom) return '';\n    if (isArray(atom)) {\n        let result = '';\n        if (atom.length === 0) return '';\n        if (atom[0].type === 'first') atom.shift();\n        if (atom.length === 0) return '';\n        if (atom[0].mode === 'text') {\n            // Text mode... put it in (ASCII) quotes\n            let i = 0;\n            result = '\"';\n            while (atom[i] && atom[i].mode === 'text') {\n                result += atom[i].body;\n                i++;\n            }\n            result += '\"' + atomToAsciiMath(atom.slice(i));\n        } else if (atom[0].mode === 'math') {\n            let i = 0;\n            while (atom[i] && atom[i].mode === 'math') {\n                result += atomToAsciiMath(atom[i]);\n                i++;\n            }\n            result += atomToAsciiMath(atom.slice(i));\n        } else {\n            console.warn('toASCIIMath: Unexpected mode');\n        }\n        return result.trim();\n    }\n\n    if (atom.mode === 'text') {\n        return '\"' + atom.body + '\"'; // text -- add in (ASCII) quotes\n    }\n\n    let result = '';\n    const command = atom.symbol;\n    let m;\n\n    switch (atom.type) {\n        case 'group':\n        case 'root':\n            result = atomToAsciiMath(atom.body as Atom[]);\n            break;\n\n        case 'array':\n            break;\n\n        case 'genfrac':\n            if (atom.leftDelim || atom.rightDelim) {\n                result +=\n                    atom.leftDelim === '.' || !atom.leftDelim\n                        ? '{:'\n                        : atom.leftDelim;\n            }\n            if (atom.hasBarLine) {\n                result += '(';\n                result += atomToAsciiMath(atom.numer);\n                result += ')/(';\n                result += atomToAsciiMath(atom.denom);\n                result += ')';\n            } else {\n                // No bar line, i.e. \\choose, etc...\n                result += '(' + atomToAsciiMath(atom.numer) + '),';\n                result += '(' + atomToAsciiMath(atom.denom) + ')';\n            }\n            if (atom.leftDelim || atom.rightDelim) {\n                result +=\n                    atom.rightDelim === '.' || !atom.rightDelim\n                        ? '{:'\n                        : atom.rightDelim;\n            }\n            break;\n\n        case 'surd':\n            if (atom.index) {\n                result +=\n                    'root(' +\n                    atomToAsciiMath(atom.index) +\n                    ')(' +\n                    atomToAsciiMath(atom.body as Atom[]) +\n                    ')';\n            } else {\n                result += 'sqrt(' + atomToAsciiMath(atom.body as Atom[]) + ')';\n            }\n            break;\n\n        case 'leftright':\n            result +=\n                atom.leftDelim === '.' || !atom.leftDelim\n                    ? '{:'\n                    : atom.leftDelim;\n            result += atomToAsciiMath(atom.body as Atom[]);\n            result +=\n                atom.rightDelim === '.' || !atom.rightDelim\n                    ? ':}'\n                    : atom.rightDelim;\n            break;\n\n        case 'sizeddelim':\n        case 'delim':\n            // result += '<mo separator=\"true\"' + makeID(atom.id, options) + '>' + (SPECIAL_OPERATORS[atom.delim] || atom.delim) + '</mo>';\n            break;\n\n        case 'overlap':\n            break;\n\n        case 'overunder':\n            break;\n\n        case 'mord':\n            // @todo, deal with some special identifiers: \\alpha, etc...\n            result =\n                SPECIAL_IDENTIFIERS[command] ||\n                command ||\n                (typeof atom.body === 'string' ? atom.body : '');\n            if (result[0] === '\\\\') result += '';\n            m = command\n                ? command.match(/[{]?\\\\char\"([0-9abcdefABCDEF]*)[}]?/)\n                : null;\n            if (m) {\n                // It's a \\char command\n                result = String.fromCharCode(parseInt('0x' + m[1]));\n            } else if (result.length > 0 && result.charAt(0) === '\\\\') {\n                // atom is an identifier with no special handling. Use the\n                // Unicode value\n                if (typeof atom.body === 'string') {\n                    result = atom.body.charAt(0);\n                } else {\n                    result = atom.symbol;\n                }\n            }\n            // result = '<mi' + variant + makeID(atom.id, options) + '>' + xmlEscape(result) + '</mi>';\n            break;\n\n        case 'mbin':\n        case 'mrel':\n        case 'textord':\n        case 'minner':\n            if (command && SPECIAL_IDENTIFIERS[command]) {\n                // Some 'textord' are actually identifiers. Check them here.\n                result = SPECIAL_IDENTIFIERS[command];\n            } else if (command && SPECIAL_OPERATORS[command]) {\n                result = SPECIAL_OPERATORS[command];\n            } else {\n                result = atom.body as string;\n            }\n            break;\n\n        case 'mopen':\n        case 'mclose':\n            result += atom.body;\n            break;\n\n        case 'mpunct':\n            result = SPECIAL_OPERATORS[command] || command;\n            break;\n\n        case 'mop':\n            if (atom.body !== '\\u200b') {\n                // Not ZERO-WIDTH\n                result = '';\n                if (command === '\\\\operatorname') {\n                    result += atomToAsciiMath(atom.body as Atom[]);\n                } else {\n                    result += atom.body || command;\n                }\n                result += ' ';\n            }\n            break;\n\n        case 'mathstyle':\n            break;\n\n        case 'box':\n            break;\n\n        case 'spacing':\n            break;\n\n        case 'enclose':\n            break;\n\n        case 'space':\n            result = ' ';\n            break;\n    }\n    // Subscripts before superscripts (according to the ASCIIMath spec)\n    if (atom.subscript) {\n        result += '_';\n        const arg = atomToAsciiMath(atom.subscript);\n        if (arg.length > 1 && !/^(-)?\\d+(\\.\\d*)?$/.test(arg)) {\n            result += '(' + arg + ')';\n        } else {\n            result += arg;\n        }\n    }\n\n    if (atom.superscript) {\n        result += '^';\n        const arg = atomToAsciiMath(atom.superscript);\n        if (arg.length > 1 && !/^(-)?\\d+(\\.\\d*)?$/.test(arg)) {\n            result += '(' + arg + ')';\n        } else {\n            result += arg;\n        }\n    }\n\n    return result;\n}\n","export const STRINGS = {\n    en: {\n        'keyboard.tooltip.functions': 'Functions',\n        'keyboard.tooltip.symbols': 'Symbols',\n        'keyboard.tooltip.greek': 'Greek Letters',\n        'keyboard.tooltip.command': 'LaTeX Command Mode',\n        'keyboard.tooltip.numeric': 'Numeric',\n        'keyboard.tooltip.roman': 'Roman Letters',\n        'tooltip.copy to clipboard': 'Copy to Clipboard',\n        'tooltip.redo': 'Redo',\n        'tooltip.toggle virtual keyboard': 'Toggle Virtual Keyboard',\n        'tooltip.undo': 'Undo',\n    },\n    ar: {\n        'keyboard.tooltip.functions': 'مهام',\n        'keyboard.tooltip.symbols': 'حرف او رمز',\n        'keyboard.tooltip.greek': 'حروف يونانية',\n        'keyboard.tooltip.command': 'حالة تلقي الأوامر اللاتك',\n        'keyboard.tooltip.numeric': 'الرقمية',\n        'keyboard.tooltip.roman': 'رموز الاحرف الرومانية',\n        'tooltip.copy to clipboard': 'نسخ إلى الحافظة',\n        'tooltip.redo': 'الإعادة',\n        'tooltip.toggle virtual keyboard': 'تبديل لوحة المفاتيح الإفتراضية',\n        'tooltip.undo': 'إلغاء',\n    },\n    de: {\n        'keyboard.tooltip.functions': 'Funktionen',\n        'keyboard.tooltip.symbols': 'Symbole',\n        'keyboard.tooltip.greek': 'Griechische Buchstaben',\n        'keyboard.tooltip.command': 'LaTeX-Befehlsmodus',\n        'keyboard.tooltip.numeric': 'Numerisch',\n        'keyboard.tooltip.roman': 'Römische Buchstaben',\n        'tooltip.copy to clipboard': 'In die Zwischenablage kopieren',\n        'tooltip.redo': 'Wiederholen',\n        'tooltip.toggle virtual keyboard': 'Virtuelle Tastatur umschalten',\n        'tooltip.undo': 'Widerrufen',\n    },\n    el: {\n        'keyboard.tooltip.functions': 'συναρτήσεις',\n        'keyboard.tooltip.symbols': 'σύμβολα',\n        'keyboard.tooltip.greek': 'ελληνικά γράμματα',\n        'keyboard.tooltip.command': 'Λειτουργία εντολών LaTeX',\n        'keyboard.tooltip.numeric': 'Αριθμητικός',\n        'keyboard.tooltip.roman': 'Ρωμαϊκά γράμματα',\n        'tooltip.copy to clipboard': 'Αντιγραφή στο πρόχειρο',\n        'tooltip.redo': 'Ξανακάνω',\n        'tooltip.toggle virtual keyboard': 'Εναλλαγή εικονικού πληκτρολογίου',\n        'tooltip.undo': 'Ξεκάνω',\n    },\n    es: {\n        'keyboard.tooltip.functions': 'Funciones',\n        'keyboard.tooltip.symbols': 'Símbolos',\n        'keyboard.tooltip.greek': 'Letras griegas',\n        'keyboard.tooltip.command': 'Modo Comando LaTeX',\n        'keyboard.tooltip.numeric': 'Numérico',\n        'keyboard.tooltip.roman': 'Letras romanas',\n        'tooltip.copy to clipboard': 'Copiar al portapapeles',\n        'tooltip.redo': 'Rehacer',\n        'tooltip.toggle virtual keyboard': 'Alternar teclado virtual',\n        'tooltip.undo': 'Deshacer',\n    },\n    fa: {\n        'keyboard.tooltip.functions': 'توابع',\n        'keyboard.tooltip.symbols': 'نمادها',\n        'keyboard.tooltip.greek': 'حروف یونانی',\n        'keyboard.tooltip.command': 'حالت دستور لاتک',\n        'keyboard.tooltip.numeric': 'عددی',\n        'keyboard.tooltip.roman': 'حروف رومی',\n        'tooltip.copy to clipboard': 'کپی به کلیپبورد',\n        'tooltip.redo': 'بازگشت به بعد',\n        'tooltip.toggle virtual keyboard': 'نمایش/نهفتن کیبورد مجازی',\n        'tooltip.undo': 'بازگشت به قبل',\n    },\n    fr: {\n        'keyboard.tooltip.functions': 'Fonctions',\n        'keyboard.tooltip.symbols': 'Symboles',\n        'keyboard.tooltip.greek': 'Lettres grecques',\n        'keyboard.tooltip.command': 'Mode de commandes LaTeX',\n        'keyboard.tooltip.numeric': 'Numérique',\n        'keyboard.tooltip.roman': 'Lettres romaines',\n        'tooltip.copy to clipboard': 'Copier dans le presse-papiers',\n        'tooltip.redo': 'Rétablir',\n        'tooltip.toggle virtual keyboard':\n            'Afficher/Masquer le clavier virtuel',\n        'tooltip.undo': 'Annuler',\n    },\n    it: {\n        'keyboard.tooltip.functions': 'Funzioni',\n        'keyboard.tooltip.symbols': 'Simboli',\n        'keyboard.tooltip.greek': 'Lettere greche',\n        'keyboard.tooltip.command': 'Modalità di comando LaTeX',\n        'keyboard.tooltip.numeric': 'Numerico',\n        'keyboard.tooltip.roman': 'Lettere romane',\n        'tooltip.copy to clipboard': 'Copia negli appunti',\n        'tooltip.redo': 'Rifare',\n        'tooltip.toggle virtual keyboard':\n            'Attiva / disattiva la tastiera virtuale',\n        'tooltip.undo': 'Disfare',\n    },\n    ja: {\n        'keyboard.tooltip.functions': '関数',\n        'keyboard.tooltip.symbols': 'シンボル',\n        'keyboard.tooltip.greek': 'ギリシャ文字',\n        'keyboard.tooltip.command': 'LaTeXコマンドモード',\n        'keyboard.tooltip.numeric': '数値',\n        'keyboard.tooltip.roman': 'ローマ字',\n        'tooltip.copy to clipboard': 'クリップボードにコピー',\n        'tooltip.redo': 'やり直し',\n        'tooltip.toggle virtual keyboard': '仮想キーボードの切り替え',\n        'tooltip.undo': '元に戻す',\n    },\n    pl: {\n        'keyboard.tooltip.functions': 'Funkcje',\n        'keyboard.tooltip.symbols': 'Symbolika',\n        'keyboard.tooltip.greek': 'Litery greckie',\n        'keyboard.tooltip.command': 'Tryb poleceń LaTeX',\n        'keyboard.tooltip.numeric': 'Numeryczne',\n        'keyboard.tooltip.roman': 'Litery rzymskie',\n        'tooltip.copy to clipboard': 'Kopiuj do Schowka',\n        'tooltip.redo': 'Przywróć',\n        'tooltip.toggle virtual keyboard': 'Przełącz wirtualną klawiaturę',\n        'tooltip.undo': 'Cofnij',\n    },\n    ru: {\n        'keyboard.tooltip.functions': 'Функции',\n        'keyboard.tooltip.symbols': 'Символы',\n        'keyboard.tooltip.greek': 'Греческие буквы',\n        'keyboard.tooltip.command': 'Режим командной строки LaTeX',\n        'keyboard.tooltip.numeric': 'числовой',\n        'keyboard.tooltip.roman': 'Латинские буквы',\n        'tooltip.copy to clipboard': 'Скопировать в буфер обмена',\n        'tooltip.redo': 'переделывать',\n        'tooltip.toggle virtual keyboard': 'Переключить виртуальную клавиатуру',\n        'tooltip.undo': 'расстегивать',\n    },\n};\n","// import { Keys } from '../types-utils';\nimport { STRINGS } from './l10n-strings';\n\nexport const l10n: {\n    locale?: string;\n    plural?(value, s, options): Intl.PluralRules;\n    ordinal?(value, s, options): Intl.PluralRules;\n    cardinal?(value, s, options): Intl.PluralRules;\n    merge?(\n        locale: string | { [language: string]: { [key: string]: string } },\n        strings?: { [key: string]: string }\n    ): void;\n    _ordinalEnglishPluralCategories?: string[];\n    _ordinalPluralCategories?: string[];\n    _ordinalEnglish?: Intl.PluralRules;\n    _ordinal?: Intl.PluralRules;\n    _cardinalPluralCategories?: string[];\n    _cardinalEnglishPluralCategories?: string[];\n    _cardinalEnglish?: Intl.PluralRules;\n    _cardinal?: Intl.PluralRules;\n    _locale?: string;\n    strings?: { [language: string]: { [key: string]: string } };\n} = {};\n\nl10n.plural = function (value: number, s: string, options): Intl.PluralRules {\n    options = options ?? {};\n    options.type = options.type || 'cardinal';\n    const language = l10n.locale.substring(0, 2);\n    const rules = options.type === 'ordinal' ? l10n._ordinal : l10n._cardinal;\n    let rule =\n        options.type === 'ordinal'\n            ? l10n._ordinalPluralCategories.indexOf(rules.select(value))\n            : l10n._cardinalPluralCategories.indexOf(rules.select(value));\n\n    let result;\n    if (l10n.strings[l10n.locale]) result = l10n.strings[l10n.locale][s];\n    if (!result && l10n.strings[language]) result = l10n.strings[language][s];\n    if (!result) {\n        result = l10n.strings['en'][s];\n        if (!result) result = s;\n        if (options.type === 'ordinal') {\n            rule = l10n._ordinalPluralCategories.indexOf(\n                l10n._ordinalEnglish.select(value)\n            );\n        } else {\n            rule = l10n._cardinalPluralCategories.indexOf(\n                l10n._cardinalEnglish.select(value)\n            );\n        }\n    }\n    return result.split(';')[rule] || result.split(';')[0];\n};\n\n/*\n * Two forms for this function:\n * - merge(locale, strings)\n * Merge a dictionary of keys -> values for the specified locale\n * - merge(strings)\n * Merge a dictionary of locale code -> dictionary of keys -> values\n *\n */\nl10n.merge = function (\n    locale: string | { [language: string]: { [key: string]: string } },\n    strings?: { [key: string]: string }\n): void {\n    if (locale && strings) {\n        const savedLocale = l10n._locale;\n        l10n.locale = locale as string; // Load the necessary json file\n\n        l10n.strings[locale as string] = {\n            ...l10n.strings[locale as string],\n            ...strings,\n        };\n        l10n.locale = savedLocale;\n    } else if (locale && !strings) {\n        Object.keys(\n            locale as { [language: string]: { [key: string]: string } }\n        ).forEach((l) => l10n.merge(l, locale[l]));\n    }\n};\n\n// Add getter and setter for the _locale property of l10n\nObject.defineProperty(l10n, 'locale', {\n    set(locale) {\n        l10n._locale = locale;\n        l10n._ordinal = null;\n        l10n._cardinal = null;\n    },\n    get() {\n        // Use the browser defined language as the default language,\n        // \"english\" if not running in a browser (node.js)\n        if (!l10n._locale) {\n            // Use the setter, which will load the necessary .json files.\n            l10n._locale = navigator?.language.slice(0, 5) ?? 'en';\n        }\n        return l10n._locale;\n    },\n});\n\nObject.defineProperty(l10n, 'ordinal', {\n    get() {\n        if (!l10n._ordinal) {\n            l10n._ordinalEnglish = new Intl.PluralRules('en', {\n                type: 'ordinal',\n            });\n            l10n._ordinalEnglishPluralCategories = l10n._ordinalEnglish.resolvedOptions().pluralCategories;\n            l10n._ordinal = new Intl.PluralRules(l10n.locale, {\n                type: 'ordinal',\n            });\n            l10n._ordinalPluralCategories = l10n._ordinal.resolvedOptions().pluralCategories;\n            //    \"zero\", \"one\", \"two\", \"few\", \"many\" and \"other\"\n        }\n        return l10n._ordinal;\n    },\n});\n\nObject.defineProperty(l10n, 'cardinal', {\n    get() {\n        if (!l10n._cardinal) {\n            l10n._cardinalEnglish = new Intl.PluralRules('en', {\n                type: 'cardinal',\n            });\n            l10n._cardinalEnglishPluralCategories = l10n._cardinalEnglish.resolvedOptions().pluralCategories;\n            l10n._cardinal = new Intl.PluralRules(l10n.locale, {\n                type: 'cardinal',\n            });\n            l10n._cardinalPluralCategories = l10n._ordinal.resolvedOptions().pluralCategories;\n        }\n        return l10n._cardinal;\n    },\n});\n\nl10n.strings = STRINGS;\n\nexport function localize(s: string): string {\n    const language = l10n.locale.substring(0, 2);\n\n    let result = '';\n\n    // Attempt to find a match for the current locale\n    if (l10n.strings[l10n.locale]) result = l10n.strings[l10n.locale][s];\n    // If none is found, attempt to find a match for the language\n    if (!result && l10n.strings[language]) result = l10n.strings[language][s];\n    // If none is found, try english\n    if (!result) result = l10n.strings['en'][s];\n    // If that didn't work, use the key...\n    if (!result) result = s;\n\n    return result;\n}\n","import { Atom } from '../core/atom';\nimport { parseString } from '../core/parser';\nimport { suggest } from '../core/definitions-utils';\n\nimport type { ModelPrivate } from './model-class';\nimport { register as registerCommand } from './commands';\nimport { hidePopover, showPopoverWithLatex } from './popover';\nimport { insert } from './model-insert';\nimport {\n    decorateCommandStringAroundInsertionPoint,\n    extractCommandStringAroundInsertionPoint,\n    spliceCommandStringAroundInsertionPoint,\n} from './model-command-mode';\nimport { removeSuggestion } from './model-utils';\nimport { positionInsertionPointAfterCommitedCommand } from './model-selection';\nimport type { MathfieldPrivate } from './mathfield-class';\nimport { requestUpdate } from './mathfield-render';\n\nexport function insertSuggestion(\n    model: ModelPrivate,\n    s: string,\n    l: number\n): void {\n    removeSuggestion(model);\n\n    const mathlist = [];\n\n    // Make a mathlist from the string argument with the `suggestion` property set\n    const subs = s.substr(l);\n    for (const c of subs) {\n        const atom = new Atom('command', 'command', c);\n        atom.suggestion = true;\n        mathlist.push(atom);\n    }\n\n    // Splice in the mathlist after the insertion point, but don't change the\n    // insertion point\n    Array.prototype.splice.apply(\n        model.siblings(),\n        [model.anchorOffset() + 1, 0].concat(mathlist)\n    );\n}\n\n/**\n * When in command mode, insert the select command and return to math mode\n * If escape is true, the command is discared.\n * @param options.discard if true, the command is discarded and the\n * mode switched back to math\n * @param options.acceptSuggestion if true, accept the suggestion to\n * complete the command. Otherwise, only use what has been entered so far.\n */\nexport function complete(\n    mathfield: MathfieldPrivate,\n    options?: {\n        discard?: boolean;\n        acceptSuggestion?: boolean;\n    }\n): boolean {\n    options = options || { acceptSuggestion: false };\n    hidePopover(mathfield);\n    if (options.discard) {\n        spliceCommandStringAroundInsertionPoint(mathfield.model, null);\n        mathfield.switchMode('math');\n        return true;\n    }\n    const command = extractCommandStringAroundInsertionPoint(\n        mathfield.model,\n        !options.acceptSuggestion\n    );\n    if (command) {\n        if (command === '\\\\(' || command === '\\\\)') {\n            spliceCommandStringAroundInsertionPoint(mathfield.model, []);\n            insert(mathfield.model, command.slice(1), {\n                mode: mathfield.mode,\n            });\n        } else {\n            // We'll assume we want to insert in math mode\n            // (commands are only available in math mode)\n            mathfield.switchMode('math');\n            // Interpret the input as LaTeX code\n            const mathlist = parseString(\n                command,\n                'math',\n                null,\n                mathfield.config.macros\n            );\n            if (mathlist) {\n                spliceCommandStringAroundInsertionPoint(\n                    mathfield.model,\n                    mathlist\n                );\n            } else {\n                decorateCommandStringAroundInsertionPoint(\n                    mathfield.model,\n                    true\n                );\n            }\n        }\n        mathfield.snapshot();\n        mathfield.model.announce('replacement');\n        return true;\n    }\n    return false;\n}\n\nfunction updateSuggestion(mathfield: MathfieldPrivate): boolean {\n    positionInsertionPointAfterCommitedCommand(mathfield.model);\n    removeSuggestion(mathfield.model);\n    const command = extractCommandStringAroundInsertionPoint(mathfield.model);\n    const suggestions = suggest(command);\n    if (suggestions.length === 0) {\n        hidePopover(mathfield);\n        decorateCommandStringAroundInsertionPoint(mathfield.model, true);\n    } else {\n        const index = mathfield.suggestionIndex % suggestions.length;\n        const l = command.length - suggestions[index].match.length;\n        if (l !== 0) {\n            insertSuggestion(mathfield.model, suggestions[index].match, l);\n        }\n        showPopoverWithLatex(\n            mathfield,\n            suggestions[index].match,\n            suggestions.length > 1\n        );\n    }\n    requestUpdate(mathfield);\n    return true;\n}\n\nfunction nextSuggestion(mathfield: MathfieldPrivate): boolean {\n    mathfield.suggestionIndex += 1;\n    // The modulo of the suggestionIndex is used to determine which suggestion\n    // to display, so no need to worry about rolling over.\n    updateSuggestion(mathfield);\n    return false;\n}\n\nfunction previousSuggestion(mathfield: MathfieldPrivate): boolean {\n    mathfield.suggestionIndex -= 1;\n    if (mathfield.suggestionIndex < 0) {\n        // We're rolling over\n        // Get the list of suggestions, so we can know how many there are\n        // Not very efficient, but simple.\n        removeSuggestion(mathfield.model);\n        const command = extractCommandStringAroundInsertionPoint(\n            mathfield.model\n        );\n        const suggestions = suggest(command);\n        mathfield.suggestionIndex = suggestions.length - 1;\n    }\n    updateSuggestion(mathfield);\n    return false;\n}\n\nregisterCommand(\n    {\n        complete: complete,\n        nextSuggestion: nextSuggestion,\n        previousSuggestion: previousSuggestion,\n    },\n    { target: 'mathfield', category: 'autocomplete' }\n);\n","import { TextToSpeechOptions } from '../public/config';\n\nimport { Atom, isAtomArray } from '../core/atom';\n\nimport { atomsToMathML } from '../addons/math-ml';\n\n// Markup\n// Two common flavor of markups: SSML and 'mac'. The latter is only available\n// when using the native TTS synthesizer on Mac OS.\n// Use SSML in the production rules below. The markup will either be striped\n// off or replaced with the 'mac' markup as necessary.\n//\n// SSML                                             Mac\n// ----                                             ----\n// <emphasis>WORD</emphasis>                        [[emph +]]WORD\n// <break time=\"150ms\"/>                            [[slc 150]]\n// <say-as interpret-as=\"character\">A</say-as>      [[char LTRL] A [[char NORM]]\n\n// https://developer.apple.com/library/content/documentation/UserExperience/Conceptual/SpeechSynthesisProgrammingGuide/FineTuning/FineTuning.html#//apple_ref/doc/uid/TP40004365-CH5-SW3\n\n// https://pdfs.semanticscholar.org/8887/25b82b8dbb45dd4dd69b36a65f092864adb0.pdf\n\n// \"<audio src='non_existing_file.au'>File could not be played.</audio>\"\n\n// \"I am now <prosody rate='+0.06'>speaking 6% faster.</prosody>\"\n\nconst PRONUNCIATION = {\n    '\\\\alpha': 'alpha ',\n    '\\\\mu': 'mew ',\n    '\\\\sigma': 'sigma ',\n    '\\\\pi': 'pie ',\n    '\\\\imaginaryI': 'eye ',\n\n    '\\\\sum': 'Summation ',\n    '\\\\prod': 'Product ',\n\n    a: '<phoneme alphabet=\"ipa\" ph=\"eɪ\">a</phoneme>',\n    A: 'capital <phoneme alphabet=\"ipa\" ph=\"eɪ\">A</phoneme>',\n    '+': 'plus ',\n    '-': 'minus ',\n    ';': '<break time=\"150ms\"/> semi-colon <break time=\"150ms\"/>',\n    ',': '<break time=\"150ms\"/> comma  <break time=\"150ms\"/>',\n    '|': '<break time=\"150ms\"/>Vertical bar<break time=\"150ms\"/>',\n    '(': '<break time=\"150ms\"/>Open paren. <break time=\"150ms\"/>',\n    ')': '<break time=\"150ms\"/> Close paren. <break time=\"150ms\"/>',\n    '=': 'equals ',\n    '<': 'is less than ',\n    '\\\\lt': 'is less than ',\n    '<=': 'is less than or equal to ',\n    '\\\\le': 'is less than or equal to ',\n    '\\\\gt': 'is greater than ',\n    '>': 'is greater than ',\n    '\\\\ge': 'is greater than or equal to ',\n    '\\\\geq': 'is greater than or equal to ',\n    '\\\\leq': 'is less than or equal to ',\n    '!': 'factorial ',\n    '\\\\sin': 'sine ',\n    '\\\\cos': 'cosine ',\n    '\\u200b': '',\n    '\\u2212': 'minus ',\n    ':': '<break time=\"150ms\"/> such that <break time=\"200ms\"/> ',\n    '\\\\colon': '<break time=\"150ms\"/> such that <break time=\"200ms\"/> ',\n    '\\\\hbar': 'etch bar ',\n    '\\\\iff': '<break time=\"200ms\"/>if, and only if, <break time=\"200ms\"/>',\n    '\\\\Longleftrightarrow':\n        '<break time=\"200ms\"/>if, and only if, <break time=\"200ms\"/>',\n    '\\\\land': 'and ',\n    '\\\\lor': 'or ',\n    '\\\\neg': 'not ',\n    '\\\\div': 'divided by ',\n\n    '\\\\forall': 'for all ',\n    '\\\\exists': 'there exists ',\n    '\\\\nexists': 'there does not exists ',\n\n    '\\\\in': 'element of ',\n\n    '\\\\N':\n        'the set <break time=\"150ms\"/><say-as interpret-as=\"character\">n</say-as>',\n    '\\\\C':\n        'the set <break time=\"150ms\"/><say-as interpret-as=\"character\">c</say-as>',\n    '\\\\Z':\n        'the set <break time=\"150ms\"/><say-as interpret-as=\"character\">z</say-as>',\n    '\\\\Q':\n        'the set <break time=\"150ms\"/><say-as interpret-as=\"character\">q</say-as>',\n\n    '\\\\infty': 'infinity ',\n\n    '\\\\nabla': 'nabla ',\n\n    '\\\\partial': 'partial derivative of ',\n\n    '\\\\cdots': 'dot dot dot ',\n\n    '\\\\Rightarrow': 'implies ',\n\n    '\\\\lbrace': '<break time=\"150ms\"/>open brace<break time=\"150ms\"/>',\n    '\\\\{': '<break time=\"150ms\"/>open brace<break time=\"150ms\"/>',\n    '\\\\rbrace': '<break time=\"150ms\"/>close brace<break time=\"150ms\"/>',\n    '\\\\}': '<break time=\"150ms\"/>close brace<break time=\"150ms\"/>',\n    '\\\\langle': '<break time=\"150ms\"/>left angle bracket<break time=\"150ms\"/>',\n    '\\\\rangle': '<break time=\"150ms\"/>right angle bracket<break time=\"150ms\"/>',\n    '\\\\lfloor': '<break time=\"150ms\"/>open floor<break time=\"150ms\"/>',\n    '\\\\rfloor': '<break time=\"150ms\"/>close floor<break time=\"150ms\"/>',\n    '\\\\lceil': '<break time=\"150ms\"/>open ceiling<break time=\"150ms\"/>',\n    '\\\\rceil': '<break time=\"150ms\"/>close ceiling<break time=\"150ms\"/>',\n    '\\\\vert': '<break time=\"150ms\"/>vertical bar<break time=\"150ms\"/>',\n    '\\\\mvert': '<break time=\"150ms\"/>divides<break time=\"150ms\"/>',\n    '\\\\lvert': '<break time=\"150ms\"/>left vertical bar<break time=\"150ms\"/>',\n    '\\\\rvert': '<break time=\"150ms\"/>right vertical bar<break time=\"150ms\"/>',\n    // '\\\\lbrack':\t\t'left bracket',\n    // '\\\\rbrack':\t\t'right bracket',\n    '\\\\lbrack':\n        '<break time=\"150ms\"/> open square bracket <break time=\"150ms\"/>',\n    '\\\\rbrack':\n        '<break time=\"150ms\"/> close square bracket <break time=\"150ms\"/>',\n\n    // need to add code to detect singluar/plural. Until then spoken as plural since that is vastly more common\n    // note: need to worry about intervening &InvisibleTimes;.\n    // note: need to also do this when in numerator of fraction and number preceeds fraction\n    // note: need to do this for <msup>\n    mm: 'millimeters',\n    cm: 'centimeters',\n    km: 'kilometers',\n    kg: 'kilograms',\n};\n\nfunction getSpokenName(latex: string): string {\n    let result = '';\n    if (latex.charAt(0) === '\\\\') {\n        result = ' ' + latex.replace('\\\\', '') + ' ';\n    }\n    return result;\n}\n\nfunction platform(p: string): string {\n    let result = 'other';\n    if (navigator?.platform && navigator?.userAgent) {\n        if (/^(mac)/i.test(navigator.platform)) {\n            result = 'mac';\n        } else if (/^(win)/i.test(navigator.platform)) {\n            result = 'win';\n        } else if (/(android)/i.test(navigator.userAgent)) {\n            result = 'android';\n        } else if (\n            /(iphone)/i.test(navigator.userAgent) ||\n            /(ipod)/i.test(navigator.userAgent) ||\n            /(ipad)/i.test(navigator.userAgent)\n        ) {\n            result = 'ios';\n        } else if (/\\bCrOS\\b/i.test(navigator.userAgent)) {\n            result = 'chromeos';\n        }\n    }\n\n    return result === p ? p : '!' + p;\n}\n\nfunction isAtomic(atoms: Atom[]): boolean {\n    let count = 0;\n    if (isAtomArray(atoms)) {\n        for (const atom of atoms) {\n            if (atom.type !== 'first') {\n                count += 1;\n            }\n        }\n    }\n    return count === 1;\n}\n\nfunction atomicID(atoms: Atom[]): string {\n    if (isAtomArray(atoms)) {\n        for (const atom of atoms) {\n            if (atom.type !== 'first' && atom.id) {\n                return atom.id.toString();\n            }\n        }\n    }\n    return '';\n}\n\nfunction atomicValue(atoms: Atom[]): string {\n    let result = '';\n    if (isAtomArray(atoms)) {\n        for (const atom of atoms) {\n            if (atom.type !== 'first' && typeof atom.body === 'string') {\n                result += atom.body;\n            }\n        }\n    }\n    return result;\n}\n\nfunction atomToSpeakableFragment(\n    mode: 'text' | 'math',\n    atom: Atom | Atom[],\n    options: TextToSpeechOptions\n): string {\n    function letter(c: string): string {\n        let result = '';\n        if (!options.textToSpeechMarkup) {\n            if (/[a-z]/.test(c)) {\n                result += \" '\" + c.toUpperCase() + \"'\";\n            } else if (/[A-Z]/.test(c)) {\n                result += \" 'capital \" + c.toUpperCase() + \"'\";\n            } else {\n                result += c;\n            }\n        } else {\n            if (/[a-z]/.test(c)) {\n                result +=\n                    ' <say-as interpret-as=\"character\">' + c + '</say-as>';\n            } else if (/[A-Z]/.test(c)) {\n                result += 'capital ' + c.toLowerCase() + '';\n            } else {\n                result += c;\n            }\n        }\n        return result;\n    }\n\n    function emph(s: string): string {\n        return '<emphasis>' + s + '</emphasis>';\n    }\n\n    if (!atom) return '';\n\n    let result = '';\n\n    if (isAtomArray(atom)) {\n        let isInDigitRun = false; // need to group sequence of digits\n        let isInTextRun = false; // need to group text\n        for (let i = 0; i < atom.length; i++) {\n            if (atom[i].mode !== 'text') {\n                isInTextRun = false;\n            }\n            if (\n                i < atom.length - 2 &&\n                atom[i].type === 'mopen' &&\n                atom[i + 2].type === 'mclose' &&\n                atom[i + 1].type === 'mord'\n            ) {\n                result += ' of ';\n                result += emph(\n                    atomToSpeakableFragment(mode, atom[i + 1], options)\n                );\n                i += 2;\n            } else if (atom[i].mode === 'text') {\n                if (isInTextRun) {\n                    result += atom[i].body ? atom[i].body : ' ';\n                } else {\n                    isInTextRun = true;\n                    result += atomToSpeakableFragment('text', atom[i], options);\n                }\n                // '.' and ',' should only be allowed if prev/next entry is a digit\n                // However, if that isn't the case, this still works because 'toSpeakableFragment' is called in either case.\n                // Note: the first char in a digit/text run potentially needs to have a 'mark', hence the call to 'toSpeakableFragment'\n            } else if (\n                atom[i].type === 'mord' &&\n                /[0123456789,.]/.test(atom[i].body as string)\n            ) {\n                if (isInDigitRun) {\n                    result += atom[i].body;\n                } else {\n                    isInDigitRun = true;\n                    result += atomToSpeakableFragment(mode, atom[i], options);\n                }\n            } else {\n                isInDigitRun = false;\n                result += atomToSpeakableFragment(mode, atom[i], options);\n            }\n        }\n    } else if (atom.mode === 'text') {\n        if (atom.id && mode === 'math') {\n            result += '<mark name=\"' + atom.id.toString() + '\"/>';\n        }\n        result += atom.body as string;\n    } else {\n        if (atom.id && mode === 'math') {\n            result += '<mark name=\"' + atom.id.toString() + '\"/>';\n        }\n        let numer = '';\n        let denom = '';\n        let body = '';\n        let supsubHandled = false;\n        switch (atom.type) {\n            case 'group':\n            case 'root':\n                result += atomToSpeakableFragment(\n                    'math',\n                    atom.body as Atom[],\n                    options\n                );\n                break;\n\n            case 'genfrac':\n                numer = atomToSpeakableFragment('math', atom.numer, options);\n                denom = atomToSpeakableFragment('math', atom.denom, options);\n                if (isAtomic(atom.numer) && isAtomic(atom.denom)) {\n                    const COMMON_FRACTIONS = {\n                        '1/2': ' half ',\n                        '1/3': ' one third ',\n                        '2/3': ' two third',\n                        '1/4': ' one quarter ',\n                        '3/4': ' three quarter ',\n                        '1/5': ' one fifth ',\n                        '2/5': ' two fifths ',\n                        '3/5': ' three fifths ',\n                        '4/5': ' four fifths ',\n                        '1/6': ' one sixth ',\n                        '5/6': ' five sixths ',\n                        '1/8': ' one eight ',\n                        '3/8': ' three eights ',\n                        '5/8': ' five eights ',\n                        '7/8': ' seven eights ',\n                        '1/9': ' one ninth ',\n                        '2/9': ' two ninths ',\n                        '4/9': ' four ninths ',\n                        '5/9': ' five ninths ',\n                        '7/9': ' seven ninths ',\n                        '8/9': ' eight ninths ',\n                        // '1/10':     ' one tenth ',\n                        // '1/12':     ' one twelfth ',\n                        // 'x/2':     ' <say-as interpret-as=\"character\">X</say-as> over 2',\n                    };\n                    const commonFraction =\n                        COMMON_FRACTIONS[\n                            atomicValue(atom.numer) +\n                                '/' +\n                                atomicValue(atom.denom)\n                        ];\n                    if (commonFraction) {\n                        result = commonFraction;\n                    } else {\n                        result += numer + ' over ' + denom;\n                    }\n                } else {\n                    result +=\n                        ' the fraction <break time=\"150ms\"/>' +\n                        numer +\n                        ', over <break time=\"150ms\"/>' +\n                        denom +\n                        '.<break time=\"150ms\"/> End fraction.<break time=\"150ms\"/>';\n                }\n\n                break;\n            case 'surd':\n                body = atomToSpeakableFragment(\n                    'math',\n                    atom.body as Atom[],\n                    options\n                );\n\n                if (!atom.index) {\n                    if (isAtomic(atom.body as Atom[])) {\n                        result += ' the square root of ' + body + ' , ';\n                    } else {\n                        result +=\n                            ' the square root of <break time=\"200ms\"/>' +\n                            body +\n                            '. <break time=\"200ms\"/> End square root';\n                    }\n                } else {\n                    let index = atomToSpeakableFragment(\n                        'math',\n                        atom.index,\n                        options\n                    );\n                    index = index.trim();\n                    const index2 = index.replace(/<mark([^/]*)\\/>/g, '');\n                    if (index2 === '3') {\n                        result +=\n                            ' the cube root of <break time=\"200ms\"/>' +\n                            body +\n                            '. <break time=\"200ms\"/> End cube root';\n                    } else if (index2 === 'n') {\n                        result +=\n                            ' the nth root of <break time=\"200ms\"/>' +\n                            body +\n                            '. <break time=\"200ms\"/> End root';\n                    } else {\n                        result +=\n                            ' the root with index: <break time=\"200ms\"/>' +\n                            index +\n                            ', of <break time=\"200ms\"/>' +\n                            body +\n                            '. <break time=\"200ms\"/> End root';\n                    }\n                }\n                break;\n            case 'leftright':\n                result += PRONUNCIATION[atom.leftDelim] || atom.leftDelim;\n                result += atomToSpeakableFragment(\n                    'math',\n                    atom.body as Atom[],\n                    options\n                );\n                result += PRONUNCIATION[atom.rightDelim] || atom.rightDelim;\n                break;\n            case 'rule':\n                // @todo\n                break;\n            case 'overunder':\n                // @todo\n                break;\n            case 'overlap':\n                // @todo\n                break;\n            case 'placeholder':\n                result += 'placeholder ' + atom.body;\n                break;\n            case 'delim':\n            case 'sizeddelim':\n            case 'mord':\n            case 'minner':\n            case 'mbin':\n            case 'mrel':\n            case 'mpunct':\n            case 'mopen':\n            case 'mclose':\n            case 'textord': {\n                const command = atom.symbol;\n                if (\n                    command === '\\\\mathbin' ||\n                    command === '\\\\mathrel' ||\n                    command === '\\\\mathopen' ||\n                    command === '\\\\mathclose' ||\n                    command === '\\\\mathpunct' ||\n                    command === '\\\\mathord' ||\n                    command === '\\\\mathinner'\n                ) {\n                    result = atomToSpeakableFragment(\n                        mode,\n                        atom.body as Atom[],\n                        options\n                    );\n                    break;\n                }\n\n                let atomValue = atom.body as string;\n                let latexValue = atom.symbol;\n                if (atom.type === 'delim' || atom.type === 'sizeddelim') {\n                    atomValue = latexValue = atom.delim;\n                }\n                if (mode === 'text') {\n                    result += atomValue;\n                } else {\n                    if (atom.type === 'mbin') {\n                        result += '<break time=\"150ms\"/>';\n                    }\n\n                    if (atomValue) {\n                        const value =\n                            PRONUNCIATION[atomValue] ||\n                            (latexValue\n                                ? PRONUNCIATION[latexValue.trim()]\n                                : '');\n                        if (value) {\n                            result += ' ' + value;\n                        } else {\n                            const spokenName = latexValue\n                                ? getSpokenName(latexValue.trim())\n                                : '';\n\n                            result += spokenName\n                                ? spokenName\n                                : letter(atomValue);\n                        }\n                    } else {\n                        result += atomToSpeakableFragment(\n                            'math',\n                            atom.body as Atom[],\n                            options\n                        );\n                    }\n                    if (atom.type === 'mbin') {\n                        result += '<break time=\"150ms\"/>';\n                    }\n                }\n                break;\n            }\n            case 'mop':\n                // @todo\n                if (atom.body !== '\\u200b') {\n                    // Not ZERO-WIDTH\n                    const trimLatex = atom.symbol;\n                    if (trimLatex === '\\\\sum') {\n                        if (atom.superscript && atom.subscript) {\n                            let sup = atomToSpeakableFragment(\n                                'math',\n                                atom.superscript,\n                                options\n                            );\n                            sup = sup.trim();\n                            let sub = atomToSpeakableFragment(\n                                'math',\n                                atom.subscript,\n                                options\n                            );\n                            sub = sub.trim();\n                            result +=\n                                ' the summation from <break time=\"200ms\"/>' +\n                                sub +\n                                '<break time=\"200ms\"/> to  <break time=\"200ms\"/>' +\n                                sup +\n                                '<break time=\"200ms\"/> of <break time=\"150ms\"/>';\n                            supsubHandled = true;\n                        } else if (atom.subscript) {\n                            let sub = atomToSpeakableFragment(\n                                'math',\n                                atom.subscript,\n                                options\n                            );\n                            sub = sub.trim();\n                            result +=\n                                ' the summation from <break time=\"200ms\"/>' +\n                                sub +\n                                '<break time=\"200ms\"/> of <break time=\"150ms\"/>';\n                            supsubHandled = true;\n                        } else {\n                            result += ' the summation of';\n                        }\n                    } else if (trimLatex === '\\\\prod') {\n                        if (atom.superscript && atom.subscript) {\n                            let sup = atomToSpeakableFragment(\n                                'math',\n                                atom.superscript,\n                                options\n                            );\n                            sup = sup.trim();\n                            let sub = atomToSpeakableFragment(\n                                'math',\n                                atom.subscript,\n                                options\n                            );\n                            sub = sub.trim();\n                            result +=\n                                ' the product from <break time=\"200ms\"/>' +\n                                sub +\n                                '<break time=\"200ms\"/> to <break time=\"200ms\"/>' +\n                                sup +\n                                '<break time=\"200ms\"/> of <break time=\"150ms\"/>';\n                            supsubHandled = true;\n                        } else if (atom.subscript) {\n                            let sub = atomToSpeakableFragment(\n                                'math',\n                                atom.subscript,\n                                options\n                            );\n                            sub = sub.trim();\n                            result +=\n                                ' the product from <break time=\"200ms\"/>' +\n                                sub +\n                                '<break time=\"200ms\"/> of <break time=\"150ms\"/>';\n                            supsubHandled = true;\n                        } else {\n                            result += ' the product  of ';\n                        }\n                    } else if (trimLatex === '\\\\int') {\n                        if (atom.superscript && atom.subscript) {\n                            let sup = atomToSpeakableFragment(\n                                'math',\n                                atom.superscript,\n                                options\n                            );\n                            sup = sup.trim();\n                            let sub = atomToSpeakableFragment(\n                                'math',\n                                atom.subscript,\n                                options\n                            );\n                            sub = sub.trim();\n                            result +=\n                                ' the integral from <break time=\"200ms\"/>' +\n                                emph(sub) +\n                                '<break time=\"200ms\"/> to <break time=\"200ms\"/>' +\n                                emph(sup) +\n                                ' <break time=\"200ms\"/> of ';\n                            supsubHandled = true;\n                        } else {\n                            result += ' the integral of <break time=\"200ms\"/> ';\n                        }\n                    } else if (typeof atom.body === 'string') {\n                        const value =\n                            PRONUNCIATION[atom.body] ||\n                            PRONUNCIATION[atom.symbol];\n                        if (value) {\n                            result += value;\n                        } else {\n                            result += ' ' + atom.body;\n                        }\n                    } else if (atom.symbol) {\n                        if (atom.symbol[0] === '\\\\') {\n                            result += ' ' + atom.symbol.substr(1);\n                        } else {\n                            result += ' ' + atom.symbol;\n                        }\n                    }\n                }\n                break;\n\n            case 'enclose':\n                body = atomToSpeakableFragment(\n                    'math',\n                    atom.body as Atom[],\n                    options\n                );\n\n                if (isAtomic(atom.body as Atom[])) {\n                    result += ' crossed out ' + body + ' , ';\n                } else {\n                    result += ' crossed out ' + body + '. End cross out';\n                }\n                break;\n\n            case 'space':\n            case 'spacing':\n            case 'mathstyle':\n                // @todo\n                break;\n        }\n        if (!supsubHandled && atom.superscript) {\n            let sup = atomToSpeakableFragment(mode, atom.superscript, options);\n            sup = sup.trim();\n            const sup2 = sup.replace(/<[^>]*>/g, '');\n            if (isAtomic(atom.superscript)) {\n                if (mode === 'math') {\n                    const id = atomicID(atom.superscript);\n                    if (id) {\n                        result += '<mark name=\"' + id + '\"/>';\n                    }\n                }\n                if (sup2 === '\\u2032') {\n                    result += ' prime ';\n                } else if (sup2 === '2') {\n                    result += ' squared ';\n                } else if (sup2 === '3') {\n                    result += ' cubed ';\n                } else if (isNaN(parseInt(sup2))) {\n                    result += ' to the ' + sup + '; ';\n                } else {\n                    result +=\n                        ' to the <say-as interpret-as=\"ordinal\">' +\n                        sup2 +\n                        '</say-as> power; ';\n                }\n            } else {\n                if (isNaN(parseInt(sup2))) {\n                    result += ' raised to the ' + sup + '; ';\n                } else {\n                    result +=\n                        ' raised to the <say-as interpret-as=\"ordinal\">' +\n                        sup2 +\n                        '</say-as> power; ';\n                }\n            }\n        }\n        if (!supsubHandled && atom.subscript) {\n            let sub = atomToSpeakableFragment('math', atom.subscript, options);\n            sub = sub.trim();\n            if (isAtomic(atom.subscript)) {\n                result += ' sub ' + sub;\n            } else {\n                result += ' subscript ' + sub + '. End subscript. ';\n            }\n        }\n    }\n\n    return result;\n}\n\n/**\n * @param  atoms The atoms to represent as speakable text.\n */\nexport function atomToSpeakableText(\n    atoms: Atom | Atom[],\n    speechOptions: TextToSpeechOptions\n): string {\n    const options = {\n        ...speechOptions,\n        textToSpeechRulesOptions: { ...speechOptions.textToSpeechRulesOptions },\n    };\n\n    if (window['sre'] && options.textToSpeechRules === 'sre') {\n        const mathML = atomsToMathML(atoms, options);\n        if (mathML) {\n            if (options.textToSpeechMarkup) {\n                options.textToSpeechRulesOptions =\n                    options.textToSpeechRulesOptions ?? {};\n                options.textToSpeechRulesOptions.markup =\n                    options.textToSpeechMarkup;\n                if (options.textToSpeechRulesOptions.markup === 'ssml') {\n                    options.textToSpeechRulesOptions.markup = 'ssml_step';\n                }\n                options.textToSpeechRulesOptions.rate =\n                    options.speechEngineRate;\n            }\n            if (options.textToSpeechRulesOptions) {\n                window['sre'].System.getInstance().setupEngine(\n                    options.textToSpeechRulesOptions\n                );\n            }\n            return window['sre'].System.getInstance().toSpeech(mathML);\n        }\n        return '';\n    }\n\n    let result = atomToSpeakableFragment('math', atoms, options);\n\n    if (options.textToSpeechMarkup === 'ssml') {\n        let prosody = '';\n        if (options.speechEngineRate) {\n            prosody = '<prosody rate=\"' + options.speechEngineRate + '\">';\n        }\n        result =\n            `<?xml version=\"1.0\"?><speak version=\"1.1\" xmlns=\"http://www.w3.org/2001/10/synthesis\" xml:lang=\"en-US\">` +\n            '<amazon:auto-breaths>' +\n            prosody +\n            '<p><s>' +\n            result +\n            '</s></p>' +\n            (prosody ? '</prosody>' : '') +\n            '</amazon:auto-breaths>' +\n            '</speak>';\n    } else if (\n        options.textToSpeechMarkup === 'mac' &&\n        platform('mac') === 'mac'\n    ) {\n        // Convert SSML to Mac markup\n        result = result\n            .replace(/<mark([^/]*)\\/>/g, '')\n            .replace(/<emphasis>/g, '[[emph+]]')\n            .replace(/<\\/emphasis>/g, '')\n            .replace(/<break time=\"([0-9]*)ms\"\\/>/g, '[[slc $1]]')\n            .replace(/<say-as[^>]*>/g, '')\n            .replace(/<\\/say-as>/g, '');\n    } else {\n        // If no markup was requested, or 'mac' markup, but we're not on a mac,\n        // remove any that we may have\n        // Strip out the SSML markup\n        result = result.replace(/<[^>]*>/g, '').replace(/\\s{2,}/g, ' ');\n    }\n    return result;\n}\n","import type { TextToSpeechOptions, MathfieldConfig } from '../public/config';\nimport type { SpeechScope } from '../public/commands';\n\nimport type { Atom } from '../core/atom';\n\nimport type { MathfieldPrivate } from './mathfield-class';\n\nimport { atomToSpeakableText } from './atom-to-speakable-text';\nimport { register as registerCommand } from './commands';\nimport { getSelectedAtoms, selectionIsCollapsed } from './model-selection';\nimport { render } from './mathfield-render';\n\nexport function speakableText(\n    speechOptions: Required<TextToSpeechOptions>,\n    prefix: string,\n    atoms: Atom | Atom[]\n): string {\n    const options: TextToSpeechOptions = {\n        ...speechOptions,\n        textToSpeechMarkup: '',\n        textToSpeechRulesOptions: {\n            ...speechOptions.textToSpeechRulesOptions,\n            markup: 'none',\n        },\n    };\n    return prefix + atomToSpeakableText(atoms, options);\n}\n\n/**\n *\n * Speak some part of the expression, either with or without synchronized highlighting.\n *\n * @param speakOptions.withHighlighting - If true, synchronized\n * highlighting of speech will happen (if possible). Default is false.\n */\n\n// @revisit: register 'speak' command with mathfield (to get access to SpeechOptions, which need to be passed down)\nregisterCommand(\n    {\n        speak: (\n            mathfield: MathfieldPrivate,\n            scope: SpeechScope,\n            options: { withHighlighting: boolean }\n        ): boolean => {\n            return speak(mathfield, scope, options);\n        },\n    },\n    { target: 'mathfield', category: 'speech' }\n);\n\nfunction speak(\n    mathfield: MathfieldPrivate,\n    scope: SpeechScope,\n    speakOptions: { withHighlighting: boolean }\n): boolean {\n    speakOptions = speakOptions ?? { withHighlighting: false };\n    function getAtoms(mathfield: MathfieldPrivate, scope: SpeechScope): Atom[] {\n        let result = null;\n        switch (scope) {\n            case 'all':\n                result = mathfield.model.root;\n                break;\n            case 'selection':\n                if (!selectionIsCollapsed(mathfield.model)) {\n                    result = getSelectedAtoms(mathfield.model);\n                }\n                break;\n            case 'left': {\n                const siblings = mathfield.model.siblings();\n                const last = mathfield.model.startOffset();\n                if (last >= 1) {\n                    result = [];\n                    for (let i = 1; i <= last; i++) {\n                        result.push(siblings[i]);\n                    }\n                }\n                break;\n            }\n            case 'right': {\n                const siblings = mathfield.model.siblings();\n                const first = mathfield.model.endOffset() + 1;\n                if (first <= siblings.length - 1) {\n                    result = [];\n                    for (let i = first; i <= siblings.length - 1; i++) {\n                        result.push(siblings[i]);\n                    }\n                }\n                break;\n            }\n            case 'group':\n                result = mathfield.model.siblings();\n                break;\n            case 'parent': {\n                const parent = mathfield.model.parent();\n                if (parent && parent.type !== 'root') {\n                    result = mathfield.model.parent();\n                }\n                break;\n            }\n            // case 'start':\n            // case 'end':\n            // not yet implemented\n            // break;\n            default:\n                break;\n        }\n        return result;\n    }\n    function getFailedSpeech(scope: string): string {\n        let result = '';\n        switch (scope) {\n            case 'all':\n                console.log('Internal failure: speak all failed');\n                break;\n            case 'selection':\n                result = 'no selection';\n                break;\n            case 'left':\n                result = 'at start';\n                break;\n            case 'right':\n                result = 'at end';\n                break;\n            case 'group':\n                console.log('Internal failure: speak group failed');\n                break;\n            case 'parent':\n                result = 'no parent';\n                break;\n            default:\n                console.log('unknown speak_ param value: \"' + scope + '\"');\n                break;\n        }\n        return result;\n    }\n    const atoms = getAtoms(mathfield, scope);\n    if (atoms === null) {\n        mathfield.config.speakHook(getFailedSpeech(scope), mathfield.config);\n        return false;\n    }\n    const options = { ...mathfield.config };\n    if (speakOptions.withHighlighting || options.speechEngine === 'amazon') {\n        options.textToSpeechMarkup =\n            window['sre'] && options.textToSpeechRules === 'sre'\n                ? 'ssml_step'\n                : 'ssml';\n    }\n    const text = atomToSpeakableText(atoms, options);\n    if (speakOptions.withHighlighting) {\n        window['mathlive'].readAloudMathField = mathfield;\n        render(mathfield, { forHighlighting: true });\n        if (mathfield.config.readAloudHook) {\n            mathfield.config.readAloudHook(\n                mathfield.field,\n                text,\n                mathfield.config\n            );\n        }\n    } else {\n        if (mathfield.config.speakHook) {\n            mathfield.config.speakHook(text, options);\n        }\n    }\n\n    return false;\n}\n\nexport function defaultSpeakHook(text: string, config: MathfieldConfig): void {\n    if (!config && window && window['mathlive']) {\n        config = window['mathlive'].config;\n    }\n    config = config ?? {};\n\n    if (!config.speechEngine || config.speechEngine === 'local') {\n        // On ChromeOS: chrome.accessibilityFeatures.spokenFeedback\n        // See also https://developer.chrome.com/apps/tts\n        const utterance = new SpeechSynthesisUtterance(text);\n        if (window) {\n            window.speechSynthesis.speak(utterance);\n        } else {\n            console.log('Speak: ', text);\n        }\n    } else if (config.speechEngine === 'amazon') {\n        if (!window || !window['AWS']) {\n            console.warn(\n                'AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk'\n            );\n        } else {\n            const polly = new window['AWS'].Polly({ apiVersion: '2016-06-10' });\n            const params = {\n                OutputFormat: 'mp3',\n                VoiceId: config.speechEngineVoice,\n                Engine: [\n                    'Amy',\n                    'Emma',\n                    'Brian',\n                    'Ivy',\n                    'Joanna',\n                    'Kendra',\n                    'Kimberly',\n                    'Salli',\n                    'Joey',\n                    'Justin',\n                    'Matthew',\n                ].includes(config.speechEngineVoice)\n                    ? 'neural'\n                    : 'standard',\n                // SampleRate: '24000',\n                Text: text,\n                TextType: 'ssml',\n                // SpeechMarkTypes: ['ssml]'\n            };\n            // https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/Polly.html#synthesizeSpeech-property\n            polly.synthesizeSpeech(params, function (err, data) {\n                if (err) {\n                    console.warn(\n                        'polly.synthesizeSpeech() error:',\n                        err,\n                        err.stack\n                    );\n                    // announce('plonk');\n                } else if (data?.AudioStream) {\n                    const uInt8Array = new Uint8Array(data.AudioStream);\n                    const blob = new Blob([uInt8Array.buffer], {\n                        type: 'audio/mpeg',\n                    });\n                    const url = URL.createObjectURL(blob);\n\n                    const audioElement = new Audio(url);\n                    audioElement.play().catch((err) => console.log(err));\n                } else {\n                    console.log('polly.synthesizeSpeech():' + data);\n                }\n            });\n\n            // Can call AWS.Request() on the result of synthesizeSpeech()\n        }\n    } else if (config.speechEngine === 'google') {\n        console.warn(\n            'The Google speech engine is not supported yet. Please come again.'\n        );\n        // @todo: implement support for Google Text-to-Speech API,\n        // using config.speechEngineToken, config.speechEngineVoice and\n        // config.speechEngineAudioConfig\n\n        // curl -H \"Authorization: Bearer \"$(gcloud auth application-default print-access-token) \\\n        //   -H \"Content-Type: application/json; charset=utf-8\" \\\n        //   --data \"{\n        //     'input':{\n        //       'text':'Android is a mobile operating system developed by Google,\n        //          based on the Linux kernel and designed primarily for\n        //          touchscreen mobile devices such as smartphones and tablets.'\n        //     },\n        //     'voice':{\n        //       'languageCode':'en-gb',\n        //       'name':'en-GB-Standard-A',\n        //       'ssmlGender':'FEMALE'\n        //     },\n        //     'audioConfig':{\n        //       'audioEncoding':'MP3'\n        //     }\n        //   }\" \"https://texttospeech.googleapis.com/v1beta1/text:synthesize\" > synthesize-text.txt\n    }\n}\n","import type { TextToSpeechOptions } from '../public/config';\n\nimport type { Atom } from '../core/atom';\n\nimport { atomsToMathML } from '../addons/math-ml';\nimport { speakableText } from './speech';\nimport { selectionIsCollapsed, getSelectedAtoms } from './model-selection';\nimport type { ModelPrivate } from './model-class';\nimport type { MathfieldPrivate } from './mathfield-class';\nimport type { PathSegment } from './path';\n\n/**\n * Announce a change in selection or content via the aria-live region.\n *\n * @param action The action that invoked the change.\n * @param oldModel The previous value of the model before the change.\n */\nexport function defaultAnnounceHook(\n    mathfield: MathfieldPrivate,\n    action: string,\n    oldModel: ModelPrivate,\n    atoms: Atom[]\n): void {\n    //** Fix: the focus is the end of the selection, so it is before where we want it\n    let liveText = '';\n    // const action = moveAmount > 0 ? \"right\" : \"left\";\n\n    if (action === 'plonk') {\n        // Use this sound to indicate (minor) errors, for\n        // example when a action has no effect.\n        if (mathfield.plonkSound) {\n            mathfield.plonkSound.load();\n            mathfield.plonkSound.play().catch((err) => console.warn(err));\n        }\n        // As a side effect, reset the keystroke buffer\n        mathfield.resetKeystrokeBuffer();\n    } else if (action === 'delete') {\n        liveText = speakableText(mathfield.config, 'deleted: ', atoms);\n        //*** FIX: could also be moveUp or moveDown -- do something different like provide context???\n    } else if (action === 'focus' || /move/.test(action)) {\n        //*** FIX -- should be xxx selected/unselected */\n        liveText =\n            (selectionIsCollapsed(mathfield.model) ? '' : 'selected: ') +\n            nextAtomSpeechText(mathfield, oldModel);\n    } else if (action === 'replacement') {\n        // announce the contents\n        liveText = speakableText(\n            mathfield.config,\n            '',\n            mathfield.model.sibling(0)\n        );\n    } else if (action === 'line') {\n        // announce the current line -- currently that's everything\n        liveText = speakableText(mathfield.config, '', mathfield.model.root);\n        mathfield.accessibleNode.innerHTML = mathfield.config.createHTML(\n            '<math xmlns=\"http://www.w3.org/1998/Math/MathML\">' +\n                atomsToMathML(mathfield.model.root, mathfield.config) +\n                '</math>'\n        );\n\n        mathfield.textarea.setAttribute('aria-label', 'after: ' + liveText);\n\n        /*** FIX -- testing hack for setting braille ***/\n        // mathfield.accessibleNode.focus();\n        // console.log(\"before sleep\");\n        // sleep(1000).then(() => {\n        //     mathfield.textarea.focus();\n        //     console.log(\"after sleep\");\n        // });\n    } else {\n        liveText = atoms\n            ? speakableText(mathfield.config, action + ' ', atoms)\n            : action;\n    }\n    // aria-live regions are only spoken when it changes; force a change by\n    // alternately using nonbreaking space or narrow nonbreaking space\n    const ariaLiveChangeHack = /\\u00a0/.test(mathfield.ariaLiveText.textContent)\n        ? ' \\u202f '\n        : ' \\u00a0 ';\n    mathfield.ariaLiveText.textContent = liveText + ariaLiveChangeHack;\n    // this.textarea.setAttribute('aria-label', liveText + ariaLiveChangeHack);\n}\n\n/* Returns the speech text of the next atom after the selection or\n *   an 'end of' phrasing based on what structure we are at the end of\n */\n// @revisit. Currently this = MathfieldPrivate, but it looks like model is enough\nfunction nextAtomSpeechText(\n    mathfield: MathfieldPrivate,\n    oldModel: ModelPrivate\n): string {\n    function relation(parent: Atom, leaf: PathSegment): string {\n        const EXPR_NAME = {\n            //    'array': 'should not happen',\n            numer: 'numerator',\n            denom: 'denominator',\n            index: 'index',\n            body: 'parent',\n            subscript: 'subscript',\n            superscript: 'superscript',\n        };\n        const PARENT_NAME = {\n            enclose: 'cross out',\n            leftright: 'fence',\n            surd: 'square root',\n            root: 'math field',\n        };\n        return leaf.relation === 'body'\n            ? PARENT_NAME[parent.type]\n            : EXPR_NAME[leaf.relation];\n    }\n    const oldPath = oldModel ? oldModel.path : [];\n    const path = mathfield.model.path;\n    const leaf = path[path.length - 1];\n    let result = '';\n    while (oldPath.length > path.length) {\n        result +=\n            'out of ' +\n            relation(oldModel.parent(), oldPath[oldPath.length - 1]) +\n            '; ';\n        oldPath.pop();\n    }\n    if (!selectionIsCollapsed(mathfield.model)) {\n        return speakableText(\n            mathfield.config as Required<TextToSpeechOptions>,\n            '',\n            getSelectedAtoms(mathfield.model)\n        );\n    }\n    // announce start of denominator, etc\n    const relationName = relation(mathfield.model.parent(), leaf);\n    if (leaf.offset === 0) {\n        result +=\n            (relationName ? 'start of ' + relationName : 'unknown') + ': ';\n    }\n    const atom = mathfield.model.sibling(Math.max(1, mathfield.model.extent));\n    if (atom) {\n        result += speakableText(\n            mathfield.config as Required<TextToSpeechOptions>,\n            '',\n            atom\n        );\n    } else if (leaf.offset !== 0) {\n        // don't say both start and end\n        result += relationName ? 'end of ' + relationName : 'unknown';\n    }\n    return result;\n}\n","import type { MathfieldConfig } from '../public/config';\n\nimport { isArray } from '../common/types';\n\nimport type { Atom } from '../core/atom';\nimport { MACROS } from '../core/definitions';\n\nimport type { MathfieldPrivate } from './mathfield-class';\nimport type { ModelPrivate } from './model-class';\nimport { l10n } from './l10n';\nimport { defaultAnnounceHook } from './a11y';\nimport { INLINE_SHORTCUTS } from './shortcuts-definitions';\nimport { DEFAULT_KEYBINDINGS } from './keybindings-definitions';\n\nconst AUDIO_FEEDBACK_VOLUME = 0.5; // from 0.0 to 1.0\n\nconst NO_OP_LISTENER = (): void => {\n    return;\n};\n\nexport type MathfieldConfigPrivate = MathfieldConfig & {\n    onAnnounce?: (\n        target: MathfieldPrivate,\n        command: string, // verb\n        modelBefore: ModelPrivate,\n        atoms: Atom[] // object of the command\n    ) => void; // @revisit 1.0: rename announceHook\n};\n\nfunction loadSound(sound: string | HTMLAudioElement): HTMLAudioElement {\n    if (typeof sound === 'string') {\n        const result: HTMLAudioElement = new Audio();\n        result.preload = 'none';\n        result.src = sound;\n        result.volume = AUDIO_FEEDBACK_VOLUME;\n\n        return result;\n    }\n    return sound;\n}\n\nfunction unloadSound(\n    sound:\n        | string\n        | HTMLAudioElement\n        | { [key: string]: HTMLAudioElement | string }\n): void {\n    if (sound instanceof HTMLAudioElement) {\n        sound.pause();\n        sound.removeAttribute('src');\n        sound.load();\n    }\n}\n\nexport function update(\n    current: Required<MathfieldConfigPrivate>,\n    updates: MathfieldConfigPrivate\n): Required<MathfieldConfigPrivate> {\n    const result: Required<MathfieldConfigPrivate> = get(\n        current,\n        Object.keys(current)\n    ) as Required<MathfieldConfigPrivate>;\n    Object.keys(updates).forEach((key) => {\n        switch (key) {\n            case 'scriptDepth':\n                if (isArray(updates.scriptDepth)) {\n                    result.scriptDepth = [\n                        updates.scriptDepth[0],\n                        updates.scriptDepth[1],\n                    ];\n                } else if (typeof updates.scriptDepth === 'number') {\n                    result.scriptDepth = [\n                        updates.scriptDepth,\n                        updates.scriptDepth,\n                    ];\n                } else {\n                    throw Error('Unexpected value for scriptDepth');\n                }\n                break;\n            case 'namespace':\n                // Validate the namespace (used for `data-` attributes)\n                if (!/^[a-z]*[-]?$/.test(updates.namespace)) {\n                    throw Error(\n                        'namespace must be a string of lowercase characters only'\n                    );\n                }\n                if (!/-$/.test(updates.namespace)) {\n                    result.namespace = updates.namespace + '-';\n                } else {\n                    result.namespace = updates.namespace;\n                }\n                break;\n            case 'locale':\n                result.locale =\n                    updates.locale === 'auto' ? l10n.locale : updates.locale;\n                break;\n            case 'strings':\n                l10n.merge(updates.strings);\n                break;\n            case 'virtualKeyboardLayout':\n                if (updates.virtualKeyboardLayout === 'auto') {\n                    result.virtualKeyboardLayout =\n                        {\n                            fr: 'azerty',\n                            be: 'azerty',\n                            al: 'qwertz',\n                            ba: 'qwertz',\n                            cz: 'qwertz',\n                            de: 'qwertz',\n                            hu: 'qwertz',\n                            sk: 'qwertz',\n                            ch: 'qwertz',\n                        }[l10n.locale.substring(0, 2)] || 'qwerty';\n                } else {\n                    result.virtualKeyboardLayout =\n                        updates.virtualKeyboardLayout;\n                }\n                break;\n            case 'virtualKeyboardMode':\n                {\n                    const isTouchDevice = window.matchMedia?.(\n                        '(any-pointer: coarse)'\n                    ).matches;\n                    if (updates.virtualKeyboardMode === 'auto') {\n                        result.virtualKeyboardMode = isTouchDevice\n                            ? 'onfocus'\n                            : 'off';\n                    } else {\n                        result.virtualKeyboardMode =\n                            updates.virtualKeyboardMode;\n                    }\n                }\n                break;\n\n            case 'letterShapeStyle':\n                if (updates.letterShapeStyle === 'auto') {\n                    // Letter shape style (locale dependent)\n                    if (l10n.locale.substring(0, 2) === 'fr') {\n                        result.letterShapeStyle = 'french';\n                    } else {\n                        result.letterShapeStyle = 'tex';\n                    }\n                } else {\n                    result.letterShapeStyle = updates.letterShapeStyle;\n                }\n                break;\n            case 'plonkSound':\n                unloadSound(result.plonkSound);\n                result.plonkSound = loadSound(updates.plonkSound);\n                break;\n            case 'keypressSound':\n                unloadSound(result.keypressSound);\n                if (typeof updates.keypressSound === 'string') {\n                    const sound = loadSound(updates.keypressSound);\n                    result.keypressSound = {\n                        delete: sound,\n                        return: sound,\n                        spacebar: sound,\n                        default: sound,\n                    };\n                } else if (updates.keypressSound instanceof HTMLAudioElement) {\n                    result.keypressSound = {\n                        delete: updates.keypressSound,\n                        return: updates.keypressSound,\n                        spacebar: updates.keypressSound,\n                        default: updates.keypressSound,\n                    };\n                } else {\n                    if (!updates.keypressSound.default) {\n                        throw Error('Missing keypressSound.default');\n                    }\n                    result.keypressSound = { ...updates.keypressSound };\n                    if (!result.keypressSound.return) {\n                        result.keypressSound.return =\n                            updates.keypressSound.default;\n                    }\n                    if (!result.keypressSound.spacebar) {\n                        result.keypressSound.spacebar =\n                            updates.keypressSound.default;\n                    }\n                    if (!result.keypressSound.delete) {\n                        result.keypressSound.delete =\n                            updates.keypressSound.default;\n                    }\n                }\n                break;\n            case 'onBlur':\n            case 'onFocus':\n            case 'onContentWillChange':\n            case 'onContentDidChange':\n            case 'onSelectionWillChange':\n            case 'onSelectionDidChange':\n            case 'onUndoStateWillChange':\n            case 'onUndoStateDidChange':\n            case 'onModeChange':\n            case 'onVirtualKeyboardToggle':\n            case 'onReadAloudStatus':\n            case 'onError':\n                if (updates[key] === null) {\n                    result[key] = NO_OP_LISTENER;\n                } else if (typeof updates[key] !== 'function') {\n                    throw Error(key + ' must be a function or null');\n                }\n                result[key] = updates[key] as any;\n                break;\n            default:\n                if (isArray(updates[key])) {\n                    result[key] = [...updates[key]];\n                } else if (typeof updates[key] === 'object') {\n                    result[key] = { ...updates[key] };\n                } else {\n                    result[key] = updates[key];\n                }\n        }\n    });\n\n    // @revisit 1.0: for backward compatibility, interprets the overrideDefaultInlineShortcuts\n    // property\n    if (typeof updates.overrideDefaultInlineShortcuts !== 'undefined') {\n        if (updates.overrideDefaultInlineShortcuts) {\n            result.inlineShortcuts = updates.inlineShortcuts;\n        } else {\n            result.inlineShortcuts = {\n                ...INLINE_SHORTCUTS,\n                ...updates.inlineShortcuts,\n            };\n        }\n    }\n    return result;\n}\n\nexport function get(\n    config: Required<MathfieldConfigPrivate>,\n    keys?: keyof MathfieldConfigPrivate | string[]\n): any | MathfieldConfigPrivate {\n    let resolvedKeys: string[];\n    if (typeof keys === 'string') {\n        resolvedKeys = [keys];\n    } else if (typeof keys === 'undefined') {\n        resolvedKeys = Object.keys(config);\n    } else {\n        resolvedKeys = keys;\n    }\n    const result: MathfieldConfigPrivate = {};\n    resolvedKeys.forEach((x) => {\n        if (isArray(result[x])) {\n            result[x] = [...result[x]];\n        } else if (typeof result[x] === 'object') {\n            result[x] = { ...result[x] };\n        } else {\n            result[x] = config[x];\n        }\n    });\n    // If requested a single key, return its value\n    if (typeof keys === 'string') {\n        return result[keys];\n    }\n    return result;\n}\n\nexport function getDefault(): Required<MathfieldConfigPrivate> {\n    return {\n        namespace: '',\n        substituteTextArea: undefined,\n        readOnly: false,\n        createHTML: (s: string): any => s,\n\n        defaultMode: 'math',\n        macros: MACROS,\n        horizontalSpacingScale: 1.0,\n        letterShapeStyle: 'auto',\n\n        smartMode: false,\n        smartFence: true,\n        smartSuperscript: true,\n        scriptDepth: [Infinity, Infinity],\n        removeExtraneousParentheses: true,\n        ignoreSpacebarInMathMode: true,\n\n        locale: 'auto',\n        strings: {},\n\n        keybindings: DEFAULT_KEYBINDINGS,\n\n        overrideDefaultInlineShortcuts: false, // @revisit: don't need this if we return the actual shortcuts\n        inlineShortcuts: {}, // @revisit: return the actual shortcuts\n        inlineShortcutTimeout: 0,\n\n        virtualKeyboardToggleGlyph: `<span style=\"width: 21px; margin-top: 4px;\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z\"/></svg></span>`,\n        virtualKeyboardMode: 'auto',\n        virtualKeyboards: 'all',\n        virtualKeyboardLayout: 'auto',\n        customVirtualKeyboardLayers: {},\n        customVirtualKeyboards: {},\n        virtualKeyboardTheme: /android|cros/i.test(navigator?.userAgent)\n            ? 'material'\n            : 'apple',\n        keypressVibration: true,\n        keypressSound: null,\n        plonkSound: null,\n\n        textToSpeechRules: 'mathlive',\n        textToSpeechMarkup: '', // no markup\n        textToSpeechRulesOptions: {},\n        speechEngine: 'local',\n        speechEngineVoice: 'Joanna',\n        speechEngineRate: '100%',\n        speakHook: NO_OP_LISTENER,\n        readAloudHook: NO_OP_LISTENER,\n\n        onAnnounce: defaultAnnounceHook,\n        onKeystroke: (): boolean => true,\n        onMoveOutOf: (): boolean => true,\n        onTabOutOf: (): boolean => true,\n\n        onBlur: NO_OP_LISTENER,\n        onFocus: NO_OP_LISTENER,\n        onContentWillChange: NO_OP_LISTENER,\n        onContentDidChange: NO_OP_LISTENER,\n        onSelectionWillChange: NO_OP_LISTENER,\n        onSelectionDidChange: NO_OP_LISTENER,\n        onUndoStateWillChange: NO_OP_LISTENER,\n        onUndoStateDidChange: NO_OP_LISTENER,\n        onModeChange: NO_OP_LISTENER,\n        onVirtualKeyboardToggle: NO_OP_LISTENER,\n        onReadAloudStatus: NO_OP_LISTENER,\n\n        onError: (): void => {\n            return;\n        },\n    };\n}\n","import { eventToChar } from './keyboard';\nimport { selectionIsCollapsed, setSelection } from './model-selection';\nimport { contentDidChange, contentWillChange } from './model-listeners';\nimport type { MathfieldPrivate } from './mathfield-class';\nimport { mightProducePrintableCharacter } from './keyboard';\n\n/**\n * Convert the atoms before the anchor to 'text' mode\n * @param count - how many atoms back to look at\n * @param {function} until - callback to indicate when to stop\n * @private\n */\nfunction convertLastAtomsToText(\n    mathfield: MathfieldPrivate,\n    count: number,\n    until?\n): void {\n    if (typeof count === 'function') {\n        until = count;\n        count = Infinity;\n    }\n    if (typeof count === 'undefined') {\n        count = Infinity;\n    }\n    let i = 0;\n    let done = false;\n    contentWillChange(mathfield.model);\n    while (!done) {\n        const atom = mathfield.model.sibling(i);\n        done =\n            count === 0 ||\n            !atom ||\n            atom.mode !== 'math' ||\n            !(\n                /mord|textord|mpunct/.test(atom.type) ||\n                (atom.type === 'mop' && /[a-zA-Z]+/.test(atom.body as string))\n            ) ||\n            !!atom.superscript ||\n            !!atom.subscript ||\n            (until && !until(atom));\n        if (!done) {\n            atom.applyStyle({ mode: 'text' });\n            atom.symbol = atom.body as string;\n            atom.latex = '';\n        }\n        i -= 1;\n        count -= 1;\n    }\n    contentDidChange(mathfield.model);\n}\n/**\n * Convert the atoms before the anchor to 'math' mode 'mord'\n * @param {number} count - how many atoms back to look at\n * @param {function} until - callback to indicate when to stop\n * @private\n */\nfunction convertLastAtomsToMath(\n    mathfield: MathfieldPrivate,\n    count?: number,\n    until?\n): void {\n    if (typeof count === 'function') {\n        until = count;\n        count = Infinity;\n    }\n    if (typeof count === 'undefined') {\n        count = Infinity;\n    }\n    contentWillChange(mathfield.model);\n    let i = 0;\n    let done = false;\n    while (!done) {\n        const atom = mathfield.model.sibling(i);\n        done =\n            count === 0 ||\n            !atom ||\n            atom.mode !== 'text' ||\n            atom.body === ' ' ||\n            (until && !until(atom));\n        if (!done) {\n            atom.applyStyle({ mode: 'math' });\n        }\n        i -= 1;\n        count -= 1;\n    }\n    removeIsolatedSpace(mathfield);\n    contentDidChange(mathfield.model);\n}\n/**\n * Going backwards from the anchor, if a text zone consisting of a single\n * space character is found (i.e. it is surrounded by math zone),\n * remove it.\n */\nexport function removeIsolatedSpace(mathfield: MathfieldPrivate): void {\n    let i = 0;\n    while (\n        mathfield.model.sibling(i) &&\n        mathfield.model.sibling(i).mode === 'math'\n    ) {\n        i -= 1;\n    }\n    // If the atom before the last one converted is a\n    // text mode space, preceded by a math mode atom,\n    // remove the space\n    if (\n        mathfield.model.sibling(i) &&\n        mathfield.model.sibling(i).mode === 'text' &&\n        mathfield.model.sibling(i).body === ' ' &&\n        (!mathfield.model.sibling(i - 1) ||\n            mathfield.model.sibling(i - 1).mode === 'math')\n    ) {\n        contentWillChange(mathfield.model);\n        mathfield.model.siblings().splice(i - 1, 1);\n        contentDidChange(mathfield.model);\n        // We need to adjust the selection after doing some surgery on the atoms list\n        // But we don't want to receive selection notification changes\n        // which could have a side effect of changing the mode :(\n        const save = mathfield.model.suppressChangeNotifications;\n        mathfield.model.suppressChangeNotifications = true;\n        setSelection(mathfield.model, mathfield.model.anchorOffset() - 1);\n        mathfield.model.suppressChangeNotifications = save;\n    }\n}\n/**\n * Return the characters before anchor that could potentially be turned\n * into text mode.\n * This excludes things like 'mop' (e.g. \\sin)\n */\nfunction getTextBeforeAnchor(mathfield: MathfieldPrivate): string {\n    // Going backwards, accumulate\n    let result = '';\n    let i = 0;\n    let done = false;\n    while (!done) {\n        const atom = mathfield.model.sibling(i);\n        done = !(\n            atom &&\n            ((atom.mode === 'text' && !atom.type) ||\n                (atom.mode === 'math' && /mord|textord|mpunct/.test(atom.type)))\n        );\n        if (!done) {\n            result = atom.body + result;\n        }\n        i -= 1;\n    }\n    return result;\n}\n/**\n * Consider whether to switch mode give the content before the anchor\n * and the character being input\n *\n * @param keystroke\n * @param evt - a Event corresponding to the keystroke\n * @return true if the mode should change\n */\n\nexport function smartMode(\n    mathfield: MathfieldPrivate,\n    keystroke: string,\n    evt: KeyboardEvent\n): boolean {\n    if (mathfield.smartModeSuppressed) {\n        return false;\n    }\n    if (mathfield.model.endOffset() < mathfield.model.siblings().length - 1) {\n        return false;\n    }\n    if (!evt || !mightProducePrintableCharacter(evt)) {\n        return false;\n    }\n    const c = eventToChar(evt);\n    if (!selectionIsCollapsed(mathfield.model)) {\n        // There is a selection\n        if (mathfield.mode === 'text') {\n            if (/[/_^]/.test(c)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    const context = getTextBeforeAnchor(mathfield) + c;\n    if (mathfield.mode === 'text') {\n        // We're in text mode. Should we switch to math?\n        if (keystroke === 'Esc' || /[/\\\\]/.test(c)) {\n            // If this is a command for a fraction,\n            // or the '\\' command mode key\n            // switch to 'math'\n            return true;\n        }\n        if (/[\\^_]/.test(c)) {\n            // If this is a superscript or subscript\n            // switch to 'math'\n            if (/(^|\\s)[a-zA-Z][^_]$/.test(context)) {\n                // If left hand context is a single letter,\n                // convert it to math\n                convertLastAtomsToMath(mathfield, 1);\n            }\n            return true;\n        }\n        // If this is a closing matching fence\n        // switch to 'math' mode\n        const lFence = { ')': '(', '}': '{', ']': '[' }[c];\n        if (\n            lFence &&\n            mathfield.model.parent() &&\n            mathfield.model.parent().type === 'leftright' &&\n            mathfield.model.parent().leftDelim === lFence\n        ) {\n            return true;\n        }\n        if (/(^|[^a-zA-Z])(a|I)[ ]$/.test(context)) {\n            // Single letters that are valid words in the current language\n            // Do nothing. @todo: localization\n            return false;\n        }\n        if (/[$€£₤₺¥¤฿¢₡₧₨₹₩₱]/u.test(c)) {\n            // A currency symbol.\n            // Switch to math mode\n            return true;\n        }\n        if (/(^|[^a-zA-Z'’])[a-zA-Z][ ]$/.test(context)) {\n            // An isolated letter, followed by a space:\n            // Convert the letter to math, stay in text mode.\n            convertLastAtomsToMath(mathfield, 1);\n            return false;\n        }\n        if (/[^0-9]\\.[^0-9\\s]$/.test(context)) {\n            // A period followed by something other than space or a digit\n            // and not preceded by a digit.\n            // We thought this was a text period, but turns out it's not\n            // Turn it into a \\cdot\n            convertLastAtomsToMath(mathfield, 1);\n            const atom = mathfield.model.sibling(0);\n            atom.body = '⋅'; // centered dot\n            atom.variant = 'normal'; // @revisit. Was 'auto'. Check for proper conversion.\n            atom.symbol = '\\\\cdot';\n            atom.latex = '';\n            return true;\n        }\n        if (/(^|\\s)[a-zA-Z][^a-zA-Z]$/.test(context)) {\n            // Single letter (x), followed by a non-letter (>, =...)\n            convertLastAtomsToMath(mathfield, 1);\n            return true;\n        }\n        if (/\\.[0-9]$/.test(context)) {\n            // If the new character is a digit,\n            // and it was preceded by a dot (which may have been converted\n            // to text)\n            // turn the dot back into 'math'\n            convertLastAtomsToMath(mathfield, 1);\n            return true;\n        }\n        if (/[(][0-9+\\-.]$/.test(context)) {\n            // An open paren followed by a number\n            // Turn the paren back to math and switch.\n            convertLastAtomsToMath(mathfield, 1);\n            return true;\n        }\n        if (/[(][a-z][,;]$/.test(context)) {\n            // An open paren followed by a single letter, then a \",\" or \";\"\n            // Turn the paren back and letter to math and switch.\n            convertLastAtomsToMath(mathfield, 2);\n            return true;\n        }\n        // The tests above can look behind and change what had previously\n        // been entered. Now, let's just look at the typed character.\n        if (/[0-9+\\-=><*|]$/.test(c)) {\n            // If this new character looks like a number,\n            // or a relational operator (=, <, >)\n            // or a \"*\" or \"|\"\n            // (note that <=, >=, etc... are handled separately as shortcuts)\n            // switch to 'math'\n            removeIsolatedSpace(mathfield);\n            return true;\n        }\n    } else {\n        // We're in math mode. Should we switch to text?\n        if (keystroke === '[Space]') {\n            convertLastAtomsToText(mathfield, undefined, (a) =>\n                /[a-z][:,;.]$/.test(a.body)\n            );\n            return true;\n        }\n        if (\n            /[a-zA-Z]{3,}$/.test(context) &&\n            !/(dxd|abc|xyz|uvw)$/.test(context)\n        ) {\n            // A sequence of three characters\n            // (except for some exceptions)\n            // Convert them to text.\n            convertLastAtomsToText(mathfield, undefined, (a) =>\n                /[a-zA-Z]/.test(a.body)\n            );\n            return true;\n        }\n        if (/(^|\\W)(if|If)$/i.test(context)) {\n            // @todo localization\n            convertLastAtomsToText(mathfield, 1);\n            return true;\n        }\n        if (\n            /(\\u0393|\\u0394|\\u0398|\\u039b|\\u039E|\\u03A0|\\u03A3|\\u03a5|\\u03a6|\\u03a8|\\u03a9|[\\u03b1-\\u03c9]|\\u03d1|\\u03d5|\\u03d6|\\u03f1|\\u03f5){3,}$/u.test(\n                context\n            ) &&\n            !/(αβγ)$/.test(context)\n        ) {\n            // A sequence of three *greek* characters\n            // (except for one exception)\n            // Convert them to text.\n            convertLastAtomsToText(mathfield, undefined, (a) =>\n                /(:|,|;|.|\\u0393|\\u0394|\\u0398|\\u039b|\\u039E|\\u03A0|\\u03A3|\\u03a5|\\u03a6|\\u03a8|\\u03a9|[\\u03b1-\\u03c9]|\\u03d1|\\u03d5|\\u03d6|\\u03f1|\\u03f5)/u.test(\n                    a.body\n                )\n            );\n            return true;\n        }\n        if (/\\?|\\./.test(c)) {\n            // If the last character is a period or question mark,\n            // turn it to 'text'\n            return true;\n        }\n    }\n    return false;\n}\n","import type { Selector } from '../public/commands';\nimport { suggest } from '../core/definitions';\nimport { makeRoot } from '../core/atom';\nimport { parseString } from '../core/parser';\nimport { ModelPrivate, removeSuggestion } from './model';\nimport { moveAfterParent } from './model-selection';\nimport { mightProducePrintableCharacter, eventToChar } from './keyboard';\nimport { getInlineShortcutsStartingWith, getInlineShortcut } from './shortcuts';\nimport {\n    getCommandForKeybinding,\n    getKeybindingMarkup,\n    normalizeKeybindings,\n} from './keybindings';\nimport { hidePopover, showPopoverWithLatex } from './popover';\nimport { splitGraphemes } from '../core/grapheme-splitter';\nimport { HAPTIC_FEEDBACK_DURATION } from './commands';\nimport { getAnchorStyle, setPath } from './model-selection';\nimport { insertSuggestion } from './autocomplete';\nimport {\n    decorateCommandStringAroundInsertionPoint,\n    extractCommandStringAroundInsertionPoint,\n} from './model-command-mode';\nimport { insertSmartFence } from './model-smartfence';\n\nimport { contentDidChange, contentWillChange } from './model-listeners';\n\nimport { insert } from './model-insert';\nimport { requestUpdate } from './mathfield-render';\n\nimport type { MathfieldPrivate } from './mathfield-class';\n\nimport { removeIsolatedSpace } from './mathfield-smartmode';\nimport { smartMode } from './mathfield-smartmode';\nimport {\n    getActiveKeyboardLayout,\n    validateKeyboardLayout,\n} from './keyboard-layout';\n\nexport function showKeystroke(\n    mathfield: MathfieldPrivate,\n    keystroke: string\n): void {\n    const vb = mathfield.keystrokeCaption;\n    if (vb && mathfield.keystrokeCaptionVisible) {\n        const bounds = mathfield.element.getBoundingClientRect();\n        vb.style.left = bounds.left + 'px';\n        vb.style.top = bounds.top - 64 + 'px';\n        vb.innerHTML = mathfield.config.createHTML(\n            '<span>' +\n                (getKeybindingMarkup(keystroke) || keystroke) +\n                '</span>' +\n                vb.innerHTML\n        );\n        vb.style.visibility = 'visible';\n        setTimeout(function () {\n            if (vb.childNodes.length > 0) {\n                vb.removeChild(vb.childNodes[vb.childNodes.length - 1]);\n            }\n            if (vb.childNodes.length === 0) {\n                vb.style.visibility = 'hidden';\n            }\n        }, 3000);\n    }\n}\n\n/**\n * @param [evt] - An Event corresponding to the keystroke.\n */\nexport function onKeystroke(\n    mathfield: MathfieldPrivate,\n    keystroke: string,\n    evt: KeyboardEvent\n): boolean {\n    // 1. Update the keybindings according to the current keyboard layout\n\n    // 1.1 Possibly update the current keyboard layout based on this event\n    validateKeyboardLayout(evt);\n\n    const activeLayout = getActiveKeyboardLayout();\n    if (mathfield.keyboardLayout !== activeLayout.id) {\n        console.log('Switching to keyboard layout ' + activeLayout.id);\n        mathfield.keyboardLayout = activeLayout.id;\n        mathfield.keybindings = normalizeKeybindings(\n            mathfield.config.keybindings,\n            (e) => {\n                if (typeof mathfield.config.onError === 'function') {\n                    mathfield.config.onError({\n                        code: 'invalid-keybinding',\n                        arg: e.join('\\n'),\n                    });\n                }\n                console.log(e.join('\\n'));\n            }\n        );\n    }\n\n    // 2. Display the keystroke in the keystroke panel (if visible)\n    showKeystroke(mathfield, keystroke);\n\n    // 3. Reset the timer for the keystroke buffer reset\n    clearTimeout(mathfield.keystrokeBufferResetTimer);\n\n    // 4. Give a chance to the custom keystroke handler to intercept the event\n    if (\n        mathfield.config.onKeystroke &&\n        !mathfield.config.onKeystroke(mathfield, keystroke, evt)\n    ) {\n        if (evt?.preventDefault) {\n            evt.preventDefault();\n            evt.stopPropagation();\n        }\n        return false;\n    }\n\n    // 5. Let's try to find a matching shortcut or command\n    let shortcut: string;\n    let stateIndex: number;\n    let selector: Selector | '' | any[];\n    let resetKeystrokeBuffer = false;\n    // 5.1 Check if the keystroke, prefixed with the previously typed keystrokes,\n    // would match a long shortcut (i.e. '~~')\n    // Ignore the key if command or control is pressed (it may be a keybinding,\n    // see 5.3)\n    if (\n        mathfield.mode !== 'command' &&\n        (!evt || (!evt.ctrlKey && !evt.metaKey))\n    ) {\n        if (!mightProducePrintableCharacter(evt)) {\n            // It was a non-alpha character (PageUp, End, etc...)\n            mathfield.resetKeystrokeBuffer();\n        } else {\n            const c = eventToChar(evt);\n            // Find the longest substring that matches a shortcut\n            const candidate = mathfield.keystrokeBuffer + c;\n            let i = 0;\n            while (!shortcut && i < candidate.length) {\n                let siblings;\n                if (mathfield.keystrokeBufferStates[i]) {\n                    const mathlist = new ModelPrivate();\n                    mathlist.root = makeRoot(\n                        'math',\n                        parseString(\n                            mathfield.keystrokeBufferStates[i].latex,\n                            mathfield.config.defaultMode,\n                            null,\n                            mathfield.config.macros\n                        )\n                    );\n                    setPath(\n                        mathlist,\n                        mathfield.keystrokeBufferStates[i].selection\n                    );\n                    siblings = mathlist.siblings();\n                } else {\n                    siblings = mathfield.model.siblings();\n                }\n                shortcut = getInlineShortcut(\n                    siblings,\n                    candidate.slice(i),\n                    mathfield.config.inlineShortcuts\n                );\n                i += 1;\n            }\n            stateIndex = i - 1;\n            mathfield.keystrokeBuffer += c;\n            mathfield.keystrokeBufferStates.push(mathfield.getUndoRecord());\n            if (\n                getInlineShortcutsStartingWith(candidate, mathfield.config)\n                    .length <= 1\n            ) {\n                resetKeystrokeBuffer = true;\n            } else {\n                if (mathfield.config.inlineShortcutTimeout) {\n                    // Set a timer to reset the shortcut buffer\n                    mathfield.keystrokeBufferResetTimer = setTimeout(() => {\n                        mathfield.resetKeystrokeBuffer();\n                    }, mathfield.config.inlineShortcutTimeout);\n                }\n            }\n        }\n    }\n    // 5.2. Should we switch mode?\n    // Need to check this before determing if there's a valid shortcut\n    // since if we switch to math mode, we may want to apply the shortcut\n    // e.g. \"slope = rise/run\"\n    if (mathfield.config.smartMode) {\n        const previousMode = mathfield.mode;\n        if (shortcut) {\n            // If we found a shortcut (e.g. \"alpha\"),\n            // switch to math mode and insert it\n            mathfield.mode = 'math';\n        } else if (smartMode(mathfield, keystroke, evt)) {\n            mathfield.mode = { math: 'text', text: 'math' }[mathfield.mode];\n            selector = '';\n        }\n        // Notify of mode change\n        if (\n            mathfield.mode !== previousMode &&\n            typeof mathfield.config.onModeChange === 'function'\n        ) {\n            mathfield.config.onModeChange(mathfield, mathfield.mode);\n        }\n    }\n    // 5.3 Check if this matches a keybinding\n    // Need to check this **after** checking for inline shortcuts because\n    // shift+backquote is a keybinding that inserts \"\\~\"\", but \"~~\" is a\n    // shortcut for \"\\approx\" and needs to have priority over shift+backquote\n    if (!shortcut && !selector) {\n        selector = getCommandForKeybinding(\n            mathfield.keybindings,\n            mathfield.mode,\n            keystroke\n        );\n    }\n    // No shortcut :( We're done.\n    if (!shortcut && !selector) {\n        return true;\n    }\n    if (mathfield.config.readOnly && selector[0] === 'insert') {\n        return true;\n    }\n\n    // 6. Perform the action matching this shortcut\n    // 6.1 Remove any error indicator (wavy underline) on the current command\n    // sequence (if there are any)\n    decorateCommandStringAroundInsertionPoint(mathfield.model, false);\n    // 6.2 If we have a `moveAfterParent` selector (usually triggered with\n    // `spacebar), and we're at the end of a smart fence, close the fence with\n    // an empty (.) right delimiter\n    const parent = mathfield.model.parent();\n    if (\n        selector === 'moveAfterParent' &&\n        parent &&\n        parent.type === 'leftright' &&\n        mathfield.model.endOffset() === mathfield.model.siblings().length - 1 &&\n        mathfield.config.smartFence &&\n        insertSmartFence(mathfield.model, '.', mathfield.style)\n    ) {\n        // Pressing the space bar (moveAfterParent selector) when at the end\n        // of a potential smartFence will close it as a semi-open fence\n        selector = '';\n        requestUpdate(mathfield); // Re-render the closed smartFence\n    }\n    // 6.3 If this is the Spacebar and we're just before or right after\n    // a text zone, insert the space inside the text zone\n    if (mathfield.mode === 'math' && keystroke === '[Spacebar]' && !shortcut) {\n        const nextSibling = mathfield.model.sibling(1);\n        const previousSibling = mathfield.model.sibling(-1);\n        if (\n            (nextSibling && nextSibling.mode === 'text') ||\n            (previousSibling && previousSibling.mode === 'text')\n        ) {\n            insert(mathfield.model, ' ', { mode: 'text' });\n        }\n    }\n    // 6.4 If there's a selector, perform it.\n    if (selector) {\n        mathfield.$perform(selector);\n    } else if (shortcut) {\n        // 5.5 Insert the shortcut\n        // If the shortcut is a mandatory escape sequence (\\}, etc...)\n        // don't make it undoable, this would result in syntactically incorrect\n        // formulas\n        if (\n            !/^(\\\\{|\\\\}|\\\\[|\\\\]|\\\\@|\\\\#|\\\\$|\\\\%|\\\\^|\\\\_|\\\\backslash)$/.test(\n                shortcut\n            )\n        ) {\n            // To enable the substitution to be undoable,\n            // insert the character before applying the substitution\n            const style = {\n                ...getAnchorStyle(mathfield.model),\n                ...mathfield.style,\n            };\n            insert(mathfield.model, eventToChar(evt), {\n                suppressChangeNotifications: true,\n                mode: mathfield.mode,\n                style: style,\n            });\n            const saveMode = mathfield.mode;\n            // Create a snapshot with the inserted character\n            mathfield.snapshotAndCoalesce();\n            // Revert to the state before the beginning of the shortcut\n            // (restore doesn't change the undo stack)\n            mathfield.restoreToUndoRecord(\n                mathfield.keystrokeBufferStates[stateIndex]\n            );\n            mathfield.mode = saveMode;\n        }\n        contentWillChange(mathfield.model);\n        const save = mathfield.model.suppressChangeNotifications;\n        mathfield.model.suppressChangeNotifications = true;\n        // Insert the substitute, possibly as a smart fence\n        const style = {\n            ...getAnchorStyle(mathfield.model),\n            ...mathfield.style,\n        };\n        insert(mathfield.model, shortcut, {\n            format: 'latex',\n            mode: mathfield.mode,\n            style: style,\n            smartFence: true,\n        });\n        // Check if as a result of the substitution there is now an isolated\n        // (text mode) space (surrounded by math). In which case, remove it.\n        removeIsolatedSpace(mathfield);\n        // Switch (back) to text mode if the shortcut ended with a space\n        if (shortcut.endsWith(' ')) {\n            mathfield.mode = 'text';\n            insert(mathfield.model, ' ', { mode: 'text', style: style });\n        }\n        mathfield.model.suppressChangeNotifications = save;\n        contentDidChange(mathfield.model);\n        mathfield.snapshot();\n        requestUpdate(mathfield);\n        mathfield.model.announce('replacement');\n        // If we're done with the shortcuts (found a unique one), reset it.\n        if (resetKeystrokeBuffer) {\n            mathfield.resetKeystrokeBuffer();\n        }\n    }\n\n    // 7. Make sure the insertion point is scrolled into view\n    mathfield.scrollIntoView();\n\n    // 8. Keystroke has been handled, if it wasn't caught in the default\n    // case, so prevent propagation\n    if (evt?.preventDefault) {\n        evt.preventDefault();\n        evt.stopPropagation();\n    }\n    return false;\n}\n\n/**\n * This handler is invoked when text has been typed, pasted in or input with\n * an input method. As a result, `text` can be a sequence of characters to\n * be inserted.\n * @param {string} text\n * @param {object} options\n * @param {boolean} options.focus - If true, the mathfield will be focused\n * @param {boolean} options.feedback - If true, provide audio and haptic feedback\n * @param {boolean} options.simulateKeystroke - If true, generate some synthetic\n * keystrokes (useful to trigger inline shortcuts, for example)\n * @param {boolean} options.commandMode - If true, switch to command mode if\n * necessary, then insert text\n * @private\n */\nexport function onTypedText(\n    mathfield: MathfieldPrivate,\n    text: string,\n    options?: {\n        focus?: boolean;\n        feedback?: boolean;\n        commandMode?: boolean;\n        simulateKeystroke?: boolean;\n    }\n): void {\n    if (mathfield.config.readOnly) {\n        mathfield.model.announce('plonk');\n        return;\n    }\n    options = options ?? {};\n    // Focus, then provide audio and haptic feedback\n    if (options.focus) {\n        mathfield.$focus();\n    }\n    if (options.feedback) {\n        if (mathfield.config.keypressVibration && navigator?.vibrate) {\n            navigator.vibrate(HAPTIC_FEEDBACK_DURATION);\n        }\n        if (mathfield.keypressSound) {\n            mathfield.keypressSound.load();\n            mathfield.keypressSound.play().catch((err) => console.warn(err));\n        }\n    }\n    if (options.commandMode && mathfield.mode !== 'command') {\n        mathfield.switchMode('command');\n    }\n    // Remove any error indicator on the current command sequence\n    // (if there is one)\n    decorateCommandStringAroundInsertionPoint(mathfield.model, false);\n    if (options.simulateKeystroke) {\n        // for (const c of text) {\n        const c = text.charAt(0);\n        const ev = new KeyboardEvent('keypress', { key: c });\n        if (!onKeystroke(mathfield, c, ev)) {\n            return;\n        }\n        // }\n    }\n    // Insert the specified text at the current insertion point.\n    // If the selection is not collapsed, the content will be deleted first.\n    let popoverText = '';\n    let displayArrows = false;\n    if (mathfield.pasteInProgress) {\n        mathfield.pasteInProgress = false;\n        // This call was made in response to a paste event.\n        // Interpret `text` as a 'smart' expression (could be LaTeX, could be\n        // UnicodeMath)\n        insert(mathfield.model, text, {\n            smartFence: mathfield.config.smartFence,\n            mode: 'math',\n        });\n    } else {\n        const style = {\n            ...getAnchorStyle(mathfield.model),\n            ...mathfield.style,\n        };\n        // Decompose the string into an array of graphemes.\n        // This is necessary to correctly process what is displayed as a single\n        // glyph (a grapheme) but which is composed of multiple Unicode\n        // codepoints. This is the case in particular for some emojis, such as\n        // those with a skin tone modifier, the country flags emojis or\n        // compound emojis such as the professional emojis, including the\n        // David Bowie emoji: 👨🏻‍🎤\n        const graphemes = splitGraphemes(text);\n        for (const c of graphemes) {\n            if (mathfield.mode === 'command') {\n                removeSuggestion(mathfield.model);\n                mathfield.suggestionIndex = 0;\n                const command = extractCommandStringAroundInsertionPoint(\n                    mathfield.model\n                );\n                const suggestions = suggest(command + c);\n                displayArrows = suggestions.length > 1;\n                if (suggestions.length === 0) {\n                    insert(mathfield.model, c, { mode: 'command' });\n                    if (/^\\\\[a-zA-Z\\\\*]+$/.test(command + c)) {\n                        // This looks like a command name, but not a known one\n                        decorateCommandStringAroundInsertionPoint(\n                            mathfield.model,\n                            true\n                        );\n                    }\n                    hidePopover(mathfield);\n                } else {\n                    insert(mathfield.model, c, { mode: 'command' });\n                    if (suggestions[0].match !== command + c) {\n                        insertSuggestion(\n                            mathfield.model,\n                            suggestions[0].match,\n                            -suggestions[0].match.length + command.length + 1\n                        );\n                    }\n                    popoverText = suggestions[0].match;\n                }\n            } else if (mathfield.mode === 'math') {\n                // Some characters are mapped to commands. Handle them here.\n                // This is important to handle synthetic text input and\n                // non-US keyboards, on which, fop example, the '^' key is\n                // not mapped to  'Shift-Digit6'.\n                const selector = {\n                    '^': 'moveToSuperscript',\n                    _: 'moveToSubscript',\n                    ' ': 'moveAfterParent',\n                }[c];\n                if (selector) {\n                    if (selector === 'moveToSuperscript') {\n                        if (\n                            superscriptDepth(mathfield) >=\n                            mathfield.config.scriptDepth[1]\n                        ) {\n                            mathfield.model.announce('plonk');\n                            return;\n                        }\n                    } else if (selector === 'moveToSubscript') {\n                        if (\n                            subscriptDepth(mathfield) >=\n                            mathfield.config.scriptDepth[0]\n                        ) {\n                            mathfield.model.announce('plonk');\n                            return;\n                        }\n                    }\n                    mathfield.$perform(selector);\n                } else {\n                    if (\n                        mathfield.config.smartSuperscript &&\n                        mathfield.model.relation() === 'superscript' &&\n                        /[0-9]/.test(c) &&\n                        mathfield.model\n                            .siblings()\n                            .filter((x) => x.type !== 'first').length === 0\n                    ) {\n                        // We are inserting a digit into an empty superscript\n                        // If smartSuperscript is on, insert the digit, and\n                        // exit the superscript.\n                        insert(mathfield.model, c, {\n                            mode: 'math',\n                            style: style,\n                        });\n                        moveAfterParent(mathfield.model);\n                    } else {\n                        insert(mathfield.model, c, {\n                            mode: 'math',\n                            style: style,\n                            smartFence: mathfield.config.smartFence,\n                        });\n                    }\n                }\n            } else if (mathfield.mode === 'text') {\n                insert(mathfield.model, c, { mode: 'text', style: style });\n            }\n        }\n    }\n    if (mathfield.mode !== 'command') {\n        mathfield.snapshotAndCoalesce();\n    }\n    // Mark the mathfield dirty\n    // (it will get rendered in scrollIntoView())\n    mathfield.dirty = true;\n\n    // Make sure the insertion point is visible\n    mathfield.scrollIntoView();\n\n    // Since the location of the popover depends on the position of the caret\n    // only show the popover after the formula has been rendered and the\n    // position of the caret calculated\n    showPopoverWithLatex(mathfield, popoverText, displayArrows);\n}\n\nfunction superscriptDepth(mathfield: MathfieldPrivate): number {\n    let result = 0;\n    let i = 0;\n    let atom = mathfield.model.ancestor(i);\n    let wasSuperscript = false;\n    while (atom) {\n        if (atom.superscript || atom.subscript) {\n            result += 1;\n        }\n        if (atom.superscript) {\n            wasSuperscript = true;\n        } else if (atom.subscript) {\n            wasSuperscript = false;\n        }\n        i += 1;\n        atom = mathfield.model.ancestor(i);\n    }\n    return wasSuperscript ? result : 0;\n}\nfunction subscriptDepth(mathfield: MathfieldPrivate): number {\n    let result = 0;\n    let i = 0;\n    let atom = mathfield.model.ancestor(i);\n    let wasSubscript = false;\n    while (atom) {\n        if (atom.superscript || atom.subscript) {\n            result += 1;\n        }\n        if (atom.superscript) {\n            wasSubscript = false;\n        } else if (atom.subscript) {\n            wasSubscript = true;\n        }\n        i += 1;\n        atom = mathfield.model.ancestor(i);\n    }\n    return wasSubscript ? result : 0;\n}\n","import { ParseMode } from '../public/core';\nimport { register as registerCommand } from './commands';\nimport { complete } from './autocomplete';\nimport type { MathfieldPrivate } from './mathfield-class';\nimport { onTypedText } from './mathfield-keyboard-input';\n\nregisterCommand({\n    undo: (mathfield: MathfieldPrivate) => {\n        complete(mathfield);\n        // Undo to the previous state\n        mathfield.undo();\n        return true;\n    },\n    redo: (mathfield: MathfieldPrivate) => {\n        complete(mathfield);\n        mathfield.redo();\n        return true;\n    },\n    scrollIntoView: (mathfield: MathfieldPrivate) => {\n        mathfield.scrollIntoView();\n        return true;\n    },\n    scrollToStart: (mathfield: MathfieldPrivate) => {\n        mathfield.field.scroll(0, 0);\n        return true;\n    },\n    scrollToEnd: (mathfield: MathfieldPrivate) => {\n        const fieldBounds = mathfield.field.getBoundingClientRect();\n        mathfield.field.scroll(fieldBounds.left - window.scrollX, 0);\n        return true;\n    },\n    enterCommandMode: (mathfield: MathfieldPrivate) => {\n        mathfield.switchMode('command');\n        return true;\n    },\n    toggleKeystrokeCaption: (mathfield: MathfieldPrivate) => {\n        mathfield.keystrokeCaptionVisible = !mathfield.keystrokeCaptionVisible;\n        mathfield.keystrokeCaption.innerHTML = '';\n        if (!mathfield.keystrokeCaptionVisible) {\n            mathfield.keystrokeCaption.style.visibility = 'hidden';\n        }\n        return false;\n    },\n    switchMode: (mathfield: MathfieldPrivate, mode: ParseMode) => {\n        mathfield.switchMode(mode);\n        return true;\n    },\n    insert: (mathfield: MathfieldPrivate, s: string, options) =>\n        mathfield.$insert(s, options),\n    typedText: (mathfield: MathfieldPrivate, text: string) => {\n        onTypedText(mathfield, text);\n        return true;\n    },\n});\n","import { Style, ParseMode, FontSeries, FontShape } from '../public/core';\nimport { selectionIsCollapsed, getAnchorMode } from './model-selection';\nimport { MathfieldPrivate } from './mathfield-class';\nimport { applyStyle as applyStyleToModel } from './model-styling';\nimport { register as registerCommand } from './commands';\n\nexport function applyStyle(\n    mathfield: MathfieldPrivate,\n    inStyle: { [key: string]: string }\n): boolean {\n    mathfield.resetKeystrokeBuffer();\n    const style = validateStyle(inStyle);\n    if (style.mode) {\n        // There's a mode ('text', 'math', 'command') change\n        if (selectionIsCollapsed(mathfield.model)) {\n            // Nothing selected\n            mathfield.switchMode(style.mode as ParseMode);\n        } else {\n            // Convert the selection from one mode to another\n            const previousMode = mathfield.mode;\n            const targetMode =\n                (getAnchorMode(mathfield.model) ||\n                    mathfield.config.defaultMode) === 'math'\n                    ? 'text'\n                    : 'math';\n            let convertedSelection = mathfield.$selectedText('ASCIIMath');\n            if (targetMode === 'math' && /^\"[^\"]+\"$/.test(convertedSelection)) {\n                convertedSelection = convertedSelection.slice(1, -1);\n            }\n            mathfield.$insert(convertedSelection, {\n                mode: targetMode,\n                selectionMode: 'item',\n                format: targetMode === 'text' ? 'text' : 'ASCIIMath',\n            });\n            mathfield.mode = targetMode;\n            if (mathfield.groupIsSelected()) {\n                // The entire group was selected. Adjust parent mode if\n                // appropriate\n                const parent = mathfield.model.parent();\n                if (\n                    parent &&\n                    (parent.type === 'group' || parent.type === 'root')\n                ) {\n                    parent.mode = targetMode;\n                }\n            }\n            // Notify of mode change\n            if (\n                mathfield.mode !== previousMode &&\n                typeof mathfield.config.onModeChange === 'function'\n            ) {\n                mathfield.config.onModeChange(mathfield, mathfield.mode);\n            }\n        }\n        delete style.mode;\n    }\n    if (selectionIsCollapsed(mathfield.model)) {\n        // No selection, let's update the 'current' style\n        if (\n            mathfield.style.fontSeries &&\n            style.fontSeries === mathfield.style.fontSeries\n        ) {\n            style.fontSeries = 'auto';\n        }\n        if (style.fontShape && style.fontShape === mathfield.style.fontShape) {\n            style.fontShape = 'auto';\n        }\n        if (style.color && style.color === mathfield.style.color) {\n            style.color = 'none';\n        }\n        if (\n            style.backgroundColor &&\n            style.backgroundColor === mathfield.style.backgroundColor\n        ) {\n            style.backgroundColor = 'none';\n        }\n        if (style.fontSize && style.fontSize === mathfield.style.fontSize) {\n            style.fontSize = 'auto';\n        }\n        mathfield.style = { ...mathfield.style, ...style };\n        // This style will be used the next time an atom is inserted\n    } else {\n        // Change the style of the selection\n        applyStyleToModel(mathfield.model, style);\n        mathfield.snapshot();\n    }\n    return true;\n}\n\nregisterCommand({ applyStyle }, { target: 'mathfield' });\n\n/**\n * Validate a style specification object\n */\nfunction validateStyle(style: { [key: string]: string }): Style {\n    const result: Style = {};\n    if (typeof style.mode === 'string') {\n        result.mode = style.mode.toLowerCase() as ParseMode;\n        console.assert(\n            result.mode === 'math' ||\n                result.mode === 'text' ||\n                result.mode === 'command'\n        );\n    }\n\n    if (typeof style.color === 'string') {\n        result.color = style.color;\n    }\n\n    if (typeof style.backgroundColor === 'string') {\n        result.backgroundColor = style.backgroundColor;\n    }\n\n    if (typeof style.fontFamily === 'string') {\n        result.fontFamily = style.fontFamily;\n    }\n\n    if (typeof style.series === 'string') {\n        result.fontSeries = style.series as FontSeries;\n    }\n    if (typeof style.fontSeries === 'string') {\n        result.fontSeries = style.fontSeries.toLowerCase() as FontSeries;\n    }\n    if (result.fontSeries) {\n        result.fontSeries =\n            {\n                bold: 'b',\n                medium: 'm',\n                normal: 'm',\n            }[result.fontSeries] || result.fontSeries;\n    }\n\n    if (typeof style.shape === 'string') {\n        result.fontShape = style.shape as FontShape;\n    }\n    if (typeof style.fontShape === 'string') {\n        result.fontShape = style.fontShape.toLowerCase() as FontShape;\n    }\n    if (result.fontShape) {\n        result.fontShape =\n            {\n                italic: 'it',\n                up: 'n',\n                upright: 'n',\n                normal: 'n',\n            }[result.fontShape] || result.fontShape;\n    }\n\n    if (typeof style.size === 'string') {\n        result.fontSize = style.size;\n    } else if (typeof style.size === 'number') {\n        result.fontSize = 'size' + Math.min(0, Math.max(10, style.size));\n    }\n    if (typeof style.fontSize === 'string') {\n        result.fontSize = style.fontSize.toLowerCase();\n    }\n    if (result.fontSize) {\n        result.fontSize =\n            {\n                tiny: 'size1',\n                scriptsize: 'size2',\n                footnotesize: 'size3',\n                small: 'size4',\n                normal: 'size5',\n                normalsize: 'size5',\n                large: 'size6',\n                Large: 'size7',\n                LARGE: 'size8',\n                huge: 'size9',\n                Huge: 'size10',\n            }[result.fontSize] || result.fontSize;\n    }\n\n    return result;\n}\n","import { register as registerCommand } from './commands';\nimport { selectionIsCollapsed } from './model-selection';\nimport type { MathfieldPrivate } from './mathfield-class';\nimport { requestUpdate } from './mathfield-render';\n\nexport function onPaste(mathfield: MathfieldPrivate): boolean {\n    // Make note we're in the process of pasting. The subsequent call to\n    // onTypedText() will take care of interpreting the clipboard content\n    mathfield.pasteInProgress = true;\n    return true;\n}\nexport function onCut(mathfield: MathfieldPrivate): boolean {\n    // Clearing the selection will have the side effect of clearing the\n    // content of the textarea. However, the textarea value is what will\n    // be copied to the clipboard, so defer the clearing of the selection\n    // to later, after the cut operation has been handled.\n    setTimeout(\n        function (): void {\n            mathfield.$clearSelection();\n            requestUpdate(mathfield);\n        }.bind(mathfield),\n        0\n    );\n    return true;\n}\nexport function onCopy(mathfield: MathfieldPrivate, e: ClipboardEvent): void {\n    if (selectionIsCollapsed(mathfield.model)) {\n        e.clipboardData.setData(\n            'text/plain',\n            '$$' + mathfield.$text('latex-expanded') + '$$'\n        );\n        e.clipboardData.setData('application/json', mathfield.$text('json'));\n        e.clipboardData.setData('application/xml', mathfield.$text('mathML'));\n    } else {\n        e.clipboardData.setData(\n            'text/plain',\n            '$$' + mathfield.$selectedText('latex-expanded') + '$$'\n        );\n        e.clipboardData.setData(\n            'application/json',\n            mathfield.$selectedText('json')\n        );\n        e.clipboardData.setData(\n            'application/xml',\n            mathfield.$selectedText('mathML')\n        );\n    }\n    // Prevent the current document selection from being written to the clipboard.\n    e.preventDefault();\n}\n\nregisterCommand(\n    {\n        copyToClipboard: (mathfield: MathfieldPrivate) => {\n            mathfield.$focus();\n            // If the selection is empty, select the entire field before\n            // copying it.\n            if (selectionIsCollapsed(mathfield.model)) {\n                mathfield.$select();\n            }\n            document.execCommand('copy');\n            return false;\n        },\n\n        cutToClipboard: (mathfield: MathfieldPrivate) => {\n            mathfield.$focus();\n            document.execCommand('cut');\n            return true;\n        },\n\n        pasteFromClipboard: (mathfield: MathfieldPrivate) => {\n            mathfield.$focus();\n            document.execCommand('paste');\n            return true;\n        },\n    },\n    { target: 'mathfield', category: 'clipboard' }\n);\n","import { pathFromString, clone as clonePath, Path } from './path';\nimport {\n    setPath,\n    selectGroup,\n    setRange,\n    selectAll,\n    filter,\n} from './model-selection';\nimport { on, off } from './mathfield-utils';\nimport type { MathfieldPrivate } from './mathfield-class';\nimport { requestUpdate } from './mathfield-render';\n\nlet gLastTap: { x: number; y: number; time: number };\nlet gTapCount = 0;\n\nexport function onPointerDown(\n    mathfield: MathfieldPrivate,\n    evt: PointerEvent\n): void {\n    const that = mathfield;\n    let anchor;\n    let trackingPointer = false;\n    let trackingWords = false;\n    let dirty = false;\n\n    // If a mouse button other than the main one was pressed, return.\n    // On iOS 12.4 Safari and Firefox on Android (which do not support\n    // PointerEvent) the touchstart event is sent with event.buttons = 0\n    // which for a mouse event would normally be an\n    // invalid button. Accept this button 0.\n    if (evt.buttons !== 1 && evt.buttons !== 0) {\n        return;\n    }\n    let scrollLeft = false;\n    let scrollRight = false;\n    // Note: evt['touches'] is for touchstart (when PointerEvent is not supported)\n    const anchorX = evt['touches'] ? evt['touches'][0].clientX : evt.clientX;\n    const anchorY = evt['touches'] ? evt['touches'][0].clientY : evt.clientY;\n    const anchorTime = Date.now();\n    const scrollInterval = setInterval(() => {\n        if (scrollLeft) {\n            that.field.scroll({ top: 0, left: that.field.scrollLeft - 16 });\n        } else if (scrollRight) {\n            that.field.scroll({ top: 0, left: that.field.scrollLeft + 16 });\n        }\n    }, 32);\n    function endPointerTracking(evt: PointerEvent): void {\n        if (window.PointerEvent) {\n            off(that.field, 'pointermove', onPointerMove);\n            off(that.field, 'pointerup pointercancel', endPointerTracking);\n            // off(window, 'pointermove', onPointerMove);\n            // off(window, 'pointerup blur', endPointerTracking);\n            that.field.releasePointerCapture(evt.pointerId);\n        } else {\n            off(that.field, 'touchmove', onPointerMove);\n            off(that.field, 'touchcancel touchend', endPointerTracking);\n            off(window, 'mousemove', onPointerMove);\n            off(window, 'mouseup blur', endPointerTracking);\n        }\n        trackingPointer = false;\n        clearInterval(scrollInterval);\n        that.element\n            .querySelectorAll('.ML__scroller')\n            .forEach((x) => x.parentNode.removeChild(x));\n        evt.preventDefault();\n        evt.stopPropagation();\n    }\n\n    function onPointerMove(evt: PointerEvent): void {\n        const x = evt['touches'] ? evt['touches'][0].clientX : evt.clientX;\n        const y = evt['touches'] ? evt['touches'][0].clientY : evt.clientY;\n        // Ignore events that are within small spatial and temporal bounds\n        // of the pointer down\n        const hysteresis = evt.pointerType === 'touch' ? 20 : 5;\n        if (\n            Date.now() < anchorTime + 500 &&\n            Math.abs(anchorX - x) < hysteresis &&\n            Math.abs(anchorY - y) < hysteresis\n        ) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            return;\n        }\n        const fieldBounds = that.field.getBoundingClientRect();\n        scrollRight = x > fieldBounds.right;\n        scrollLeft = x < fieldBounds.left;\n        let actualAnchor = anchor;\n        if (window.PointerEvent) {\n            if (!evt.isPrimary) {\n                actualAnchor = pathFromPoint(that, evt.clientX, evt.clientY, {\n                    bias: 0,\n                });\n            }\n        } else {\n            if (evt['touches'] && evt['touches'].length === 2) {\n                actualAnchor = pathFromPoint(\n                    that,\n                    evt['touches'][1].clientX,\n                    evt['touches'][1].clientY,\n                    { bias: 0 }\n                );\n            }\n        }\n        const focus = pathFromPoint(that, x, y, {\n            bias: x <= anchorX ? (x === anchorX ? 0 : -1) : +1,\n        });\n        if (\n            focus &&\n            setRange(that.model, actualAnchor, focus, {\n                extendToWordBoundary: trackingWords,\n            })\n        ) {\n            // Re-render if the range has actually changed\n            requestUpdate(mathfield);\n        }\n        // Prevent synthetic mouseMove event when this is a touch event\n        evt.preventDefault();\n        evt.stopPropagation();\n    }\n\n    // Calculate the tap count\n    if (\n        gLastTap &&\n        Math.abs(gLastTap.x - anchorX) < 5 &&\n        Math.abs(gLastTap.y - anchorY) < 5 &&\n        Date.now() < gLastTap.time + 500\n    ) {\n        gTapCount += 1;\n        gLastTap.time = anchorTime;\n    } else {\n        gLastTap = {\n            x: anchorX,\n            y: anchorY,\n            time: anchorTime,\n        };\n        gTapCount = 1;\n    }\n    const bounds = mathfield.field.getBoundingClientRect();\n    if (\n        anchorX >= bounds.left &&\n        anchorX <= bounds.right &&\n        anchorY >= bounds.top &&\n        anchorY <= bounds.bottom\n    ) {\n        // Focus the mathfield\n        if (!mathfield.$hasFocus()) {\n            dirty = true;\n            if (mathfield.textarea.focus) {\n                mathfield.textarea.focus();\n            }\n        }\n\n        // Clicking or tapping the field resets the keystroke buffer and\n        // smart mode\n        mathfield.resetKeystrokeBuffer();\n        mathfield.smartModeSuppressed = false;\n\n        const wrapperBounds = mathfield.field\n            .querySelector('.ML__mathlive')\n            .getBoundingClientRect();\n        if (anchorX > wrapperBounds.right) {\n            // If outside the bounds of the rendered formula,\n            // set the anchor to the last element of the root\n            anchor = [\n                {\n                    relation: 'body',\n                    offset: mathfield.model.root.body.length - 1,\n                },\n            ];\n        } else {\n            anchor = pathFromPoint(mathfield, anchorX, anchorY, { bias: 0 });\n        }\n        if (anchor) {\n            // Create divs to block out pointer tracking to the left and right of\n            // the mathfield (to avoid triggering the hover of the virtual\n            // keyboard toggle, for example)\n            let div = document.createElement('div');\n            div.className = 'ML__scroller';\n            mathfield.element.appendChild(div);\n            div.style.left = bounds.left - 200 + 'px';\n            div = document.createElement('div');\n            div.className = 'ML__scroller';\n            mathfield.element.appendChild(div);\n            div.style.left = bounds.right + 'px';\n\n            if (evt.shiftKey) {\n                // Extend the selection if the shift-key is down\n                setRange(mathfield.model, mathfield.model.path, anchor);\n                anchor = clonePath(mathfield.model.path);\n                anchor[anchor.length - 1].offset -= 1;\n            } else {\n                setPath(mathfield.model, anchor, 0);\n            }\n\n            // The selection has changed, so we'll need to re-render\n            dirty = true;\n\n            // Reset any user-specified style\n            mathfield.style = {};\n            // evt.detail contains the number of consecutive clicks\n            // for double-click, triple-click, etc...\n            // (note that evt.detail is not set when using pointerEvent)\n            if (evt.detail === 3 || gTapCount > 2) {\n                endPointerTracking(evt);\n                if (evt.detail === 3 || gTapCount === 3) {\n                    // This is a triple-click\n                    selectAll(mathfield.model);\n                }\n            } else if (!trackingPointer) {\n                trackingPointer = true;\n                if (window.PointerEvent) {\n                    on(that.field, 'pointermove', onPointerMove);\n                    on(\n                        that.field,\n                        'pointerup pointercancel',\n                        endPointerTracking\n                    );\n                    that.field.setPointerCapture(evt.pointerId);\n                } else {\n                    on(window, 'blur', endPointerTracking);\n                    if (evt['touches']) {\n                        // This is a touchstart event (and PointerEvent is not supported)\n                        // To receive the subsequent touchmove/touch, need to\n                        // listen to this evt.target.\n                        // This was a touch event\n                        on(evt.target, 'touchmove', onPointerMove);\n                        on(\n                            evt.target,\n                            'touchcancel touchend',\n                            endPointerTracking\n                        );\n                    } else {\n                        on(window, 'mousemove', onPointerMove);\n                        on(window, 'mouseup', endPointerTracking);\n                    }\n                }\n                if (evt.detail === 2 || gTapCount === 2) {\n                    // This is a double-click\n                    trackingWords = true;\n                    selectGroup(mathfield.model);\n                }\n            }\n        }\n    } else {\n        gLastTap = null;\n    }\n    if (dirty) {\n        requestUpdate(mathfield);\n    }\n    // Prevent the browser from handling, in particular when this is a\n    // touch event prevent the synthetic mouseDown event from being generated\n    evt.preventDefault();\n}\n\n/**\n * Return a tuple of an element and a distance from point (x, y)\n */\nfunction nearestElementFromPoint(\n    el: HTMLElement,\n    x: number,\n    y: number\n): { distance: number; element: HTMLElement } {\n    let result = { element: null, distance: Number.POSITIVE_INFINITY };\n\n    // This element may not have a matching atom, but its children might\n    let considerChildren = true;\n\n    if (el.getAttribute('data-atom-id')) {\n        result.element = el;\n\n        // Calculate the (square of the) distance to the rectangle\n        const r = el.getBoundingClientRect();\n        const dx = x - (r.left + r.right) / 2;\n        const dy = y - (r.top + r.bottom) / 2;\n        result.distance = dx * dx + dy * dy;\n\n        // Only consider children if the target is inside the (horizontal)\n        // bounds of the element.\n        // This avoid searching the numerator/denominator when a fraction\n        // is the last element in the formula.\n        considerChildren = x >= r.left && x <= r.right;\n    }\n\n    if (considerChildren && el.children) {\n        for (const child of el.children) {\n            const nearest = nearestElementFromPoint(child as HTMLElement, x, y);\n            if (nearest.element && nearest.distance <= result.distance) {\n                result = nearest;\n            }\n        }\n    }\n\n    return result;\n}\n\n/**\n * @param options.bias  if 0, the midpoint of the bounding box\n * is considered to return the sibling. If <0, the left sibling is\n * favored, if >0, the right sibling\n */\nexport function pathFromPoint(\n    mathfield: MathfieldPrivate,\n    x: number,\n    y: number,\n    options?: { bias?: number }\n): Path {\n    options = options ?? {};\n    options.bias = options.bias ?? 0;\n    let result;\n    // Try to find the deepest element that is near the point that was\n    // clicked on (the point could be outside of the element)\n    const nearest = nearestElementFromPoint(mathfield.field, x, y);\n    const el = nearest.element;\n    const id = el ? el.getAttribute('data-atom-id') : null;\n    if (id) {\n        // Let's find the atom that has a matching ID with the element that\n        // was clicked on (or near)\n        const paths = filter(mathfield.model, (_path, atom) => {\n            // If the atom allows children to be selected, match only if\n            // the ID of  the atom matches the one we're looking for.\n            if (!atom.captureSelection) {\n                return atom.id === id;\n            }\n            // If the atom does not allow children to be selected\n            // (captureSelection === true), the element matches if any of\n            // its children has an ID that matches.\n            return atom.filter((childAtom) => childAtom.id === id).length > 0;\n        });\n        if (paths && paths.length > 0) {\n            // (There should be exactly one atom that matches this ID...)\n            // Set the result to the path to this atom\n            result = pathFromString(paths[0]).path;\n            if (options.bias === 0) {\n                // If the point clicked is to the left of the vertical midline,\n                // adjust the path to *before* the atom (i.e. after the\n                // preceding atom)\n                const bounds = el.getBoundingClientRect();\n                if (\n                    x < bounds.left + bounds.width / 2 &&\n                    !el.classList.contains('ML__placeholder')\n                ) {\n                    result[result.length - 1].offset = Math.max(\n                        0,\n                        result[result.length - 1].offset - 1\n                    );\n                }\n            } else if (options.bias < 0) {\n                result[result.length - 1].offset = Math.min(\n                    mathfield.model.siblings().length - 1,\n                    Math.max(0, result[result.length - 1].offset + options.bias)\n                );\n            }\n        }\n    }\n    return result;\n}\n","import { decompose } from '../core/atom';\nimport { makeSpan, makeStruts } from '../core/span';\nimport { parseString } from '../core/parser';\nimport { LINE_COLORS, AREA_COLORS } from '../core/color';\nimport { localize as l10n } from './l10n';\nimport { MATHSTYLES } from '../core/mathstyle';\nimport { attachButtonHandlers } from './mathfield-buttons';\nimport { releaseSharedElement } from './mathfield-utils';\n\nimport type { MathfieldPrivate } from './mathfield-class';\n\nconst KEYBOARDS = {\n    numeric: {\n        tooltip: 'keyboard.tooltip.numeric',\n        layer: 'math',\n        label: '123',\n        layers: ['math'],\n    },\n    roman: {\n        tooltip: 'keyboard.tooltip.roman',\n        layer: 'lower-roman',\n        label: 'ABC',\n        layers: ['lower-roman', 'upper-roman'],\n    },\n    greek: {\n        tooltip: 'keyboard.tooltip.greek',\n        layer: 'lower-greek',\n        label: '&alpha;&beta;&gamma;',\n        classes: 'tex-math',\n        layers: ['lower-greek', 'upper-greek'],\n    },\n    functions: {\n        tooltip: 'keyboard.tooltip.functions',\n        layer: 'functions',\n        label: '<i>f</i>&thinsp;()',\n        classes: 'tex',\n        layers: ['functions'],\n    },\n    symbols: {\n        tooltip: 'keyboard.tooltip.symbols',\n        layer: 'symbols',\n        label: '&infin;≠∈',\n        classes: 'tex',\n        layers: ['symbols'],\n    },\n    command: {\n        tooltip: 'keyboard.tooltip.command',\n        // For the command keyboard, perform a command rather than\n        // doing a simple layer switch, as we want to enter command mode\n        // when the keyboard is activated\n        command: 'enterCommandMode',\n        label: `<svg><use xlink:href='#svg-command' /></svg>`,\n        layers: ['lower-command', 'upper-command', 'symbols-command'],\n    },\n    style: {\n        tooltip: 'keyboard.tooltip.style',\n        layer: 'style',\n        label: '<b>b</b><i>i</i>𝔹',\n    },\n};\n\nconst SHIFTED_KEYS = {\n    '\\\\varphi ': ['&Phi;', '\\\\Phi '],\n    '\\\\varsigma ': ['&Sigma;', '\\\\Sigma '],\n    '\\\\epsilon ': ['&#x0190;', '{\\\\char\"0190}'],\n    '\\\\rho ': ['&#x3A1', '{\\\\char\"3A1}'],\n    '\\\\tau ': ['&#x3A4;', '{\\\\char\"3A4}'],\n    '\\\\upsilon ': ['&Upsilon;', '\\\\Upsilon '],\n    '\\\\theta ': ['&Theta;', '\\\\Theta '],\n    '\\\\iota ': ['&Iota;', '{\\\\char\"399}'],\n    '\\\\omicron ': ['&#x039F;', '{\\\\char\"39F}'],\n    '\\\\pi ': ['&Pi;', '\\\\Pi '],\n    '\\\\alpha ': ['&Alpha;', '{\\\\char\"391}'],\n    '\\\\sigma ': ['&Sigma;', '\\\\Sigma '],\n    '\\\\delta ': ['&Delta;', '\\\\Delta '],\n    '\\\\phi ': ['&#x03a6;', '\\\\Phi '],\n    '\\\\gamma ': ['&Gamma;', '\\\\Gamma '],\n    '\\\\eta ': ['&Eta;', '{\\\\char\"397}'],\n    '\\\\xi ': ['&Xi;', '\\\\Xi '],\n    '\\\\kappa ': ['&Kappa;', '{\\\\char\"39A}'],\n    '\\\\lambda ': ['&Lambda;', '\\\\Lambda '],\n    '\\\\zeta ': ['&Zeta;', '{\\\\char\"396}'],\n    '\\\\chi ': ['&Chi;', '{\\\\char\"3A7}'],\n    '\\\\psi ': ['&Psi;', '\\\\Psi '],\n    '\\\\omega ': ['&Omega;', '\\\\Omega '],\n    '\\\\beta ': ['&Beta;', '{\\\\char\"392}'],\n    '\\\\nu ': ['&Nu;', '{\\\\char\"39D}'],\n    '\\\\mu ': ['&Mu;', '{\\\\char\"39C}'],\n};\n\n// const FUNCTIONS = [\n//     'Basic',\n//         ['\\\\sin', '\\\\cos', '\\\\tan', '\\\\min', '\\\\max', '\\\\gcd', '\\\\lcm', '\\\\repeat', 'encapsulate', 'recognize'],\n//     'Operators',\n//         ['\\\\sum', '\\\\prod', '\\\\bigcup_x']\n// ]\nconst ALT_KEYS_BASE = {\n    '0': [\n        '\\\\emptyset',\n        '\\\\varnothing',\n        '\\\\infty',\n        { latex: '#?_0', insert: '#@_0' },\n        '\\\\circ',\n        '\\\\bigcirc',\n        '\\\\bullet',\n    ],\n    '2': ['\\\\frac{1}{2}', { latex: '#?^2', insert: '#@^2' }],\n    '3': ['\\\\frac{1}{3}', { latex: '#?^3', insert: '#@^3' }],\n    '.': [\n        ',',\n        ';',\n        '\\\\colon',\n        { latex: ':', aside: 'ratio' },\n        { latex: '\\\\cdotp', aside: 'center dot', classes: 'box' },\n        { latex: '\\\\cdots', aside: 'center ellipsis', classes: 'box' },\n        { latex: '\\\\ldotp', aside: 'low dot', classes: 'box' },\n        { latex: '\\\\ldots', aside: 'low ellipsis', classes: 'box' },\n        { latex: '\\\\vdots', aside: '', classes: 'box' },\n        { latex: '\\\\ddots', aside: '', classes: 'box' },\n        '\\\\odot',\n        '\\\\oslash',\n        '\\\\circledcirc',\n    ],\n\n    '*': [\n        '\\\\cdot',\n        '\\\\ast',\n        '\\\\star',\n        '\\\\bigstar',\n        '\\\\ltimes',\n        '\\\\rtimes',\n        '\\\\rightthreetimes',\n        '\\\\leftthreetimes',\n        '\\\\intercal',\n        '\\\\prod',\n        { latex: '\\\\prod_{n\\\\mathop=0}^{\\\\infty}', classes: 'small' },\n    ],\n\n    '+': [\n        '\\\\pm',\n        '\\\\mp',\n        '\\\\sum',\n        { latex: '\\\\sum_{n\\\\mathop=0}^{\\\\infty}', classes: 'small' },\n        '\\\\dotplus',\n        '\\\\oplus',\n    ],\n    '-': ['\\\\pm', '\\\\mp', '\\\\ominus', '\\\\vert #0  \\\\vert'],\n\n    '/': ['\\\\divideontimes', '/', '\\\\div'],\n\n    '(': [\n        '\\\\left( #0\\\\right)',\n        '\\\\left[ #0\\\\right]',\n        '\\\\left\\\\{ #0\\\\right\\\\}',\n        '\\\\left\\\\langle #0\\\\right\\\\rangle',\n        '\\\\lfloor',\n        '\\\\llcorner',\n        '(',\n        '\\\\lbrack',\n        '\\\\lvert',\n        '\\\\lVert',\n        '\\\\lgroup',\n        '\\\\langle',\n        '\\\\lceil',\n        '\\\\ulcorner',\n        '\\\\lmoustache',\n        '\\\\lbrace',\n    ],\n\n    ')': [\n        '\\\\rfloor',\n        '\\\\lrcorner',\n        ')',\n        '\\\\rbrack',\n        '\\\\rvert',\n        '\\\\rVert',\n        '\\\\rgroup',\n        '\\\\rangle',\n        '\\\\rceil',\n        '\\\\urcorner',\n        '\\\\rmoustache',\n        '\\\\rbrace',\n    ],\n\n    '=': [\n        '\\\\cong',\n        '\\\\asymp',\n        '\\\\equiv',\n        '\\\\differencedelta',\n        '\\\\varpropto',\n        '\\\\thickapprox',\n        '\\\\approxeq',\n        '\\\\thicksim',\n        '\\\\backsim',\n        '\\\\eqsim',\n        '\\\\simeq',\n        '\\\\Bumpeq',\n        '\\\\bumpeq',\n        '\\\\doteq',\n        '\\\\Doteq',\n        '\\\\fallingdotseq',\n        '\\\\risingdotseq',\n        '\\\\coloneq',\n        '\\\\eqcirc',\n        '\\\\circeq',\n        '\\\\triangleq',\n        '\\\\between',\n    ],\n\n    '!=': ['\\\\neq', '\\\\ncong', '', '\\\\nsim'],\n\n    '<': [\n        '\\\\leq',\n        '\\\\leqq',\n        '\\\\lneqq',\n        '\\\\ll',\n        '\\\\nless',\n        '\\\\nleq',\n        '\\\\precsim',\n        '\\\\lesssim',\n        '\\\\lessgtr',\n        '\\\\prec',\n        '\\\\preccurlyeq',\n        '\\\\lessdot',\n        '\\\\nprec',\n    ],\n\n    '>': [\n        '\\\\geq',\n        '\\\\geqq',\n        '\\\\gneqq',\n        '\\\\gg',\n        '\\\\ngtr',\n        '\\\\ngeq',\n        '\\\\succsim',\n        '\\\\gtrsim',\n        '\\\\gtrless',\n        '\\\\succ',\n        '\\\\succcurlyeq',\n        '\\\\gtrdot',\n        '\\\\nsucc',\n    ],\n\n    set: ['\\\\in', '\\\\owns', '\\\\subset', '\\\\nsubset', '\\\\supset', '\\\\nsupset'],\n\n    '!set': ['\\\\notin', '\\\\backepsilon'],\n\n    subset: [],\n    supset: [],\n\n    infinity: ['\\\\aleph_0', '\\\\aleph_1', '\\\\omega', '\\\\mathfrak{m}'],\n\n    'numeric-pi': ['\\\\prod', '\\\\theta', '\\\\rho', '\\\\sin', '\\\\cos', '\\\\tan'],\n\n    ee: ['\\\\times 10^{#?}', '\\\\ln', '\\\\ln_{10}', '\\\\log'],\n\n    '^': ['_{#?}'],\n\n    // Integrals\n    int: [\n        { latex: '\\\\int_{#?}^{#?}', classes: 'small' },\n        { latex: '\\\\int', classes: 'small' },\n        { latex: '\\\\smallint', classes: 'small' },\n        { latex: '\\\\iint', classes: 'small' },\n        { latex: '\\\\iiint', classes: 'small' },\n        { latex: '\\\\oint', classes: 'small' },\n        { latex: '\\\\dfrac{\\\\rd}{\\\\rd x}', classes: 'small' },\n        { latex: '\\\\frac{\\\\partial}{\\\\partial x}', classes: 'small' },\n\n        '\\\\capitalDifferentialD',\n        '\\\\rd',\n        '\\\\partial',\n    ],\n\n    nabla: ['\\\\nabla\\\\times', '\\\\nabla\\\\cdot', '\\\\nabla^{2}'],\n\n    '!': ['!!', '\\\\Gamma', '\\\\Pi'],\n    accents: [\n        '\\\\bar{#@}',\n        '\\\\vec{#@}',\n        '\\\\hat{#@}',\n        '\\\\check{#@}',\n        '\\\\dot{#@}',\n        '\\\\ddot{#@}',\n        '\\\\mathring{#@}',\n        '\\\\breve{#@}',\n        '\\\\acute{#@}',\n        '\\\\tilde{#@}',\n        '\\\\grave{#@}',\n    ],\n    // 'absnorm': [{latex:'\\\\lVert #@ \\\\rVert', aside:'norm'},\n    //     {latex:'\\\\lvert #@ \\\\rvert', aside:'determinant'},\n    //     {latex:'\\\\begin{cardinality} #@ \\\\end{cardinality}', aside:'cardinality'},\n    //     {latex:'\\\\lvert #@ \\\\rvert', aside:'length'},\n    //     {latex:'\\\\lvert #@ \\\\rvert', aside:'order'},\n\n    // ],\n    A: [\n        { latex: '\\\\aleph', aside: 'aleph' },\n        { latex: '\\\\forall', aside: 'for all' },\n    ],\n    a: [\n        { latex: '\\\\aleph', aside: 'aleph' },\n        { latex: '\\\\forall', aside: 'for all' },\n    ],\n    b: [{ latex: '\\\\beth', aside: 'beth' }],\n    B: [{ latex: '\\\\beth', aside: 'beth' }],\n    c: [{ latex: '\\\\C', aside: 'set of complex numbers' }],\n    d: [{ latex: '\\\\daleth', aside: 'daleth' }],\n    D: [{ latex: '\\\\daleth', aside: 'daleth' }],\n    e: [\n        { latex: '\\\\exponentialE', aside: 'exponential e' },\n        { latex: '\\\\exists', aside: 'there is' },\n        { latex: '\\\\nexists', aside: 'there isn’t' },\n    ],\n    g: [{ latex: '\\\\gimel', aside: 'gimel' }],\n    G: [{ latex: '\\\\gimel', aside: 'gimel' }],\n    h: [\n        { latex: '\\\\hbar', aside: 'h bar' },\n        { latex: '\\\\hslash', aside: 'h slash' },\n    ],\n    i: [{ latex: '\\\\imaginaryI', aside: 'imaginary i' }],\n    j: [{ latex: '\\\\imaginaryJ', aside: 'imaginary j' }],\n    l: [{ latex: '\\\\ell', aside: 'ell' }],\n    n: [{ latex: '\\\\N', aside: 'set of natural numbers' }],\n    p: [{ latex: '\\\\P', aside: 'set of primes' }],\n    q: [{ latex: '\\\\Q', aside: 'set of rational numbers' }],\n    r: [{ latex: '\\\\R', aside: 'set of real numbers' }],\n    z: [{ latex: '\\\\Z', aside: 'set of integers' }],\n\n    'x-var': [\n        'y',\n        'z',\n        't',\n        'r',\n        { latex: 'f(#?)', classes: 'small' },\n        { latex: 'g(#?)', classes: 'small' },\n        'x^2',\n        'x^n',\n        'x_n',\n        'x_{n+1}',\n        'x_i',\n        'x_{i+1}',\n    ],\n    'n-var': ['i', 'j', 'p', 'k', 'a', 'u'],\n    ii: ['\\\\Re', '\\\\Im', '\\\\imaginaryJ', '\\\\Vert #0 \\\\Vert'],\n\n    logic: [\n        { latex: '\\\\exists', aside: 'there is' },\n        { latex: '\\\\nexists', aside: 'there isn’t' },\n\n        { latex: '\\\\ni', aside: 'such that' },\n        { latex: '\\\\Colon', aside: 'such that' },\n\n        { latex: '\\\\implies', aside: 'implies' },\n        { latex: '\\\\impliedby', aside: 'implied by' },\n\n        { latex: '\\\\iff', aside: 'if and only if' },\n\n        { latex: '\\\\land', aside: 'and' },\n        { latex: '\\\\lor', aside: 'or' },\n        { latex: '\\\\oplus', aside: 'xor' },\n        { latex: '\\\\lnot', aside: 'not' },\n\n        { latex: '\\\\downarrow', aside: 'nor' },\n        { latex: '\\\\uparrow', aside: 'nand' },\n\n        { latex: '\\\\curlywedge', aside: 'nor' },\n        { latex: '\\\\bar\\\\curlywedge', aside: 'nand' },\n\n        // {latex:'\\\\barwedge', aside:'bar wedge'},\n        // {latex:'\\\\curlyvee', aside:'curly vee'},\n        // {latex:'\\\\veebar', aside:'vee bar'},\n\n        { latex: '\\\\therefore', aside: 'therefore' },\n        { latex: '\\\\because', aside: 'because' },\n\n        { latex: '^\\\\biconditional', aside: 'biconditional' },\n\n        '\\\\leftrightarrow',\n        '\\\\Leftrightarrow',\n        '\\\\to',\n        '\\\\models',\n        '\\\\vdash',\n        '\\\\gets',\n        '\\\\dashv',\n        '\\\\roundimplies',\n    ],\n\n    'set-operators': [\n        '\\\\cap',\n        '\\\\cup',\n        '\\\\setminus',\n        '\\\\smallsetminus',\n        '\\\\complement',\n    ],\n\n    'set-relations': [\n        '\\\\in',\n        '\\\\notin',\n        '\\\\ni',\n        '\\\\owns',\n        '\\\\subset',\n        '\\\\supset',\n        '\\\\subseteq',\n        '\\\\supseteq',\n        '\\\\subsetneq',\n        '\\\\supsetneq',\n        '\\\\varsubsetneq',\n        '\\\\subsetneqq',\n        '\\\\nsubset',\n        '\\\\nsupset',\n        '\\\\nsubseteq',\n        '\\\\nsupseteq',\n    ],\n\n    space: [\n        {\n            latex: '\\\\char\"203A\\\\!\\\\char\"2039',\n            insert: '\\\\!',\n            aside: 'negative thin space<br>⁻³⧸₁₈ em',\n        },\n        {\n            latex: '\\\\unicode{\"203A}\\\\,\\\\unicode{\"2039}',\n            insert: '\\\\,',\n            aside: 'thin space<br>³⧸₁₈ em',\n        },\n        {\n            latex: '\\\\unicode{\"203A}\\\\:\\\\unicode{\"2039}',\n            insert: '\\\\:',\n            aside: 'medium space<br>⁴⧸₁₈ em',\n        },\n        {\n            latex: '\\\\unicode{\"203A}\\\\;\\\\unicode{\"2039}',\n            insert: '\\\\;',\n            aside: 'thick space<br>⁵⧸₁₈ em',\n        },\n        {\n            latex: '\\\\unicode{\"203A}\\\\ \\\\unicode{\"2039}',\n            insert: '\\\\ ',\n            aside: '⅓ em',\n        },\n        {\n            latex: '\\\\unicode{\"203A}\\\\enspace\\\\unicode{\"2039}',\n            insert: '\\\\enspace',\n            aside: '½ em',\n        },\n        {\n            latex: '\\\\unicode{\"203A}\\\\quad\\\\unicode{\"2039}',\n            insert: '\\\\quad',\n            aside: '1 em',\n        },\n        {\n            latex: '\\\\unicode{\"203A}\\\\qquad\\\\unicode{\"2039}',\n            insert: '\\\\qquad',\n            aside: '2 em',\n        },\n    ],\n\n    // @todo could also delete to end\n    delete: [\n        {\n            label:\n                '<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>',\n            command: '\"deleteAll\"',\n        },\n    ],\n\n    // @todo Tab: could turn on speech, visible keyboard...\n    '->|': [],\n};\nlet ALT_KEYS = {};\n\nconst LAYERS = {\n    math: `\n        <div class='rows'>\n            <ul>\n                <li class='keycap tex' data-alt-keys='x-var'><i>x</i></li>\n                <li class='keycap tex' data-alt-keys='n-var'><i>n</i></li>\n                <li class='separator w5'></li>\n                <row name='numpad-1'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-insert='$$\\\\exponentialE$$' data-alt-keys='ee'>e</li>\n                <li class='keycap tex' data-insert='$$\\\\imaginaryI$$' data-alt-keys='ii'>i</li>\n                <li class='keycap tex' data-latex='\\\\pi' data-alt-keys='numeric-pi'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-key='<' data-alt-keys='<'>&lt;</li>\n                <li class='keycap tex' data-key='>' data-alt-keys='>'>&gt;</li>\n                <li class='separator w5'></li>\n                <row name='numpad-2'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='x2' data-insert='$$#@^{2}$$'><span><i>x</i>&thinsp;²</span></li>\n                <li class='keycap tex' data-alt-keys='^' data-insert='$$#@^{#?}$$'><span><i>x</i><sup>&thinsp;<small>&#x2b1a;</small></sup></span></li>\n                <li class='keycap tex' data-alt-keys='sqrt' data-insert='$$\\\\sqrt{#0}$$' data-latex='\\\\sqrt{#0}'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-alt-keys='(' >(</li>\n                <li class='keycap tex' data-alt-keys=')' >)</li>\n                <li class='separator w5'></li>\n                <row name='numpad-3'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex small' data-alt-keys='int' data-latex='\\\\int_0^\\\\infty'><span></span></li>\n                <li class='keycap tex' data-latex='\\\\forall' data-alt-keys='logic' ></li>\n                <li class='action font-glyph bottom right' data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            </ul>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span></li>\n                <li class='separator w5'></li>\n                <row name='numpad-4'/>\n                <li class='separator w5'></li>\n                <arrows/>\n            </ul>\n        </div>\n    `,\n    'lower-roman': `\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='lower-1' shift-layer='upper-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='lower-2'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='lower-3'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' data-alt-keys=','>,</li>\n                <li class='keycap w50' data-key=' ' data-alt-keys='space'>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n    'upper-roman': `\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='upper-1'  shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='upper-2' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='upper-3' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' data-alt-keys='.'>;</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n    symbols: `\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\\\lbrace '>{</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\\\rbrace '>}</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='set' data-insert='\\\\in '>&#x2208;</li>\n                <li class='keycap tex' data-alt-keys='!set' data-insert='\\\\notin '>&#x2209;</li>\n                <li class='keycap tex' data-insert='\\\\Re '>&#x211c;<aside>Real</aside></li>\n                <li class='keycap tex' data-insert='\\\\Im '>&#x2111;<aside>Imaginary</aside></li>\n                <li class='keycap w15' data-insert='\\\\ulcorner#0\\\\urcorner '><span><sup>&#x250c;</sup><span><span style='color:#ddd'>o</span><sup>&#x2510;</sup></span><aside>ceil</aside></li>\n                <li class='keycap tex' data-alt-keys='nabla' data-insert='\\\\nabla '>&#x2207;<aside>nabla</aside></li>\n                <li class='keycap tex' data-alt-keys='infinity' data-insert='\\\\infty '>&#x221e;</li>\n\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\\\lbrack '>[</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\\\rbrack '>]</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='subset' data-insert='\\\\subset '>&#x2282;</li>\n                <li class='keycap tex' data-alt-keys='supset' data-insert='\\\\supset '>&#x2283;</li>\n                <li class='keycap tex' data-key='!' data-alt-keys='!'>!<aside>factorial</aside></li>\n                <li class='keycap' data-insert='$$^{\\\\prime} $$'><span><sup><span><span style='color:#ddd'>o</span>&#x2032</sup></span><aside>prime</aside></li>\n                <li class='keycap w15' data-insert='\\\\llcorner#0\\\\lrcorner '><span><sub>&#x2514;</sub><span style='color:#ddd'>o</span><sub>&#x2518;</sub></span><aside>floor</aside></li>\n                <li class='keycap tex' data-insert='\\\\partial '>&#x2202;<aside>partial<br>derivative</aside></li>\n                <li class='keycap tex' data-insert='\\\\emptyset '>&#x2205;<aside>empty set</aside></li>\n\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\\\langle '>&#x27e8;</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\\\rangle '>&#x27e9;</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-insert='\\\\subseteq '>&#x2286;</li>\n                <li class='keycap tex' data-insert='\\\\supseteq '>&#x2287;</li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='$$\\\\vec{#@}$$' data-latex='\\\\vec{#?}' data-aside='vector'></li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='$$\\\\bar{#@}$$' data-latex='\\\\bar{#?}' data-aside='bar'></li>\n                <li class='keycap tex' data-alt-keys='absnorm' data-insert='$$\\\\left| #0 \\\\right|$$' data-latex='\\\\left| #? \\\\right|' data-aside='abs'></li>\n                <li class='keycap tex' data-insert='\\\\ast '>&#x2217;<aside>asterisk</aside></li>\n\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap tex' data-insert=','>,</li>\n                <li class='keycap tex' data-insert='\\\\cdot '>&#x22c5;<aside>centered dot</aside></li>\n                <li class='keycap tex' data-insert='\\\\colon '>:<aside>colon</aside></li>\n                <li class='keycap tex' data-insert='\\\\circ '>&#x2218;<aside>circle</aside></li>\n                <li class='keycap tex' data-insert='\\\\approx '>&#x2248;<aside>approx.</aside></li>\n                <li class='keycap tex' data-insert='\\\\ne '>&#x2260;</li>\n                <li class='keycap tex' data-insert='\\\\pm '>&#x00b1;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n    'lower-greek': `\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\\\varphi '><i>&#x03c6;</i><aside>phi var.</aside></li>\n                <li class='keycap tex' data-insert='\\\\varsigma '><i>&#x03c2;</i><aside>sigma var.</aside></li>\n                <li class='keycap tex' data-insert='\\\\epsilon '><i>&#x03f5;</i></li>\n                <li class='keycap tex' data-insert='\\\\rho '><i>&rho;</i></li>\n                <li class='keycap tex' data-insert='\\\\tau '><i>&tau;</i></li>\n                <li class='keycap tex' data-insert='\\\\upsilon '><i>&upsilon;</i></li>\n                <li class='keycap tex' data-insert='\\\\theta '><i>&theta;</i></li>\n                <li class='keycap tex' data-insert='\\\\iota '><i>&iota;</i></li>\n                <li class='keycap tex' data-insert='\\\\omicron '>&omicron;</i></li>\n                <li class='keycap tex' data-insert='\\\\pi '><i>&pi;</i></li>\n            </ul>\n            <ul><li class='keycap tex' data-insert='\\\\alpha ' data-shifted='&Alpha;' data-shifted-command='[\"insert\",\"{\\\\\\\\char\\\\\"391}\"]'><i>&alpha;</i></li>\n                <li class='keycap tex' data-insert='\\\\sigma '><i>&sigma;</i></li>\n                <li class='keycap tex' data-insert='\\\\delta '><i>&delta;</i></li>\n                <li class='keycap tex' data-insert='\\\\phi '><i>&#x03d5;</i></i></li>\n                <li class='keycap tex' data-insert='\\\\gamma '><i>&gamma;</i></li>\n                <li class='keycap tex' data-insert='\\\\eta '><i>&eta;</i></li>\n                <li class='keycap tex' data-insert='\\\\xi '><i>&xi;</i></li>\n                <li class='keycap tex' data-insert='\\\\kappa '><i>&kappa;</i></li>\n                <li class='keycap tex' data-insert='\\\\lambda '><i>&lambda;</i></li>\n            </ul>\n            <ul><li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='upper-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='\\\\zeta '><i>&zeta;</i></li>\n                <li class='keycap tex' data-insert='\\\\chi '><i>&chi;</i></li>\n                <li class='keycap tex' data-insert='\\\\psi '><i>&psi;</i></li>\n                <li class='keycap tex' data-insert='\\\\omega '><i>&omega;</i></li>\n                <li class='keycap tex' data-insert='\\\\beta '><i>&beta;</i></li>\n                <li class='keycap tex' data-insert='\\\\nu '><i>&nu;</i></li>\n                <li class='keycap tex' data-insert='\\\\mu '><i>&mu;</i></li>\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='keycap ' data-key=' '>&nbsp;</li>\n                <li class='keycap'>,</li>\n                <li class='keycap tex' data-insert='\\\\varepsilon '><i>&#x03b5;</i><aside>epsilon var.</aside></li>\n                <li class='keycap tex' data-insert='\\\\vartheta '><i>&#x03d1;</i><aside>theta var.</aside></li>\n                <li class='keycap tex' data-insert='\\\\varkappa '><i>&#x3f0;</i><aside>kappa var.</aside></li>\n                <li class='keycap tex' data-insert='\\\\varpi '><i>&#x03d6;<aside>pi var.</aside></i></li>\n                <li class='keycap tex' data-insert='\\\\varrho '><i>&#x03f1;</i><aside>rho var.</aside></li>\n                <arrows/>\n            </ul>\n        </div>`,\n    'upper-greek': `\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\\\Phi '>&Phi;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"0190}'>&#x0190;<aside>epsilon</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"3A1}'>&#x3A1;<aside>rho</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"3A4}'>&#x3A4;<aside>tau</aside></li>\n                <li class='keycap tex' data-insert='\\\\Upsilon '>&Upsilon;<aside>upsilon</aside></li>\n                <li class='keycap tex' data-insert='\\\\Theta '>&Theta;<aside>theta</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"399}'>&Iota;<aside>iota</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"39F}'>&#x039F;<aside>omicron</aside></li>\n                <li class='keycap tex' data-insert='\\\\Pi '>&Pi;<aside>pi</aside></li></ul>\n            <ul><li class='keycap tex' data-insert='{\\\\char\"391}'>&#x391;<aside>alpha</aside></li>\n                <li class='keycap tex' data-insert='\\\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\\\Delta '>&Delta;<aside>delta</aside></li>\n                <li class='keycap tex' data-insert='\\\\Phi '>&#x03a6;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\\\Gamma '>&Gamma;<aside>gamma</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"397}'>&Eta;<aside>eta</aside></li>\n                <li class='keycap tex' data-insert='\\\\Xi '>&Xi;<aside>xi</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"39A}'>&Kappa;<aside>kappa</aside></li>\n                <li class='keycap tex' data-insert='\\\\Lambda '>&Lambda;<aside>lambda</aside></li></ul>\n            <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='{\\\\char\"396}'>&Zeta;<aside>zeta</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"3A7}'>&Chi;<aside>chi</aside></li>\n                <li class='keycap tex' data-insert='\\\\Psi '>&Psi;<aside>psi</aside></li>\n                <li class='keycap tex' data-insert='\\\\Omega '>&Omega;<aside>omega</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"392}'>&Beta;<aside>beta</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"39D}'>&Nu;<aside>nu</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"39C}'>&Mu;<aside>mu</aside></li>\n                <li class='action font-glyph bottom right w15' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            <ul>\n                <li class='separator w10'>&nbsp;</li>\n                <li class='keycap'>.</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n    'lower-command': `\n        <div class='rows'>\n            <ul><row name='lower-1' class='tt' shift-layer='upper-command'/></ul>\n            <ul><row name='lower-2' class='tt' shift-layer='upper-command'/></ul>\n            <ul><row name='lower-3' class='tt' shift-layer='upper-command'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols-command'>01#</li>\n                <li class='keycap tt' data-shifted='[' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"[\"]'>{</li>\n                <li class='keycap tt' data-shifted=']' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"]\"]'>}</li>\n                <li class='keycap tt' data-shifted='(' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"(\"]'>^</li>\n                <li class='keycap tt' data-shifted=')' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \")\"]'>_</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n    'upper-command': `\n        <div class='rows'>\n            <ul><row name='upper-1' class='tt' shift-layer='lower-command'/></ul>\n            <ul><row name='upper-2' class='tt' shift-layer='lower-command'/></ul>\n            <ul><row name='upper-3' class='tt' shift-layer='lower-command'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols-command'01#</li>\n                <li class='keycap tt'>[</li>\n                <li class='keycap tt'>]</li>\n                <li class='keycap tt'>(</li>\n                <li class='keycap tt'>)</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n    'symbols-command': `\n        <div class='rows'>\n            <ul><li class='keycap tt'>1</li><li class='keycap tt'>2</li><li class='keycap tt'>3</li><li class='keycap tt'>4</li><li class='keycap tt'>5</li><li class='keycap tt'>6</li><li class='keycap tt'>7</li><li class='keycap tt'>8</li><li class='keycap tt'>9</li><li class='keycap tt'>0</li></ul>\n            <ul><li class='keycap tt'>!</li><li class='keycap tt'>@</li><li class='keycap tt'>#</li><li class='keycap tt'>$</li><li class='keycap tt'>%</li><li class='keycap tt'>^</li><li class='keycap tt'>&</li><li class='keycap tt'>*</li><li class='keycap tt'>+</li><li class='keycap tt'>=</li></ul>\n            <ul>\n                <li class='keycap tt'>\\\\</li>\n                <li class='keycap tt'>|</li>\n                <li class='keycap tt'>/</li>\n                <li class='keycap tt'>\\`</li>\n                <li class='keycap tt'>;</li>\n                <li class='keycap tt'>:</li>\n                <li class='keycap tt'>?</li>\n                <li class='keycap tt'>'</li>\n                <li class='keycap tt'>\"</li>\n                <li class='action font-glyph bottom right'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='lower-command'>abc</li>\n                <li class='keycap tt'>&lt;</li>\n                <li class='keycap tt'>&gt;</li>\n                <li class='keycap tt'>~</li>\n                <li class='keycap tt'>,</li>\n                <li class='keycap tt'>.</li>\n                <li class='keycap' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n    functions: `\n        <div class='rows'>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\\\sin'></li>\n                <li class='fnbutton' data-insert='\\\\sin^{-1}'></li>\n                <li class='fnbutton' data-insert='\\\\ln'></li>\n                <li class='fnbutton' data-insert='\\\\exponentialE^{#?}'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{lcm}(#?)$$' data-latex='\\\\operatorname{lcm}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{ceil}(#?)$$' data-latex='\\\\operatorname{ceil}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\lim_{n\\\\to\\\\infty}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\int$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{abs}(#?)$$' data-latex='\\\\operatorname{abs}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\\\cos'></li>\n                <li class='fnbutton' data-insert='\\\\cos^{-1}'></li>\n                <li class='fnbutton' data-insert='\\\\ln_{10}'></li>\n                <li class='fnbutton' data-insert='$$10^{#?}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{gcd}(#?)$$' data-latex='\\\\operatorname{gcd}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{floor}(#?)$$' data-latex='\\\\operatorname{floor}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\sum_{n\\\\mathop=0}^{\\\\infty}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\int_{0}^{\\\\infty}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{sign}(#?)$$' data-latex='\\\\operatorname{sign}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\\\tan'></li>\n                <li class='fnbutton' data-insert='\\\\tan^{-1}'></li>\n                <li class='fnbutton' data-insert='$$\\\\log_{#?}$$'></li>\n                <li class='fnbutton' data-insert='$$\\\\sqrt[#?]{#0}$$'></li>\n                <li class='bigfnbutton' data-insert='$$#0 \\\\mod$$' data-latex='\\\\mod'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{round}(#?) $$' data-latex='\\\\operatorname{round}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\prod_{n\\\\mathop=0}^{\\\\infty}$$' data-latex='{\\\\tiny \\\\prod_{n=0}^{\\\\infty}}'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\frac{\\\\differentialD #0}{\\\\differentialD x}$$'></li>\n                <li class='action font-glyph bottom right' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton'>(</li>\n                <li class='fnbutton'>)</li>\n                <li class='fnbutton' data-insert='$$^{#?} $$' data-latex='x^{#?} '></li>\n                <li class='fnbutton' data-insert='$$_{#?} $$' data-latex='x_{#?} '></li>\n                <li class='keycap w20 ' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n    style: `\n        <div class='rows'>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590'></span></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size3\"}]' data-latex='\\\\scriptsize\\\\text{small}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size5\"}]' data-latex='\\\\scriptsize\\\\text{normal}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size9\"}]' data-latex='\\\\huge\\\\text{big}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-latex='\\\\langle' data-command='[\"insert\", \"\\\\\\\\langle\", {\"smartFence\":true}]'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"l\"}]' data-latex='\\\\fontseries{l}\\\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"m\"}]' data-latex='\\\\fontseries{m}\\\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"b\"}]' data-latex='\\\\fontseries{b}\\\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"bx\"}]' data-latex='\\\\fontseries{bx}\\\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"sb\"}]' data-latex='\\\\fontseries{sb}\\\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"c\"}]' data-latex='\\\\fontseries{c}\\\\text{Ab}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"up\"}]' data-latex='\\\\textup{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"it\"}]' data-latex='\\\\textit{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sl\"}]' data-latex='\\\\textsl{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sc\"}]' data-latex='\\\\textsc{Ab}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-insert='$$\\\\emph{#?} $$' data-latex='\\\\text{\\\\emph{emph}}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmr\"}]' data-latex='\\\\textrm{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmtt\"}]' data-latex='\\\\texttt{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmss\"}]' data-latex='\\\\textsf{Az}'></li>\n\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"bb\"}]'  data-latex='\\\\mathbb{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"scr\"}]'  data-latex='\\\\mathscr{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cal\"}]' data-latex='\\\\mathcal{A1}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"frak\"}]' data-latex='\\\\mathfrak{Az}'></li>\n            </ul>\n        </div>`,\n};\n\nfunction latexToMarkup(latex: string, arg, mf: MathfieldPrivate): string {\n    // Since we don't have preceding atoms, we'll interpret #@ as a placeholder\n    latex = latex.replace(/(^|[^\\\\])#@/g, '$1#?');\n\n    return makeStruts(\n        makeSpan(\n            decompose(\n                {\n                    mathstyle: MATHSTYLES.displaystyle,\n                    macros: mf.config.macros,\n                },\n                parseString(latex, 'math', arg, mf.config.macros)\n            ),\n            'ML__base'\n        ),\n        'ML__mathlive'\n    ).toMarkup();\n}\n\n/**\n * Return a markup string for the keyboard toolbar for the specified layer.\n */\nfunction makeKeyboardToolbar(\n    mf: MathfieldPrivate,\n    keyboardIDs,\n    currentKeyboard\n): string {\n    // The left hand side of the toolbar has a list of all the available keyboards\n    let result = \"<div class='left'>\";\n    const keyboardList = keyboardIDs.replace(/\\s+/g, ' ').split(' ');\n    if (keyboardList.length > 1) {\n        const keyboards = {\n            ...KEYBOARDS,\n            ...(mf.config.customVirtualKeyboards ?? {}),\n        };\n        for (const keyboard of keyboardList) {\n            if (!keyboards[keyboard]) {\n                console.error('Unknown virtual keyboard \"' + keyboard + '\"');\n                break;\n            }\n            result += \"<div class='\";\n            if (keyboard === currentKeyboard) {\n                result += 'selected ';\n            } else {\n                if (keyboards[keyboard].command) {\n                    result += 'action ';\n                } else {\n                    result += 'layer-switch ';\n                }\n            }\n\n            result += (keyboards[keyboard].classes || '') + \"'\";\n\n            if (keyboards[keyboard].tooltip) {\n                result +=\n                    \"data-tooltip='\" + l10n(keyboards[keyboard].tooltip) + \"' \";\n                result += \"data-placement='top' data-delay='1s'\";\n            }\n\n            if (keyboard !== currentKeyboard) {\n                if (keyboards[keyboard].command) {\n                    result +=\n                        'data-command=\\'\"' +\n                        keyboards[keyboard].command +\n                        '\"\\'';\n                }\n\n                if (keyboards[keyboard].layer) {\n                    result += \"data-layer='\" + keyboards[keyboard].layer + \"'\";\n                }\n            }\n            result += '>' + keyboards[keyboard].label + '</div>';\n        }\n    }\n    result += '</div>';\n\n    // The right hand side of the toolbar, with the copy/undo/redo commands\n    result += `\n        <div class='right'>\n            <div class='action'\n                data-command='\"copyToClipboard\"'\n                data-tooltip='${l10n(\n                    'tooltip.copy to clipboard'\n                )}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-copy' /></svg>\n            </div>\n            <div class='action disabled'\n                data-command='\"undo\"'\n                data-tooltip='${l10n(\n                    'tooltip.undo'\n                )}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-undo' /></svg>\n            </div>\n            <div class='action disabled'\n                data-command='\"redo\"'\n                data-tooltip='${l10n(\n                    'tooltip.redo'\n                )}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-redo' /></svg>\n            </div>\n        </div>\n    `;\n\n    return \"<div class='keyboard-toolbar' role='toolbar'>\" + result + '</div>';\n}\n\nexport function makeKeycap(\n    mf: MathfieldPrivate,\n    elList: HTMLElement[],\n    chainedCommand?: string | any[]\n): void {\n    for (let i = 0; i < elList.length; ++i) {\n        const el = elList[i];\n        let html: string;\n        // Display\n        if (el.getAttribute('data-latex')) {\n            html = latexToMarkup(\n                el.getAttribute('data-latex').replace(/&quot;/g, '\"'),\n                { '?': '{\\\\color{#555}{\\\\tiny \\\\char\"2B1A}}' },\n                mf\n            );\n        } else if (el.getAttribute('data-insert') && el.innerHTML === '') {\n            html = latexToMarkup(\n                el.getAttribute('data-insert').replace(/&quot;/g, '\"'),\n                { '?': '{\\\\color{#555}{\\\\tiny \\\\char\"2B1A}}' },\n                mf\n            );\n        } else if (el.getAttribute('data-content')) {\n            html = el.getAttribute('data-content').replace(/&quot;/g, '\"');\n        }\n\n        if (el.getAttribute('data-aside')) {\n            html =\n                (html ?? '') +\n                '<aside>' +\n                el.getAttribute('data-aside').replace(/&quot;/g, '\"') +\n                '</aside>';\n        }\n        if (typeof html !== 'undefined') {\n            el.innerHTML = mf.config.createHTML(html);\n        }\n        if (el.getAttribute('data-classes')) {\n            el.classList.add(el.getAttribute('data-classes'));\n        }\n\n        const key = el.getAttribute('data-insert')?.replace(/&quot;/g, '\"');\n        if (key && SHIFTED_KEYS[key]) {\n            el.setAttribute('data-shifted', SHIFTED_KEYS[key][0]);\n            el.setAttribute(\n                'data-shifted-command',\n                JSON.stringify([\n                    'insertAndUnshiftKeyboardLayer',\n                    SHIFTED_KEYS[key][1],\n                ])\n            );\n        }\n\n        // Commands\n        let handlers;\n        if (el.getAttribute('data-command')) {\n            handlers = JSON.parse(el.getAttribute('data-command'));\n        } else if (el.getAttribute('data-insert')) {\n            handlers = [\n                'insert',\n                el.getAttribute('data-insert'),\n                {\n                    focus: true,\n                    feedback: true,\n                    mode: 'math',\n                    format: 'latex',\n                    resetStyle: true,\n                },\n            ];\n        } else if (el.getAttribute('data-latex')) {\n            handlers = [\n                'insert',\n                el.getAttribute('data-latex'),\n                {\n                    focus: true,\n                    feedback: true,\n                    mode: 'math',\n                    format: 'latex',\n                    resetStyle: true,\n                },\n            ];\n        } else {\n            handlers = [\n                'typedText',\n                el.getAttribute('data-key') || el.textContent,\n                { focus: true, feedback: true, simulateKeystroke: true },\n            ];\n        }\n        if (chainedCommand) {\n            handlers = [chainedCommand, handlers];\n        }\n        if (el.getAttribute('data-alt-keys')) {\n            const altKeys = ALT_KEYS[el.getAttribute('data-alt-keys')];\n            if (altKeys) {\n                handlers = {\n                    default: handlers,\n                    pressAndHoldStart: [\n                        'showAlternateKeys',\n                        el.getAttribute('data-alt-keys'),\n                        altKeys,\n                    ],\n                    pressAndHoldEnd: 'hideAlternateKeys',\n                };\n            } else {\n                console.warn(\n                    'Unknown alt key set: \"' + el.getAttribute('data-alt-keys')\n                );\n            }\n        }\n\n        attachButtonHandlers(mf, el, handlers);\n    }\n}\n\n/**\n * Expand the shortcut tags (e.g. <row>) inside a layer.\n */\nfunction expandLayerMarkup(mf: MathfieldPrivate, layer): string {\n    const ROWS = {\n        // First row should be 10 key wide\n        // Second row should be 10 key wide\n        // Third row should be 8.5 key wide\n        // One row should have ^ (shift key) which is 1.5 key wide\n        // One row should have ~ (delete key) which is .5 or 1.5 key wide\n        qwerty: {\n            'lower-1': 'qwertyuiop',\n            'lower-2': ' asdfghjkl ',\n            'lower-3': '^zxcvbnm~',\n            'upper-1': 'QWERTYUIOP',\n            'upper-2': ' ASDFGHJKL ',\n            'upper-3': '^ZXCVBNM~',\n            'numpad-1': '789/',\n            'numpad-2': '456*',\n            'numpad-3': '123-',\n            'numpad-4': '0.=+',\n        },\n        azerty: {\n            'lower-1': 'azertyuiop',\n            'lower-2': 'qsdfghjklm',\n            'lower-3': '^ wxcvbn ~',\n            'upper-1': 'AZERTYUIOP',\n            'upper-2': 'QSDFGHJKLM',\n            'upper-3': '^ WXCVBN ~',\n        },\n        qwertz: {\n            'lower-1': 'qwertzuiop',\n            'lower-2': ' asdfghjkl ',\n            'lower-3': '^yxcvbnm~',\n            'upper-1': 'QWERTZUIOP',\n            'upper-2': ' ASDFGHJKL',\n            'upper-3': '^YXCVBNM~',\n        },\n        dvorak: {\n            'lower-1': '^  pyfgcrl ',\n            'lower-2': 'aoeuidhtns',\n            'lower-3': 'qjkxbmwvz~',\n            'upper-1': '^  PYFGCRL ',\n            'upper-2': 'AOEUIDHTNS',\n            'upper-3': 'QJKXBMWVZ~',\n        },\n        colemak: {\n            'lower-1': ' qwfpgjluy ',\n            'lower-2': 'arstdhneio',\n            'lower-3': '^zxcvbkm~',\n            'upper-1': ' QWFPGNLUY ',\n            'upper-2': 'ARSTDHNEIO',\n            'upper-3': '^ZXCVBKM~',\n        },\n    };\n    const layout = ROWS[mf.config.virtualKeyboardLayout]\n        ? ROWS[mf.config.virtualKeyboardLayout]\n        : ROWS['qwerty'];\n\n    let result = layer;\n    let row;\n\n    result = result.replace(\n        /<arrows\\/>/g,\n        `\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToPreviousChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-left\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToPreviousChar\"]'>\n            <svg><use xlink:href='#svg-arrow-left' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-right\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToNextChar\"]'>\n            <svg><use xlink:href='#svg-arrow-right' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextPlaceholder\"]'>\n        <svg><use xlink:href='#svg-tab' /></svg></li>`\n    );\n\n    let m = result.match(/(<row\\s+)(.*)((?:<\\/row|\\/)>)/);\n    while (m) {\n        row = '';\n        const attributesArray = m[2].match(\n            /[a-zA-Z][a-zA-Z0-9-]*=(['\"])(.*?)\\1/g\n        );\n        const attributes = {};\n        for (const attribute of attributesArray) {\n            const m2 = attribute.match(/([a-zA-Z][a-zA-Z0-9-]*)=(['\"])(.*?)\\2/);\n            attributes[m2[1]] = m2[3];\n        }\n\n        let keys = layout[attributes['name']];\n        if (!keys) keys = ROWS['qwerty'][attributes['name']];\n        if (!keys) {\n            console.warn('Unknown roman keyboard row: ' + attributes['name']);\n        } else {\n            for (const c of keys) {\n                let cls = attributes['class'] || '';\n                if (cls) cls = ' ' + cls;\n                if (c === '~') {\n                    row += `<li class='action font-glyph bottom right `;\n                    row +=\n                        keys.length - (keys.match(/ /g) || []).length / 2 === 10\n                            ? 'w10'\n                            : 'w15';\n                    row += `' data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                        data-shifted-command='\"deleteAll\"'\n                        data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                        >&#x232b;</li>`;\n                } else if (c === ' ') {\n                    // Separator\n                    row += \"<li class='separator w5'></li>\";\n                } else if (c === '^') {\n                    // Shift key\n                    row +=\n                        `<li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='` +\n                        attributes['shift-layer'] +\n                        `'>&#x21e7;</li>`;\n                } else if (c === '/') {\n                    row +=\n                        \"<li class='keycap\" +\n                        cls +\n                        \"' data-alt-keys='/' data-insert='\\\\frac{#0}{#?}'>&divide;</li>\";\n                } else if (c === '*') {\n                    row +=\n                        \"<li class='keycap\" +\n                        cls +\n                        \"' data-alt-keys='*' data-insert='\\\\times '>&times;</li>\";\n                } else if (c === '-') {\n                    row +=\n                        \"<li class='keycap\" +\n                        cls +\n                        \"' data-alt-keys='-' data-key='-' data-alt-keys='-'>&#x2212;</li>\";\n                } else if (/tt/.test(cls)) {\n                    row +=\n                        \"<li class='keycap\" +\n                        cls +\n                        \"' data-alt-keys='\" +\n                        c +\n                        \"'\" +\n                        ` data-command='[\"typedText\",\"` +\n                        c +\n                        `\",{\"commandMode\":true, \"focus\":true, \"feedback\":true}]'` +\n                        '>' +\n                        c +\n                        '</li>';\n                } else {\n                    row +=\n                        \"<li class='keycap\" +\n                        cls +\n                        \"' data-alt-keys='\" +\n                        c +\n                        \"'>\" +\n                        c +\n                        '</li>';\n                }\n            }\n        }\n        result = result.replace(new RegExp(m[1] + m[2] + m[3]), row);\n\n        m = result.match(/(<row\\s+)(.*)((?:<\\/row|\\/)>)/);\n    }\n\n    return result;\n}\n\n/**\n * Construct a virtual keyboard element based on the config options in the\n * mathfield and an optional theme.\n */\nexport function makeKeyboard(\n    mf: MathfieldPrivate,\n    theme: 'apple' | 'material' | ''\n): HTMLElement {\n    const svgIcons = `<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\n\n            <symbol id=\"svg-command\" viewBox=\"0 0 640 512\">\n                <path d=\"M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z\"/>\n            </symbol>\n\n            <symbol id=\"svg-undo\" viewBox=\"0 0 512 512\">\n                <path d=\"M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z\"/>\n            </symbol>\n            <symbol id=\"svg-redo\" viewBox=\"0 0 512 512\">\n                <path d=\"M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z\"/>\n            </symbol>\n            <symbol id=\"svg-arrow-left\" viewBox=\"0 0 192 512\">\n                <path d=\"M25.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L64.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L25 264.5c-4.6-4.7-4.6-12.3.1-17z\"/>\n            </symbol>\n            <symbol id=\"svg-arrow-right\" viewBox=\"0 0 192 512\">\n                    <path d=\"M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17z\"/>\n            </symbol>\n            <symbol id=\"svg-tab\" viewBox=\"0 0 448 512\">\n                    <path d=\"M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z\"/>\n            </symbol>\n            <symbol id=\"svg-copy\" viewBox=\"0 0 448 512\">\n                <path d=\"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM352 32.491a15.88 15.88 0 0 1 7.431 4.195l51.882 51.883A15.885 15.885 0 0 1 415.508 96H352V32.491zM288 464c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V144c0-8.822 7.178-16 16-16h80v240c0 26.51 21.49 48 48 48h112v48zm128-96c0 8.822-7.178 16-16 16H176c-8.822 0-16-7.178-16-16V48c0-8.822 7.178-16 16-16h144v72c0 13.2 10.8 24 24 24h72v240z\"/>\n            </symbol>\n            <symbol id=\"svg-angle-double-right\" viewBox=\"0 0 320 512\">\n                <path d=\"M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z\"/>\n            </symbol>\n            <symbol id=\"svg-angle-double-left\" viewBox=\"0 0 320 512\">\n                <path d=\"M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z\"/>\n            </symbol>\n            <symbol id=\"svg-trash\" viewBox=\"0 0 448 512\">\n                <path d=\"M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z\"/>\n            </symbol>\n        </svg>\n        `;\n    // <symbol id=\"svg-wikipedia\" viewBox=\"0 0 640 512\">\n    //         <path d=\"M640 51.2l-.3 12.2c-28.1.8-45 15.8-55.8 40.3-25 57.8-103.3 240-155.3 358.6H415l-81.9-193.1c-32.5 63.6-68.3 130-99.2 193.1-.3.3-15 0-15-.3C172 352.3 122.8 243.4 75.8 133.4 64.4 106.7 26.4 63.4.2 63.7c0-3.1-.3-10-.3-14.2h161.9v13.9c-19.2 1.1-52.8 13.3-43.3 34.2 21.9 49.7 103.6 240.3 125.6 288.6 15-29.7 57.8-109.2 75.3-142.8-13.9-28.3-58.6-133.9-72.8-160-9.7-17.8-36.1-19.4-55.8-19.7V49.8l142.5.3v13.1c-19.4.6-38.1 7.8-29.4 26.1 18.9 40 30.6 68.1 48.1 104.7 5.6-10.8 34.7-69.4 48.1-100.8 8.9-20.6-3.9-28.6-38.6-29.4.3-3.6 0-10.3.3-13.6 44.4-.3 111.1-.3 123.1-.6v13.6c-22.5.8-45.8 12.8-58.1 31.7l-59.2 122.8c6.4 16.1 63.3 142.8 69.2 156.7L559.2 91.8c-8.6-23.1-36.4-28.1-47.2-28.3V49.6l127.8 1.1.2.5z\"/>\n    // </symbol>\n    // <symbol id=\"svg-link\" viewBox=\"0 0 512 512\">\n    //         <path d=\"M301.148 394.702l-79.2 79.19c-50.778 50.799-133.037 50.824-183.84 0-50.799-50.778-50.824-133.037 0-183.84l79.19-79.2a132.833 132.833 0 0 1 3.532-3.403c7.55-7.005 19.795-2.004 20.208 8.286.193 4.807.598 9.607 1.216 14.384.481 3.717-.746 7.447-3.397 10.096-16.48 16.469-75.142 75.128-75.3 75.286-36.738 36.759-36.731 96.188 0 132.94 36.759 36.738 96.188 36.731 132.94 0l79.2-79.2.36-.36c36.301-36.672 36.14-96.07-.37-132.58-8.214-8.214-17.577-14.58-27.585-19.109-4.566-2.066-7.426-6.667-7.134-11.67a62.197 62.197 0 0 1 2.826-15.259c2.103-6.601 9.531-9.961 15.919-7.28 15.073 6.324 29.187 15.62 41.435 27.868 50.688 50.689 50.679 133.17 0 183.851zm-90.296-93.554c12.248 12.248 26.362 21.544 41.435 27.868 6.388 2.68 13.816-.68 15.919-7.28a62.197 62.197 0 0 0 2.826-15.259c.292-5.003-2.569-9.604-7.134-11.67-10.008-4.528-19.371-10.894-27.585-19.109-36.51-36.51-36.671-95.908-.37-132.58l.36-.36 79.2-79.2c36.752-36.731 96.181-36.738 132.94 0 36.731 36.752 36.738 96.181 0 132.94-.157.157-58.819 58.817-75.3 75.286-2.651 2.65-3.878 6.379-3.397 10.096a163.156 163.156 0 0 1 1.216 14.384c.413 10.291 12.659 15.291 20.208 8.286a131.324 131.324 0 0 0 3.532-3.403l79.19-79.2c50.824-50.803 50.799-133.062 0-183.84-50.802-50.824-133.062-50.799-183.84 0l-79.2 79.19c-50.679 50.682-50.688 133.163 0 183.851z\"/>\n    // </symbol>\n    //     <symbol id=\"svg-external-link\" viewBox=\"0 0 448 512\">\n    //     <path d=\"M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zm16 400c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V80c0-8.822 7.178-16 16-16h352c8.822 0 16 7.178 16 16v352zM99.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l195.15-195.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L340 128c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12l.342-89.958-.707-.707-195.15 195.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657z\"/>\n    // </symbol>\n    // <symbol id=\"svg-external-link\" viewBox=\"0 0 512 512\">\n    //     <path d=\"M256 40c118.621 0 216 96.075 216 216 0 119.291-96.61 216-216 216-119.244 0-216-96.562-216-216 0-119.203 96.602-216 216-216m0-32C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm-36 344h12V232h-12c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h48c6.627 0 12 5.373 12 12v140h12c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12h-72c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12zm36-240c-17.673 0-32 14.327-32 32s14.327 32 32 32 32-14.327 32-32-14.327-32-32-32z\"/>\n    // </symbol>\n\n    let markup = svgIcons;\n\n    // Auto-populate the ALT_KEYS table\n    ALT_KEYS_BASE['foreground-color'] = [];\n    for (const color of LINE_COLORS) {\n        ALT_KEYS_BASE['foreground-color'].push({\n            classes: 'small-button',\n            content:\n                '<span style=\"border-radius:50%;width:32px;height:32px; box-sizing: border-box; border: 3px solid ' +\n                color +\n                '\"></span>',\n            command: '[\"applyStyle\",{\"color\":\"' + color + '\"}]',\n        });\n    }\n    ALT_KEYS_BASE['background-color'] = [];\n    for (const color of AREA_COLORS) {\n        ALT_KEYS_BASE['background-color'].push({\n            classes: 'small-button',\n            content:\n                '<span style=\"border-radius:50%;width:32px;height:32px; background:' +\n                color +\n                '\"></span>',\n            command: '[\"applyStyle\",{\"backgroundColor\":\"' + color + '\"}]',\n        });\n    }\n\n    ALT_KEYS = { ...ALT_KEYS_BASE };\n    Object.keys(ALT_KEYS).forEach((key) => {\n        ALT_KEYS[key] = ALT_KEYS[key].slice();\n    });\n\n    const UPPER_ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n    const LOWER_ALPHA = 'abcdefghijklmnopqrstuvwxyz';\n    const DIGITS = '0123456789';\n    // Define the alternate set for uppercase keys\n    for (let i = 0; i < 26; i++) {\n        const key = UPPER_ALPHA[i];\n        if (!ALT_KEYS[key]) ALT_KEYS[key] = [];\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathbb{' + key + '}',\n            aside: 'blackboard',\n            insert: '\\\\mathbb{' + key + '}',\n        });\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathbf{' + key + '}',\n            aside: 'bold',\n            insert: '\\\\mathbf{' + key + '}',\n        });\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathsf{' + key + '}',\n            aside: 'sans',\n            insert: '\\\\mathsf{' + key + '}',\n        });\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathtt{' + key + '}',\n            aside: 'monospace',\n            insert: '\\\\mathtt{' + key + '}',\n        });\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathcal{' + key + '}',\n            aside: 'calligraphy',\n            insert: '\\\\mathcal{' + key + '}',\n        });\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathfrak{' + key + '}',\n            aside: 'fraktur',\n            insert: '\\\\mathfrak{' + key + '}',\n        });\n    }\n    // Define the alternate set for lowercase keys\n    for (let i = 0; i <= 26; i++) {\n        const key = LOWER_ALPHA[i];\n        if (!ALT_KEYS[key]) ALT_KEYS[key] = [];\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathsf{' + key + '}',\n            aside: 'sans',\n            insert: '\\\\mathsf{' + key + '}',\n        });\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathbf{' + key + '}',\n            aside: 'bold',\n            insert: '\\\\mathbf{' + key + '}',\n        });\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathtt{' + key + '}',\n            aside: 'monospace',\n            insert: '\\\\mathtt{' + key + '}',\n        });\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathfrak{' + key + '}',\n            aside: 'fraktur',\n            insert: '\\\\mathfrak{' + key + '}',\n        });\n    }\n    for (let i = 0; i < 10; i++) {\n        const key = DIGITS[i];\n        if (!ALT_KEYS[key]) ALT_KEYS[key] = [];\n        // The mathbb font does not appear to include digits,\n        // although it's supposed to.\n        // ALT_KEYS[key].push({\n        //         latex: '\\\\underset{\\\\textsf{\\\\footnotesize blackboard}}{\\\\mathbb{' + key + '}}',\n        //         insert: '\\\\mathbb{' + key + '}}'});\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathbf{' + key + '}',\n            aside: 'bold',\n            insert: '\\\\mathbf{' + key + '}',\n        });\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathsf{' + key + '}',\n            aside: 'sans',\n            insert: '\\\\mathsf{' + key + '}',\n        });\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathtt{' + key + '}',\n            aside: 'monospace',\n            insert: '\\\\mathtt{' + key + '}',\n        });\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathcal{' + key + '}',\n            aside: 'script',\n            insert: '\\\\mathcal{' + key + '}',\n        });\n        ALT_KEYS[key].unshift({\n            latex: '\\\\mathfrak{' + key + '}',\n            aside: 'fraktur',\n            insert: '\\\\mathfrak{' + key + '}',\n        });\n    }\n\n    let keyboardIDs = mf.config.virtualKeyboards;\n    if (!keyboardIDs) {\n        keyboardIDs = 'all';\n    }\n    keyboardIDs = keyboardIDs.replace(\n        /\\ball\\b/i,\n        'numeric functions symbols roman  greek'\n    );\n\n    const layers = {\n        ...LAYERS,\n        ...(mf.config.customVirtualKeyboardLayers ?? {}),\n    };\n    const keyboards = {\n        ...KEYBOARDS,\n        ...(mf.config.customVirtualKeyboards ?? {}),\n    };\n\n    const keyboardList = keyboardIDs.replace(/\\s+/g, ' ').split(' ');\n    for (const keyboard of keyboardList) {\n        if (!keyboards[keyboard]) {\n            console.error('Unknown virtual keyboard \"' + keyboard + '\"');\n            break;\n        }\n        // Add the default layer to the list of layers,\n        // and make sure the list of layers is uniquified.\n        let keyboardLayers = keyboards[keyboard].layers || [];\n        if (keyboards[keyboard].layer) {\n            keyboardLayers.push(keyboards[keyboard].layer);\n        }\n        keyboardLayers = Array.from(new Set(keyboardLayers));\n\n        for (const layer of keyboardLayers) {\n            if (!layers[layer]) {\n                console.error(\n                    'Unknown virtual keyboard layer: \"' + layer + '\"'\n                );\n                break;\n            }\n\n            if (typeof layers[layer] === 'object') {\n                // Process JSON layer to web element based layer.\n\n                let tempLayer = ``;\n                if (layers[layer].styles) {\n                    tempLayer += `<style>${layers[layer].styles}</style>`;\n                }\n\n                if (layers[layer].backdrop) {\n                    tempLayer += `<div class='${layers[layer].backdrop}'>`;\n                }\n\n                if (layers[layer].container) {\n                    tempLayer += `<div class='${layers[layer].container}'>`;\n                }\n\n                if (layers[layer].rows) {\n                    tempLayer += `<div class='rows'>`;\n                    for (const row of layers[layer].rows) {\n                        tempLayer += `<ul>`;\n                        for (const col of row) {\n                            tempLayer += `<li`;\n                            if (col.class) {\n                                tempLayer += ` class=\"${col.class}\"`;\n                            }\n                            if (col.key) {\n                                tempLayer += ` data-key=\"${col.key}\"`;\n                            }\n\n                            if (col.command) {\n                                if (typeof col.command === 'string') {\n                                    tempLayer += ` data-command='\"${col.command}\"'`;\n                                } else {\n                                    tempLayer += ` data-command='`;\n                                    tempLayer += JSON.stringify(col.command);\n                                    tempLayer += `'`;\n                                }\n                            }\n                            if (col.insert) {\n                                tempLayer += ` data-insert=\"${col.insert}\"`;\n                            }\n\n                            if (col.latex) {\n                                tempLayer += ` data-latex=\"${col.latex}\"`;\n                            }\n\n                            if (col.aside) {\n                                tempLayer += ` data-aside=\"${col.aside}\"`;\n                            }\n\n                            if (col.altKeys) {\n                                tempLayer += ` data-alt-keys=\"${col.altKeys}\"`;\n                            }\n\n                            if (col.shifted) {\n                                tempLayer += ` data-shifted=\"${col.shifted}\"`;\n                            }\n\n                            if (col.shiftedCommand) {\n                                tempLayer += ` data-shifted-command=\"${col.shiftedCommand}\"`;\n                            }\n\n                            tempLayer += `>${col.label ? col.label : ''}</li>`;\n                        }\n                        tempLayer += `</ul>`;\n                    }\n                    tempLayer += `</div>`;\n                }\n\n                if (layers[layer].container) {\n                    tempLayer += '</div>';\n                }\n\n                if (layers[layer].backdrop) {\n                    tempLayer += '</div>';\n                }\n\n                layers[layer] = tempLayer;\n            }\n\n            markup +=\n                `<div tabindex=\"-1\" class='keyboard-layer' data-layer='` +\n                layer +\n                `'>`;\n            markup += makeKeyboardToolbar(mf, keyboardIDs, keyboard);\n            const layerMarkup =\n                typeof layers[layer] === 'function'\n                    ? layers[layer]()\n                    : layers[layer];\n            // A layer can contain 'shortcuts' (i.e. <row> tags) that need to\n            // be expanded\n            markup += expandLayerMarkup(mf, layerMarkup);\n            markup += '</div>';\n        }\n    }\n\n    const result = document.createElement('div');\n    result.className = 'ML__keyboard';\n    if (theme) {\n        result.classList.add(theme);\n    } else if (mf.config.virtualKeyboardTheme) {\n        result.classList.add(mf.config.virtualKeyboardTheme);\n    }\n    result.innerHTML = mf.config.createHTML(markup);\n\n    // Attach the element handlers\n    makeKeycap(\n        mf,\n        [].slice.call(\n            result.querySelectorAll<HTMLElement>(\n                '.keycap, .action, .fnbutton, .bigfnbutton'\n            )\n        )\n    );\n\n    const elList = result.getElementsByClassName('layer-switch');\n    for (let i = 0; i < elList.length; ++i) {\n        if (elList[i].classList.contains('shift')) {\n            // This is a potential press-and-hold layer switch\n            attachButtonHandlers(mf, elList[i], {\n                // When the modifier is initially pressed, we will shift the labels\n                // (if available)\n                pressed: ['shiftKeyboardLayer', 'shift'],\n\n                // If the key is released before a delay, we switch to the target layer\n                default: [\n                    'switchKeyboardLayer',\n                    elList[i].getAttribute('data-layer'),\n                ],\n\n                // If the key is released after a longer delay, we restore the\n                // shifted labels\n                pressAndHoldEnd: 'unshiftKeyboardLayer',\n            });\n        } else {\n            // This is a simple layer switch\n            attachButtonHandlers(mf, elList[i], {\n                default: [\n                    'switchKeyboardLayer',\n                    elList[i].getAttribute('data-layer'),\n                ],\n            });\n        }\n    }\n\n    // Select the first keyboard as the initial one.\n    const layerElements = result.getElementsByClassName('keyboard-layer');\n    Array.from(layerElements).forEach((x) => {\n        x.addEventListener('mousedown', (evt) => {\n            evt.preventDefault();\n            evt.stopPropagation();\n        });\n        x.addEventListener('touchstart', (evt) => {\n            evt.preventDefault();\n            evt.stopPropagation();\n        });\n    });\n    layerElements[0].classList.add('is-visible');\n\n    // Listen to know when the mouse has been released without being\n    // captured to remove the alternate keys panel and the shifted state of the\n    // keyboard.\n    // @todo should use a scrim instead (to prevent elements underneat the alt\n    // layer from reacting while the alt layer is up)\n    window.addEventListener('mouseup', function () {\n        hideAlternateKeys(mf);\n        unshiftKeyboardLayer(mf);\n    });\n    window.addEventListener('blur', function () {\n        hideAlternateKeys(mf);\n        unshiftKeyboardLayer(mf);\n    });\n    window.addEventListener('touchend', function () {\n        hideAlternateKeys(mf);\n        unshiftKeyboardLayer(mf);\n    });\n    window.addEventListener('touchcancel', function () {\n        hideAlternateKeys(mf);\n        unshiftKeyboardLayer(mf);\n    });\n\n    return result;\n}\n\nexport function hideAlternateKeys(_mathfield: MathfieldPrivate): boolean {\n    const altContainer = document.getElementById(\n        'mathlive-alternate-keys-panel'\n    );\n    if (altContainer) {\n        altContainer.classList.remove('is-visible');\n        altContainer.innerHTML = '';\n        releaseSharedElement(altContainer);\n    }\n    return false;\n}\n/*\n * Restore the key labels and commands to the state before a modifier key\n * was pressed.\n *\n */\nexport function unshiftKeyboardLayer(mathfield: MathfieldPrivate): boolean {\n    const keycaps = mathfield.virtualKeyboard.querySelectorAll(\n        'div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action'\n    );\n    if (keycaps) {\n        for (let i = 0; i < keycaps.length; i++) {\n            const keycap = keycaps[i];\n            const content = keycap.getAttribute('data-unshifted-content');\n            if (content) {\n                keycap.innerHTML = mathfield.config.createHTML(content);\n            }\n            const command = keycap.getAttribute('data-unshifted-command');\n            if (command) {\n                keycap.setAttribute(\n                    'data-' + mathfield.config.namespace + 'command',\n                    command\n                );\n            }\n        }\n    }\n    return false;\n}\n\nexport function updateUndoRedoButtons(mathfield: MathfieldPrivate): void {\n    const virtualKeyboardToolbar = mathfield.virtualKeyboard?.querySelector(\n        '.keyboard-toolbar'\n    );\n    if (virtualKeyboardToolbar) {\n        const undoButton = virtualKeyboardToolbar.querySelector(\n            '[data-command=\\'\"undo\"\\']'\n        );\n        const redoButton = virtualKeyboardToolbar.querySelector(\n            '[data-command=\\'\"redo\"\\']'\n        );\n        if (mathfield.canRedo()) {\n            redoButton.classList.remove('disabled');\n        } else {\n            redoButton.classList.add('disabled');\n        }\n        if (mathfield.canUndo()) {\n            undoButton.classList.remove('disabled');\n        } else {\n            undoButton.classList.add('disabled');\n        }\n    }\n}\n","import { isArray } from '../common/types';\n\nimport {\n    makeKeycap,\n    makeKeyboard,\n    hideAlternateKeys,\n    unshiftKeyboardLayer,\n} from './virtual-keyboard-utils';\nimport { complete } from './autocomplete';\nimport { getSharedElement } from './mathfield-utils';\nimport { register as registerCommand } from './commands';\nimport { on } from './mathfield-utils';\nimport type { MathfieldPrivate } from './mathfield-class';\n/*\n * Alternate options are displayed when a key on the virtual keyboard is pressed\n * and held.\n *\n */\nregisterCommand(\n    {\n        showAlternateKeys: (mathfield: MathfieldPrivate, keycap, altKeys) => {\n            const altContainer = getSharedElement(\n                'mathlive-alternate-keys-panel',\n                'ML__keyboard alternate-keys'\n            );\n            if (mathfield.virtualKeyboard.classList.contains('material')) {\n                altContainer.classList.add('material');\n            }\n            if (altKeys.length >= 7) {\n                // Width 4\n                altContainer.style.width = '286px';\n            } else if (altKeys.length === 4 || altKeys.length === 2) {\n                // Width 2\n                altContainer.style.width = '146px';\n            } else if (altKeys.length === 1) {\n                // Width 1\n                altContainer.style.width = '86px';\n            } else {\n                // Width 3\n                altContainer.style.width = '146px';\n            }\n            // Reset container height\n            altContainer.style.height = 'auto';\n            let markup = '';\n            for (const altKey of altKeys) {\n                markup += '<li';\n                if (typeof altKey === 'string') {\n                    markup +=\n                        ' data-latex=\"' + altKey.replace(/\"/g, '&quot;') + '\"';\n                } else {\n                    if (altKey.latex) {\n                        markup +=\n                            ' data-latex=\"' +\n                            altKey.latex.replace(/\"/g, '&quot;') +\n                            '\"';\n                    }\n                    if (altKey.content) {\n                        markup +=\n                            ' data-content=\"' +\n                            altKey.content.replace(/\"/g, '&quot;') +\n                            '\"';\n                    }\n                    if (altKey.insert) {\n                        markup +=\n                            ' data-insert=\"' +\n                            altKey.insert.replace(/\"/g, '&quot;') +\n                            '\"';\n                    }\n                    if (altKey.command) {\n                        markup +=\n                            \" data-command='\" +\n                            altKey.command.replace(/\"/g, '&quot;') +\n                            \"'\";\n                    }\n                    if (altKey.aside) {\n                        markup +=\n                            ' data-aside=\"' +\n                            altKey.aside.replace(/\"/g, '&quot;') +\n                            '\"';\n                    }\n                    if (altKey.classes) {\n                        markup += ' data-classes=\"' + altKey.classes + '\"';\n                    }\n                }\n                markup += '>';\n                markup += altKey.label || '';\n                markup += '</li>';\n            }\n            markup = '<ul>' + markup + '</ul>';\n            altContainer.innerHTML = mathfield.config.createHTML(markup);\n            makeKeycap(\n                mathfield,\n                [].slice.call(altContainer.getElementsByTagName('li')),\n                'performAlternateKeys'\n            );\n            const keycapEl = mathfield.virtualKeyboard.querySelector(\n                'div.keyboard-layer.is-visible div.rows ul li[data-alt-keys=\"' +\n                    keycap +\n                    '\"]'\n            );\n            const position = keycapEl.getBoundingClientRect();\n            if (position) {\n                if (position.top - altContainer.clientHeight < 0) {\n                    // altContainer.style.maxWidth = '320px';  // Up to six columns\n                    altContainer.style.width = 'auto';\n                    if (altKeys.length <= 6) {\n                        altContainer.style.height = '56px'; // 1 row\n                    } else if (altKeys.length <= 12) {\n                        altContainer.style.height = '108px'; // 2 rows\n                    } else {\n                        altContainer.style.height = '205px'; // 3 rows\n                    }\n                }\n                const top =\n                    (position.top - altContainer.clientHeight + 5).toString() +\n                    'px';\n                const left =\n                    Math.max(\n                        0,\n                        Math.min(\n                            window.innerWidth - altContainer.offsetWidth,\n                            (position.left +\n                                position.right -\n                                altContainer.offsetWidth) /\n                                2\n                        )\n                    ) + 'px';\n                altContainer.style.transform =\n                    'translate(' + left + ',' + top + ')';\n                altContainer.classList.add('is-visible');\n            }\n            return false;\n        },\n    },\n    { target: 'virtual-keyboard' }\n);\n\nexport function switchKeyboardLayer(\n    mathfield: MathfieldPrivate,\n    layer: string\n): boolean {\n    if (mathfield.config.virtualKeyboardMode !== 'off') {\n        if (\n            layer !== 'lower-command' &&\n            layer !== 'upper-command' &&\n            layer !== 'symbols-command'\n        ) {\n            // If we switch to a non-command keyboard layer, first exit command mode.\n            complete(mathfield);\n        }\n        showVirtualKeyboard(mathfield);\n        // If the alternate keys panel was visible, hide it\n        hideAlternateKeys(mathfield);\n        // If we were in a temporarily shifted state (shift-key held down)\n        // restore our state before switching to a new layer.\n        unshiftKeyboardLayer(mathfield);\n        const layers = mathfield.virtualKeyboard.getElementsByClassName(\n            'keyboard-layer'\n        );\n        // Search for the requested layer\n        let found = false;\n        for (let i = 0; i < layers.length; i++) {\n            if ((layers[i] as HTMLElement).dataset.layer === layer) {\n                found = true;\n                break;\n            }\n        }\n        // We did find the layer, switch to it.\n        // If we didn't find it, do nothing and keep the current layer\n        if (found) {\n            for (let i = 0; i < layers.length; i++) {\n                if ((layers[i] as HTMLElement).dataset.layer === layer) {\n                    layers[i].classList.add('is-visible');\n                } else {\n                    layers[i].classList.remove('is-visible');\n                }\n            }\n        }\n        mathfield.$focus();\n    }\n    return true;\n}\n\n/*\n * Temporarily change the labels and the command of the keys\n * (for example when a modifier key is held down.)\n */\nregisterCommand(\n    {\n        shiftKeyboardLayer: (mathfield: MathfieldPrivate) => {\n            const keycaps = mathfield.virtualKeyboard.querySelectorAll(\n                'div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action'\n            );\n            if (keycaps) {\n                for (let i = 0; i < keycaps.length; i++) {\n                    const keycap = keycaps[i];\n                    let shiftedContent = keycap.getAttribute('data-shifted');\n                    if (shiftedContent || /^[a-z]$/.test(keycap.innerHTML)) {\n                        keycap.setAttribute(\n                            'data-unshifted-content',\n                            keycap.innerHTML\n                        );\n                        if (!shiftedContent) {\n                            shiftedContent = keycap.innerHTML.toUpperCase();\n                        }\n                        keycap.innerHTML = mathfield.config.createHTML(\n                            shiftedContent\n                        );\n                        const command = keycap.getAttribute(\n                            'data-' + mathfield.config.namespace + 'command'\n                        );\n                        if (command) {\n                            keycap.setAttribute(\n                                'data-unshifted-command',\n                                command\n                            );\n                            const shifteCommand = keycap.getAttribute(\n                                'data-shifted-command'\n                            );\n                            if (shifteCommand) {\n                                keycap.setAttribute(\n                                    'data-' +\n                                        mathfield.config.namespace +\n                                        'command',\n                                    shifteCommand\n                                );\n                            } else {\n                                const commandObj = JSON.parse(command);\n                                if (isArray(commandObj)) {\n                                    commandObj[1] = commandObj[1].toUpperCase();\n                                }\n                                keycap.setAttribute(\n                                    'data-' +\n                                        mathfield.config.namespace +\n                                        'command',\n                                    JSON.stringify(commandObj)\n                                );\n                            }\n                        }\n                    }\n                }\n            }\n            return false;\n        },\n    },\n    { target: 'virtual-keyboard' }\n);\n\nregisterCommand(\n    {\n        hideAlternateKeys: (mathfield: MathfieldPrivate) =>\n            hideAlternateKeys(mathfield),\n\n        /*\n         * The command invoked when an alternate key is pressed.\n         * We need to hide the Alternate Keys panel, then perform the\n         * command.\n         */\n        performAlternateKeys: (mathfield: MathfieldPrivate, command) => {\n            hideAlternateKeys(mathfield);\n            return mathfield.$perform(command);\n        },\n        switchKeyboardLayer: (mathfield: MathfieldPrivate, layer) =>\n            switchKeyboardLayer(mathfield, layer),\n        unshiftKeyboardLayer: (mathfield: MathfieldPrivate) =>\n            unshiftKeyboardLayer(mathfield),\n\n        insertAndUnshiftKeyboardLayer: (mathfield: MathfieldPrivate, c) => {\n            mathfield.$insert(c);\n            unshiftKeyboardLayer(mathfield);\n            return true;\n        },\n    },\n    { target: 'virtual-keyboard' }\n);\n\nregisterCommand(\n    {\n        /* Toggle the virtual keyboard, but switch to the alternate theme if available */\n        toggleVirtualKeyboardAlt: (mathfield: MathfieldPrivate) => {\n            let hadAltTheme = false;\n            if (mathfield.virtualKeyboard) {\n                hadAltTheme = mathfield.virtualKeyboard.classList.contains(\n                    'material'\n                );\n                mathfield.virtualKeyboard.remove();\n                delete mathfield.virtualKeyboard;\n                mathfield.virtualKeyboard = null;\n            }\n            showVirtualKeyboard(mathfield, hadAltTheme ? '' : 'material');\n            return false;\n        },\n        /** Toggle the virtual keyboard, but switch another keyboard layout */\n        toggleVirtualKeyboardShift: (mathfield: MathfieldPrivate) => {\n            mathfield.config.virtualKeyboardLayout = {\n                qwerty: 'azerty',\n\n                azerty: 'qwertz',\n                qwertz: 'dvorak',\n                dvorak: 'colemak',\n                colemak: 'qwerty',\n            }[mathfield.config.virtualKeyboardLayout];\n            const layer =\n                mathfield.virtualKeyboard?.querySelector(\n                    'div.keyboard-layer.is-visible'\n                ).id ?? '';\n            if (mathfield.virtualKeyboard) {\n                mathfield.virtualKeyboard.remove();\n                delete mathfield.virtualKeyboard;\n                mathfield.virtualKeyboard = null;\n            }\n            showVirtualKeyboard(mathfield);\n            if (layer) {\n                switchKeyboardLayer(mathfield, layer);\n            }\n            return false;\n        },\n    },\n    { target: 'virtual-keyboard' }\n);\n\nexport function showVirtualKeyboard(\n    mathfield: MathfieldPrivate,\n    theme: 'apple' | 'material' | '' = ''\n): boolean {\n    mathfield.virtualKeyboardVisible = false;\n    toggleVirtualKeyboard(mathfield, theme);\n    return false;\n}\n\nexport function hideVirtualKeyboard(mathfield: MathfieldPrivate): boolean {\n    mathfield.virtualKeyboardVisible = true;\n    toggleVirtualKeyboard(mathfield);\n    return false;\n}\n\nfunction toggleVirtualKeyboard(\n    mathfield: MathfieldPrivate,\n    theme?: 'apple' | 'material' | ''\n): boolean {\n    mathfield.virtualKeyboardVisible = !mathfield.virtualKeyboardVisible;\n    if (mathfield.virtualKeyboardVisible) {\n        if (mathfield.virtualKeyboard) {\n            mathfield.virtualKeyboard.classList.add('is-visible');\n        } else {\n            // Construct the virtual keyboard\n            mathfield.virtualKeyboard = makeKeyboard(mathfield, theme);\n            // Let's make sure that tapping on the keyboard focuses the field\n            on(\n                mathfield.virtualKeyboard,\n                'touchstart:passive mousedown',\n                () => {\n                    mathfield.$focus();\n                }\n            );\n            document.body.appendChild(mathfield.virtualKeyboard);\n        }\n        // For the transition effect to work, the property has to be changed\n        // after the insertion in the DOM. Use setTimeout\n        window.setTimeout(() => {\n            mathfield.virtualKeyboard.classList.add('is-visible');\n        }, 1);\n    } else if (mathfield.virtualKeyboard) {\n        mathfield.virtualKeyboard.classList.remove('is-visible');\n    }\n    if (typeof mathfield.config.onVirtualKeyboardToggle === 'function') {\n        mathfield.config.onVirtualKeyboardToggle(\n            mathfield,\n            mathfield.virtualKeyboardVisible,\n            mathfield.virtualKeyboard\n        );\n    }\n    return false;\n}\n\nregisterCommand(\n    {\n        toggleVirtualKeyboard: (mathfield: MathfieldPrivate, theme) =>\n            toggleVirtualKeyboard(mathfield, theme),\n        hideVirtualKeyboard: (mathfield: MathfieldPrivate) =>\n            hideVirtualKeyboard(mathfield),\n        showVirtualKeyboard: (mathfield: MathfieldPrivate, theme): boolean =>\n            showVirtualKeyboard(mathfield, theme),\n    },\n    { target: 'virtual-keyboard' }\n);\n","/**\n * This module parses and outputs an Abstract Syntax Tree representing the\n * formula using the {@tutorial math-json | MathJSON } format.\n *\n * To use it, use the {@linkcode atomtoAST | atomtoAST()}  method.\n */\nimport { isArray } from '../common/types';\n\nimport { Atom, AtomType } from '../core/atom';\nimport { parseString } from '../core/parser';\nimport { joinLatex } from '../core/modes-utils';\nimport {\n    unicodeStringToLatex,\n    getInfo,\n    mathVariantToUnicode,\n    RIGHT_DELIM,\n} from '../core/definitions';\n\nexport type MathJsonLatexOptions = {\n    precision?: number;\n    decimalMarker?: string;\n    groupSeparator?: string;\n    product?: string;\n    exponentProduct?: string;\n    exponentMarker?: string;\n    arcSeparator?: string;\n    scientificNotation?: 'engineering' | 'auto' | 'on';\n    beginRepeatingDigits?: string;\n    endRepeatingDigits?: string;\n};\n\nexport type MathJson = any;\ntype ComplexNumber = { re?: string; im?: string };\ntype WrappedNumber = { num: string | ComplexNumber };\ntype MathJsonNumber = WrappedNumber & MathJsonOptionalAttributes;\ntype MathJsonExpression = {\n    fn?: string;\n    variant?: string;\n    [property: string]: MathJson;\n};\ntype MathJsonFunction = { fn: string; arg?: MathJson[] };\ntype MathJsonOptionalAttributes = {\n    latex?: string;\n};\n\ntype ParseState = {\n    atoms: Atom[];\n    index?: number;\n    ast?: MathJson;\n    minPrec?: number;\n};\n\n// type MathJson =\n//     | string\n//     | number\n//     | boolean\n//     | null\n//     | { [property: string]: MathJson }\n//     | MathJson[];\n\nconst CANONICAL_NAMES = {\n    // CONSTANTS\n    '\\\\imaginaryI': '\\u2148',\n    '\\\\imaginaryJ': '\\u2149',\n    '\\\\pi': 'π',\n    '\\\\exponentialE': '\\u212f',\n\n    // ARITHMETIC\n    '﹢': '+', // SMALL PLUS SIGN\n    '＋': '+', // FULL WIDTH PLUS SIGN\n    '−': '-', // MINUS SIGN\n    '-': '-', // HYPHEN-MINUS\n    '﹣': '-', // SMALL HYPHEN-MINUS\n    '－': '-', // FULLWIDTH HYPHEN-MINUS\n    '\\\\times': '*',\n    '\\\\cdot': '*',\n    '⨉': '*', // N-ARY TIMES OPERATOR U+\n    '️✖': '*', // MULTIPLICATION SYMBOL\n    '️×': '*', // MULTIPLICATION SIGN\n    '.': '*',\n    '÷': '/', // DIVISION SIGN\n    // '/':             '/',        // SOLIDUS\n    '⁄': '/', // FRACTION SLASH\n    '／': '/', // FULLWIDTH SOLIDUS\n    '!': 'factorial',\n    '\\\\mp': 'minusplus', // MINUS-PLUS SIGN\n    '\\\\ne': '!=',\n    '\\\\coloneq': ':=',\n    '\\\\questeq': '?=',\n    '\\\\approx': 'approx',\n    '\\\\cong': 'congruent',\n    '\\\\sim': 'similar',\n    '\\\\equiv': 'equiv',\n    '\\\\pm': 'plusminus', // PLUS-MINUS SIGN\n\n    '\\\\land': 'and',\n    '\\\\wedge': 'and',\n    '\\\\lor': 'or',\n    '\\\\vee': 'or',\n    '\\\\oplus': 'xor',\n    '\\\\veebar': 'xor',\n    '\\\\lnot': 'not',\n    '\\\\neg': 'not',\n\n    '\\\\exists': 'exists',\n    '\\\\nexists': '!exists',\n    '\\\\forall': 'forAll',\n    '\\\\backepsilon': 'suchThat',\n    '\\\\therefore': 'therefore',\n    '\\\\because': 'because',\n\n    '\\\\nabla': 'nabla',\n    '\\\\circ': 'circle',\n    // '\\\\oplus':       'oplus',\n    '\\\\ominus': 'ominus',\n    '\\\\odot': 'odot',\n    '\\\\otimes': 'otimes',\n\n    '\\\\zeta': 'Zeta',\n    '\\\\Gamma': 'Gamma',\n    '\\\\min': 'min',\n    '\\\\max': 'max',\n    '\\\\mod': 'mod',\n    '\\\\lim': 'lim', // BIG OP\n    '\\\\sum': 'sum',\n    '\\\\prod': 'prod',\n    '\\\\int': 'integral',\n    '\\\\iint': 'integral2',\n    '\\\\iiint': 'integral3',\n\n    '\\\\Re': 'Re',\n    '\\\\gothicCapitalR': 'Re',\n    '\\\\Im': 'Im',\n    '\\\\gothicCapitalI': 'Im',\n\n    '\\\\binom': 'nCr',\n\n    '\\\\partial': 'partial',\n    '\\\\differentialD': 'differentialD',\n    '\\\\capitalDifferentialD': 'capitalDifferentialD',\n    '\\\\Finv': 'Finv',\n    '\\\\Game': 'Game',\n    '\\\\wp': 'wp',\n    '\\\\ast': 'ast',\n    '\\\\star': 'star',\n    '\\\\asymp': 'asymp',\n\n    // Function domain, limits\n    '\\\\to': 'to', // Looks like \\rightarrow\n    '\\\\gets': 'gets', // Looks like \\leftarrow\n\n    // Sets\n    '\\\\in': 'elementof',\n    '\\\\notin': '!elementof',\n    '\\\\ni': 'ownedby',\n    '\\\\owns': 'ownedby',\n    '\\\\subset': 'subset',\n    '\\\\supset': 'superset',\n    '\\\\complement': 'complement',\n\n    // Logic\n    '\\\\rightarrow': 'shortLogicalImplies',\n    '\\\\leftarrow': 'shortLogicalImpliedBy',\n    '\\\\leftrightarrow': 'shortLogicalEquivalent',\n    '\\\\longrightarrow': 'logicalImplies',\n    '\\\\longleftarrow': 'logicalImpliedBy',\n    '\\\\longleftrightarrow': 'logicalEquivalent',\n\n    // Metalogic\n    '\\\\Rightarrow': 'shortImplies',\n    '\\\\Leftarrow': 'shortImpliedBy',\n    '\\\\Leftrightarrow': 'shortEquivalent',\n\n    '\\\\implies': 'implies',\n    '\\\\Longrightarrow': 'implies',\n    '\\\\impliedby': 'impliedBy',\n    '\\\\Longleftarrow': 'impliedBy',\n    '\\\\iff': 'equivalent',\n    '\\\\Longleftrightarrow': 'equivalent',\n};\n\n// The OP_NAME table maps a canonical name to a function name\nconst OP_NAME = {\n    '+': 'add',\n    '*': 'multiply',\n    '-': 'subtract',\n    '/': 'divide',\n    '=': 'equal',\n    ':=': 'assign',\n    '!=': 'ne',\n    '?=': 'questeq',\n    approx: 'approx',\n    congruent: 'congruent',\n    similar: 'similar',\n    equiv: 'equiv',\n    '<': 'lt',\n    '>': 'gt',\n    '<=': 'le',\n    '>=': 'ge',\n    '≤': 'le',\n    '≥': 'ge',\n    '>>': 'gg',\n    '<<': 'll',\n    '**': 'pow',\n    '++': 'increment',\n    '--': 'decrement',\n};\n\n// The FUNCTION_TEMPLATE table maps a canonical name to a LaTeX template\nconst FUNCTION_TEMPLATE = {\n    equal: '%0 = %1',\n    ne: '%0 \\\\ne %1',\n    questeq: '%0 \\\\questeq %1',\n    approx: '%0 \\\\approx %1',\n    congruent: '%0 \\\\cong %1',\n    similar: '%0 \\\\sim %1',\n    equiv: '%0 \\\\equiv %1',\n    assign: '%0 := %1',\n    lt: '%0 < %1',\n    gt: '%0 > %1',\n    le: '%0 \\\\le %1',\n    ge: '%0 \\\\ge %1',\n\n    // TRIGONOMETRY\n    sin: '\\\\sin%_%^ %0',\n    cos: '\\\\cos%_%^ %0',\n    tan: '\\\\tan%_%^ %0',\n    cot: '\\\\cot%_%^ %0',\n    sec: '\\\\sec%_%^ %0',\n    csc: '\\\\csc%_%^ %0',\n\n    sinh: '\\\\sinh %0',\n    cosh: '\\\\cosh %0',\n    tanh: '\\\\tanh %0',\n    csch: '\\\\csch %0',\n    sech: '\\\\sech %0',\n    coth: '\\\\coth %0',\n\n    arcsin: '\\\\arcsin %0',\n    arccos: '\\\\arccos %0',\n    arctan: '\\\\arctan %0',\n    arccot: '\\\\arcctg %0', // Check\n    arcsec: '\\\\arcsec %0',\n    arccsc: '\\\\arccsc %0',\n\n    arsinh: '\\\\arsinh %0',\n    arcosh: '\\\\arcosh %0',\n    artanh: '\\\\artanh %0',\n    arcsch: '\\\\arcsch %0',\n    arsech: '\\\\arsech %0',\n    arcoth: '\\\\arcoth %0',\n\n    // LOGARITHMS\n    ln: '\\\\ln%_%^ %', // Natural logarithm\n    log: '\\\\log%_%^ %', // General logarithm, e.g. log_10\n    lg: '\\\\lg %', // Common, base-10, logarithm\n    lb: '\\\\lb %', // Binary, base-2, logarithm\n\n    // Big operator\n    sum: '\\\\sum%_%^ %0',\n    prod: '\\\\prod%_%^ %0',\n\n    // OTHER\n    Zeta: '\\\\zeta%_%^ %', // Riemann Zeta function\n    Gamma: '\\\\Gamma %', // Gamma function, such that Gamma(n) = (n - 1)!\n    min: '\\\\min%_%^ %',\n    max: '\\\\max%_%^ %',\n    mod: '\\\\mod%_%^ %',\n    lim: '\\\\lim%_%^ %', // BIG OP\n    binom: '\\\\binom %',\n    nabla: '\\\\nabla %',\n    curl: '\\\\nabla\\\\times %0',\n    div: '\\\\nabla\\\\cdot %0',\n    floor: '\\\\lfloor %0 \\\\rfloor%_%^',\n    ceil: '\\\\lceil %0 \\\\rceil%_%^',\n    abs: '\\\\left| %0 \\\\right|%_%^',\n    norm: '\\\\lVert %0 \\\\rVert%_%^',\n    ucorner: '\\\\ulcorner %0 \\\\urcorner%_%^',\n    lcorner: '\\\\llcorner %0 \\\\lrcorner%_%^',\n    angle: '\\\\langle %0 \\\\rangle%_%^',\n    group: '\\\\lgroup %0 \\\\rgroup%_%^',\n    moustache: '\\\\lmoustache %0 \\\\rmoustache%_%^',\n    brace: '\\\\lbrace %0 \\\\rbrace%_%^',\n    'sqrt[]': '\\\\sqrt[%^]{%0}', // Template used when there's an index\n    sqrt: '\\\\sqrt{%0}',\n    lcm: '\\\\operatorname{lcm}%',\n    gcd: '\\\\operatorname{gcd}%',\n    erf: '\\\\operatorname{erf}%',\n    erfc: '\\\\operatorname{erfc}%',\n    randomReal: '\\\\operatorname{randomReal}%',\n    randomInteger: '\\\\operatorname{randomInteger}%',\n\n    // Logic operators\n    and: '%0 \\\\land %1',\n    or: '%0 \\\\lor %1',\n    xor: '%0 \\\\oplus %1',\n    not: '%0 \\\\lnot %1',\n\n    // Other operators\n    circle: '%0 \\\\circ %1',\n    ast: '%0 \\\\ast %1',\n    star: '%0 \\\\star %1',\n    asymp: '%0 \\\\asymp %1',\n    '/': '\\\\frac{%0}{%1}',\n    Re: '\\\\Re{%0}',\n    Im: '\\\\Im{%0}',\n    factorial: '%0!',\n    factorial2: '%0!!',\n};\n\n// From www.w3.org/TR/MathML3/appendixc.html\n// The keys of OP_PRECEDENCE are \"canonical names\"\n// (the values of the CANONICAL_NAMES table above, e.g. \"?=\")\n// Those are different from the latex names (e.g. \\\\questeq)\n// and from the function names (e.g. \"questeq\")\nconst OP_PRECEDENCE = {\n    degree: 880,\n    nabla: 740,\n    curl: 740, // not in MathML\n    partial: 740,\n    differentialD: 740, // not in MathML\n    capitalDifferentialD: 740, // not in MathML\n\n    '**': 720, // not in MathML\n\n    odot: 710,\n\n    // Logical not\n    not: 680,\n\n    // Division\n    div: 660, // division sign\n    solidus: 660,\n    '/': 660,\n\n    setminus: 650, // \\setminus, \\smallsetminus\n\n    '%': 640,\n\n    otimes: 410,\n\n    // Set operators\n    union: 350, // \\cup\n    intersection: 350, // \\cap\n\n    // Multiplication, division and modulo\n    '*': 390,\n    ast: 390,\n    '.': 390,\n\n    oplus: 300, // also logical XOR... @todo\n    ominus: 300,\n\n    // Addition\n    '+': 275,\n    '-': 275,\n    '+-': 275, // \\pm\n    '-+': 275, // \\mp\n\n    // Most circled-ops are 265\n    circle: 265,\n    circledast: 265,\n    circledcirc: 265,\n    star: 265, // Different from ast\n\n    // Range\n    '..': 263, // Not in MathML\n\n    // Unit conversion\n    to: 262, // Not in MathML\n    in: 262, // Not in MathML\n\n    '|': 261, // Not in MathML    (bind is the |_ operator)\n\n    // Relational\n    congruent: 265,\n    equiv: 260, // MathML: \"identical to\"\n    '=': 260,\n    '!=': 255,\n    '?=': 255,\n    similar: 250, // tilde operator in MathML\n\n    approx: 247,\n    '<': 245,\n    '>': 243,\n    '>=': 242,\n    '≥': 242,\n    '<=': 241,\n\n    // Set operator\n    complement: 240,\n    subset: 240, // \\subset\n    superset: 240, // \\supset\n    // @todo and equality and neg operators\n    elementof: 240, // \\in\n    '!elementof': 240, // \\notin\n    //\n    exists: 230,\n    '!exists': 230,\n    forall: 230,\n\n    // Logical operators\n    and: 200,\n    xor: 195, // MathML had 190\n    or: 190,\n    // Note: 'not' is 680\n\n    // center, low, diag, vert ellipsis         150\n\n    // Composition/sequence\n    suchThat: 110, // \\backepsilon\n    ':': 100,\n    // '..':               100,\n    // '...':               100,\n\n    // Conditional (?:)\n\n    // Assignment\n    assign: 80,\n    ':=': 80, // MathML had 260 (same with U+2254 COLON EQUALS)\n\n    therefore: 70,\n    because: 70,\n\n    // Arrows\n    // Note: MathML had 270 for the arrows, but this\n    // would not work for (a = b => b = a)\n    // See also https://en.wikipedia.org/wiki/Logical_connective#Order_of_precedence\n    // for a suggested precedence (note that in this page lower precedence\n    // has the opposite meaning as what we use)\n    shortLogicalImplies: 52, // ->\n    shortImplies: 51, // =>\n    logicalImplies: 50, // -->\n    implies: 49, // ==>\n\n    shortLogicalImpliedBy: 48, // <-\n    shortImpliedBy: 47, // <=\n    logicalImpliedBy: 46, // <--\n    impliedBy: 45, // <==\n\n    shortLogicalEquivalent: 44, // <->\n    shortEquivalent: 43, // <=>\n    logicalEquivalent: 42, // <-->\n    equivalent: 41, // <==>\n\n    ',': 40,\n    ';': 30,\n};\n\nfunction getArg(ast, index) {\n    return isArray(ast.arg) ? ast.arg[index] : undefined;\n}\n\n/**\n * Given a canonical name, return its precedence\n * @param canonicalName, for example \"and\"\n */\nfunction getPrecedence(canonicalName: string): number {\n    return canonicalName ? OP_PRECEDENCE[canonicalName] || -1 : -1;\n}\n\nfunction getAssociativity(canonicalName: string): 'left' | 'right' {\n    if (/=|=>/.test(canonicalName)) {\n        return 'right';\n    }\n    return 'left';\n}\n\n/**\n *\n * @param name - function canonical name\n */\nfunction getLatexTemplateForFunction(name: string): string {\n    let result = FUNCTION_TEMPLATE[name];\n    if (!result) {\n        result =\n            name.length > 1\n                ? '\\\\operatorname{' + name + '}%^%_ %'\n                : name + '%^%_ %';\n    }\n\n    return result;\n}\n\n/**\n *\n * @param name symbol name, e.g. \"alpha\"\n */\nfunction getLatexForSymbol(name: string): string {\n    let result = FUNCTION_TEMPLATE[name];\n    if (result) {\n        return result.replace('%1', '').replace('%0', '').replace('%', '');\n    }\n    if (name.length > 1) {\n        result = '\\\\' + name;\n    }\n    if (!result) {\n        result = unicodeStringToLatex('math', name);\n    }\n\n    return result;\n}\n\nfunction isFunction(canonicalName: string): boolean {\n    if (canonicalName === 'f' || canonicalName === 'g') return true;\n\n    const t = FUNCTION_TEMPLATE[canonicalName];\n    if (!t) return false;\n\n    // A plain \"%\" is a placeholder for an argument list, indicating a function\n    if (/%[^01_^]?/.test(t)) return true;\n\n    return false;\n}\n\n/**\n *\n * @param latex, for example '\\\\times'\n * @retur the canonical name for the input, for example '*'\n */\nfunction getCanonicalName(latex: string): string {\n    latex = (latex || '').trim();\n    let result = CANONICAL_NAMES[latex];\n    if (!result) {\n        if (/^\\\\[^{}]+$/.test(latex)) {\n            const info = getInfo(latex, 'math', {});\n            if (info) {\n                result = info.value || latex.slice(1);\n            } else {\n                result = latex.slice(1);\n            }\n        } else {\n            result = latex;\n        }\n    }\n    return result;\n}\n\n/**\n * Return the operator precedence of the atom\n * or null if not an operator\n */\nfunction opPrec(atom: Atom): [number, 'left' | 'right'] {\n    if (!atom) return null;\n    const name = getCanonicalName(getString(atom));\n    const result: [number, 'left' | 'right'] = [\n        getPrecedence(name),\n        getAssociativity(name),\n    ];\n    if (result[0] <= 0) return null;\n    return result;\n}\n\nfunction isOperator(atom) {\n    return opPrec(atom) !== null;\n}\n\nconst DELIM_FUNCTION = {\n    '\\\\lfloor\\\\rfloor': 'floor',\n    '\\\\lceil\\\\rceil': 'ceil',\n    '\\\\vert\\\\vert': 'abs',\n    '\\\\lvert\\\\rvert': 'abs',\n    '||': 'abs',\n    '\\\\Vert\\\\Vert': 'norm',\n    '\\\\lVert\\\\rVert': 'norm',\n    '\\\\ulcorner\\\\urcorner': 'ucorner',\n    '\\\\llcorner\\\\lrcorner': 'lcorner',\n    '\\\\langle\\\\rangle': 'angle',\n    '\\\\lgroup\\\\rgroup': 'group',\n    '\\\\lmoustache\\\\rmoustache': 'moustache',\n    '\\\\lbrace\\\\rbrace': 'brace',\n};\n\nconst POSTFIX_FUNCTION = {\n    '!': 'factorial',\n    '\\\\dag': 'dagger',\n    '\\\\dagger': 'dagger',\n    '\\\\ddagger': 'dagger2',\n    '\\\\maltese': 'maltese',\n    '\\\\backprime': 'backprime',\n    '\\\\backdoubleprime': 'backprime2',\n    '\\\\prime': 'prime',\n    '\\\\doubleprime': 'prime2',\n    '\\\\$': '$',\n    '\\\\%': '%',\n    '\\\\_': '_',\n    '\\\\degree': 'degree',\n};\n\nconst ASSOCIATIVE_FUNCTION = {\n    '+': 'add',\n    '-': 'add', // Subtraction is add(), but it's\n    // handled specifically so that the\n    // argument is negated\n    '*': 'multiply',\n\n    '=': 'equal',\n\n    ',': 'list',\n    ';': 'list2',\n\n    and: 'and',\n    or: 'or',\n    xor: 'xor',\n    union: 'union',\n    // shortLogicalEquivalent and logicalEquivalent map to the same function\n    // they mean the same thing, but have a difference precedence.\n    shortLogicalEquivalent: 'logicalEquivalent', // logical equivalent, iff, biconditional logical connective\n    logicalEquivalent: 'logicalEquivalent', // same\n    // shortEquivalent and equivalent map to the same function\n    // they mean the same thing, but have a difference precedence.\n    shortEquivalent: 'equivalent', // metalogic equivalent\n    equivalent: 'equivalent', // same\n};\n\nconst SUPER_ASSOCIATIVE_FUNCTION = {\n    ',': 'list',\n    ';': 'list2',\n};\n\nfunction getString(atom) {\n    if (typeof atom === 'string') return atom;\n    if (isArray(atom)) {\n        let result = '';\n        for (const subAtom of atom) {\n            result += getString(subAtom);\n        }\n        return result;\n    }\n    if (\n        atom.symbol &&\n        !/^\\\\math(op|bin|rel|open|punct|ord|inner)/.test(atom.symbol)\n    ) {\n        return atom.symbol;\n    }\n    if (atom.type === 'leftright') {\n        return '';\n    }\n    if (typeof atom.body === 'string') {\n        return atom.body;\n    }\n    if (isArray(atom.body)) {\n        let result = '';\n        for (const subAtom of atom.body) {\n            result += getString(subAtom);\n        }\n        return result;\n    }\n    return '';\n}\n\n/**\n *\n * @param {object} expr - Abstract Syntax Tree object\n * @return A string, the symbol, or undefined\n */\nfunction asSymbol(node): string {\n    return typeof node.sym === 'string'\n        ? getLatexForSymbol(node.sym) || node.sym\n        : '';\n}\n\n/**\n *\n * @param {object} node - Abstract Syntax Tree node\n * @return A JavaScript number, the value of the AST or NaN\n */\nfunction asMachineNumber(node): number {\n    return parseFloat(node.num);\n}\n\nfunction isNumber(node): boolean {\n    return typeof node === 'object' && typeof node.num !== 'undefined';\n}\n\nfunction numberRe(node): number {\n    let result = 0;\n    if (isNumber(node)) {\n        if (typeof node.num === 'object') {\n            result =\n                typeof node.num.re !== 'undefined'\n                    ? parseFloatToPrecision(node.num.re)\n                    : 0;\n        } else {\n            result = parseFloat(node.num);\n        }\n    }\n    return result;\n}\n\nfunction numberIm(node): number {\n    let result = 0;\n    if (isNumber(node)) {\n        if (typeof node.num === 'object') {\n            result =\n                typeof node.num.im !== 'undefined'\n                    ? parseFloatToPrecision(node.num.im)\n                    : 0;\n        }\n    }\n    return result;\n}\n\nfunction isComplexWithRealAndImaginary(node) {\n    return numberRe(node) !== 0 && numberIm(node) !== 0;\n}\n\nfunction hasSup(node) {\n    return node && typeof node.sup !== 'undefined';\n}\n\nfunction hasSub(node) {\n    return node && typeof node.sub !== 'undefined';\n}\n\n/**\n * Return true if the current atom is of the specified type and value.\n */\nfunction isAtom(expr: ParseState, type: AtomType, value?): boolean {\n    let result = false;\n    const atom = expr.atoms[expr.index];\n    if (atom && atom.type === type) {\n        if (typeof value === 'undefined') {\n            result = true;\n        } else {\n            result = getString(atom) === value;\n        }\n    }\n    return result;\n}\n\nfunction wrapFn(functionName: string, ...params: any[]): MathJsonFunction {\n    const result = { fn: functionName, arg: undefined };\n    if (params) {\n        const args = [];\n        for (const arg of params) {\n            if (arg) args.push(arg);\n        }\n        if (args.length > 0) result.arg = args;\n    }\n    return result;\n}\n\nfunction wrapNum(num: number | string | ComplexNumber): MathJsonNumber {\n    if (typeof num === 'number') {\n        return { num: num.toString() };\n    } else if (typeof num === 'string') {\n        return { num: num };\n    } else if (typeof num === 'object') {\n        // This is a complex number\n        console.assert(\n            typeof num['re'] === 'string' || typeof num['im'] === 'string'\n        );\n        return { num: num };\n    }\n    return undefined;\n}\n\n/**\n * Return the negative of the expression. Usually { fn:'negate', arg }\n * but for numbers, the negated number\n * @param {object} node\n * @private\n */\nfunction negate(node) {\n    if (isNumber(node)) {\n        const re = numberRe(node);\n        const im = numberIm(node);\n        if (im !== 0) {\n            if (re !== 0) {\n                node.num.re = (-re).toString();\n            }\n            node.num.im = (-im).toString();\n        } else {\n            node.num = (-re).toString();\n        }\n        return node;\n    }\n    return wrapFn('negate', node);\n}\n\nfunction nextIsSupsub(expr) {\n    const atom = expr.atoms[expr.index + 1];\n    return atom && atom.type === 'msubsup';\n}\n\n/**\n * Parse for a possible sup/sub attached directly to the current atom\n * or to a following 'msubsup' atom.\n * After the call, the index points to the next atom to process.\n * @param {object} expr\n * @private\n */\nfunction parseSupsub(expr, options) {\n    let atom = expr.atoms[expr.index];\n\n    // Is there a supsub directly on this atom?\n    if (\n        atom &&\n        (typeof atom.superscript !== 'undefined' ||\n            typeof atom.subscript !== 'undefined')\n    ) {\n        // Move to the following atom\n        expr.index += 1;\n    } else {\n        atom = null;\n    }\n\n    // If this atom didn't have a sup/sub,\n    // is the following atom a subsup atom?\n    if (!atom) {\n        atom = expr.atoms[expr.index + 1];\n        if (\n            !atom ||\n            atom.type !== 'msubsup' ||\n            !(atom.superscript || atom.subscript)\n        ) {\n            atom = null;\n        } else {\n            // Yes. Skip the current atom and the supsub\n            expr.index += 2;\n        }\n    }\n\n    if (atom) {\n        if (typeof atom.subscript !== 'undefined') {\n            expr.ast.sub = parse(atom.subscript, options);\n        }\n        if (typeof atom.superscript !== 'undefined') {\n            if (atom.type === 'msubsup') {\n                if (/['\\u2032]|\\\\prime/.test(getString(atom.superscript))) {\n                    expr.index += 1;\n                    atom = expr.atoms[expr.index + 1];\n                    if (\n                        atom &&\n                        atom.type === 'msubsup' &&\n                        /['\\u2032]|\\\\prime/.test(getString(atom.superscript))\n                    ) {\n                        expr.ast.sup = { sym: '\\u2033' }; // DOUBLE-PRIME\n                    } else {\n                        expr.ast.sup = { sym: '\\u2032' }; // PRIME\n                        expr.index -= 1;\n                    }\n                } else if (\n                    /['\\u2033]|\\\\doubleprime/.test(getString(atom.superscript))\n                ) {\n                    expr.ast.sup = { sym: '\\u2033' }; // DOUBLE-PRIME\n                } else if (expr.ast) {\n                    expr.ast.sup = parse(atom.superscript, options);\n                }\n            } else {\n                expr.ast.sup = parse(atom.superscript, options);\n            }\n        }\n    } else {\n        // Didn't find a supsup either on this atom and there was no 'msubsup'\n        // Time to move on to the next atom.\n        expr.index += 1;\n    }\n\n    return expr;\n}\n\n/**\n * Parse postfix operators, such as \"!\" (factorial)\n * @private\n */\nfunction parsePostfix(expr, options) {\n    const lhs = expr.ast;\n    if (nextIsDigraph(expr, '!!')) {\n        expr.index += 1;\n        expr.ast = wrapFn('factorial2', lhs);\n        expr = parseSupsub(expr, options);\n        expr = parsePostfix(expr, options);\n        return expr;\n    }\n    if (nextIsDigraph(expr, '++')) {\n        expr.index += 1;\n        expr.ast = wrapFn('increment', lhs);\n        expr = parseSupsub(expr, options);\n        expr = parsePostfix(expr, options);\n        return expr;\n    }\n    if (nextIsDigraph(expr, '--')) {\n        expr.index += 1;\n        expr.ast = wrapFn('decrement', lhs);\n        expr = parseSupsub(expr, options);\n        expr = parsePostfix(expr, options);\n        return expr;\n    }\n    const atom = expr.atoms[expr.index];\n    if (atom?.symbol && POSTFIX_FUNCTION[atom.symbol]) {\n        expr.ast = wrapFn(POSTFIX_FUNCTION[atom.symbol], lhs);\n        expr = parseSupsub(expr, options);\n        expr = parsePostfix(expr, options);\n    }\n    return expr;\n}\n\n/**\n * Delimiters can be expressed:\n * - as a matching pair of regular characters: '(a)'\n * - a as 'leftright' expression: '\\left(a\\right)'\n * - as a matching pair of 'sizeddelim': '\\Bigl(a\\Bigr)\n *\n * Note that the '\\delim' command is only used for delimiters in the middle\n * of a \\left\\right pair and not to represent pair-matched delimiters.\n *\n * This function handles all three cases\n */\nfunction parseDelim(\n    expr: ParseState,\n    ldelim,\n    rdelim,\n    options: MathJsonLatexOptions\n) {\n    expr.index = expr.index || 0;\n\n    if (expr.atoms.length === 0 || expr.index >= expr.atoms.length) {\n        expr.ast = undefined;\n        return expr;\n    }\n\n    const savedPrec = expr.minPrec;\n    expr.minPrec = 0;\n    let atom = expr.atoms[expr.index];\n\n    if (!ldelim) {\n        // If we didn't expect a specific delimiter, parse any delimiter\n        // and return it as a function application\n        let pairedDelim = true;\n        if (atom.type === 'mopen') {\n            ldelim = atom.symbol;\n            rdelim = RIGHT_DELIM[ldelim];\n        } else if (atom.type === 'sizeddelim') {\n            ldelim = atom.delim;\n            rdelim = RIGHT_DELIM[ldelim];\n        } else if (atom.type === 'leftright') {\n            pairedDelim = false;\n            ldelim = atom.leftDelim;\n            rdelim = atom.rightDelim;\n            // If we have an unclosed smart fence, assume the right delim is\n            // matching the left delim\n            if (rdelim === '?') rdelim = RIGHT_DELIM[ldelim];\n        } else if (atom.type === 'textord') {\n            ldelim = atom.symbol;\n            rdelim = RIGHT_DELIM[ldelim];\n        }\n        if (ldelim && rdelim) {\n            if (ldelim === '|' && rdelim === '|') {\n                // Check if this could be a ||x|| instead of |x|\n                const atom = expr.atoms[expr.index + 1];\n                if (atom && atom.type === 'textord' && atom.symbol === '|') {\n                    // Yes, it's a ||x||\n                    ldelim = '\\\\lVert';\n                    rdelim = '\\\\rVert';\n                }\n            }\n            expr = parseDelim(expr, ldelim, rdelim, options);\n            if (expr) {\n                if (pairedDelim) expr.index += 1;\n                expr.ast = {\n                    fn: DELIM_FUNCTION[ldelim + rdelim] || ldelim + rdelim,\n                    arg: [expr.ast],\n                };\n                expr.minPrec = savedPrec;\n                return expr;\n            }\n        }\n        return undefined;\n    }\n\n    if (atom.type === 'mopen' && getString(atom) === ldelim) {\n        expr.index += 1; // Skip the open delim\n        expr = parseExpression(expr, options);\n        atom = expr.atoms[expr.index];\n        if (atom && atom.type === 'mclose' && getString(atom) === rdelim) {\n            if (nextIsSupsub(expr)) {\n                // Wrap in a group if we have an upcoming superscript or subscript\n                expr.ast = { group: expr.ast };\n            }\n            expr = parseSupsub(expr, options);\n            expr = parsePostfix(expr, options);\n        } // TODO: else, syntax error?\n    } else if (atom.type === 'textord' && getString(atom) === ldelim) {\n        expr.index += 1; // Skip the open delim\n        expr = parseExpression(expr, options);\n        atom = expr.atoms[expr.index];\n        if (atom && atom.type === 'textord' && getString(atom) === rdelim) {\n            expr.index += 1;\n            expr = parseSupsub(expr, options);\n            expr = parsePostfix(expr, options);\n        } // TODO: else, syntax error?\n    } else if (\n        ldelim === '\\\\lVert' &&\n        atom.type === 'textord' &&\n        atom.symbol === '|'\n    ) {\n        atom = expr.atoms[expr.index + 1];\n        if (atom && atom.type === 'textord' && atom.symbol === '|') {\n            // This is an opening ||\n            expr.index += 2; // Skip the open delim\n            expr = parseExpression(expr, options);\n            atom = expr.atoms[expr.index];\n            const atom2 = expr.atoms[expr.index + 1];\n            if (\n                atom &&\n                atom.type === 'textord' &&\n                atom.symbol === '|' &&\n                atom2 &&\n                atom2.type === 'textord' &&\n                atom2.symbol === '|'\n            ) {\n                // This was a closing ||\n                expr.index += 2;\n                expr = parseSupsub(expr, options);\n                expr = parsePostfix(expr, options);\n            }\n        }\n    } else if (atom.type === 'sizeddelim' && atom.delim === ldelim) {\n        expr.index += 1; // Skip the open delim\n        expr = parseExpression(expr, options);\n        atom = expr.atoms[expr.index];\n        if (atom && atom.type === 'sizeddelim' && atom.delim === rdelim) {\n            expr.index += 1;\n            expr = parseSupsub(expr, options);\n            expr = parsePostfix(expr, options);\n        } // TODO: else, syntax error?\n    } else if (\n        atom.type === 'leftright' &&\n        atom.leftDelim === ldelim &&\n        (atom.rightDelim === '?' || atom.rightDelim === rdelim)\n    ) {\n        // This atom type includes the content of the parenthetical expression\n        // in its body\n        expr.ast = parse(atom.body as Atom[], options);\n        if (nextIsSupsub(expr)) {\n            // Wrap in a group if we have an upcoming superscript or subscript\n            expr.ast = { group: expr.ast };\n        }\n        expr = parseSupsub(expr, options);\n        expr = parsePostfix(expr, options);\n    } else {\n        return undefined;\n    }\n\n    expr.minPrec = savedPrec;\n    return expr;\n}\n\nfunction nextIsDigraph(expr, digraph) {\n    expr.index = expr.index || 0;\n\n    if (expr.atoms.length <= 1 || expr.index >= expr.atoms.length - 1) {\n        return false;\n    }\n\n    return (\n        digraph ===\n        getString(expr.atoms[expr.index]) +\n            getString(expr.atoms[expr.index + 1])\n    );\n}\n\n/**\n * Some symbols are made up of two consecutive characters.\n * Handle them here. Return undefined if not a digraph.\n * TODO: other digraphs:\n * :=\n * ++\n * **\n * =:\n * °C U+2103\n * °F U+2109\n * @private\n *\n */\nfunction parseDigraph(expr) {\n    expr.index = expr.index || 0;\n\n    if (expr.atoms.length <= 1 || expr.index >= expr.atoms.length - 1) {\n        return undefined;\n    }\n\n    if (isAtom(expr, 'textord', '\\\\nabla')) {\n        expr.index += 1;\n        if (isAtom(expr, 'mbin', '\\\\times')) {\n            expr.index += 1;\n            expr.ast = 'curl'; // divergence\n            return expr;\n        } else if (isAtom(expr, 'mbin', '\\\\cdot')) {\n            expr.index += 1;\n            expr.ast = 'div';\n            return expr;\n        }\n        expr.index -= 1;\n    } else {\n        const digraph =\n            expr.atoms[expr.index].symbol + expr.atoms[expr.index + 1].symbol;\n        const result = /^(>=|<=|>>|<<|:=|!=)$/.test(digraph) ? digraph : '';\n        if (result) {\n            expr.index += 1;\n        }\n        return result;\n    }\n\n    return undefined;\n}\n\nfunction parsePrimary(expr: ParseState, options: MathJsonLatexOptions) {\n    // <primary> := ('-'|'+) <primary> | <number> |\n    //              '(' <expression> ')' | <symbol> | <text> (<expression>)\n\n    expr.index = expr.index || 0;\n    expr.ast = undefined;\n\n    if (expr.atoms.length === 0 || expr.index >= expr.atoms.length) {\n        return expr;\n    }\n\n    let atom = expr.atoms[expr.index];\n    if (atom.mode === 'text') {\n        let text = '';\n        while (\n            expr.atoms[expr.index] &&\n            expr.atoms[expr.index].mode === 'text'\n        ) {\n            text += expr.atoms[expr.index].body;\n            expr.index += 1;\n        }\n        expr.ast = { text: text };\n        return expr;\n    }\n\n    const val = getCanonicalName(getString(atom));\n\n    const digraph = parseDigraph(expr);\n    if (digraph) {\n        expr.ast = wrapFn(expr.ast, parsePrimary(expr, options).ast);\n    } else if (atom.type === 'root') {\n        expr.index = 0;\n        expr.atoms = atom.body as Atom[];\n        return parsePrimary(expr, options);\n    } else if (atom.type === 'mbin' && val === '-') {\n        // Prefix - sign\n        expr.index += 1; // Skip the '-' symbol\n        expr = parsePrimary(expr, options);\n        expr.ast = negate(expr.ast);\n    } else if (atom.type === 'mbin' && val === '+') {\n        // Prefix + sign\n        expr.index += 1; // Skip the '+' symbol\n        expr = parsePrimary(expr, options);\n        expr.ast = wrapFn('add', expr.ast);\n    } else if (atom.type === 'mord' && /^[0-9.]$/.test(atom.symbol)) {\n        // Looks like a number\n        let num = '';\n        let done = false;\n        let pat = /^[0-9.eEdD]$/;\n        while (\n            expr.index < expr.atoms.length &&\n            !done &&\n            (isAtom(expr, 'spacing') ||\n                ((isAtom(expr, 'mord') ||\n                    isAtom(expr, 'mpunct', ',') ||\n                    isAtom(expr, 'mbin')) &&\n                    pat.test(expr.atoms[expr.index].symbol)))\n        ) {\n            if (expr.atoms[expr.index].type === 'spacing') {\n                expr.index += 1;\n            } else if (\n                typeof expr.atoms[expr.index].superscript !== 'undefined' ||\n                typeof expr.atoms[expr.index].subscript !== 'undefined'\n            ) {\n                done = true;\n            } else {\n                let digit = expr.atoms[expr.index].symbol;\n                if (digit === 'd' || digit === 'D') {\n                    digit = 'e';\n                    pat = /^[0-9+-.]$/;\n                } else if (digit === 'e' || digit === 'E') {\n                    if (nextIsSupsub(expr)) {\n                        digit = '';\n                        expr.index -= 1;\n                        done = true;\n                    } else {\n                        digit = 'E';\n                        pat = /^[0-9+-.]$/;\n                    }\n                } else if (pat === /^[0-9+-.]$/) {\n                    pat = /^[0-9]$/;\n                }\n                num += digit === ',' ? '' : digit;\n                expr.index += 1;\n            }\n        }\n        expr.ast = num ? wrapNum(num) : undefined;\n\n        // This was a number. Is it followed by a fraction, e.g. 2 1/2\n        atom = expr.atoms[expr.index];\n        if (atom && atom.type === 'genfrac' && !isNaN(expr.ast.num)) {\n            // Add an invisible plus, i.e. 2 1/2 = 2 + 1/2\n            const lhs = expr.ast;\n            expr = parsePrimary(expr, options);\n            expr.ast = wrapFn('add', lhs, expr.ast);\n        }\n        if (\n            atom &&\n            atom.type === 'group' &&\n            atom.symbol &&\n            atom.symbol.startsWith('\\\\nicefrac')\n        ) {\n            // \\nicefrac macro, add an invisible plus\n            const lhs = expr.ast;\n            expr = parsePrimary(expr, options);\n            expr.ast = wrapFn('add', lhs, expr.ast);\n        }\n        if (atom && atom.type === 'msubsup') {\n            expr = parseSupsub(expr, options);\n        }\n        expr = parsePostfix(expr, options);\n    } else if (atom.type === 'genfrac' || atom.type === 'surd') {\n        // A fraction or a square/cube root\n        expr.ast = atomToMathJson(atom, options);\n        expr = parseSupsub(expr, options);\n        expr = parsePostfix(expr, options);\n    } else if (atom.type === 'mord' || atom.type === 'mbin') {\n        // A 'mord' but not a number: either an identifier ('x') or\n        // a function ('\\\\Zeta')\n        if (isFunction(val) && !isOperator(atom)) {\n            // A function\n            expr.ast = { fn: val };\n            expr = parseSupsub(expr, options);\n\n            const fn = expr.ast;\n            const arg = parsePrimary(expr, options).ast;\n            if (arg && /^(list0|list|list2)$/.test(arg.fn)) {\n                fn.arg = arg.arg;\n            } else if (arg) {\n                fn.arg = [arg];\n            }\n            expr.ast = fn;\n        } else {\n            // An identifier\n            expr.ast = atomToMathJson(atom, options);\n            if (expr.ast.sym === 'ⅈ') {\n                // It's 'i', the imaginary unit\n                expr.ast = wrapNum({ im: '1' });\n            }\n            expr = parseSupsub(expr, options);\n        }\n        expr = parsePostfix(expr, options);\n    } else if (atom.type === 'textord') {\n        // Note that 'textord' can also be operators, and are handled as such\n        // in parseExpression()\n        if (!isOperator(atom)) {\n            // This doesn't look like a textord operator\n            if (!RIGHT_DELIM[atom.symbol || (atom.body as string)]) {\n                // Not an operator, not a fence, it's a symbol or a function\n                if (isFunction(val)) {\n                    // It's a function\n                    expr.ast = { fn: val };\n                    expr = parseSupsub(expr, options);\n\n                    const fn = expr.ast;\n                    expr.index += 1; // Skip the function name\n                    fn.arg = [parsePrimary(expr, options).ast];\n                    expr.ast = fn;\n\n                    expr = parsePostfix(expr, options);\n                } else {\n                    // It was a symbol...\n                    expr.ast = atomToMathJson(atom, options);\n                    if (typeof atom.superscript === 'undefined') {\n                        expr.index += 1;\n                    }\n                    expr = parseSupsub(expr, options);\n                    expr = parsePostfix(expr, options);\n                }\n            }\n        }\n    } else if (atom.type === 'mop') {\n        // Could be a function or an operator.\n        if (\n            (/^\\\\(mathop|operatorname|operatorname\\*)/.test(atom.symbol) ||\n                isFunction(val)) &&\n            !isOperator(atom)\n        ) {\n            expr.ast = {\n                fn: /^\\\\(mathop|operatorname|operatorname\\*)/.test(atom.symbol)\n                    ? getString(atom.body)\n                    : val,\n            };\n            expr = parseSupsub(expr, options);\n\n            if (hasSup(expr.ast)) {\n                // There was an exponent with the function.\n                // This may be an inverse function\n                const INVERSE_FUNCTION = {\n                    sin: 'arcsin',\n                    cos: 'arccos',\n                    tan: 'arctan',\n                    cot: 'arccot',\n                    sec: 'arcsec',\n                    csc: 'arccsc',\n                    sinh: 'arsinh',\n                    cosh: 'arcosh',\n                    tanh: 'artanh',\n                    csch: 'arcsch',\n                    sech: 'arsech',\n                    coth: 'arcoth',\n                };\n                if (\n                    asMachineNumber(expr.ast.sup) === -1 &&\n                    INVERSE_FUNCTION[val]\n                ) {\n                    expr.ast = wrapFn(\n                        INVERSE_FUNCTION[val],\n                        parsePrimary(expr, options).ast\n                    );\n                } else {\n                    // Keep the exponent, add the argument\n                    const fn = expr.ast;\n                    fn.arg = [parsePrimary(expr, options).ast];\n                    expr.ast = fn;\n                }\n            } else {\n                const fn = expr.ast;\n                const arg = parsePrimary(expr, options).ast;\n                if (arg && /^(list0|list|list2)$/.test(arg.fn)) {\n                    fn.arg = arg.arg;\n                } else if (arg) {\n                    fn.arg = [arg];\n                }\n\n                expr.ast = fn;\n            }\n        }\n    } else if (atom.type === 'array') {\n        expr.index += 1;\n        expr.ast = atomToMathJson(atom, options);\n    } else if (atom.type === 'group') {\n        expr.index += 1;\n        expr.ast = atomToMathJson(atom, options);\n    } else if (atom.type === 'mclose') {\n        return expr;\n    } else if (atom.type === 'error') {\n        expr.index += 1;\n        expr.ast = { error: atom.symbol };\n        return expr;\n    }\n\n    if (expr.ast === undefined) {\n        // Parse either a group of paren, and return their content as the result\n        // or a pair of delimiters, and return them as a function applied\n        // to their content, i.e. \"|x|\" -> {fn: \"||\", arg: \"x\"}\n        const delim =\n            parseDelim(expr, '(', ')', options) ||\n            parseDelim(expr, null, null, options);\n        if (delim) {\n            expr = delim;\n        } else if (!isOperator(atom)) {\n            // This is not an operator (if it is, it may be an operator\n            // dealing with an empty lhs. It's possible.\n            // Couldn't interpret the expression. Output an error.\n            if (atom.type === 'placeholder') {\n                // Default value for a placeholder is 0\n                // (except for the denominator of a 'genfrac')\n                expr.ast = wrapNum(0);\n            } else {\n                expr.ast = { text: '?' };\n                expr.ast.error = 'Unexpected token ' + \"'\" + atom.type + \"'\";\n                if (atom.latex) {\n                    expr.ast.latex = atom.latex;\n                } else if (atom.body && atom.toLatex) {\n                    expr.ast.latex = atom.toLatex();\n                }\n            }\n            expr.index += 1; // Skip the unexpected token, and attempt to continue\n        }\n    }\n\n    atom = expr.atoms[expr.index];\n    if (\n        atom &&\n        (atom.type === 'mord' ||\n            atom.type === 'surd' ||\n            atom.type === 'mop' ||\n            atom.type === 'mopen' ||\n            atom.type === 'sizeddelim' ||\n            atom.type === 'leftright')\n    ) {\n        if (atom.type === 'sizeddelim') {\n            for (const d in RIGHT_DELIM) {\n                if (atom.delim === RIGHT_DELIM[d]) {\n                    // This is (most likely) a closing delim, exit.\n                    // There are ambiguous cases, for example |x|y|z|.\n                    expr.index += 1;\n                    return expr;\n                }\n            }\n        }\n        if ((atom.type === 'mord' || atom.type === 'mop') && isOperator(atom)) {\n            // It's actually an operator\n            return expr;\n        }\n        const lhs = expr.ast;\n        expr.ast = {};\n        expr = parsePrimary(expr, options);\n        if (expr?.ast && lhs) {\n            if (\n                (isFunction(lhs.fn) && typeof lhs.arg === 'undefined') ||\n                (isArray(lhs.arg) && lhs.arg.length === 0)\n            ) {\n                // A function with no arguments followed by a list ->\n                // the list becomes the argument to the function\n                if (expr.ast.fn === 'list2' || expr.ast.fn === 'list') {\n                    expr.ast = wrapFn(lhs.fn, expr.ast.arg);\n                } else {\n                    // A function \"f(x)\" or \"√x\" followed by something else:\n                    // implicit multiply\n                    expr.ast = wrapFn('multiply', lhs, expr.ast);\n                }\n            } else {\n                // Invisible times, e.g. '2x'\n                if (expr.ast.fn === 'multiply') {\n                    expr.ast.arg.unshift(lhs);\n                } else if (\n                    numberIm(lhs) === 0 &&\n                    numberRe(lhs) !== 0 &&\n                    numberIm(expr.ast) === 1 &&\n                    numberRe(expr.ast) === 0\n                ) {\n                    // Imaginary number, i.e. \"3i\"\n                    expr.ast = wrapNum({ im: numberRe(lhs).toString() });\n                } else {\n                    expr.ast = wrapFn('multiply', lhs, expr.ast);\n                }\n            }\n        } else {\n            expr.ast = lhs;\n        }\n    }\n\n    return expr;\n}\n\n/**\n * Given an atom or an array of atoms, return their AST representation as\n * an object.\n * @param {object} expr An expressions, including expr.atoms, expr.index,\n * expr.minPrec the minimum precedence that this parser should parse\n * before returning; expr.lhs (optional); expr.ast, the resulting AST.\n * @return {object} the expr object, updated\n * @private\n */\nfunction parseExpression(expr: ParseState, options: MathJsonLatexOptions) {\n    expr.index = expr.index || 0;\n    expr.ast = undefined;\n    if (expr.atoms.length === 0 || expr.index >= expr.atoms.length) return expr;\n    expr.minPrec = expr.minPrec || 0;\n\n    let lhs = parsePrimary(expr, options).ast;\n\n    let done = false;\n    const minPrec = expr.minPrec;\n    while (!done) {\n        const atom = expr.atoms[expr.index];\n        const digraph = parseDigraph(expr);\n        done = !atom || atom.mode === 'text' || (!digraph && !isOperator(atom));\n        let prec, assoc;\n        if (!done) {\n            [prec, assoc] = digraph\n                ? [getPrecedence(digraph), getAssociativity(digraph)]\n                : opPrec(atom);\n            done = prec < minPrec;\n        }\n        if (!done) {\n            const opName = digraph || getCanonicalName(getString(atom));\n            if (assoc === 'left') {\n                expr.minPrec = prec + 1;\n            } else {\n                expr.minPrec = prec;\n            }\n            expr.index += 1;\n            if (opName === '|') {\n                if (\n                    typeof atom.subscript !== 'undefined' ||\n                    (expr.atoms[expr.index] &&\n                        typeof expr.atoms[expr.index].subscript !==\n                            'undefined' &&\n                        expr.atoms[expr.index].type === 'msubsup')\n                ) {\n                    // Bind is a special function. It doesn't have a rhs, and\n                    // its argument is a subscript.\n                    expr.ast = {};\n                    const subArg = parseSupsub(expr, options).ast.sub;\n                    lhs = wrapFn('bind', lhs);\n                    if (subArg && subArg.fn === 'equal' && lhs.arg) {\n                        // This is a subscript of the form \"x=...\"\n                        lhs.arg.push(getArg(subArg, 0));\n                        lhs.arg.push(getArg(subArg, 1));\n                    } else if (\n                        subArg &&\n                        lhs.arg &&\n                        (subArg.fn === 'list' || subArg.fn === 'list2')\n                    ) {\n                        // Form: \"x=0;n=3;z=5\"\n                        let currentSym = { sym: 'x' };\n                        for (let i = 0; i < subArg.arg.length; i++) {\n                            if (subArg.arg[i].fn === 'equal') {\n                                currentSym = getArg(subArg.arg[i], 0);\n                                lhs.arg.push(currentSym);\n                                lhs.arg.push(getArg(subArg.arg[i], 1));\n                            } else {\n                                lhs.arg.push(currentSym);\n                                lhs.arg.push(subArg.arg[i]);\n                            }\n                        }\n                    } else if (subArg) {\n                        // Default identifier if none provided\n                        lhs.arg.push({ sym: 'x' });\n                        lhs.arg.push(subArg);\n                    }\n                } else {\n                    // That was a \"|\", but not with a subscript after, so\n                    // it's the end of the expression, might be a right fence.\n                    done = true;\n                }\n            } else {\n                const rhs = parseExpression(expr, options).ast;\n\n                // Some operators (',' and ';' for example) convert into a function\n                // even if there's only two arguments. They're super associative...\n                let fn = SUPER_ASSOCIATIVE_FUNCTION[opName];\n                if (fn && lhs && lhs.fn !== fn) {\n                    // Only promote them if the lhs is not already the same function.\n                    // If it is, we'll combine it below.\n                    lhs = wrapFn(fn, lhs);\n                }\n\n                // Promote subtraction to an addition\n                if (opName === '-') {\n                    if (lhs?.arg && lhs.fn === 'add') {\n                        // add(x,y) - z -> add(x, y, -z)\n                        if (rhs !== undefined) lhs.arg.push(negate(rhs));\n                    } else if (lhs && lhs.fn === 'subtract') {\n                        // x-y - z      -> add(x, -y, -z)\n                        lhs = wrapFn(\n                            'add',\n                            getArg(lhs, 0),\n                            negate(getArg(lhs, 1)),\n                            negate(rhs)\n                        );\n                    } else if (\n                        isNumber(lhs) &&\n                        !hasSup(lhs) &&\n                        isNumber(rhs) &&\n                        !hasSup(rhs) &&\n                        (typeof rhs.num.re === 'undefined' ||\n                            rhs.num.re === '0') &&\n                        typeof rhs.num.im !== 'undefined'\n                    ) {\n                        lhs = {\n                            num: {\n                                re: lhs.num,\n                                im: (-parseFloat(rhs.num.im)).toString(),\n                            },\n                        };\n                    } else {\n                        lhs = wrapFn('subtract', lhs, rhs);\n                    }\n                } else {\n                    // Is there a function (e.g. 'add') implementing the\n                    // associative version of this operator (e.g. '+')?\n                    fn = ASSOCIATIVE_FUNCTION[opName];\n                    if (fn === 'add' && lhs && lhs.fn === 'subtract') {\n                        // subtract(x, y) + z -> add(x, -y, z)\n                        lhs = wrapFn(\n                            'add',\n                            getArg(lhs, 0),\n                            negate(getArg(lhs, 1)),\n                            rhs\n                        );\n                    } else if (fn && lhs && lhs.fn === fn && !hasSup(lhs)) {\n                        // add(x,y) + z -> add(x, y, z)\n                        if (typeof rhs !== 'undefined') {\n                            if (rhs.fn === fn && !hasSup(rhs) && rhs.arg) {\n                                // add(x, y) = add (a, b)\n                                lhs.arg = [...lhs.arg, ...rhs.arg];\n                            } else if (lhs.arg) {\n                                lhs.arg.push(rhs);\n                            }\n                        }\n                    } else if (fn && rhs && rhs.arg && rhs.fn === fn) {\n                        // x =    y = z -> equal(x, y, z)\n                        rhs.arg.unshift(lhs);\n                        lhs = rhs;\n                    } else if (\n                        fn === 'multiply' &&\n                        isNumber(lhs) &&\n                        !hasSup(lhs) &&\n                        rhs &&\n                        asMachineNumber(rhs) === 10 &&\n                        isNumber(rhs.sup)\n                    ) {\n                        // n * 10^m\n                        lhs = wrapNum(\n                            asMachineNumber(lhs) *\n                                Math.pow(10, asMachineNumber(rhs.sup))\n                        );\n                    } else if (\n                        fn === 'add' &&\n                        isNumber(lhs) &&\n                        !hasSup(lhs) &&\n                        rhs &&\n                        numberIm(rhs) !== 0 &&\n                        !hasSup(rhs)\n                    ) {\n                        lhs = {\n                            num: {\n                                re: lhs.num,\n                                im: rhs.num.im,\n                            },\n                        };\n                    } else {\n                        lhs = wrapFn(fn || OP_NAME[opName] || opName, lhs, rhs);\n                    }\n                }\n            }\n        }\n    }\n    expr.ast = lhs;\n    return expr;\n}\n\n/**\n * Return a string escaped as necessary to comply with the JSON format\n * @param {string} s\n * @return {string}\n * @private\n */\nfunction escapeText(s) {\n    return s\n        .replace(/[\\\\]/g, '\\\\\\\\')\n        .replace(/[\"]/g, '\\\\\"')\n        .replace(/[\\b]/g, '\\\\b')\n        .replace(/[\\f]/g, '\\\\f')\n        .replace(/[\\n]/g, '\\\\n')\n        .replace(/[\\r]/g, '\\\\r')\n        .replace(/[\\t]/g, '\\\\t');\n}\n\n/**\n * Return an AST representation of a single atom\n *\n */\nexport function atomToMathJson(\n    atom: Atom,\n    options: {\n        precision?: number;\n        decimalMarker?: string;\n        groupSeparator?: string;\n        product?: string;\n        exponentProduct?: string;\n        exponentMarker?: string;\n        arcSeparator?: string;\n        scientificNotation?: 'auto' | 'engineering' | 'on';\n        beginRepeatingDigits?: string;\n        endRepeatingDigits?: string;\n        macros?: any;\n    }\n): MathJson {\n    const MATH_VARIANTS = {\n        'double-struck': 'double-struck',\n        calligraphic: 'script',\n        script: 'script',\n        fraktur: 'fraktur',\n        'sans-serif': 'sans-serif',\n        monospace: 'monospace',\n    };\n    // TODO: See https://www.w3.org/TR/MathML2/chapter6.html#chars.letter-like-tables\n\n    let result: MathJsonExpression = {};\n    let sym = '';\n    let m;\n    let lhs, rhs;\n    let variant =\n        MATH_VARIANTS[\n            atom.variant +\n                (!atom.variantStyle || atom.variantStyle === 'up'\n                    ? ''\n                    : '-' + atom.variantStyle)\n        ];\n    let variantSym;\n\n    let style = '';\n    if (atom.fontSeries === 'b') style += 'bold';\n    if (atom.fontShape === 'it') style += 'italic';\n\n    const command = atom.symbol;\n    switch (atom.type) {\n        case 'root':\n        case 'group':\n            // Macros appear as group as well. Handle some of them.\n            if (atom.symbol && atom.symbol.startsWith('\\\\nicefrac')) {\n                m = atom.symbol.slice(9).match(/({.*}|[^}])({.*}|[^}])/);\n                if (m) {\n                    if (m[1].length === 1) {\n                        lhs = m[1];\n                    } else {\n                        lhs = m[1].substr(1, m[1].length - 2);\n                    }\n                    lhs = parseString(lhs, 'math', null, options.macros);\n\n                    if (m[2].length === 1) {\n                        rhs = m[2];\n                    } else {\n                        rhs = m[2].substr(1, m[2].length - 2);\n                    }\n                    rhs = parseString(rhs, 'math', null, options.macros);\n\n                    result = wrapFn(\n                        'divide',\n                        parse(lhs, options),\n                        parse(rhs, options)\n                    );\n                } else {\n                    result = { fn: 'divide' };\n                }\n            } else {\n                result = { group: parse(atom.body as Atom[], options) };\n            }\n            break;\n\n        case 'genfrac':\n            // If there's no denominator, or a placeholder, use \"1\" as the value\n            result = wrapFn(\n                'divide',\n                parse(atom.numer, options),\n                atom.denom &&\n                    atom.denom[0] &&\n                    atom.denom[0].type === 'placeholder'\n                    ? wrapNum(1)\n                    : parse(atom.denom, options)\n            );\n            break;\n\n        case 'surd':\n            if (atom.index) {\n                result = wrapFn(\n                    'pow',\n                    parse(atom.body as Atom[], options),\n                    wrapFn('divide', wrapNum(1), parse(atom.index, options))\n                );\n            } else {\n                result = wrapFn('sqrt', parse(atom.body as Atom[], options));\n            }\n            break;\n\n        case 'rule':\n            break;\n\n        // case 'line':\n        case 'overlap':\n            // case 'accent':\n            break;\n\n        case 'overunder':\n            break;\n\n        case 'mord':\n        case 'textord':\n        case 'mbin':\n            // Check to see if it's a \\char command\n            m = !command\n                ? undefined\n                : command.match(/[{]?\\\\char\"([0-9abcdefABCDEF]*)[}]?/);\n            if (m) {\n                sym = String.fromCodePoint(parseInt(m[1], 16));\n            } else {\n                sym = getCanonicalName(getString(atom));\n                if (sym.length > 0 && sym.charAt(0) === '\\\\') {\n                    // This is an identifier with no special handling.\n                    // Use the Unicode value if outside ASCII range\n                    if (typeof atom.body === 'string') {\n                        // TODO: consider making this an option?\n                        // if (atom.body.charCodeAt(0) > 255) {\n                        //     sym = '&#x' + ('000000' +\n                        //         atom.body.charCodeAt(0).toString(16)).substr(-4) + ';';\n                        // } else {\n                        sym = atom.body;\n                        // }\n                    }\n                }\n            }\n            variantSym = escapeText(mathVariantToUnicode(sym, variant, style));\n            if (variantSym !== sym) {\n                // If there's a specific Unicode character matching this one\n                // no need to record a variant.\n                result = { sym: variantSym };\n                variant = 'normal';\n            } else {\n                result = { sym: sym };\n            }\n            break;\n\n        // case 'mpunct':\n        //     result = '<mo separator=\"true\">' + command + '</mo>';\n        //     break;\n\n        case 'minner':\n            break;\n\n        case 'mop':\n            break;\n\n        case 'box':\n            result = parse(atom.body as Atom[], options);\n            break;\n\n        case 'enclose':\n            // result = '<menclose notation=\"';\n            // for (const notation in atom.notation) {\n            //     if (Object.prototype.hasOwnProperty.call(atom.notation, notation) &&\n            //         atom.notation[notation]) {\n            //         result += sep + notation;\n            //         sep = ' ';\n            //     }\n            // }\n            // result += '\">' + toAST(atom.body).mathML + '</menclose>';\n            break;\n\n        case 'array':\n            if (atom.environmentName === 'cardinality') {\n                // @revisit... It's an environment, but not an array...?\n                result = wrapFn(\n                    'card',\n                    parse((atom.array as unknown) as Atom[], options)\n                );\n            } else if (\n                /array|matrix|pmatrix|bmatrix/.test(atom.environmentName)\n            ) {\n                result = { fn: 'array', args: [] };\n                for (const row of atom.array) {\n                    result.args.push(row.map((cell) => parse(cell, options)));\n                }\n            } else if (atom.environmentName === 'cases') {\n                result = { fn: 'cases', args: [] };\n                for (const row of atom.array) {\n                    if (row[0]) {\n                        const statement = [];\n                        statement.push(parse(row[0], options));\n                        let condition = parse(row[1], options);\n                        if (condition) {\n                            if (condition.fn === 'text' && condition.arg) {\n                                if (\n                                    /^(if|when|for)$/i.test(\n                                        condition.arg[0].trim()\n                                    )\n                                ) {\n                                    condition = condition.arg.filter(\n                                        (x) => typeof x !== 'string'\n                                    );\n                                }\n                            }\n                        }\n\n                        statement.push(condition ?? {});\n                        result.args.push(statement);\n                    }\n                }\n            }\n            break;\n\n        case 'spacing':\n        case 'space':\n        case 'mathstyle':\n            break;\n        default:\n            result = undefined;\n            console.warn(\n                'Unhandled atom \"' +\n                    atom.type +\n                    '\" in \"' +\n                    (atom.symbol || atom.body) +\n                    '\"'\n            );\n    }\n\n    if (result && variant && variant !== 'normal') {\n        result.variant = variant;\n    }\n\n    if (result && typeof atom.cssClass === 'string') {\n        result.class = atom.cssClass;\n    }\n    if (result && typeof atom.cssId === 'string') {\n        result.id = atom.cssId;\n    }\n\n    return result;\n}\n\nfunction filterPresentationAtoms(\n    atoms: Atom | Atom[] | Atom[][] | Atom[][][]\n): Atom[] {\n    if (!atoms) return [];\n    let result;\n    if (isArray(atoms)) {\n        result = [];\n        for (const atom of atoms) {\n            const filter = filterPresentationAtoms(atom);\n            result = result.concat(filter);\n        }\n    } else {\n        if (atoms.type === 'spacing' || atoms.type === 'first') {\n            return [];\n        } else if (atoms.type === 'box') {\n            result = filterPresentationAtoms(atoms.body as Atom[]);\n        } else {\n            if (atoms.body && isArray(atoms.body)) {\n                atoms.body = filterPresentationAtoms(atoms.body);\n            }\n            if (atoms.superscript && isArray(atoms.superscript)) {\n                atoms.superscript = filterPresentationAtoms(atoms.superscript);\n            }\n            if (atoms.subscript && isArray(atoms.subscript)) {\n                atoms.subscript = filterPresentationAtoms(atoms.subscript);\n            }\n            if (atoms.index && isArray(atoms.index)) {\n                atoms.index = filterPresentationAtoms(atoms.index);\n            }\n            if (atoms.denom && isArray(atoms.denom)) {\n                atoms.denom = filterPresentationAtoms(atoms.denom);\n            }\n            if (atoms.numer && isArray(atoms.numer)) {\n                atoms.numer = filterPresentationAtoms(atoms.numer);\n            }\n            if (atoms.array && isArray(atoms.array)) {\n                atoms.array = atoms.array.map((row) =>\n                    row.map((cell) => filterPresentationAtoms(cell))\n                );\n            }\n            result = [atoms];\n        }\n    }\n    return result;\n}\n\n/**\n * Parse a sequence of text zone and math zones:\n * <sentence> := ((<text>) <expression>)+\n */\nfunction parseSentence(\n    expr: ParseState,\n    options?: MathJsonLatexOptions\n): MathJson {\n    expr.index = expr.index || 0;\n    expr.ast = undefined;\n\n    const zones = [];\n    // Iterate while we have atoms to look at\n    while (expr.atoms[expr.index]) {\n        if (expr.atoms[expr.index].mode === 'text') {\n            // Text mode atom...\n            let text = '';\n            while (\n                expr.atoms[expr.index] &&\n                expr.atoms[expr.index].mode === 'text'\n            ) {\n                text += expr.atoms[expr.index].body;\n                expr.index += 1;\n            }\n            zones.push(wrapFn('text', text));\n        } else {\n            const z = parseExpression(expr, options).ast;\n            // Something went wrong in parsing the expression...\n            if (!z) return undefined;\n            zones.push(z);\n        }\n    }\n\n    if (zones.length > 1) {\n        return wrapFn('sequence', ...zones);\n    }\n\n    return zones[0] || undefined;\n}\n\nfunction parse(atoms: Atom | Atom[], options?: MathJsonLatexOptions): MathJson {\n    return parseSentence({ atoms: filterPresentationAtoms(atoms) }, options);\n}\n\nexport function atomtoMathJson(\n    atoms: Atom | Atom[],\n    options?: MathJsonLatexOptions\n): MathJson {\n    return parse(atoms, options);\n}\n\n/**\n *\n * @param {string} fence - The fence to wrap around the arguments\n * @return {string} - A string wrapped in the fence\n */\nfunction wrapFence(fence: string, ...args): string {\n    fence = fence || '.. ';\n    let result = '';\n    if (args.length > 0) {\n        if (fence[0] !== '.') result += fence[0];\n        let sep = '';\n        for (const arg of args) {\n            result += sep + arg;\n            sep = fence[2];\n        }\n        if (fence[1] !== '.') result += fence[1];\n    }\n\n    return result;\n}\n\n/**\n * Return a formatted mantissa:\n * 1234567 -> 123 456 7...\n * 1233333 -> 12(3)\n * @param {string} m\n * @param {Object.<string, any>} config\n * @private\n */\nfunction formatMantissa(m, config) {\n    const originalLength = m.length;\n    // The last digit may have been rounded, if it exceeds the precison,\n    // which could throw off the\n    // repeating pattern detection. Ignore   it.\n    m = m.substr(0, config.precision - 2);\n\n    for (let i = 0; i < m.length - 16; i++) {\n        // Offset is the part of the mantissa that is not repeating\n        const offset = m.substr(0, i);\n        // Try to find a repeating pattern of length j\n        for (let j = 0; j < 17; j++) {\n            const cycle = m.substr(i, j + 1);\n            const times = Math.floor((m.length - offset.length) / cycle.length);\n            if (times > 1) {\n                if ((offset + cycle.repeat(times + 1)).startsWith(m)) {\n                    // We've found a repeating pattern!\n                    if (cycle === '0') {\n                        return offset.replace(\n                            /(\\d{3})/g,\n                            '$1' + config.groupSeparator\n                        );\n                    }\n                    return (\n                        offset.replace(\n                            /(\\d{3})/g,\n                            '$1' + config.groupSeparator\n                        ) +\n                        config.beginRepeatingDigits +\n                        cycle.replace(\n                            /(\\d{3})/g,\n                            '$1' + config.groupSeparator\n                        ) +\n                        config.endRepeatingDigits\n                    );\n                }\n            }\n        }\n    }\n    if (originalLength !== m.length) {\n        m += '\\\\ldots';\n    }\n    return m.replace(/(\\d{3})/g, '$1' + config.groupSeparator);\n}\n\nfunction parseFloatToPrecision(num) {\n    return parseFloat(parseFloat(num).toPrecision(15));\n}\n\n/**\n *\n * @param num - A number, represented as a string (e.g. \"-12.45\"\n *  particularly useful for arbitrary precision numbers) or a number (-12.45)\n * @return A LaTeX representation of the AST\n */\nfunction numberAsLatex(\n    num: string | number,\n    config: MathJsonLatexOptions\n): string {\n    let result = '';\n    let value: number;\n\n    if (typeof config.precision === 'number') {\n        if (typeof num === 'number') {\n            value = parseFloatToPrecision(num);\n        } else {\n            let sign = '';\n            let exponent = '';\n            if (num[0] === '-') {\n                sign = '-';\n                num = num.substr(1);\n            } else if (num[0] === '+') {\n                num = num.substr(1);\n            }\n            if (num.indexOf('.') >= 0) {\n                const m = num.match(/(\\d*).(\\d*)([e|E]([-+]?[0-9]*))?/);\n                const base = m[1];\n                const mantissa = m[2].substring(\n                    0,\n                    Math.min(config.precision - base.length, m[2].length)\n                );\n                exponent = m[4] || '';\n\n                if (base === '0') {\n                    let p = 0; // Index of the first non-zero digit after the decimal\n                    while (mantissa[p] === '0' && p < mantissa.length) {\n                        p += 1;\n                    }\n                    let r = '';\n                    if (p <= 4) {\n                        r = '0' + config.decimalMarker;\n                        r += mantissa.substr(0, p);\n                        r += formatMantissa(num.substr(r.length), config);\n                    } else if (p + 1 >= config.precision) {\n                        r = '0';\n                        sign = '';\n                    } else {\n                        r = num[p];\n                        const f = formatMantissa(num.substr(p + 1), config);\n                        if (f) {\n                            r += config.decimalMarker + f;\n                        }\n                    }\n                    if (r !== '0') {\n                        if (\n                            num.length - 1 > config.precision &&\n                            !r.endsWith('}') &&\n                            !r.endsWith('\\\\ldots')\n                        ) {\n                            r += '\\\\ldots';\n                        }\n                        if (p > 4) {\n                            r += config.exponentProduct;\n                            if (config.exponentMarker) {\n                                r += config.exponentMarker + (1 - p).toString();\n                            } else {\n                                r += '10^{' + (1 - p).toString() + '}';\n                            }\n                        }\n                    }\n                    num = r;\n                } else {\n                    num = base.replace(\n                        /\\B(?=(\\d{3})+(?!\\d))/g,\n                        config.groupSeparator\n                    );\n                    const f = formatMantissa(mantissa, config);\n                    if (f) {\n                        num += config.decimalMarker + f;\n                        // if (num.length - 1 > config.precision && !num.endsWith('}') && !num.endsWith('\\\\ldots')) {\n                        //     num += '\\\\ldots';\n                        // }\n                    }\n                }\n            } else if (num.length > config.precision) {\n                const len = num.length;\n                let r = num[0];\n                const f = formatMantissa(num.substr(2), config);\n                if (f) {\n                    r += config.decimalMarker + f;\n                    if (r[r.length - 1] !== '}') {\n                        r += '\\\\ldots';\n                    }\n                }\n                if (r !== '1') {\n                    r += config.exponentProduct;\n                } else {\n                    r = '';\n                }\n                if (config.exponentMarker) {\n                    r += config.exponentMarker + (len - 2).toString();\n                } else {\n                    r += '10^{' + (len - 2).toString() + '}';\n                }\n                num = r;\n            } else {\n                num = num.replace(\n                    /\\B(?=(\\d{3})+(?!\\d))/g,\n                    config.groupSeparator\n                );\n            }\n\n            if (exponent) {\n                // There is an exponent...\n                if (config.exponentMarker) {\n                    exponent = config.exponentMarker + exponent;\n                } else {\n                    exponent =\n                        config.exponentProduct + ' 10^{' + exponent + '}';\n                }\n            }\n\n            return sign + num + exponent;\n        }\n    }\n    if (config.scientificNotation === 'engineering') {\n        // Ensure the exponent is a multiple of 3\n        if (value === 0) {\n            result = '0';\n        } else {\n            const y = Math.abs(value);\n            let exponent: number = Math.round(Math.log10(y));\n            exponent = exponent - (exponent % 3);\n            if (y < 1000) exponent = 0;\n            const mantissa = y / Math.pow(10, exponent);\n            let mantissaString = '';\n            const m = mantissa.toString().match(/^(.*)\\.(.*)$/);\n            if (m?.[1] && m[2]) {\n                mantissaString = m[1] + config.decimalMarker + m[2];\n            }\n            if (config.groupSeparator) {\n                mantissaString = formatMantissa(\n                    mantissa.toExponential(),\n                    config\n                );\n            }\n            let exponentString = '';\n            if (exponent === 0) {\n                exponentString = '';\n            } else if (config.exponentMarker) {\n                exponentString = config.exponentMarker + exponent;\n            } else {\n                exponentString =\n                    config.exponentProduct + ' 10^{' + exponent + '}';\n            }\n            result = (value < 0 ? '-' : '') + mantissaString + exponentString;\n        }\n    } else {\n        const valString = typeof num === 'string' ? num : num.toString();\n        let m = valString.match(/^(.*)[e|E]([-+]?[0-9]*)$/i);\n        let base, exponent, mantissa;\n        base = valString;\n        mantissa = '';\n        if (m?.[1] && m[2]) {\n            // There is an exponent...\n            base = m[1];\n            if (config.exponentMarker) {\n                exponent = config.exponentMarker + m[2];\n            } else {\n                exponent = config.exponentProduct + ' 10^{' + m[2] + '}';\n            }\n        }\n        m = base.match(/^(.*)\\.(.*)$/);\n        if (m?.[1] && m[2]) {\n            base = m[1];\n            mantissa = m[2];\n        }\n        if (config.groupSeparator) {\n            base = base.replace(/\\B(?=(\\d{3})+(?!\\d))/g, config.groupSeparator);\n            mantissa = formatMantissa(mantissa, config);\n        }\n        if (mantissa) mantissa = config.decimalMarker + mantissa;\n        result = base + mantissa + (exponent || '');\n    }\n    return result;\n}\n\n/**\n *\n * @param {object} ast - Abstract Syntax Tree object (in canonical form)\n * @return {string} A LaTeX representation of the AST\n */\nexport function jsonToLatex(\n    ast: MathJson,\n    options?: MathJsonLatexOptions\n): string {\n    const config = Object.assign(\n        {\n            precision: 14,\n            decimalMarker: '.',\n            groupSeparator: '\\\\, ',\n            product: '\\\\cdot ', // \\\\times, \\\\,\n            exponentProduct: '\\\\cdot ',\n            exponentMarker: '',\n            arcSeparator: '\\\\,',\n            scientificNotation: 'auto', // 'engineering', 'auto', 'on'\n            beginRepeatingDigits: '\\\\overline{',\n            endRepeatingDigits: '}',\n        },\n        options\n    );\n\n    let result = '';\n\n    if (ast === undefined) return '';\n    if (typeof ast === 'string') {\n        result = ast;\n    } else if (ast.latex) {\n        // If ast.latex key is present, use it to render the element\n        result = ast.latex;\n    } else if (isNumber(ast)) {\n        const val = asMachineNumber(ast);\n        if (val === -Infinity) {\n            result = '-\\\\infty ';\n        } else if (val === Infinity) {\n            result = '\\\\infty ';\n        } else if (\n            typeof ast.num === 'object' &&\n            (typeof ast.num.re === 'string' || typeof ast.num.im === 'string')\n        ) {\n            const re = numberRe(ast);\n            const im = numberIm(ast);\n            if (isNaN(re) || isNaN(im)) {\n                result = '\\\\text{NaN}';\n            } else if (\n                Math.abs(im) <= Number.EPSILON &&\n                Math.abs(re) <= Number.EPSILON\n            ) {\n                result = '0';\n            } else {\n                if (Math.abs(re) > Number.EPSILON) {\n                    result = numberAsLatex(re, config);\n                }\n                if (Math.abs(im) > Number.EPSILON) {\n                    if (Math.abs(re) > Number.EPSILON) {\n                        result += im > 0 ? '+' : '';\n                    }\n                    result +=\n                        (Math.abs(im) !== 1 ? numberAsLatex(im, config) : '') +\n                        '\\\\imaginaryI ';\n                }\n            }\n        } else if (isNaN(val)) {\n            result = '\\\\text{NaN}';\n        } else {\n            result = numberAsLatex(ast.num, config);\n        }\n        if (hasSup(ast)) result += '^{' + jsonToLatex(ast.sup, config) + '}';\n        if (hasSub(ast)) result += '_{' + jsonToLatex(ast.sub, config) + '}';\n    } else if (ast.group) {\n        result = jsonToLatex(ast.group, config);\n        if (!isNumber(ast.group) && !asSymbol(ast.group)) {\n            result = wrapFence(ast.fence || '(),', result);\n        } else if (numberIm(ast.group) !== 0) {\n            result = wrapFence(ast.fence || '(),', result);\n        }\n        if (hasSup(ast)) result += '^{' + jsonToLatex(ast.sup, config) + '}';\n        if (hasSub(ast)) result += '_{' + jsonToLatex(ast.sub, config) + '}';\n    } else if (ast.fn) {\n        if (ast.fn === 'bind') {\n            result = jsonToLatex(getArg(ast, 0), config) + '|_{';\n            if (ast.arg && ast.arg.length === 2) {\n                result += jsonToLatex(getArg(ast, 1));\n            } else {\n                let sep = '';\n                for (let i = 1; i < ast.arg.length; i += 2) {\n                    result +=\n                        sep +\n                        jsonToLatex(getArg(ast, i)) +\n                        ' = ' +\n                        jsonToLatex(getArg(ast, i + 1));\n                    sep = ', ';\n                }\n            }\n            result += '}';\n        } else if (ast.fn === 'divide') {\n            result =\n                '\\\\frac{' +\n                jsonToLatex(getArg(ast, 0), config) +\n                '}{' +\n                jsonToLatex(getArg(ast, 1), config) +\n                '}';\n        } else if (ast.fn === 'negate') {\n            result = '-' + jsonToLatex(getArg(ast, 0), config);\n        } else if (ast.fn === 'subtract') {\n            result =\n                jsonToLatex(getArg(ast, 0), config) +\n                ' - ' +\n                jsonToLatex(getArg(ast, 1), config);\n        } else if (\n            (ast.fn === 'add' || ast.fn === 'multiply') &&\n            isArray(ast.arg)\n        ) {\n            const a = [];\n            for (const exp of ast.arg) {\n                if (exp.fn === 'add' || exp.fn === 'subtract') {\n                    a.push(wrapFence('() ', jsonToLatex(exp, config)));\n                } else if (isComplexWithRealAndImaginary(exp)) {\n                    // Complex numbers that have both a real and imaginary part\n                    // should be wrapped in parentheses\n                    a.push(wrapFence('() ', jsonToLatex(exp, config)));\n                } else if (\n                    hasSup(ast) &&\n                    !(numberIm(exp) === 0 || numberIm(exp) === 1)\n                ) {\n                    // Wrap with parentheses if there's an exponent\n                    // and the imaginary part is neither 0 nor 1\n                    a.push(wrapFence('() ', jsonToLatex(exp, config)));\n                } else {\n                    a.push(jsonToLatex(exp, config));\n                }\n            }\n            if (ast.fn === 'multiply') {\n                if (\n                    ast.arg &&\n                    ast.arg.length === 2 &&\n                    (isNumber(ast.arg[0]) || ast.arg[0].fn === 'divide') &&\n                    (!isNumber(ast.arg[1]) ||\n                        (numberRe(ast.arg[1]) === 0 &&\n                            numberIm(ast.arg[1]) === 1))\n                ) {\n                    // Invisible times:\n                    // (number or fraction) * not a number\n                    // or (number or fraction) * imaginary unit\n                    result = a[0] + a[1];\n                } else {\n                    result = a.join(' \\\\times ');\n                }\n            } else {\n                // Addition (and subtraction)\n                if (ast.arg && ast.arg.length === 1) {\n                    if (\n                        ast.arg[0].fn === 'negate' ||\n                        (isNumber(ast.arg[0]) &&\n                            asMachineNumber(ast.arg[0]) < 0)\n                    ) {\n                        // a[0] has a negative sign\n                        result = a[0];\n                    } else {\n                        // Single non-negative element, add a '+' in front\n                        result = '+' + a[0];\n                    }\n                } else {\n                    result = a[0];\n                    for (let i = 1; i < ast.arg.length; i++) {\n                        if (\n                            ast.arg[i].fn === 'negate' ||\n                            (isNumber(ast.arg[i]) &&\n                                asMachineNumber(ast.arg[i]) < 0)\n                        ) {\n                            // a[i] already has a negative sign, so we can do an\n                            // implicit add\n                            result += a[i];\n                        } else {\n                            result += ' + ' + a[i];\n                        }\n                    }\n                }\n            }\n        } else if (ast.fn === 'list' || ast.fn === 'list2') {\n            const a = [];\n            if (ast.arg) {\n                for (const exp of ast.arg) {\n                    a.push(jsonToLatex(exp, config));\n                }\n            }\n            result = a.join(ast.fn === 'list2' ? '; ' : ', ');\n        } else if (ast.fn === 'sequence') {\n            result = joinLatex(ast.arg.map((x) => jsonToLatex(x, config)));\n        } else if (ast.fn === 'text') {\n            result = '\\\\text{' + (ast.arg[0] || '') + '}';\n        } else if (\n            ast.fn === 'pow' &&\n            isArray(ast.arg) &&\n            ast.arg.length >= 2\n        ) {\n            result = jsonToLatex(getArg(ast, 0), config);\n            if (!isNumber(getArg(ast, 0)) && !asSymbol(getArg(ast, 0))) {\n                result = wrapFence(ast.fence || '(),', result);\n            }\n\n            result += '^{' + jsonToLatex(getArg(ast, 1), config) + '}';\n        } else if (ast.fn === 'equal' && ast.arg && ast.arg.length > 2) {\n            result = ast.arg.map((x) => jsonToLatex(x, config)).join(' = ');\n        } else {\n            const fn = getLatexTemplateForFunction(ast.fn);\n            result = fn;\n            let argstring = '';\n            const parenRequired =\n                /%(?![01_^])/.test(fn) &&\n                isArray(ast.arg) &&\n                ast.arg.length > 1;\n            if (parenRequired) {\n                // Parenthesis are required if argument list is longer than 1\n                result += wrapFence(\n                    ast.fence || '(),',\n                    ...ast.arg.map((x) => jsonToLatex(x, config))\n                );\n            } else if (isArray(ast.arg) && ast.arg.length > 0) {\n                // The parenthesis may be optional...\n                const arg0 = jsonToLatex(getArg(ast, 0), config);\n                const arg1 = jsonToLatex(getArg(ast, 1), config);\n                const argsn = [...ast.arg];\n                if (/%0/.test(fn)) {\n                    result = result.replace('%0', arg0);\n                    argsn.shift();\n                }\n                if (/%1/.test(fn)) {\n                    result = result.replace('%1', arg1);\n                    argsn.shift();\n                }\n\n                if (argsn.length > 0) {\n                    argstring = wrapFence(\n                        ast.fence || '(),',\n                        ...argsn.map((x) => jsonToLatex(x, config))\n                    );\n                }\n            } else {\n                // Empty argument list\n                argstring = wrapFence(ast.fence || '(),', '');\n            }\n\n            if (hasSup(ast)) {\n                result = result.replace(\n                    '%^',\n                    '^{' + jsonToLatex(ast.sup, config) + '}'\n                );\n            } else {\n                result = result.replace('%^', '');\n            }\n            if (hasSub(ast)) {\n                result = result.replace(\n                    '%_',\n                    '_{' + jsonToLatex(ast.sub, config) + '}'\n                );\n            } else {\n                result = result.replace('%_', '');\n            }\n\n            // Insert the arguments in the function template (%)\n            result = result.replace(/%(?![01_^])/, argstring);\n            // If there are any placeholders left, remove them\n            result = result.replace('%0', '').replace('%1', '');\n        }\n    } else if (typeof ast.sym === 'string') {\n        result = asSymbol(ast);\n        // Is it a Unicode value?\n        let m = result.match(/^&#x([0-9a-f]+);$/i);\n        if (m?.[1]) {\n            result = String.fromCodePoint(parseInt(m[1], 16));\n        } else {\n            m = result.match(/^&#([0-9]+);$/i);\n            if (m?.[1]) {\n                result = String.fromCodePoint(parseInt(m[1]));\n            }\n        }\n\n        // Is there a variant info attached to it?\n        if (typeof ast.variant === 'string') {\n            const MATH_VARIANTS = {\n                normal: 'mathrm',\n                'double-struck': 'mathbb',\n                bold: 'mathbf',\n                // 'script': 'mathcal',\n                fraktur: 'mathfrak',\n                script: 'mathscr',\n                'sans-serif': 'mathsf',\n                monospace: 'mathtt',\n            };\n            result = '\\\\' + MATH_VARIANTS[ast.variant] + '{' + result + '}';\n        }\n        if (hasSup(ast)) result += '^{' + jsonToLatex(ast.sup, config) + '}';\n        if (hasSub(ast)) result += '_{' + jsonToLatex(ast.sub, config) + '}';\n    } else if (typeof ast.text === 'string') {\n        result = '\\\\text{' + ast.text + '}';\n    }\n\n    // If there was an error attached to this node,\n    // display it on a red background\n    if (typeof ast.error === 'string') {\n        result = '\\\\bbox[#F56165]{' + result + '}';\n    }\n\n    return result;\n}\n","import type { ParseMode, Style } from '../public/core';\nimport type { Keybinding, KeyboardLayoutName } from '../public/config';\nimport type {\n    Mathfield,\n    OutputFormat,\n    InsertOptions,\n} from '../public/mathfield';\n\nimport { Atom, makeRoot } from '../core/atom';\n\nimport { ModelPrivate } from './model';\nimport { applyStyle } from './model-styling';\nimport { delegateKeyboardEvents } from './keyboard';\nimport { UndoRecord, UndoManager } from './undo';\nimport { hidePopover, updatePopoverPosition } from './popover';\nimport { atomToAsciiMath } from './atom-to-ascii-math';\nimport { localize as l10n } from './l10n';\nimport { HAPTIC_FEEDBACK_DURATION, SelectorPrivate, perform } from './commands';\nimport {\n    selectionIsCollapsed,\n    getAnchorStyle,\n    getSelectedAtoms,\n    getAnchorMode,\n} from './model-selection';\nimport { removeSuggestion } from './model-utils';\nimport {\n    commitCommandStringBeforeInsertionPoint,\n    removeCommandString,\n    decorateCommandStringAroundInsertionPoint,\n} from './model-command-mode';\nimport { selectAll } from './model-selection';\nimport { complete } from './autocomplete';\nimport { requestUpdate } from './mathfield-render';\nimport {\n    MathfieldConfigPrivate,\n    update as updateConfig,\n    getDefault as getDefaultConfig,\n    get as getConfig,\n} from './config';\nimport { insert } from './model-insert';\nimport { deleteChar } from './model-delete';\nimport { addRowAfter, addColumnAfter } from './model-array';\nimport { onTypedText, onKeystroke } from './mathfield-keyboard-input';\nimport { render } from './mathfield-render';\n\nimport './mathfield-commands';\nimport './mathfield-styling';\n\nimport {\n    getCaretPosition,\n    getSelectionBounds,\n    getSharedElement,\n    releaseSharedElement,\n    isValidMathfield,\n    on,\n    off,\n} from './mathfield-utils';\n\nimport { onCut, onCopy, onPaste } from './mathfield-clipboard';\nimport { attachButtonHandlers } from './mathfield-buttons';\nimport { onPointerDown } from './mathfield-pointer-input';\nimport {\n    showVirtualKeyboard,\n    hideVirtualKeyboard,\n    switchKeyboardLayer,\n} from './virtual-keyboard-commands';\n\nimport { normalizeKeybindings } from './keybindings';\nimport {\n    setKeyboardLayoutLocale,\n    getActiveKeyboardLayout,\n} from './keyboard-layout';\n\nimport { atomToSpeakableText } from './atom-to-speakable-text';\nimport { atomtoMathJson } from '../addons/math-json';\nimport { atomsToMathML } from '../addons/math-ml';\nimport { updateUndoRedoButtons } from './virtual-keyboard';\n\nexport class MathfieldPrivate implements Mathfield {\n    model: ModelPrivate;\n    config: Required<MathfieldConfigPrivate>;\n\n    private undoManager: UndoManager;\n\n    private blurred: boolean;\n    dirty: boolean; // If true, need to be redrawn\n    pasteInProgress: boolean;\n    smartModeSuppressed: boolean;\n    private resizeTimer: number; // Timer handle\n\n    element: HTMLElement;\n    readonly originalContent: string;\n\n    textarea: HTMLElement;\n    field: HTMLElement;\n    virtualKeyboardToggleDOMNode: HTMLElement;\n    ariaLiveText: HTMLElement;\n    accessibleNode: HTMLElement;\n    popover: HTMLElement;\n\n    keystrokeCaptionVisible: boolean;\n    keystrokeCaption: HTMLElement;\n\n    virtualKeyboardVisible: boolean;\n    virtualKeyboard: HTMLElement;\n\n    keybindings: Keybinding[]; // Normalized keybindings (raw ones in config)\n    keyboardLayout: KeyboardLayoutName;\n\n    keystrokeBuffer: string;\n    keystrokeBufferStates: UndoRecord[];\n    keystrokeBufferResetTimer: number;\n\n    suggestionIndex: number;\n\n    mode: ParseMode;\n    style: Style;\n\n    readonly keypressSound: HTMLAudioElement; // @revisit. Is this used? The sounds are in config, no?\n    readonly spacebarKeypressSound: HTMLAudioElement;\n    readonly returnKeypressSound: HTMLAudioElement;\n    readonly deleteKeypressSound: HTMLAudioElement;\n    readonly plonkSound: HTMLAudioElement;\n\n    /**\n     * To create a mathfield, you would typically use {@linkcode makeMathField | MathLive.makeMathField()}\n     * instead of invoking directly this constructor.\n     *\n     *\n     * @param element - The DOM element that this mathfield is attached to.\n     * Note that `element.mathfield` is this object.\n     */\n    constructor(element: HTMLElement, config: MathfieldConfigPrivate) {\n        // Setup default config options\n        this.config = updateConfig(getDefaultConfig(), config);\n\n        this.element = element;\n        element['mathfield'] = this;\n\n        // Save existing content\n        this.originalContent = element.innerHTML;\n        let elementText = this.element.textContent;\n        if (elementText) {\n            elementText = elementText.trim();\n        }\n\n        // Additional elements used for UI.\n        // They are retrieved in order a bit later, so they need to be kept in sync\n        // 1.0/ The field, where the math equation will be displayed\n        // 1.1/ The virtual keyboard toggle\n        // 2/ The popover panel which displays info in command mode\n        // 3/ The keystroke caption panel (option+shift+K)\n        // 4/ The virtual keyboard\n        // 5.0/ The area to stick MathML for screen reading larger exprs (not used right now)\n        //      The for the area is that focus would bounce their and then back triggering the\n        //         screen reader to read it\n        // 5.1/ The aria-live region for announcements\n        let markup = '';\n        if (!this.config.substituteTextArea) {\n            if (/android|ipad|ipod|iphone/i.test(navigator?.userAgent)) {\n                // On Android or iOS, don't use a textarea, which has the side effect of\n                // bringing up the OS virtual keyboard\n                markup += `<span class='ML__textarea'>\n                <span class='ML__textarea__textarea'\n                    tabindex=\"0\" role=\"textbox\"\n                    style='display:inline-block;height:1px;width:1px' >\n                </span>\n            </span>`;\n            } else {\n                markup +=\n                    '<span class=\"ML__textarea\">' +\n                    '<textarea class=\"ML__textarea__textarea\" autocapitalize=\"off\" autocomplete=\"off\" ' +\n                    'autocorrect=\"off\" spellcheck=\"false\" aria-hidden=\"true\" tabindex=\"0\">' +\n                    '</textarea>' +\n                    '</span>';\n            }\n        } else {\n            if (typeof this.config.substituteTextArea === 'string') {\n                markup += this.config.substituteTextArea;\n            } else {\n                // We don't really need this one, but we keep it here so that the\n                // indexes below remain the same whether a substituteTextArea is\n                // provided or not.\n                markup += '<span></span>';\n            }\n        }\n        markup +=\n            '<span class=\"ML__fieldcontainer\">' +\n            '<span class=\"ML__fieldcontainer__field\"></span>';\n\n        // Only display the virtual keyboard toggle if the virtual keyboard mode is\n        // 'manual'\n        if (this.config.virtualKeyboardMode === 'manual') {\n            markup += `<div class=\"ML__virtual-keyboard-toggle\" role=\"button\" data-tooltip=\"${l10n(\n                'tooltip.toggle virtual keyboard'\n            )}\">`;\n            // data-tooltip='Toggle Virtual Keyboard'\n            if (this.config.virtualKeyboardToggleGlyph) {\n                markup += this.config.virtualKeyboardToggleGlyph;\n            } else {\n                markup += `<span style=\"width: 21px; margin-top: 4px;\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z\"/></svg></span>`;\n            }\n            markup += '</div>';\n        } else {\n            markup += '<span ></span>';\n        }\n        markup += '</span>';\n        markup += `\n        <div class=\"sr-only\">\n            <span aria-live=\"assertive\" aria-atomic=\"true\"></span>\n            <span></span>\n        </div>\n    `;\n\n        this.element.innerHTML = this.config.createHTML(markup);\n\n        let iChild = 0; // index of child -- used to make changes below easier\n        if (typeof this.config.substituteTextArea === 'function') {\n            this.textarea = this.config.substituteTextArea();\n        } else {\n            this.textarea = this.element.children[iChild++]\n                .firstElementChild as HTMLElement;\n        }\n        this.field = this.element.children[iChild].children[0] as HTMLElement;\n\n        // Listen to 'wheel' events to scroll (horizontally) the field when it overflows\n        this.field.addEventListener(\n            'wheel',\n            (ev) => {\n                ev.preventDefault();\n                ev.stopPropagation();\n                const wheelDelta =\n                    typeof ev.deltaX === 'undefined' ? ev.detail : -ev.deltaX;\n                if (isFinite(wheelDelta)) {\n                    this.field.scroll({\n                        top: 0,\n                        left: this.field.scrollLeft - wheelDelta * 5,\n                    });\n                }\n            },\n            { passive: false }\n        );\n        this.virtualKeyboardToggleDOMNode = this.element.children[iChild++]\n            .children[1] as HTMLElement;\n        attachButtonHandlers(this, this.virtualKeyboardToggleDOMNode, {\n            default: 'toggleVirtualKeyboard',\n            alt: 'toggleVirtualKeyboardAlt',\n            shift: 'toggleVirtualKeyboardShift',\n        });\n        this.ariaLiveText = this.element.children[iChild]\n            .children[0] as HTMLElement;\n        this.accessibleNode = this.element.children[iChild++]\n            .children[1] as HTMLElement;\n        // Some panels are shared amongst instances of mathfield\n        // (there's a single instance in the document)\n        this.popover = getSharedElement(\n            'mathlive-popover-panel',\n            'ML__popover'\n        );\n        this.keystrokeCaption = getSharedElement(\n            'mathlive-keystroke-caption-panel',\n            'ML__keystroke-caption'\n        );\n        // The keystroke caption panel and the command bar are\n        // initially hidden\n        this.keystrokeCaptionVisible = false;\n        this.virtualKeyboardVisible = false;\n        this.keystrokeBuffer = '';\n        this.keystrokeBufferStates = [];\n        this.keystrokeBufferResetTimer = null;\n        // This index indicates which of the suggestions available to\n        // display in the popover panel\n        this.suggestionIndex = 0;\n        // The input mode (text, math, command)\n        // While getAnchorMode() represent the mode of the current selection,\n        // this.mode is the mode chosen by the user. It indicates the mode the\n        // next character typed will be interpreted in.\n        // It is often identical to getAnchorMode() since changing the selection\n        // changes the mode, but sometimes it is not, for example when a user\n        // enters a mode changing command.\n        this.mode = this.config.defaultMode;\n        this.smartModeSuppressed = false;\n        // Current style (color, weight, italic, etc...)\n        // Reflects the style to be applied on next insertion, if any\n        this.style = {};\n        // Focus/blur state\n        this.blurred = true;\n        on(this.element, 'focus', this);\n        on(this.element, 'blur', this);\n        // Capture clipboard events\n        on(this.textarea, 'cut', this);\n        on(this.textarea, 'copy', this);\n        on(this.textarea, 'paste', this);\n        // Delegate keyboard events\n        delegateKeyboardEvents(this.textarea, {\n            allowDeadKey: () => this.mode === 'text',\n            typedText: (text: string): void => onTypedText(this, text),\n            paste: () => {\n                return onPaste(this);\n            },\n            keystroke: (keystroke, e) => onKeystroke(this, keystroke, e),\n            focus: () => this._onFocus(),\n            blur: () => this._onBlur(),\n        });\n\n        // Delegate mouse and touch events\n        if (window.PointerEvent) {\n            // Use modern pointer events if available\n            on(this.field, 'pointerdown', this);\n        } else {\n            on(this.field, 'touchstart:active mousedown', this);\n        }\n\n        // Request notification for when the window is resized (\n        // or the device switched from portrait to landscape) to adjust\n        // the UI (popover, etc...)\n        on(window, 'resize', this);\n\n        // Setup the model\n        this.model = new ModelPrivate(\n            {\n                mode: this.config.defaultMode,\n                macros: this.config.macros,\n                removeExtraneousParentheses: this.config\n                    .removeExtraneousParentheses,\n            },\n            {\n                onContentDidChange: (_sender: ModelPrivate): void =>\n                    this.config.onContentDidChange(this),\n                onSelectionDidChange: (_sender: ModelPrivate): void =>\n                    this._onSelectionDidChange(),\n                onContentWillChange: (): void =>\n                    this.config.onContentWillChange(this),\n                onSelectionWillChange: (): void =>\n                    this.config.onSelectionWillChange(this),\n                onError: this.config.onError,\n            },\n            {\n                announce: (\n                    _sender: Mathfield,\n                    command,\n                    modelBefore,\n                    atoms\n                ): void =>\n                    this.config.onAnnounce?.(this, command, modelBefore, atoms),\n                moveOut: (_sender, direction): boolean =>\n                    this.config.onMoveOutOf(this, direction),\n                tabOut: (_sender, direction): boolean =>\n                    this.config.onTabOutOf(this, direction),\n            },\n            this\n        );\n\n        // Prepare to manage undo/redo\n        this.undoManager = new UndoManager(this.model);\n\n        // Use the content of the element for the initial value of the mathfield\n        insert(this.model, elementText, {\n            insertionMode: 'replaceAll',\n            selectionMode: 'after',\n            format: 'latex',\n            mode: 'math',\n            suppressChangeNotifications: true,\n            macros: this.config.macros,\n        });\n\n        // Now start recording potentially undoable actions\n        this.undoManager.startRecording();\n        this.undoManager.snapshot(this.config);\n\n        this.model.setListeners({\n            onContentDidChange: (_sender: ModelPrivate) =>\n                this.config.onContentDidChange(this),\n            onSelectionDidChange: (_sender: ModelPrivate) =>\n                this._onSelectionDidChange(),\n            onContentWillChange: () => this.config.onContentWillChange(this),\n            onSelectionWillChange: () =>\n                this.config.onSelectionWillChange(this),\n            onError: this.config.onError,\n        });\n        this.model.setHooks({\n            announce: (_sender: Mathfield, command, modelBefore, atoms) =>\n                this.config.onAnnounce?.(this, command, modelBefore, atoms),\n            moveOut: (_sender, direction) =>\n                this.config.onMoveOutOf(this, direction),\n            tabOut: (_sender, direction) =>\n                this.config.onTabOutOf(this, direction),\n        });\n\n        if (!this.config.locale.startsWith(getActiveKeyboardLayout().locale)) {\n            setKeyboardLayoutLocale(this.config.locale);\n        }\n        this.keybindings = normalizeKeybindings(\n            this.config.keybindings,\n            (e) => {\n                if (typeof this.config.onError === 'function') {\n                    this.config.onError({\n                        code: 'invalid-keybinding',\n                        arg: e.join('\\n'),\n                    });\n                }\n                console.log(e.join('\\n'));\n            }\n        );\n        requestUpdate(this);\n    }\n\n    $setConfig(config: MathfieldConfigPrivate): void {\n        this.config = updateConfig(this.config, config);\n        this.model.setListeners({\n            onContentDidChange: (_sender: ModelPrivate) =>\n                this.config.onContentDidChange(this),\n            onSelectionDidChange: (_sender: ModelPrivate) =>\n                this._onSelectionDidChange(),\n            onContentWillChange: () => this.config.onContentWillChange(this),\n            onSelectionWillChange: () =>\n                this.config.onSelectionWillChange(this),\n            onError: this.config.onError,\n        });\n        this.model.setHooks({\n            announce: (_sender: Mathfield, command, modelBefore, atoms) =>\n                this.config.onAnnounce?.(this, command, modelBefore, atoms),\n            moveOut: (_sender, direction) =>\n                this.config.onMoveOutOf(this, direction),\n            tabOut: (_sender, direction) =>\n                this.config.onTabOutOf(this, direction),\n        });\n\n        if (!this.config.locale.startsWith(getActiveKeyboardLayout().locale)) {\n            setKeyboardLayoutLocale(this.config.locale);\n        }\n        this.keybindings = normalizeKeybindings(\n            this.config.keybindings,\n            (e) => {\n                if (typeof this.config.onError === 'function') {\n                    this.config.onError({\n                        code: 'invalid-keybinding',\n                        arg: e.join('\\n'),\n                    });\n                }\n                console.log(e.join('\\n'));\n            }\n        );\n\n        if (!this.config.readOnly) {\n            this._onBlur();\n        }\n        requestUpdate(this);\n    }\n\n    getConfig(keys: keyof MathfieldConfigPrivate): boolean | number | string;\n    getConfig(keys: string[]): MathfieldConfigPrivate;\n    getConfig(\n        keys: keyof MathfieldConfigPrivate | string[]\n    ): boolean | number | string | MathfieldConfigPrivate {\n        return getConfig(this.config, keys);\n    }\n\n    /*\n     * handleEvent is a function invoked when an event is registered with an\n     * object instead ( see `addEventListener()` in `on()`)\n     * The name is defined by addEventListener() and cannot be changed.\n     * This pattern is used to be able to release bound event handlers,\n     * (event handlers that need access to `this`) as the bind() function\n     * would create a new function that would have to be kept track off\n     * to be able to properly remove the event handler later.\n     */\n    handleEvent(evt: Event): void {\n        switch (evt.type) {\n            case 'focus':\n                this._onFocus();\n                break;\n            case 'blur':\n                this._onBlur();\n                break;\n            case 'touchstart':\n            case 'mousedown':\n                // iOS <=13 Safari and Firefox on Android\n                onPointerDown(this, evt as PointerEvent);\n                break;\n            case 'pointerdown':\n                onPointerDown(this, evt as PointerEvent);\n                break;\n            case 'resize': {\n                if (this.resizeTimer) {\n                    window.cancelAnimationFrame(this.resizeTimer);\n                }\n                this.resizeTimer = window.requestAnimationFrame(\n                    () => isValidMathfield(this) && this._onResize()\n                );\n                break;\n            }\n            case 'cut':\n                onCut(this);\n                break;\n            case 'copy':\n                onCopy(this, evt as ClipboardEvent);\n                break;\n            case 'paste':\n                onPaste(this);\n                break;\n            default:\n                console.warn('Unexpected event type', evt.type);\n        }\n    }\n    $revertToOriginalContent(): void {\n        this.element.innerHTML = this.config.createHTML(this.originalContent);\n        delete this.element['mathfield'];\n        delete this.accessibleNode;\n        delete this.ariaLiveText;\n        delete this.field;\n        off(this.textarea, 'cut', this);\n        off(this.textarea, 'copy', this);\n        off(this.textarea, 'paste', this);\n        this.textarea.remove();\n        delete this.textarea;\n        this.virtualKeyboardToggleDOMNode.remove();\n        delete this.virtualKeyboardToggleDOMNode;\n        releaseSharedElement(this.popover);\n        delete this.popover;\n        releaseSharedElement(this.keystrokeCaption);\n        delete this.keystrokeCaption;\n        releaseSharedElement(this.virtualKeyboard);\n        delete this.virtualKeyboard;\n        releaseSharedElement(\n            document.getElementById('mathlive-alternate-keys-panel')\n        );\n        off(this.element, 'pointerdown', this);\n        off(this.element, 'touchstart:active mousedown', this);\n        off(this.element, 'focus', this);\n        off(this.element, 'blur', this);\n        off(window, 'resize', this);\n        delete this.element;\n    }\n    resetKeystrokeBuffer(): void {\n        this.keystrokeBuffer = '';\n        this.keystrokeBufferStates = [];\n        clearTimeout(this.keystrokeBufferResetTimer);\n    }\n\n    private _onSelectionDidChange(): void {\n        // Every atom before the new caret position is now committed\n        commitCommandStringBeforeInsertionPoint(this.model);\n        // Keep the content of the textarea in sync wiht the selection.\n        // This will allow cut/copy to work.\n        const result = selectionIsCollapsed(this.model)\n            ? ''\n            : makeRoot('math', getSelectedAtoms(this.model)).toLatex(false);\n        const textarea = this.textarea as HTMLInputElement;\n        if (result) {\n            textarea.value = result;\n            // The textarea may be a span (on mobile, for example), so check that\n            // it has a select() before calling it.\n            if (this.$hasFocus() && textarea.select) {\n                textarea.select();\n            }\n        } else {\n            textarea.value = '';\n            textarea.setAttribute('aria-label', '');\n        }\n        // Update the mode\n        {\n            const previousMode = this.mode;\n            this.mode = getAnchorMode(this.model) || this.config.defaultMode;\n            if (\n                this.mode !== previousMode &&\n                typeof this.config.onModeChange === 'function'\n            ) {\n                this.config.onModeChange(this, this.mode);\n            }\n            if (previousMode === 'command' && this.mode !== 'command') {\n                hidePopover(this);\n                removeCommandString(this.model);\n            }\n        }\n        // Defer the updating of the popover position: we'll need the tree to be\n        // re-rendered first to get an updated caret position\n        updatePopoverPosition(this, { deferred: true });\n\n        // Invoke client listeners, if provided.\n        if (typeof this.config.onSelectionDidChange === 'function') {\n            this.config.onSelectionDidChange(this);\n        }\n    }\n\n    private _onFocus(): void {\n        if (this.config.readOnly) return;\n        if (this.blurred) {\n            this.blurred = false;\n            // The textarea may be a span (on mobile, for example), so check that\n            // it has a focus() before calling it.\n            if (this.textarea.focus) {\n                this.textarea.focus();\n            }\n            if (this.config.virtualKeyboardMode === 'onfocus') {\n                showVirtualKeyboard(this);\n            }\n            updatePopoverPosition(this);\n            if (this.config.onFocus) {\n                this.config.onFocus(this);\n            }\n            requestUpdate(this);\n        }\n    }\n    private _onBlur(): void {\n        if (!this.blurred) {\n            this.blurred = true;\n            this.ariaLiveText.textContent = '';\n            if (this.config.virtualKeyboardMode === 'onfocus') {\n                hideVirtualKeyboard(this);\n            }\n            complete(this, { discard: true });\n            requestUpdate(this);\n            if (this.config.onBlur) {\n                this.config.onBlur(this);\n            }\n        }\n    }\n    private _onResize(): void {\n        this.element.classList.remove(\n            'ML__isNarrowWidth',\n            'ML__isWideWidth',\n            'ML__isExtendedWidth'\n        );\n        if (window.innerWidth >= 1024) {\n            this.element.classList.add('ML__isExtendedWidth');\n        } else if (window.innerWidth >= 768) {\n            this.element.classList.add('ML__isWideWidth');\n        } else {\n            this.element.classList.add('ML__isNarrowWidth');\n        }\n        updatePopoverPosition(this);\n    }\n\n    $perform(command: SelectorPrivate | any[]): boolean {\n        return perform(this, command);\n    }\n\n    private formatMathlist(root: Atom, format: OutputFormat): string {\n        format = format || 'latex';\n        let result = '';\n        if (format === 'latex' || format === 'latex-expanded') {\n            result = root.toLatex(format === 'latex-expanded');\n        } else if (format === 'mathML') {\n            result = atomsToMathML(root, this.config);\n        } else if (format === 'spoken') {\n            result = atomToSpeakableText(root, this.config);\n        } else if (format === 'spoken-text') {\n            const saveTextToSpeechMarkup = this.config.textToSpeechMarkup;\n            this.config.textToSpeechMarkup = '';\n            result = atomToSpeakableText(root, this.config);\n            this.config.textToSpeechMarkup = saveTextToSpeechMarkup;\n        } else if (\n            format === 'spoken-ssml' ||\n            format === 'spoken-ssml-withHighlighting'\n        ) {\n            const saveTextToSpeechMarkup = this.config.textToSpeechMarkup;\n            // const savedAtomIdsSettings = this.config.atomIdsSettings;    // @revisit\n            this.config.textToSpeechMarkup = 'ssml';\n            // if (format === 'spoken-ssml-withHighlighting') {     // @revisit\n            //     this.config.atomIdsSettings = { seed: 'random' };\n            // }\n            result = atomToSpeakableText(root, this.config);\n            this.config.textToSpeechMarkup = saveTextToSpeechMarkup;\n            // this.config.atomIdsSettings = savedAtomIdsSettings;      // @revisit\n        } else if (format === 'json') {\n            const json = atomtoMathJson(root);\n            result = JSON.stringify(json);\n        } else if (format === 'json-2') {\n            const json = atomtoMathJson(root);\n            result = JSON.stringify(json, null, 2);\n        } else if (format === 'ASCIIMath') {\n            result = atomToAsciiMath(root);\n        } else {\n            console.warn('Unknown format :', format);\n        }\n        return result;\n    }\n\n    $text(format: OutputFormat): string {\n        return this.formatMathlist(this.model.root, format);\n    }\n\n    $selectedText(format: OutputFormat): string {\n        const atoms = getSelectedAtoms(this.model);\n        if (!atoms) {\n            return '';\n        }\n        const root = makeRoot('math', atoms);\n        return this.formatMathlist(root, format);\n    }\n    $selectionIsCollapsed(): boolean {\n        return selectionIsCollapsed(this.model);\n    }\n    $selectionDepth(): number {\n        return this.model.path.length;\n    }\n\n    /**\n     * Checks if the selection starts at the beginning of the selection group.\n     */\n    $selectionAtStart(): boolean {\n        return this.model.startOffset() === 0;\n    }\n    $selectionAtEnd(): boolean {\n        return this.model.endOffset() >= this.model.siblings().length - 1;\n    }\n    /**\n     *  True if the entire group is selected\n     */\n    groupIsSelected(): boolean {\n        return (\n            this.model.startOffset() === 0 &&\n            this.model.endOffset() >= this.model.siblings().length - 1\n        );\n    }\n    $latex(text?: string, options?: InsertOptions): string {\n        if (typeof text === 'string') {\n            const oldValue = this.model.root.toLatex();\n            if (text !== oldValue) {\n                options = options ?? { mode: 'math' };\n                insert(this.model, text, {\n                    insertionMode: 'replaceAll',\n                    selectionMode: 'after',\n                    format: 'latex',\n                    mode: 'math',\n                    suppressChangeNotifications:\n                        options.suppressChangeNotifications,\n                    macros: this.config.macros,\n                });\n                this.undoManager.snapshot(this.config);\n                requestUpdate(this);\n            }\n            return text;\n        }\n        // Return the content as LaTeX\n        return this.model.root.toLatex();\n    }\n    $el(): HTMLElement {\n        return this.element;\n    }\n    scrollIntoView(): void {\n        // If a render is pending, do it now to make sure we have correct layout\n        // and caret position\n        if (this.dirty) {\n            render(this);\n        }\n        let pos: number = getCaretPosition(this.field)?.x;\n        const fieldBounds = this.field.getBoundingClientRect();\n        if (typeof pos === 'undefined') {\n            const selectionBounds = getSelectionBounds(this.field);\n            if (selectionBounds) {\n                pos =\n                    selectionBounds.right +\n                    fieldBounds.left -\n                    this.field.scrollLeft;\n            }\n        }\n        if (typeof pos !== 'undefined') {\n            const x = pos - window.scrollX;\n            if (x < fieldBounds.left) {\n                this.field.scroll({\n                    top: 0,\n                    left: x - fieldBounds.left + this.field.scrollLeft - 20,\n                    behavior: 'smooth',\n                });\n            } else if (x > fieldBounds.right) {\n                this.field.scroll({\n                    top: 0,\n                    left: x - fieldBounds.right + this.field.scrollLeft + 20,\n                    behavior: 'smooth',\n                });\n            }\n        }\n    }\n    $insert(s: string, options?: InsertOptions): boolean {\n        if (typeof s === 'string' && s.length > 0) {\n            options = options ?? { mode: 'math' };\n            if (options.focus) {\n                this.$focus();\n            }\n            if (options.feedback) {\n                if (this.config.keypressVibration && navigator?.vibrate) {\n                    navigator.vibrate(HAPTIC_FEEDBACK_DURATION);\n                }\n                if (this.keypressSound) {\n                    this.keypressSound.load();\n                    this.keypressSound.play();\n                }\n            }\n            if (s === '\\\\\\\\') {\n                // This string is interpreted as an \"insert row after\" command\n                addRowAfter(this.model);\n            } else if (s === '&') {\n                addColumnAfter(this.model);\n            } else {\n                const savedStyle = this.style;\n                insert(this.model, s, {\n                    mode: this.mode,\n                    style: getAnchorStyle(this.model),\n                    ...options,\n                });\n                if (options.resetStyle) {\n                    this.style = savedStyle;\n                }\n            }\n            this.undoManager.snapshot(this.config);\n            requestUpdate(this);\n            return true;\n        }\n        return false;\n    }\n    switchMode(mode: ParseMode, prefix = '', suffix = ''): void {\n        this.resetKeystrokeBuffer();\n        // Suppress (temporarily) smart mode if switching to/from text or math\n        // This prevents switching to/from command mode from supressing smart mode.\n        this.smartModeSuppressed =\n            /text|math/.test(this.mode) && /text|math/.test(mode);\n        if (prefix) {\n            this.$insert(prefix, {\n                format: 'latex',\n                mode: { math: 'text', text: 'math' }[mode],\n            });\n        }\n        // Remove any error indicator on the current command sequence (if there is one)\n        decorateCommandStringAroundInsertionPoint(this.model, false);\n        if (mode === 'command') {\n            removeSuggestion(this.model);\n            hidePopover(this);\n            this.suggestionIndex = 0;\n            // Switch to the command mode keyboard layer\n            if (this.virtualKeyboardVisible) {\n                switchKeyboardLayer(this, 'lower-command');\n            }\n            insert(this.model, '\\u001b', { mode: 'math' });\n        } else {\n            this.mode = mode;\n        }\n        if (suffix) {\n            this.$insert(suffix, {\n                format: 'latex',\n                mode: mode,\n            });\n        }\n        // Notify of mode change\n        if (typeof this.config.onModeChange === 'function') {\n            this.config.onModeChange(this, this.mode);\n        }\n        requestUpdate(this);\n    }\n\n    $hasFocus(): boolean {\n        return (\n            document.hasFocus() && deepActiveElement(document) === this.textarea\n        );\n    }\n    $focus(): void {\n        if (!this.$hasFocus()) {\n            // The textarea may be a span (on mobile, for example), so check that\n            // it has a focus() before calling it.\n            if (typeof this.textarea.focus === 'function') {\n                this.textarea.focus();\n            }\n            this.model.announce('line');\n        }\n    }\n    $blur(): void {\n        if (this.$hasFocus()) {\n            if (this.textarea.blur) {\n                this.textarea.blur();\n            }\n        }\n    }\n    $select(): void {\n        selectAll(this.model);\n    }\n    $clearSelection(): void {\n        deleteChar(this.model);\n    }\n\n    $applyStyle(style: Style): void {\n        applyStyle(this.model, style);\n    }\n\n    $keystroke(keys: string, evt?: KeyboardEvent): boolean {\n        return onKeystroke(this, keys, evt);\n    }\n    $typedText(text: string): void {\n        onTypedText(this, text);\n    }\n    canUndo(): boolean {\n        return this.undoManager.canUndo();\n    }\n    canRedo(): boolean {\n        return this.undoManager.canRedo();\n    }\n    popUndoStack(): void {\n        this.undoManager.pop();\n    }\n    snapshot(): void {\n        this.undoManager.snapshot({\n            ...this.config,\n            onUndoStateDidChange: (mf, reason): void => {\n                updateUndoRedoButtons(this);\n                this.config.onUndoStateDidChange(mf, reason);\n            },\n        });\n    }\n    snapshotAndCoalesce(): void {\n        this.undoManager.snapshotAndCoalesce({\n            ...this.config,\n            onUndoStateDidChange: (mf, reason): void => {\n                updateUndoRedoButtons(this);\n                this.config.onUndoStateDidChange(mf, reason);\n            },\n        });\n    }\n    getUndoRecord(): UndoRecord {\n        return this.undoManager.save();\n    }\n    restoreToUndoRecord(s: UndoRecord): void {\n        this.undoManager.restore(s, {\n            ...this.config,\n            suppressChangeNotifications: true,\n        });\n    }\n    undo(): void {\n        return this.undoManager.undo({\n            ...this.config,\n            onUndoStateDidChange: (mf, reason): void => {\n                updateUndoRedoButtons(this);\n                this.config.onUndoStateDidChange(mf, reason);\n            },\n        });\n    }\n    redo(): void {\n        return this.undoManager.redo({\n            ...this.config,\n            onUndoStateDidChange: (mf, reason): void => {\n                updateUndoRedoButtons(this);\n                this.config.onUndoStateDidChange(mf, reason);\n            },\n        });\n    }\n}\n\nfunction deepActiveElement(\n    root: DocumentOrShadowRoot = document\n): Element | null {\n    if (root.activeElement?.shadowRoot?.activeElement) {\n        return deepActiveElement(root.activeElement.shadowRoot);\n    }\n    return root.activeElement;\n}\n","/* eslint no-console:0 */\nimport '../core/atom';\nimport { MACROS, MacroDictionary } from '../core/definitions';\nimport { AutoRenderOptions } from '../public/mathlive';\nimport { ErrorListener } from '../public/core';\n\nexport type AutoRenderOptionsPrivate = AutoRenderOptions & {\n    /** A function that will convert any LaTeX found to\n     * HTML markup. This is only useful to override the default MathLive renderer\n     */\n    renderToMarkup?: (\n        text: string,\n        options: {\n            mathstyle?: 'displaystyle' | 'textstyle';\n            letterShapeStyle?: 'tex' | 'french' | 'iso' | 'upright' | 'auto';\n            macros?: MacroDictionary;\n            onError?: ErrorListener;\n            format?: string;\n        }\n    ) => string;\n\n    /**\n     * a function that will convert any LaTeX found to\n     * MathML markup.\n     */\n    renderToMathML?: (\n        text: string,\n        options: {\n            mathstyle?: string;\n            format?: string;\n            macros?: MacroDictionary;\n        }\n    ) => string;\n\n    /** A function that will convert any LaTeX found to\n     * speakable text markup. */\n    renderToSpeakableText?: (\n        text: string,\n        options: {\n            mathstyle?: string;\n            format?: string;\n            macros?: MacroDictionary;\n        }\n    ) => string;\n    ignoreClassPattern?: RegExp;\n    processClassPattern?: RegExp;\n    processScriptTypePattern?: RegExp;\n\n    mathstyle?: string;\n    format?: string;\n};\n\nfunction findEndOfMath(delimiter, text, startIndex): number {\n    // Adapted from\n    // https://github.com/Khan/perseus/blob/master/src/perseus-markdown.jsx\n    let index = startIndex;\n    let braceLevel = 0;\n\n    const delimLength = delimiter.length;\n\n    while (index < text.length) {\n        const character = text[index];\n\n        if (\n            braceLevel <= 0 &&\n            text.slice(index, index + delimLength) === delimiter\n        ) {\n            return index;\n        } else if (character === '\\\\') {\n            index++;\n        } else if (character === '{') {\n            braceLevel++;\n        } else if (character === '}') {\n            braceLevel--;\n        }\n\n        index++;\n    }\n\n    return -1;\n}\n\nfunction splitAtDelimiters(\n    startData,\n    leftDelim,\n    rightDelim,\n    mathstyle\n): {\n    type: string;\n    data: string;\n    rawData?: string;\n    mathstyle?: string;\n}[] {\n    const finalData = [];\n\n    for (let i = 0; i < startData.length; i++) {\n        if (startData[i].type === 'text') {\n            const text = startData[i].data;\n\n            let lookingForLeft = true;\n            let currIndex = 0;\n            let nextIndex;\n\n            nextIndex = text.indexOf(leftDelim);\n            if (nextIndex !== -1) {\n                currIndex = nextIndex;\n                if (currIndex > 0) {\n                    finalData.push({\n                        type: 'text',\n                        data: text.slice(0, currIndex),\n                    });\n                }\n                lookingForLeft = false;\n            }\n            let done = false;\n            while (!done) {\n                if (lookingForLeft) {\n                    nextIndex = text.indexOf(leftDelim, currIndex);\n                    if (nextIndex === -1) {\n                        done = true;\n                        break;\n                    }\n                    if (currIndex !== nextIndex) {\n                        finalData.push({\n                            type: 'text',\n                            data: text.slice(currIndex, nextIndex),\n                        });\n                    }\n\n                    currIndex = nextIndex;\n                } else {\n                    nextIndex = findEndOfMath(\n                        rightDelim,\n                        text,\n                        currIndex + leftDelim.length\n                    );\n                    if (nextIndex === -1) {\n                        done = true;\n                        break;\n                    }\n\n                    finalData.push({\n                        type: 'math',\n                        data: text.slice(\n                            currIndex + leftDelim.length,\n                            nextIndex\n                        ),\n                        rawData: text.slice(\n                            currIndex,\n                            nextIndex + rightDelim.length\n                        ),\n                        mathstyle: mathstyle,\n                    });\n\n                    currIndex = nextIndex + rightDelim.length;\n                }\n\n                lookingForLeft = !lookingForLeft;\n            }\n            if (currIndex < text.length) {\n                finalData.push({\n                    type: 'text',\n                    data: text.slice(currIndex),\n                });\n            }\n        } else {\n            finalData.push(startData[i]);\n        }\n    }\n\n    return finalData;\n}\n\nfunction splitWithDelimiters(\n    text,\n    delimiters\n): {\n    type: string;\n    data: string;\n    rawData?: string;\n    mathstyle?: string;\n}[] {\n    let data = [{ type: 'text', data: text }];\n    for (let i = 0; i < delimiters.inline.length; i++) {\n        const delimiter = delimiters.inline[i];\n        data = splitAtDelimiters(data, delimiter[0], delimiter[1], 'textstyle');\n    }\n    for (let i = 0; i < delimiters.display.length; i++) {\n        const delimiter = delimiters.display[i];\n        data = splitAtDelimiters(\n            data,\n            delimiter[0],\n            delimiter[1],\n            'displaystyle'\n        );\n    }\n\n    return data;\n}\n\nfunction createMathMLNode(\n    latex: string,\n    options: AutoRenderOptionsPrivate\n): HTMLElement {\n    // Create a node for AT (Assistive Technology, e.g. screen reader) to speak, etc.\n    // This node has a style that makes it be invisible to display but is seen by AT\n    const span = document.createElement('span');\n    try {\n        const html =\n            \"<math xmlns='http://www.w3.org/1998/Math/MathML'>\" +\n            options.renderToMathML(latex, options) +\n            '</math>';\n        span.innerHTML = options.createHTML ? options.createHTML(html) : html;\n    } catch (e) {\n        console.error(\"Could not convert'\" + latex + \"' to MathML with \", e);\n        span.textContent = latex;\n    }\n    span.className = 'sr-only';\n    return span;\n}\n\nfunction createMarkupNode(\n    text: string,\n    options: AutoRenderOptionsPrivate,\n    mathstyle: 'displaystyle' | 'textstyle',\n    createNodeOnFailure: boolean\n): HTMLSpanElement | Text {\n    // Create a node for displaying math.\n    //   This is slightly ugly because in the case of failure to create the markup,\n    //   sometimes a text node is desired and sometimes not.\n    //   'createTextNodeOnFailure' controls this and null is returned when no node is created.\n    // This node is made invisible to AT (screen readers)\n    let span: HTMLSpanElement | Text = document.createElement('span');\n    span.setAttribute('aria-hidden', 'true');\n    if (options.preserveOriginalContent) {\n        span.setAttribute(\n            'data-' + options.namespace + 'original-content',\n            text\n        );\n        if (mathstyle) {\n            span.setAttribute(\n                'data-' + options.namespace + 'original-mathstyle',\n                mathstyle\n            );\n        }\n    }\n\n    try {\n        const html = options.renderToMarkup(text, {\n            mathstyle: mathstyle ?? 'displaystyle',\n            format: 'html',\n            macros: options.macros,\n        });\n        span.innerHTML = options.createHTML ? options.createHTML(html) : html;\n    } catch (e) {\n        console.error(\"Could not parse'\" + text + \"' with \", e);\n        if (createNodeOnFailure) {\n            span = document.createTextNode(text);\n        } else {\n            return null;\n        }\n    }\n    return span;\n}\n\nfunction createAccessibleMarkupPair(\n    text: string,\n    mathstyle: 'displaystyle' | 'textstyle' | string,\n    options: AutoRenderOptionsPrivate,\n    createNodeOnFailure: boolean\n): Node {\n    // Create a math node (a span with an accessible component and a visual component)\n    // If there is an error in parsing the latex, 'createNodeOnFailure' controls whether\n    //   'null' is returned or an accessible node with the text used.\n    const markupNode = createMarkupNode(\n        text,\n        options,\n        mathstyle as 'displaystyle' | 'textstyle',\n        createNodeOnFailure\n    );\n\n    if (\n        markupNode &&\n        /\\b(mathml|speakable-text)\\b/i.test(options.renderAccessibleContent)\n    ) {\n        const fragment = document.createDocumentFragment();\n        if (\n            /\\bmathml\\b/i.test(options.renderAccessibleContent) &&\n            options.renderToMathML\n        ) {\n            fragment.appendChild(createMathMLNode(text, options));\n        }\n        if (\n            /\\bspeakable-text\\b/i.test(options.renderAccessibleContent) &&\n            options.renderToSpeakableText\n        ) {\n            const span = document.createElement('span');\n            const html = options.renderToSpeakableText(text, options);\n            span.innerHTML = options.createHTML\n                ? options.createHTML(html)\n                : html;\n            span.className = 'sr-only';\n            fragment.appendChild(span);\n        }\n        fragment.appendChild(markupNode);\n        return fragment;\n    }\n\n    return markupNode;\n}\n\nfunction scanText(text: string, options: AutoRenderOptionsPrivate): Node {\n    // If the text starts with '\\begin'...\n    // (this is a MathJAX behavior)\n    let fragment: Node = null;\n    if (options.TeX.processEnvironments && /^\\s*\\\\begin/.test(text)) {\n        fragment = document.createDocumentFragment();\n        fragment.appendChild(\n            createAccessibleMarkupPair(text, undefined, options, true)\n        );\n    } else {\n        const data = splitWithDelimiters(text, options.TeX.delimiters);\n        if (data.length === 1 && data[0].type === 'text') {\n            // This text contains no math. No need to continue processing\n            return null;\n        }\n        fragment = document.createDocumentFragment();\n\n        for (let i = 0; i < data.length; i++) {\n            if (data[i].type === 'text') {\n                fragment.appendChild(document.createTextNode(data[i].data));\n            } else {\n                fragment.appendChild(\n                    createAccessibleMarkupPair(\n                        data[i].data,\n                        data[i].mathstyle,\n                        options,\n                        true\n                    )\n                );\n            }\n        }\n    }\n    return fragment;\n}\n\nfunction scanElement(elem, options: AutoRenderOptionsPrivate): void {\n    const originalContent = elem.getAttribute(\n        'data-' + options.namespace + 'original-content'\n    );\n    if (originalContent) {\n        const mathstyle = elem.getAttribute(\n            'data-' + options.namespace + 'mathstyle'\n        );\n        const span = createAccessibleMarkupPair(\n            originalContent,\n            mathstyle,\n            options,\n            false\n        );\n        if (span != null) {\n            elem.textContent = '';\n            elem.appendChild(span);\n        }\n        return;\n    }\n\n    if (elem.childNodes.length === 1 && elem.childNodes[0].nodeType === 3) {\n        // This is a node with textual content only. Perhaps an opportunity\n        // to simplify and avoid creating extra nested elements...\n        const text = elem.childNodes[0].textContent;\n        if (options.TeX.processEnvironments && /^\\s*\\\\begin/.test(text)) {\n            elem.textContent = '';\n            elem.appendChild(\n                createAccessibleMarkupPair(text, undefined, options, true)\n            );\n            return;\n        }\n\n        const data = splitWithDelimiters(text, options.TeX.delimiters);\n        if (data.length === 1 && data[0].type === 'math') {\n            // The entire content is a math expression: we can replace the content\n            // with the latex markup without creating additional wrappers.\n            elem.textContent = '';\n            elem.appendChild(\n                createAccessibleMarkupPair(\n                    data[0].data,\n                    data[0].mathstyle,\n                    options,\n                    true\n                )\n            );\n            return;\n        } else if (data.length === 1 && data[0].type === 'text') {\n            // This element only contained text with no math. No need to\n            // do anything.\n            return;\n        }\n    }\n\n    for (let i = 0; i < elem.childNodes.length; i++) {\n        const childNode = elem.childNodes[i];\n        if (childNode.nodeType === 3) {\n            // A text node\n            // Look for math mode delimiters inside the text\n            const frag = scanText(childNode.textContent, options);\n            if (frag) {\n                i += frag.childNodes.length - 1;\n                elem.replaceChild(frag, childNode);\n            }\n        } else if (childNode.nodeType === 1) {\n            // An element node\n            const tag = childNode.nodeName.toLowerCase();\n            if (\n                tag === 'script' &&\n                options.processScriptTypePattern.test(childNode.type)\n            ) {\n                let style = 'displaystyle';\n                for (const l of childNode.type.split(';')) {\n                    const v = l.split('=');\n                    if (v[0].toLowerCase() === 'mode') {\n                        if (v[1].toLoweCase() === 'display') {\n                            style = 'displaystyle';\n                        } else {\n                            style = 'textstyle';\n                        }\n                    }\n                }\n\n                const span = createAccessibleMarkupPair(\n                    childNode.textContent,\n                    style,\n                    options,\n                    true\n                );\n                childNode.parentNode.replaceChild(span, childNode);\n            } else if (tag !== 'script') {\n                // Element node\n                const shouldRender =\n                    options.processClassPattern.test(childNode.className) ||\n                    !(\n                        options.skipTags.includes(tag) ||\n                        options.ignoreClassPattern.test(childNode.className)\n                    );\n\n                if (shouldRender) {\n                    scanElement(childNode, options);\n                }\n            }\n        }\n        // Otherwise, it's something else, and ignore it.\n    }\n}\n\nconst defaultOptions: AutoRenderOptions = {\n    // Optional namespace for the `data-` attributes.\n    namespace: '',\n\n    // Name of tags whose content will not be scanned for math delimiters\n    skipTags: [\n        'noscript',\n        'style',\n        'textarea',\n        'pre',\n        'code',\n        'annotation',\n        'annotation-xml',\n    ],\n\n    // <script> tags of the following types will be processed. Others, ignored.\n    processScriptType: 'math/tex',\n\n    // Regex pattern of the class name of elements whose contents should not\n    // be processed\n    ignoreClass: 'tex2jax_ignore',\n\n    // Regex pattern of the class name of elements whose contents should\n    // be processed when they appear inside ones that are ignored.\n    processClass: 'tex2jax_process',\n\n    // Indicate whether to preserve or discard the original content of the\n    // elements being rendered in a 'data-original-content' attribute.\n    preserveOriginalContent: true,\n\n    // Indicate the format to use to render accessible content\n    renderAccessibleContent: 'mathml',\n\n    TeX: {\n        processEnvironments: true,\n        delimiters: {\n            inline: [['\\\\(', '\\\\)']],\n            display: [\n                ['$$', '$$'],\n                ['\\\\[', '\\\\]'],\n            ],\n        },\n    },\n};\n\nfunction renderMathInElement(\n    elem: HTMLElement | string,\n    options: AutoRenderOptionsPrivate\n): void {\n    try {\n        options = { ...defaultOptions, ...options };\n        options.ignoreClassPattern = new RegExp(options.ignoreClass);\n        options.processClassPattern = new RegExp(options.processClass);\n        options.processScriptTypePattern = new RegExp(\n            options.processScriptType\n        );\n        options.macros = MACROS;\n\n        // Validate the namespace (used for `data-` attributes)\n        if (options.namespace) {\n            if (!/^[a-z]+[-]?$/.test(options.namespace)) {\n                throw Error(\n                    'options.namespace must be a string of lowercase characters only'\n                );\n            }\n            if (!/-$/.test(options.namespace)) {\n                options.namespace += '-';\n            }\n        }\n\n        scanElement(elem, options);\n    } catch (e) {\n        if (e instanceof Error) {\n            console.error('renderMathInElement(): ' + e.message);\n        } else {\n            console.error(\n                'renderMathInElement(): Could not render math for element ' +\n                    elem\n            );\n        }\n    }\n}\n\nexport default {\n    renderMathInElement,\n};\n","/**\n * This module contains utilities to debug mathlive internal data structures.\n *\n * It is also used by the automated test suite.\n */\n\nimport { ParseMode } from '../public/core';\nimport { parseString } from '../core/parser';\nimport type { Span } from '../core/span';\nimport type { Atom } from '../core/atom';\nimport {\n    MACROS,\n    FUNCTIONS,\n    MATH_SYMBOLS,\n    TEXT_SYMBOLS,\n    ENVIRONMENTS,\n} from '../core/definitions';\nimport { INLINE_SHORTCUTS } from '../editor/shortcuts';\nimport { DEFAULT_KEYBINDINGS } from '../editor/keybindings-definitions';\nimport { getKeybindingMarkup } from '../editor/keybindings';\n\nimport { atomToAsciiMath } from '../editor/atom-to-ascii-math';\nimport { parseMathString } from '../editor/parse-math-string';\n\nexport function latexToAsciiMath(\n    latex: string,\n    mode: ParseMode = 'math'\n): string {\n    const mathlist = parseString(latex, mode, null, null);\n\n    return atomToAsciiMath(mathlist);\n}\n\nexport function asciiMathToLatex(ascii: string): string {\n    const [, result] = parseMathString(ascii, { format: 'ASCIIMath' });\n    return result;\n}\n\n/**\n *\n * @param symbol specify which span to consider.\n * If a string, a span whose body match the string\n * If a number, the nth span in the list\n * If an array, each element in the array indicate the nth child to traverse\n */\nfunction getSymbol(spans: Span[], symbol: string | number | number[]): Span {\n    if (!spans) return null;\n    let childSymbol = null;\n\n    if (Array.isArray(symbol)) {\n        childSymbol = symbol.slice(); // Clone the array\n        symbol = childSymbol.shift(); // Get the first element and remove it from the array\n    }\n\n    let result = null;\n    if (typeof symbol === 'number' && symbol < spans.length) {\n        if (childSymbol && childSymbol.length > 0) {\n            return getSymbol(spans[symbol].children, childSymbol);\n        }\n        return spans[symbol];\n    } else if (typeof symbol === 'string') {\n        for (let i = 0; i < spans.length; i++) {\n            // Does this span match the symbol we're looking for?\n            if (spans[i].body === symbol) {\n                if (childSymbol && childSymbol.length > 0) {\n                    return getSymbol(spans[i].children, childSymbol);\n                }\n                return spans[i];\n            }\n            // If not, try its children\n            result = getSymbol(spans[i].children, symbol);\n            if (result) return result;\n        }\n        return result;\n    }\n    return null;\n}\n\nfunction getProp(\n    spans: Span[],\n    symbol: string | number | number[],\n    prop: string\n): Span {\n    const s = getSymbol(spans, symbol);\n    if (s) return s[prop];\n    return null;\n}\n\n/**\n * Return the type ('mbin', etc...) of a span\n */\nfunction getType(spans: Span[], symbol: string): string {\n    const s = getSymbol(spans, symbol);\n    if (s) return s.type;\n    return null;\n}\n\nfunction getStyle(spans: Span[], symbol: string, prop: string): string {\n    const s = getSymbol(spans, symbol);\n    if (s?.style) return s.style[prop];\n    return null;\n}\n\nfunction getClasses(spans: Span[], symbol: string): string {\n    const s = getSymbol(spans, symbol);\n    if (s) return s.classes ?? '';\n    return null;\n}\n\nfunction hasClass(spans: Span[], symbol: string, cls: string): boolean {\n    const classes = getClasses(spans, symbol);\n    if (!classes) return false;\n    const clsList = classes.split(' ');\n    for (let j = 0; j < clsList.length; j++) {\n        if (clsList[j] === cls) return true;\n    }\n    return false;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\n\nfunction spanToString(span: Span, indent = ''): string {\n    let result = '';\n    if (Array.isArray(span)) {\n        if (span.length === 0) {\n            result += '[]\\n';\n        } else {\n            result += '[\\n';\n            for (let i = 0; i < span.length; i++) {\n                result += spanToString(span[i], '\\t' + indent + i + ',');\n                result += i < span.length - 1 ? ',\\n' : '\\n';\n            }\n            result += indent + ']\\n';\n        }\n    } else {\n        result = indent + '{\\n';\n        if (span.type) {\n            result += indent + 'type:\"' + span.type + '\",\\n';\n        }\n        if (span.body && span.body.length > 0) {\n            result += indent + 'body:\"' + span.body + '\",\\n';\n        }\n        if (span.classes && span.classes.length > 0) {\n            result += indent + 'classes:\"' + span.classes + '\",\\n';\n        }\n        if (span.style) {\n            for (const s in span.style) {\n                if (Object.prototype.hasOwnProperty.call(span.style, s)) {\n                    result += indent + s + ':\"';\n                    result += span.style[s] + '\",\\n';\n                }\n            }\n        }\n        if (span.children && span.children.length > 0) {\n            result +=\n                indent +\n                'children:' +\n                span.children.map((x) => spanToString(x, indent)).join('; ');\n        }\n        result += indent + '}';\n    }\n    return result;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\n\nfunction spanToMarkup(span: Span, indent = ''): string {\n    // if (indent.length === 0) {\n    //     result += '<table>';\n    // }\n    let result = '';\n    if (Array.isArray(span)) {\n        for (let i = 0; i < span.length; i++) {\n            result += spanToMarkup(span[i], indent);\n        }\n    } else if (span) {\n        result = '<br>' + indent;\n        if (span.classes.includes('fontsize-ensurer')) {\n            result += 'FONTSIZE-ENSURER';\n        } else {\n            if (span.type) {\n                result += '<span class=\"type\">' + span.type + '</span>';\n            }\n            if (span.body && span.body.length > 0) {\n                result += '<span class=\"value\">' + span.body + '</span>';\n            }\n            if (span.classes && span.classes.length > 0) {\n                result +=\n                    '&nbsp;<span class=\"classes\">' + span.classes + '</span>';\n            }\n            if (span.isTight) {\n                result += '&nbsp;<span class=\"stylevalue\"> tight </span>';\n            }\n            if (span.caret) {\n                result += '&nbsp;<span class=\"stylevalue\"> caret </span>';\n            }\n\n            if (span.style) {\n                for (const s in span.style) {\n                    if (Object.prototype.hasOwnProperty.call(span.style, s)) {\n                        result +=\n                            '&nbsp;<span class=\"styleprop\">' + s + ':</span>';\n                        result +=\n                            '<span class=\"stylevalue\"> ' +\n                            span.style[s] +\n                            '</span>;&nbsp;';\n                    }\n                }\n            }\n            if (span.children) {\n                result += span.children\n                    .map((x) => spanToMarkup(x, indent + '▷'))\n                    .join('; ');\n            }\n        }\n    }\n    return result;\n}\n\nfunction mathListColorToMarkup(mathlist, propname): string {\n    let result = '';\n    if (mathlist[propname]) {\n        result += '<span class=\"styleprop\">' + propname + '=</span>';\n        result +=\n            '<span style=\"font-size:2em;vertical-align:middle;color:' +\n            mathlist[propname] +\n            '\">&#9632;</span>';\n        result += '<span class=\"stylevalue\">';\n        result += mathlist[propname];\n        result += '</span>';\n    }\n    return result;\n}\n\nfunction mathListPropToMarkup(mathlist, propname): string {\n    let result = '';\n    if (mathlist[propname]) {\n        result += '<span class=\"styleprop\">' + propname + '=</span>';\n        result += '<span class=\"stylevalue\">';\n        result += mathlist[propname];\n        result += '</span>\" ';\n    }\n    return result;\n}\n\nfunction mathlistToMarkup(mathlist: Atom | Atom[], indent = ''): string {\n    if (!mathlist) return '';\n\n    let result = '';\n    if (Array.isArray(mathlist)) {\n        for (let i = 0; i < mathlist.length; i++) {\n            result += mathlistToMarkup(mathlist[i], i + '.' + indent);\n        }\n    } else {\n        result = '<br>' + indent;\n        if (mathlist.type) {\n            result += '<span class=\"type';\n            result += mathlist.isSelected ? ' selected' : '';\n            result += mathlist.caret ? ' caret' : '';\n            result +=\n                '\">' +\n                mathlist.type +\n                (mathlist.caret ? ' caret ' : '') +\n                '</span>';\n        }\n        if (typeof mathlist.body === 'string' && mathlist.body.length > 0) {\n            result += '&nbsp;<span class=\"value\">';\n            result += mathlist.body;\n            if (\n                mathlist.body.charCodeAt(0) < 32 ||\n                mathlist.body.charCodeAt(0) > 127\n            ) {\n                result +=\n                    '&nbsp;U+' +\n                    (\n                        '000000' + mathlist.body.charCodeAt(0).toString(16)\n                    ).substr(-6);\n            }\n            result += '</span>&nbsp;';\n        }\n        if (mathlist.fontFamily === 'mathrm') {\n            result += '<span style=\"opacity:.2\">';\n            result += mathListPropToMarkup(mathlist, 'fontFamily');\n            result += '</span>';\n        } else {\n            result += mathListPropToMarkup(mathlist, 'fontFamily');\n        }\n        // Type 'genfrac'\n        result += mathListPropToMarkup(mathlist, 'hasBarLine');\n        result += mathListPropToMarkup(mathlist, 'leftDelim');\n        result += mathListPropToMarkup(mathlist, 'rightDelim');\n        result += mathListPropToMarkup(mathlist, 'continuousFraction');\n\n        // Type...?\n        result += mathListPropToMarkup(mathlist, 'limits');\n        result += mathListPropToMarkup(mathlist, 'symbol');\n\n        // Type 'color'\n        result += mathListColorToMarkup(mathlist, 'framecolor');\n\n        // Type 'mathstyle'\n        result += mathListPropToMarkup(mathlist, 'mathstyle');\n\n        // Type 'sizeddelim'\n        result += mathListPropToMarkup(mathlist, 'size');\n        result += mathListPropToMarkup(mathlist, 'cls');\n        result += mathListPropToMarkup(mathlist, 'delim');\n\n        // Type 'rule'\n        result += mathListPropToMarkup(mathlist, 'shift');\n        result += mathListPropToMarkup(mathlist, 'width');\n        result += mathListPropToMarkup(mathlist, 'height');\n\n        // Type 'line'\n        result += mathListPropToMarkup(mathlist, 'position');\n\n        // Type 'overunder'\n        result += mathlistToMarkup(mathlist.overscript, indent + '↑');\n        result += mathlistToMarkup(mathlist.underscript, indent + '↓');\n\n        result += mathlistToMarkup(mathlist.superscript, indent + '↑');\n        result += mathlistToMarkup(mathlist.subscript, indent + '↓');\n        result += mathlistToMarkup(mathlist.body as Atom[], indent + '▶');\n        result += mathlistToMarkup(mathlist.numer, indent + '\\u25B2');\n        result += mathlistToMarkup(mathlist.denom, indent + '\\u25Bc');\n\n        if (mathlist.array) {\n            for (let i = 0; i < mathlist.array.length; i++) {\n                result +=\n                    '<br>' +\n                    indent +\n                    '\\u2317 row ' +\n                    (i + 1) +\n                    '/' +\n                    mathlist.array.length;\n                for (let j = 0; j < mathlist.array[i].length; j++) {\n                    result += mathlistToMarkup(\n                        mathlist.array[i][j],\n                        indent + '\\u2317\\u232A'\n                    );\n                }\n            }\n        }\n    }\n    return result;\n}\n\n// Export the public interface for this module\nexport default {\n    mathlistToMarkup,\n    spanToMarkup,\n\n    spanToString,\n\n    hasClass,\n    getClasses,\n    getProp,\n    getStyle,\n    getType,\n\n    latexToAsciiMath,\n    asciiMathToLatex,\n    FUNCTIONS,\n    MATH_SYMBOLS,\n    TEXT_SYMBOLS,\n    ENVIRONMENTS,\n    MACROS,\n\n    INLINE_SHORTCUTS,\n    DEFAULT_KEYBINDINGS,\n\n    getKeybindingMarkup,\n};\n","import { render } from './mathfield-render';\nimport { MathfieldConfig } from '../public/config';\n\nfunction removeHighlight(element: Element): void {\n    element.classList.remove('highlight');\n    if (element.children) {\n        for (const child of element.children) {\n            removeHighlight(child);\n        }\n    }\n}\n\n/**\n * Highlights the span corresponding to the specified atomID.\n *\n * This is used for text-to-speech with synchronized highlighting (read aloud)\n *\n * @category Read Aloud\n * @param {string} atomID\n *\n */\nfunction highlightAtomID(element: Element, atomID?: string): void {\n    if (!atomID || element['dataset']?.atomId === atomID) {\n        element.classList.add('highlight');\n        if (element.children && element.children.length > 0) {\n            Array.from(element.children).forEach((x) => {\n                highlightAtomID(x);\n            });\n        }\n    } else {\n        element.classList.remove('highlight');\n        if (element.children && element.children.length > 0) {\n            Array.from(element.children).forEach((x) => {\n                highlightAtomID(x, atomID);\n            });\n        }\n    }\n}\n\n/**\n * \"Read Aloud\" is an asynchronous operation that reads the\n * reading with synchronized highlighting\n *\n * @param element - The DOM element to highlight\n * @param text - The text to speak\n */\nexport function defaultReadAloudHook(\n    element: HTMLElement,\n    text: string,\n    config: MathfieldConfig\n): void {\n    if (!window) {\n        return;\n    }\n    if (!config && window['mathlive']) {\n        config = window['mathlive'].config;\n    }\n    config = config ?? {};\n\n    if (config.speechEngine !== 'amazon') {\n        console.warn('Use Amazon TTS Engine for synchronized highlighting');\n        if (config.speakHook) config.speakHook(text, config);\n        return;\n    }\n    if (!window['AWS']) {\n        console.warn(\n            'AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk'\n        );\n        return;\n    }\n    const polly = new window['AWS'].Polly({ apiVersion: '2016-06-10' });\n\n    const params = {\n        OutputFormat: 'json',\n        VoiceId: config.speechEngineVoice || 'Joanna',\n        Engine: 'standard', // The neural engine does not appear to support ssml marks\n        Text: text,\n        TextType: 'ssml',\n        SpeechMarkTypes: ['ssml'],\n    };\n\n    window['mathlive'] = window['mathlive'] ?? {};\n    window['mathlive'].readAloudElement = element;\n\n    const statusHook =\n        config.onReadAloudStatus || window['mathlive'].onReadAloudStatus;\n\n    // Request the mark points\n    polly.synthesizeSpeech(params, (err, data) => {\n        if (err) {\n            console.warn('polly.synthesizeSpeech() error:', err, err.stack);\n            return;\n        }\n        if (!data || !data.AudioStream) {\n            console.log('polly.synthesizeSpeech():' + data);\n            return;\n        }\n        const response = new TextDecoder('utf-8').decode(\n            new Uint8Array(data.AudioStream)\n        );\n        window['mathlive'].readAloudMarks = response\n            .split('\\n')\n            .map((x) => (x ? JSON.parse(x) : {}));\n        window['mathlive'].readAloudTokens = [];\n        for (const mark of window['mathlive'].readAloudMarks) {\n            if (mark.value) {\n                window['mathlive'].readAloudTokens.push(mark.value);\n            }\n        }\n        window['mathlive'].readAloudCurrentMark = '';\n\n        // Request the audio\n        params.OutputFormat = 'mp3';\n        params.SpeechMarkTypes = [];\n        polly.synthesizeSpeech(params, function (err, data) {\n            if (err) {\n                console.warn(\n                    'polly.synthesizeSpeech(',\n                    text,\n                    ') error:',\n                    err,\n                    err.stack\n                );\n                return;\n            }\n            if (!data || !data.AudioStream) {\n                return;\n            }\n            const uInt8Array = new Uint8Array(data.AudioStream);\n            const blob = new Blob([uInt8Array.buffer], {\n                type: 'audio/mpeg',\n            });\n            const url = URL.createObjectURL(blob);\n\n            if (!window['mathlive'].readAloudAudio) {\n                window['mathlive'].readAloudAudio = new Audio();\n                window['mathlive'].readAloudAudio.addEventListener(\n                    'ended',\n                    () => {\n                        const mathfield = window['mathlive'].readAloudMathField;\n                        if (statusHook) {\n                            statusHook(mathfield, 'ended');\n                        }\n                        if (mathfield) {\n                            render(mathfield);\n                            window['mathlive'].readAloudElement = null;\n                            window['mathlive'].readAloudMathField = null;\n                            window['mathlive'].readAloudTokens = [];\n                            window['mathlive'].readAloudMarks = [];\n                            window['mathlive'].readAloudCurrentMark = '';\n                        } else {\n                            removeHighlight(\n                                window['mathlive'].readAloudElement\n                            );\n                        }\n                    }\n                );\n                window['mathlive'].readAloudAudio.addEventListener(\n                    'timeupdate',\n                    () => {\n                        let value = '';\n                        // The target, the atom we're looking for, is the one matching the current audio\n                        // plus 100 ms. By anticipating it a little bit, it feels more natural, otherwise it\n                        // feels like the highlighting is trailing the audio.\n                        const target =\n                            window['mathlive'].readAloudAudio.currentTime *\n                                1000 +\n                            100;\n\n                        // Find the smallest element which is bigger than the target time\n                        for (const mark of window['mathlive'].readAloudMarks) {\n                            if (mark.time < target) {\n                                value = mark.value;\n                            }\n                        }\n                        if (window['mathlive'].readAloudCurrentMark !== value) {\n                            window['mathlive'].readAloudCurrentToken = value;\n                            if (\n                                value &&\n                                value === window['mathlive'].readAloudFinalToken\n                            ) {\n                                window['mathlive'].readAloudAudio.pause();\n                            } else {\n                                window['mathlive'].readAloudCurrentMark = value;\n                                highlightAtomID(\n                                    window['mathlive'].readAloudElement,\n                                    window['mathlive'].readAloudCurrentMark\n                                );\n                            }\n                        }\n                    }\n                );\n            } else {\n                window['mathlive'].readAloudAudio.pause();\n            }\n\n            window['mathlive'].readAloudAudio.src = url;\n            if (statusHook) {\n                statusHook(window['mathlive'].readAloudMathField, 'playing');\n            }\n            window['mathlive'].readAloudAudio.play();\n        });\n    });\n}\n\n/**\n * Returns the status of a Read Aloud operation (reading with synchronized\n * highlighting).\n *\n * Possible values are:\n * - `\"ready\"`\n * - `\"playing\"`\n * - `\"paused\"`\n * - `\"unavailable\"`\n *\n * **See** {@linkcode speak}\n * @category Read Aloud\n */\nexport function readAloudStatus():\n    | 'ready'\n    | 'playing'\n    | 'paused'\n    | 'unavailable' {\n    if (!window) return 'unavailable';\n    window['mathlive'] = window['mathlive'] ?? {};\n\n    if (!window['mathlive'].readAloudAudio) return 'ready';\n    if (window['mathlive'].readAloudAudio.paused) return 'paused';\n    if (!window['mathlive'].readAloudAudio.ended) return 'playing';\n\n    return 'ready';\n}\n\n/**\n * Pauses a read aloud operation if one is in progress.\n *\n * **See** {@linkcode speak}\n */\nexport function pauseReadAloud(): void {\n    if (!window) return;\n    window['mathlive'] = window['mathlive'] ?? {};\n    if (window['mathlive'].readAloudAudio) {\n        if (window['mathlive'].onReadAloudStatus) {\n            window['mathlive'].onReadAloudStatus(\n                window['mathlive'].readAloudMathField,\n                'paused'\n            );\n        }\n        window['mathlive'].readAloudAudio.pause();\n    }\n}\n\n/**\n * Resumes a read aloud operation if one was paused.\n *\n * **See** {@linkcode speak}\n */\nexport function resumeReadAloud(): void {\n    if (!window) return;\n    window['mathlive'] = window['mathlive'] ?? {};\n    if (window['mathlive'].readAloudAudio) {\n        if (window['mathlive'].onReadAloudStatus) {\n            window['mathlive'].onReadAloudStatus(\n                window['mathlive'].readAloudMathField,\n                'playing'\n            );\n        }\n        window['mathlive'].readAloudAudio.play();\n    }\n}\n\n/**\n * If a Read Aloud operation is in progress, read from a specified token\n *\n * **See** {@linkcode speak}\n *\n * @param count The number of tokens to read.\n */\nexport function playReadAloud(token: string, count: number): void {\n    if (!window) return;\n    window['mathlive'] = window['mathlive'] ?? {};\n    if (window['mathlive'].readAloudAudio) {\n        let timeIndex = 0;\n        window['mathlive'].readAloudFinalToken = null;\n        if (token) {\n            window['mathlive'].readAloudMarks =\n                window['mathlive'].readAloudMarks || [];\n            for (const mark of window['mathlive'].readAloudMarks) {\n                if (mark.value === token) {\n                    timeIndex = mark.time / 1000;\n                }\n            }\n            let tokenIndex = window['mathlive'].readAloudTokens.indexOf(token);\n            if (tokenIndex >= 0) {\n                tokenIndex += count;\n                if (tokenIndex < window['mathlive'].readAloudTokens.length) {\n                    window['mathlive'].readAloudFinalToken = tokenIndex;\n                }\n            }\n        }\n        window['mathlive'].readAloudAudio.currentTime = timeIndex;\n        if (window['mathlive'].onReadAloudStatus) {\n            window['mathlive'].onReadAloudStatus(\n                window['mathlive'].readAloudMathField,\n                'playing'\n            );\n        }\n        window['mathlive'].readAloudAudio.play();\n    }\n}\n","/// ^.*('\\\\.*').*\nimport { FUNCTIONS, MATH_SYMBOLS } from '../core/definitions';\n\n// Frequency of a symbol.\n// String constants corresponding to frequency values,\n// which are the number of results returned by latexsearch.com\n// When the precise number is known, it is provided. Otherwise,\n// the following constants are used to denote an estimate.\nexport const CRYPTIC = 0;\nexport const ARCANE = 200;\nexport const VERY_RARE = 'VERY_RARE';\nexport const RARE = 1200;\nexport const UNCOMMON = 2000;\nexport const COMMON = 3000;\nexport const SUPERCOMMON = 4000;\n\n/*\n * Set the metadata for the specified symbols\n *\n * metadata('Functions', ['\\\\sin', '\\\\cos'], COMMON, '$0{a}')\n *\n */\nfunction metadata(\n    category,\n    symbols,\n    frequency = COMMON,\n    template = '$0'\n): void {\n    symbols.forEach((symbol) => {\n        if (MATH_SYMBOLS[symbol]) {\n            MATH_SYMBOLS[symbol].frequency = frequency;\n            MATH_SYMBOLS[symbol].category = category;\n            MATH_SYMBOLS[symbol].template = template.replace(/\\$0/g, symbol);\n        }\n        if (FUNCTIONS[symbol]) {\n            // Make a copy of the entry, since it could be shared by multiple\n            // symbols\n            FUNCTIONS[symbol] = {\n                ...FUNCTIONS[symbol],\n                frequency: frequency,\n                category: category,\n                template: template.replace(/\\$0/g, symbol),\n            };\n        }\n    });\n}\n\nmetadata('Trigonometry', ['\\\\cos', '\\\\sin', '\\\\tan'], SUPERCOMMON);\n\nmetadata(\n    'Trigonometry',\n    [\n        '\\\\arcsin',\n        '\\\\arccos',\n        '\\\\arctan',\n        '\\\\arctg',\n        '\\\\arcctg',\n        '\\\\arcsec',\n        '\\\\arccsc',\n        '\\\\arsinh',\n        '\\\\arccosh',\n        '\\\\arctanh',\n        '\\\\arcsech',\n        '\\\\arccsch',\n        '\\\\arg',\n        '\\\\ch',\n        '\\\\cosec',\n        '\\\\cosh',\n        '\\\\cot',\n        '\\\\cotg',\n        '\\\\coth',\n        '\\\\csc',\n        '\\\\ctg',\n        '\\\\cth',\n        '\\\\lg',\n        '\\\\lb',\n        '\\\\sec',\n        '\\\\sinh',\n        '\\\\sh',\n        '\\\\tanh',\n        '\\\\tg',\n        '\\\\th',\n    ],\n    UNCOMMON\n);\n\nmetadata('Functions', ['\\\\ln', '\\\\log', '\\\\exp', '\\\\lim'], SUPERCOMMON);\n\nmetadata(\n    'Functions',\n    ['\\\\dim', '\\\\ker', '\\\\deg', '\\\\det', '\\\\mod', '\\\\min', '\\\\max'],\n    COMMON\n);\nmetadata('Functions', ['\\\\hom'], RARE);\n\nmetadata('Decoration', ['\\\\rule'], ARCANE, '$0{2em}{1em}');\n\nmetadata(\n    'Decoration',\n    ['\\\\color', '\\\\textcolor'],\n    ARCANE,\n    '{$0{m0}A}{$0{m1}B}{$0{m2}C }{$0{m3}a}{$0{m4}b}{$0{m5}c}{$0{m6}8}'\n);\nmetadata(\n    'Decoration',\n    ['\\\\overline', '\\\\underline'],\n    COMMON,\n    '$0{\\\\placeholder{}}'\n);\nmetadata(\n    'Decoration',\n    ['\\\\enclose'],\n    RARE,\n    '\\\\enclose{updiagonalstrike,roundedbox}[1px solid red, mathbackground=\"#fbc0bd\"]{x=0}'\n);\nmetadata(\n    'Decoration',\n    ['\\\\fcolorbox'],\n    RARE,\n    '\\\\fcolorbox{#cd0030}{#ffd400}{\\\\unicode{\"2B1A}}'\n);\n\nmetadata(\n    'Decoration',\n    ['\\\\colorbox'],\n    RARE,\n    '\\\\colorbox{#fbc0bd}{\\\\unicode{\"2B1A}}'\n);\n\nmetadata(\n    'Decoration',\n    ['\\\\boxed', '\\\\cancel', '\\\\bcancel', '\\\\xcancel'],\n    RARE,\n    '$0{\\\\placeholder{}}'\n);\n\nmetadata(\n    'Decoration',\n    ['\\\\bbox'],\n    RARE,\n    '\\\\bbox[#ffd400, solid 2px #ffd400]{\\\\unicode{\"2B1A}}'\n);\n\nmetadata('Styling', ['\\\\mathbb'], SUPERCOMMON, '$0{Don Knuth}');\nmetadata(\n    'Styling',\n    [\n        '\\\\textbf',\n        '\\\\textup',\n        '\\\\textit',\n        '\\\\textrm',\n        '\\\\textsf',\n        '\\\\texttt',\n        '\\\\textnormal',\n        '\\\\textmd',\n        '\\\\textsl',\n        '\\\\textsc',\n\n        '\\\\mathsf',\n        '\\\\mathtt',\n        '\\\\mathrm',\n        '\\\\mathfrak',\n        '\\\\mathcal',\n        '\\\\mathscr',\n        '\\\\mathbf',\n        '\\\\mathmd',\n        '\\\\mathit',\n        '\\\\text',\n        '\\\\mbox',\n        '\\\\Bbb',\n        '\\\\bold',\n        '\\\\bm',\n        '\\\\boldsymbol',\n    ],\n    COMMON,\n    '$0{Don Knuth}'\n);\nmetadata(\n    'Styling',\n    [\n        '\\\\frak',\n        '\\\\tt',\n        '\\\\bf',\n        '\\\\it',\n        '\\\\rmfamily', // Note: In LaTeX, /rmfamily is a no-op in math mode\n        '\\\\sffamily',\n        '\\\\ttfamily',\n        '\\\\class',\n        '\\\\cssId',\n    ],\n    RARE,\n    '{$0 Don Knuth}'\n);\nmetadata(\n    'Styling',\n    ['\\\\bfseries', '\\\\mdseries', '\\\\upshape', '\\\\slshape', '\\\\scshape'],\n    RARE,\n    '\\\\text{$0 Don Knuth}'\n);\n\nmetadata(\n    'Styling',\n    ['\\\\class', '\\\\cssId'],\n    RARE,\n    '$0{testIdentifier}{Don Knuth}'\n);\n\n// Note: In LaTeX, \\fontseries, \\fontfamily, \\fontshape are applicable to\n// text mode only\nmetadata('Styling', ['\\\\fontseries'], RARE, '\\\\text{$0{b}Don Knuth}');\nmetadata('Styling', ['\\\\fontfamily'], RARE, '\\\\text{$0{cmtt}Don Knuth}');\nmetadata('Styling', ['\\\\fontshape'], RARE, '\\\\text{$0{sc}Don Knuth}');\nmetadata('Styling', ['\\\\selectfont'], RARE, '\\\\text{$0}'); // no-op, but only valid in text mode\n\nmetadata('Styling', ['\\\\emph'], RARE, 'Don$0{Knuth}');\nmetadata('Styling', ['\\\\em'], RARE, 'Don{$0 Knuth}');\n\nmetadata(\n    'Layout',\n    [\n        '\\\\mathop',\n        '\\\\mathbin',\n        '\\\\mathrel',\n        '\\\\mathopen',\n        '\\\\mathclose',\n        '\\\\mathpunct',\n        '\\\\mathord',\n        '\\\\mathinner',\n        '\\\\operatorname',\n        '\\\\operatorname*',\n    ],\n    RARE,\n    'x=$0{arg}=0'\n);\nmetadata('Layout', ['\\\\middle'], RARE, '\\\\left\\\\{x$0|x>0\\\\right\\\\}');\nmetadata(\n    'Layout',\n    ['\\\\overset', '\\\\underset', '\\\\stackrel', '\\\\stackbin'],\n    RARE,\n    '$0{arg}{x=0}'\n);\n\nmetadata('Layout', ['\\\\rlap', '\\\\mathrlap'], RARE, '$0{/}0');\nmetadata('Layout', ['\\\\llap', '\\\\mathllap'], RARE, 'o$0{/}');\n\nmetadata(\n    'Fractions',\n    ['\\\\frac'],\n    SUPERCOMMON,\n    '$0{\\\\placeholder{}}{\\\\placeholder{}}'\n);\nmetadata(\n    'Fractions',\n    [\n        '\\\\binom',\n        '\\\\dfrac',\n        '\\\\tfrac',\n        '\\\\dbinom',\n        '\\\\tbinom',\n        '\\\\pdiff',\n        '\\\\cfrac',\n    ],\n    RARE,\n    '$0{\\\\placeholder{}}{\\\\placeholder{}}'\n);\nmetadata(\n    'Fractions',\n    ['\\\\over', '\\\\atop', '\\\\choose'],\n    RARE,\n    '\\\\unicode{\"2B1A} $0 \\\\unicode{\"2B1A}'\n);\nmetadata(\n    'Fractions',\n    ['\\\\overwithdelims', '\\\\atopwithdelims'],\n    RARE,\n    '{\\\\unicode{\"2B1A} $0{\\\\lbrace}{\\\\rbrace} \\\\unicode{\"2B1A}}'\n);\n\nmetadata(\n    'Extensible Operators',\n    ['\\\\sum', '\\\\prod', '\\\\bigcap', '\\\\bigcup', '\\\\int'],\n    SUPERCOMMON\n);\nmetadata(\n    'Extensible Operators',\n    ['\\\\bigoplus', '\\\\smallint', '\\\\iint', '\\\\oint'],\n    COMMON\n);\nmetadata(\n    'Extensible Operators',\n    [\n        '\\\\bigwedge',\n        '\\\\bigvee',\n        '\\\\coprod',\n\n        '\\\\bigsqcup',\n        '\\\\bigotimes',\n        '\\\\bigodot',\n        '\\\\biguplus',\n\n        '\\\\intop',\n        '\\\\sqcup',\n        '\\\\sqcap',\n        '\\\\uplus',\n        '\\\\wr',\n        '\\\\Cap',\n        '\\\\Cup',\n        '\\\\doublecap',\n        '\\\\doublecup',\n        '\\\\amalg',\n\n        '\\\\iiint',\n        '\\\\oiint',\n        '\\\\oiiint',\n        '\\\\intclockwise',\n        '\\\\varointclockwise',\n        '\\\\ointctrclockwise',\n        '\\\\intctrclockwise',\n    ],\n    RARE\n);\n\nmetadata('Accents', ['\\\\vec'], SUPERCOMMON);\nmetadata(\n    'Accents',\n    ['\\\\bar', '\\\\ddot', '\\\\acute', '\\\\tilde', '\\\\check'],\n    COMMON,\n    '$0{\\\\placeholder{}}'\n);\nmetadata('Accents', ['\\\\^', '\\\\`', \"\\\\'\"], RARE, '$0{e}');\nmetadata('Accents', ['\\\\c'], RARE, '$0{c}');\nmetadata('Accents', ['\\\\~'], RARE, '$0{n}');\nmetadata(\n    'Accents',\n    ['\\\\mathring', '\\\\hat', '\\\\dot', '\\\\breve', '\\\\grave'],\n    RARE,\n    '$0{\\\\placeholder{}}'\n);\n\nmetadata(\n    'Extensible Symbols',\n    [\n        '\\\\overrightarrow',\n        '\\\\overleftarrow',\n        '\\\\Overrightarrow',\n        '\\\\overleftharpoon',\n        '\\\\overrightharpoon',\n        '\\\\overleftrightarrow',\n        '\\\\overbrace',\n        '\\\\overlinesegment',\n        '\\\\overgroup',\n        '\\\\widehat',\n        '\\\\widecheck',\n        '\\\\widetilde',\n    ],\n    COMMON,\n    '$0{ABC}'\n);\n\nmetadata(\n    'Extensible Symbols',\n    [\n        '\\\\underrightarrow',\n        '\\\\underleftarrow',\n        '\\\\underleftrightarrow',\n        '\\\\underbrace',\n        '\\\\underlinesegment',\n        '\\\\undergroup',\n        '\\\\utilde',\n    ],\n    COMMON,\n    '$0{ABC}'\n);\n\nmetadata(\n    'Sizing',\n    [\n        '\\\\tiny',\n        '\\\\scriptsize',\n        '\\\\footnotesize',\n        '\\\\small',\n        '\\\\normalsize',\n        '\\\\large',\n        '\\\\Large',\n        '\\\\LARGE',\n        '\\\\huge',\n        '\\\\Huge',\n    ],\n    RARE,\n    '$0{x=0}'\n);\n\nmetadata('Sizing', ['\\\\big', '\\\\Big', '\\\\bigg', '\\\\Bigg'], RARE, '$0($0)');\nmetadata('Sizing', ['\\\\bigl', '\\\\Bigl', '\\\\biggl', '\\\\Biggl'], RARE, '$0(');\nmetadata('Sizing', ['\\\\bigr', '\\\\Bigr', '\\\\biggr', '\\\\Biggr'], RARE, '$0)');\nmetadata('Sizing', ['\\\\bigm', '\\\\Bigm', '\\\\biggm', '\\\\Biggm'], RARE, '$0|');\n\nmetadata(\n    'Letterlike Symbols',\n    [\n        '\\\\nabla',\n        '\\\\partial',\n        '\\\\doubleStruckCapitalN',\n        '\\\\N',\n        '\\\\doubleStruckCapitalR',\n        '\\\\R',\n        '\\\\doubleStruckCapitalQ',\n        '\\\\Q',\n        '\\\\doubleStruckCapitalC',\n        '\\\\C',\n        '\\\\doubleStruckCapitalZ',\n        '\\\\Z',\n        '\\\\exponentialE',\n        '\\\\forall',\n        '\\\\exists',\n        '\\\\nexists',\n        '\\\\$',\n        '\\\\%',\n        '\\\\And',\n        '\\\\degree',\n    ],\n    SUPERCOMMON\n);\n\nmetadata(\n    'Letterlike Symbols',\n    [\n        '\\\\doubleStruckCapitalP',\n        '\\\\P',\n        '\\\\ell',\n        '\\\\hbar',\n        '\\\\hslash',\n        '\\\\imath',\n        '\\\\jmath',\n        '\\\\imaginaryI',\n        '\\\\imaginaryJ',\n        '\\\\differentialD',\n        '\\\\rd',\n        '\\\\capitalDifferentialD',\n        '\\\\rD',\n        '\\\\differencedelta',\n        '\\\\mid',\n        '@',\n        '\\\\Re',\n        '\\\\Im',\n    ],\n    COMMON\n);\nmetadata(\n    'Letterlike Symbols',\n    [\n        '\\\\top',\n        '\\\\bot',\n        '\\\\scriptCapitalE',\n        '\\\\scriptCapitalH',\n        '\\\\scriptCapitalL',\n        '\\\\gothicCapitalC',\n        '\\\\gothicCapitalH',\n        '\\\\gothicCapitalI',\n        '\\\\gothicCapitalR',\n        '\\\\Bbbk',\n        '\\\\Finv',\n        '\\\\Game',\n        '\\\\wp',\n        '\\\\eth',\n        '\\\\mho',\n        '\\\\pounds',\n        '\\\\yen',\n        '\\\\euro',\n    ],\n    RARE\n);\n\nmetadata('Crosses', ['\\\\dagger', '\\\\dag'], SUPERCOMMON);\n\nmetadata(\n    'Crosses',\n    ['\\\\ddag', '\\\\ddagger', '\\\\maltese', '\\\\textdagger', '\\\\textdaggerdbl'],\n    RARE\n);\n\nmetadata(\n    'Various',\n    [\n        '\\\\checkmark',\n\n        '\\\\diagup',\n        '\\\\diagdown',\n\n        '\\\\angle',\n        '\\\\measuredangle',\n        '\\\\sphericalangle',\n\n        '\\\\prime',\n        '\\\\doubleprime',\n        '\\\\backprime',\n        '\\\\backdoubleprime',\n        '\\\\sharp',\n        '\\\\flat',\n        '\\\\natural',\n        '\\\\&',\n        '\\\\#',\n        '\\\\clubsuit',\n        '\\\\spadesuit',\n        '\\\\diamondsuit',\n        '\\\\heartsuit',\n        '\\\\backslash',\n        '\\\\infty',\n        '/',\n        '\\\\_',\n        '\\\\/',\n        '|',\n        \"'\",\n    ],\n    RARE\n);\n\nmetadata('Various', ['\\\\unicode'], RARE, '$0{\"2B1A}');\n\nmetadata(\n    'Arrows',\n    ['\\\\longrightarrow', '\\\\rightarrow', '\\\\Longrightarrow', '\\\\Rightarrow'],\n    SUPERCOMMON\n);\nmetadata(\n    'Arrows',\n    [\n        '\\\\longmapsto',\n        '\\\\mapsto',\n        '\\\\Longleftrightarrow',\n        '\\\\rightleftarrows',\n        '\\\\leftarrow',\n        '\\\\curvearrowleft',\n        '\\\\uparrow',\n        '\\\\downarrow',\n        '\\\\hookrightarrow',\n        '\\\\rightharpoonup',\n        '\\\\rightleftharpoons',\n    ],\n    COMMON\n);\nmetadata(\n    'Arrows',\n    [\n        '\\\\Leftarrow',\n        '\\\\longleftrightarrow',\n        '\\\\longleftarrow',\n        '\\\\Longleftarrow',\n\n        '\\\\searrow',\n        '\\\\nearrow',\n        '\\\\swarrow',\n        '\\\\nwarrow',\n\n        '\\\\Uparrow',\n        '\\\\Downarrow',\n        '\\\\updownarrow',\n        '\\\\Updownarrow',\n\n        '\\\\hookleftarrow',\n        '\\\\leftharpoonup',\n        '\\\\leftharpoondown',\n        '\\\\rightharpoondown',\n\n        '\\\\leftrightarrows',\n\n        '\\\\dashrightarrow',\n        '\\\\dashleftarrow',\n        '\\\\leftleftarrows',\n        '\\\\Lleftarrow',\n        '\\\\twoheadleftarrow',\n        '\\\\leftarrowtail',\n        '\\\\looparrowleft',\n        '\\\\leftrightharpoons',\n        '\\\\circlearrowleft',\n        '\\\\Lsh',\n        '\\\\upuparrows',\n        '\\\\downharpoonleft',\n        '\\\\multimap',\n        '\\\\leftrightsquigarrow',\n        '\\\\twoheadrightarrow',\n        '\\\\rightarrowtail',\n        '\\\\looparrowright',\n        '\\\\curvearrowright',\n        '\\\\circlearrowright',\n        '\\\\Rsh',\n        '\\\\downdownarrows',\n        '\\\\upharpoonright',\n        '\\\\downharpoonright',\n        '\\\\rightsquigarrow',\n        '\\\\leadsto',\n        '\\\\Rrightarrow',\n        '\\\\restriction',\n    ],\n    RARE\n);\nmetadata('Arrows', ['\\\\upharpoonleft', '\\\\rightrightarrows'], CRYPTIC);\n\n// AMS Negated Arrows\nmetadata(\n    'Negated Arrows',\n    [\n        '\\\\nrightarrow',\n        '\\\\nRightarrow',\n        '\\\\nleftrightarrow',\n        '\\\\nLeftrightarrow',\n        '\\\\nleftarrow',\n        '\\\\nLeftarrow',\n    ],\n    RARE\n);\n\nmetadata(\n    'Extensible Symbols',\n    [\n        '\\\\xrightarrow',\n        '\\\\xleftarrow',\n        '\\\\xRightarrow',\n        '\\\\xLeftarrow',\n        '\\\\xleftharpoonup',\n        '\\\\xleftharpoondown',\n        '\\\\xrightharpoonup',\n        '\\\\xrightharpoondown',\n        '\\\\xlongequal',\n        '\\\\xtwoheadleftarrow',\n        '\\\\xtwoheadrightarrow',\n        '\\\\xleftrightarrow',\n        '\\\\xLeftrightarrow',\n        '\\\\xrightleftharpoons',\n        '\\\\xleftrightharpoons',\n        '\\\\xhookleftarrow',\n        '\\\\xhookrightarrow',\n        '\\\\xmapsto',\n        '\\\\xtofrom',\n        '\\\\xrightleftarrows', // From mhchem.sty package\n        '\\\\xrightequilibrium', // From mhchem.sty package\n        '\\\\xleftequilibrium',\n    ],\n    RARE,\n    '$0[below]{above}=0'\n);\n\n// AMS Negated Binary Relations\nmetadata(\n    'Negated Relations',\n    [\n        '\\\\nless',\n        '\\\\nleqslant',\n        '\\\\lneq',\n        '\\\\lneqq',\n        '\\\\nleqq',\n\n        '\\\\unlhd',\n        '\\\\unrhd',\n\n        '\\\\lvertneqq',\n        '\\\\lnsim',\n        '\\\\lnapprox',\n        '\\\\nprec',\n        '\\\\npreceq',\n        '\\\\precnsim',\n        '\\\\precnapprox',\n        '\\\\nsim',\n        '\\\\nshortmid',\n        '\\\\nmid',\n        '\\\\nvdash',\n        '\\\\nvDash',\n        '\\\\ngtr',\n        '\\\\ngeqslant',\n        '\\\\ngeqq',\n        '\\\\gneq',\n        '\\\\gneqq',\n        '\\\\gvertneqq',\n        '\\\\gnsim',\n        '\\\\nsucc',\n        '\\\\succnsim',\n        '\\\\ncong',\n        '\\\\nshortparallel',\n        '\\\\nparallel',\n        '\\\\nVDash',\n        '\\\\nVdash',\n        '\\\\precneqq',\n        '\\\\succneqq',\n        '\\\\gnapprox',\n        '\\\\succnapprox',\n        '\\\\nsucceq',\n    ],\n    RARE\n);\n\n// AMS Hebrew\nmetadata('Hebrew', ['\\\\aleph', '\\\\beth', '\\\\daleth', '\\\\gimel'], RARE);\n\nmetadata(\n    'Fences',\n    [\n        '\\\\lbrace',\n        '\\\\rbrace',\n        '\\\\vert',\n        '\\\\Vert',\n        '\\\\{',\n        '\\\\}',\n        '(',\n        ')',\n        '[',\n        ']',\n    ],\n    SUPERCOMMON\n);\nmetadata(\n    'Fences',\n    [\n        '\\\\langle',\n        '\\\\rangle',\n        '\\\\lfloor',\n        '\\\\rfloor',\n        '\\\\lceil',\n        '\\\\rceil',\n        '\\\\mvert',\n        '\\\\|',\n        '\\\\mVert',\n    ],\n    COMMON\n);\nmetadata(\n    'Fences',\n    [\n        '\\\\lvert',\n        '\\\\rvert',\n        '\\\\lVert',\n        '\\\\rVert',\n        '\\\\lbrack',\n        '\\\\rbrack',\n        '\\\\ulcorner',\n        '\\\\urcorner',\n        '\\\\llcorner',\n        '\\\\lrcorner',\n        '\\\\lgroup',\n        '\\\\rgroup',\n        '\\\\lmoustache',\n        '\\\\rmoustache',\n    ],\n    RARE\n);\n\nmetadata(\n    'Relations',\n    ['=', '\\\\ne', '\\\\neq', '<', '>', '\\\\leqslant', '\\\\geqslant', '\\\\approx'],\n    SUPERCOMMON\n);\nmetadata(\n    'Relations',\n    [\n        '\\\\lt',\n        '\\\\gt',\n        '\\\\le',\n        '\\\\ge',\n        '\\\\leq',\n        '\\\\geq',\n        '\\\\gg',\n        '\\\\cong',\n        '\\\\equiv',\n        '\\\\prec',\n        '\\\\preceq',\n        '\\\\succ',\n        '\\\\perp',\n        '\\\\parallel',\n        '\\\\propto',\n        '\\\\smile',\n        '\\\\frown',\n        '\\\\sim',\n        '\\\\gtrsim',\n    ],\n    COMMON\n);\nmetadata(\n    'Relations',\n    [\n        '\\\\coloneq',\n        '\\\\succeq',\n\n        '\\\\approxeq',\n        '\\\\thickapprox',\n        '\\\\lessapprox',\n        '\\\\gtrapprox',\n        '\\\\precapprox',\n        '\\\\succapprox',\n\n        '\\\\thicksim',\n        '\\\\succsim',\n        '\\\\precsim',\n        '\\\\backsim',\n        '\\\\eqsim',\n        '\\\\backsimeq',\n        '\\\\simeq',\n        '\\\\lesssim',\n\n        '\\\\nleq',\n        '\\\\ngeq',\n\n        '\\\\smallsmile',\n        '\\\\smallfrown',\n        '\\\\bowtie',\n\n        '\\\\asymp',\n\n        '\\\\leqq',\n        '\\\\eqslantless',\n\n        '\\\\ll',\n\n        '\\\\lll',\n        '\\\\lessgtr',\n        '\\\\lesseqgtr',\n        '\\\\lesseqqgtr',\n        '\\\\risingdotseq',\n        '\\\\fallingdotseq',\n        '\\\\preccurlyeq',\n        '\\\\curlyeqprec',\n        '\\\\vDash',\n        '\\\\Vvdash',\n        '\\\\bumpeq',\n        '\\\\Bumpeq',\n        '\\\\geqq',\n        '\\\\eqslantgtr',\n        '\\\\ggg',\n        '\\\\gtrless',\n        '\\\\gtreqless',\n        '\\\\gtreqqless',\n\n        '\\\\succcurlyeq',\n        '\\\\curlyeqsucc',\n        '\\\\Vdash',\n        '\\\\shortmid',\n        '\\\\shortparallel',\n        '\\\\between',\n        '\\\\pitchfork',\n        '\\\\varpropto',\n        '\\\\backepsilon',\n        '\\\\llless',\n        '\\\\gggtr',\n        '\\\\lhd',\n        '\\\\rhd',\n        '\\\\Join',\n\n        '\\\\doteq',\n        '\\\\doteqdot',\n        '\\\\Doteq',\n        '\\\\eqcirc',\n        '\\\\circeq',\n        '\\\\lessdot',\n        '\\\\gtrdot',\n        '\\\\measeq',\n        '\\\\eqdef',\n        '\\\\questeq',\n    ],\n    RARE\n);\n\nmetadata(\n    'Logic',\n    ['\\\\leftrightarrow', '\\\\Leftrightarrow', '\\\\to'],\n    SUPERCOMMON\n);\nmetadata('Logic', ['\\\\models', '\\\\vdash'], COMMON);\nmetadata(\n    'Logic',\n    [\n        '\\\\therefore',\n        '\\\\because',\n        '\\\\implies',\n        '\\\\gets',\n        '\\\\dashv',\n        '\\\\impliedby',\n        '\\\\biconditional',\n        '\\\\roundimplies',\n    ],\n    RARE\n);\n\nmetadata('Operators', ['+', '-', '*', '\\\\cdot'], SUPERCOMMON);\nmetadata('Operators', ['\\\\sqrt'], SUPERCOMMON, '$0{\\\\placeholder{}}');\n\nmetadata('Operators', ['\\\\pm', '\\\\mp', '\\\\times', '\\\\div', '\\\\surd'], COMMON);\n\nmetadata(\n    'Operators',\n    [\n        '\\\\ltimes',\n        '\\\\rtimes',\n        '\\\\leftthreetimes',\n        '\\\\rightthreetimes',\n        '\\\\intercal',\n        '\\\\dotplus',\n        '\\\\centerdot',\n        '\\\\doublebarwedge',\n        '\\\\divideontimes',\n        '\\\\divides',\n    ],\n    RARE\n);\n\nmetadata('Logic', ['\\\\wedge', '\\\\vee', '\\\\neg'], SUPERCOMMON);\nmetadata('Logic', ['\\\\lnot'], COMMON);\nmetadata(\n    'Logic',\n    [\n        '\\\\land',\n        '\\\\lor',\n        '\\\\barwedge',\n        '\\\\veebar',\n        '\\\\nor',\n        '\\\\curlywedge',\n        '\\\\curlyvee',\n    ],\n    RARE\n);\n\nmetadata(\n    'Greek',\n    [\n        '\\\\alpha',\n        '\\\\beta',\n        '\\\\gamma',\n        '\\\\delta',\n        '\\\\epsilon',\n        '\\\\varepsilon',\n        '\\\\zeta',\n        '\\\\eta',\n        '\\\\theta',\n        '\\\\vartheta',\n        '\\\\iota',\n        '\\\\kappa',\n        '\\\\varkappa',\n        '\\\\lambda',\n        '\\\\mu',\n        '\\\\nu',\n        '\\\\xi',\n        '\\\\pi',\n        '\\\\varpi',\n        '\\\\rho',\n        '\\\\varrho',\n        '\\\\sigma',\n        '\\\\varsigma',\n        '\\\\tau',\n        '\\\\phi',\n        '\\\\varphi',\n        '\\\\upsilon',\n        '\\\\chi',\n        '\\\\psi',\n        '\\\\omega',\n        '\\\\Gamma',\n        '\\\\Delta',\n        '\\\\Theta',\n        '\\\\Lambda',\n        '\\\\Xi',\n        '\\\\Pi',\n        '\\\\Sigma',\n        '\\\\Upsilon',\n        '\\\\Phi',\n        '\\\\Psi',\n        '\\\\Omega',\n        '\\\\digamma',\n        '\\\\omicron',\n    ],\n    COMMON\n);\n\nmetadata(\n    'Sets',\n    [\n        '\\\\emptyset',\n        '\\\\varnothing',\n        '\\\\cap',\n        '\\\\cup',\n        '\\\\in',\n        '\\\\notin',\n        '\\\\subset',\n        '\\\\supset',\n        '\\\\subseteq',\n        '\\\\supseteq',\n        '\\\\sqsubseteq',\n    ],\n    SUPERCOMMON\n);\nmetadata(\n    'Sets',\n    [\n        '\\\\setminus',\n        '\\\\not',\n        '\\\\ni',\n        '\\\\sqsupseteq',\n        '\\\\nsupseteqq',\n        '\\\\supsetneq',\n        '\\\\varsupsetneq',\n        '\\\\supsetneqq',\n        '\\\\varsupsetneqq',\n    ],\n    COMMON\n);\nmetadata(\n    'Sets',\n    [\n        '\\\\smallsetminus',\n        '\\\\complement',\n\n        '\\\\owns',\n        '\\\\subsetneq',\n        '\\\\varsubsetneq',\n        '\\\\subsetneqq',\n        '\\\\varsubsetneqq',\n        '\\\\nsubset',\n        '\\\\nsupset',\n        '\\\\nsubseteq',\n        '\\\\nsupseteq',\n        '\\\\nsubseteqq',\n        '\\\\subseteqq',\n        '\\\\Subset',\n        '\\\\sqsubset',\n        '\\\\supseteqq',\n        '\\\\Supset',\n        '\\\\sqsupset',\n    ],\n    RARE\n);\n\nmetadata(\n    'Spacing',\n    ['\\\\space, \\\\quad', '\\\\qquad'],\n    COMMON,\n    '\\\\unicode{\"203A}$0\\\\unicode{\"2039}'\n);\nmetadata(\n    'Spacing',\n    ['\\\\!', '\\\\,', '\\\\:', '\\\\;', '\\\\enskip', '\\\\enspace'],\n    RARE,\n    '\\\\unicode{\"203A}$0\\\\unicode{\"2039}'\n);\nmetadata(\n    'Spacing',\n    ['\\\\hspace', '\\\\hspace*'],\n    RARE,\n    '\\\\unicode{\"203A}$0{1em}\\\\unicode{\"2039}'\n);\nmetadata(\n    'Punctuation',\n    [\n        '\\\\colon',\n        '\\\\cdotp',\n        '\\\\ldots',\n        '\\\\cdots',\n        '\\\\ddots',\n        '\\\\vdots',\n        '?',\n        '!',\n        ':',\n        '\"',\n        ',',\n        '.',\n        ';',\n    ],\n    COMMON\n);\nmetadata('Punctuation', ['\\\\mathellipsis', '\\\\ldotp', '\\\\Colon'], RARE);\n\nmetadata('Boxes', ['\\\\square', '\\\\Box'], COMMON);\nmetadata(\n    'Boxes',\n    ['\\\\blacksquare', '\\\\boxminus', '\\\\boxplus', '\\\\boxtimes', '\\\\boxdot'],\n    RARE\n);\n\nmetadata(\n    'Circles',\n    ['\\\\circ', '\\\\bullet', '\\\\circleddash', '\\\\oplus', '\\\\otimes'],\n    COMMON\n);\nmetadata(\n    'Circles',\n    [\n        '\\\\bigcirc',\n        '\\\\circledast',\n        '\\\\ominus',\n        '\\\\circledcirc',\n        '\\\\oslash',\n        '\\\\circledS',\n        '\\\\circledR',\n        '\\\\odot',\n    ],\n    RARE\n);\n\nmetadata('Triangles', ['\\\\triangle', '\\\\triangleq'], COMMON);\nmetadata(\n    'Triangles',\n    [\n        '\\\\bigtriangleup',\n        '\\\\vartriangle',\n        '\\\\triangledown',\n        '\\\\bigtriangledown',\n        '\\\\triangleleft',\n        '\\\\vartriangleleft',\n        '\\\\trianglelefteq',\n        '\\\\ntriangleleft',\n        '\\\\ntrianglelefteq',\n        '\\\\triangleright',\n        '\\\\vartriangleright',\n        '\\\\trianglerighteq',\n        '\\\\ntriangleright',\n        '\\\\ntrianglerighteq',\n        '\\\\blacktriangle',\n        '\\\\blacktriangledown',\n        '\\\\blacktriangleleft',\n        '\\\\blacktriangleright',\n    ],\n    RARE\n);\n\nmetadata('Shapes', ['\\\\ast', '\\\\star'], COMMON);\nmetadata(\n    'Shapes',\n    ['\\\\diamond', '\\\\Diamond', '\\\\lozenge', '\\\\blacklozenge', '\\\\bigstar'],\n    RARE\n);\n","import type { Mathfield } from './public/mathfield';\nimport type { MathfieldConfig, TextToSpeechOptions } from './public/config';\nimport type { ErrorListener } from './public/core';\n\nimport { decompose } from './core/atom-utils';\nimport { parseString } from './core/parser';\nimport { coalesce, makeSpan, makeStruts } from './core/span';\nimport { MACROS, MacroDictionary } from './core/definitions';\nimport { MathfieldPrivate } from './editor/mathfield-class';\nimport AutoRender from './addons/auto-render';\nimport {\n    jsonToLatex,\n    atomtoMathJson,\n    MathJsonLatexOptions,\n    MathJson,\n} from './addons/math-json';\nimport MathLiveDebug from './addons/debug';\nimport { MATHSTYLES } from './core/mathstyle';\nimport { defaultSpeakHook } from './editor/speech';\nimport {\n    defaultReadAloudHook,\n    readAloudStatus,\n    pauseReadAloud,\n    resumeReadAloud,\n    playReadAloud,\n} from './editor/speech-read-aloud';\nimport { atomToSpeakableText } from './editor/atom-to-speakable-text';\nimport { atomsToMathML } from './addons/math-ml';\n\nimport './addons/definitions-metadata';\nimport { AutoRenderOptionsPrivate } from './addons/auto-render';\n\nfunction latexToMarkup(\n    text: string,\n    options: {\n        mathstyle?: 'displaystyle' | 'textstyle';\n        letterShapeStyle?: 'tex' | 'french' | 'iso' | 'upright' | 'auto';\n        macros?: MacroDictionary;\n        onError?: ErrorListener;\n        format?: string;\n    }\n): string {\n    options = options ?? {};\n    options.mathstyle = options.mathstyle || 'displaystyle';\n    options.letterShapeStyle = options.letterShapeStyle || 'auto';\n\n    //\n    // 1. Parse the formula and return a tree of atoms, e.g. 'genfrac'.\n    //\n\n    const atoms = parseString(\n        text,\n        'math',\n        null,\n        options.macros,\n        false,\n        options.onError\n    );\n\n    //\n    // 2. Transform the math atoms into elementary spans\n    //    for example from genfrac to vlist.\n    //\n    let spans = decompose(\n        {\n            mathstyle: MATHSTYLES[options.mathstyle],\n            letterShapeStyle: options.letterShapeStyle,\n        },\n        atoms\n    );\n\n    //\n    // 3. Simplify by coalescing adjacent nodes\n    //    for example, from <span>1</span><span>2</span>\n    //    to <span>12</span>\n    //\n    spans = coalesce(spans);\n\n    if (options.format === 'span') return (spans as unknown) as string;\n\n    //\n    // 4. Wrap the expression with struts\n    //\n    const wrapper = makeStruts(makeSpan(spans, 'ML__base'), 'ML__mathlive');\n\n    //\n    // 5. Generate markup\n    //\n\n    return wrapper.toMarkup();\n}\n\nfunction makeMathField(\n    element: HTMLElement,\n    config?: MathfieldConfig\n): Mathfield {\n    config = config ?? {};\n    config.speakHook = config.speakHook ?? defaultSpeakHook;\n    config.readAloudHook = config.readAloudHook ?? defaultReadAloudHook;\n    return new MathfieldPrivate(getElement(element), config);\n}\n\nfunction latexToMathML(\n    latex: string,\n    options?: {\n        macros?: MacroDictionary;\n        onError?: ErrorListener;\n        generateID?: boolean;\n    }\n): string {\n    options = options ?? {};\n    options.macros = { ...MACROS, ...(options.macros ?? {}) };\n\n    return atomsToMathML(\n        parseString(\n            latex,\n            'math',\n            null,\n            options.macros,\n            false,\n            options.onError\n        ),\n        options\n    );\n}\n\nfunction latexToAST(\n    latex: string,\n    options?: MathJsonLatexOptions & {\n        macros?: MacroDictionary;\n        onError?: ErrorListener;\n    }\n): MathJson {\n    options = options ?? {};\n    options.macros = { ...MACROS, ...(options.macros ?? {}) };\n\n    return atomtoMathJson(\n        parseString(\n            latex,\n            'math',\n            null,\n            options.macros,\n            false,\n            options.onError\n        ),\n        options\n    );\n}\n\nfunction astToLatex(ast: MathJson, options: MathJsonLatexOptions): string {\n    return jsonToLatex(\n        typeof ast === 'string' ? JSON.parse(ast) : ast,\n        options\n    );\n}\n\nfunction latexToSpeakableText(\n    latex: string,\n    options: TextToSpeechOptions & {\n        macros?: MacroDictionary;\n        onError?: ErrorListener;\n    }\n): string {\n    options = options ?? {};\n    options.macros = options.macros ?? {};\n    Object.assign(options.macros, MACROS);\n\n    const mathlist = parseString(\n        latex,\n        'math',\n        null,\n        options.macros,\n        false,\n        options.onError\n    );\n\n    return atomToSpeakableText(\n        mathlist,\n        options as Required<TextToSpeechOptions>\n    );\n}\n\nfunction renderMathInDocument(options: AutoRenderOptionsPrivate): void {\n    renderMathInElement(document.body, options);\n}\n\nfunction getElement(element: string | HTMLElement): HTMLElement {\n    if (typeof element === 'string') {\n        const result: HTMLElement = document.getElementById(element);\n        if (!result) {\n            throw Error(`The element with ID \"${element}\" could not be found.`);\n        }\n        return result;\n    }\n    return element;\n}\n\nfunction renderMathInElement(\n    element: HTMLElement,\n    options: AutoRenderOptionsPrivate\n): void {\n    options = options ?? {};\n    options.renderToMarkup = options.renderToMarkup ?? latexToMarkup;\n    options.renderToMathML = options.renderToMathML ?? latexToMathML;\n    options.renderToSpeakableText =\n        options.renderToSpeakableText || latexToSpeakableText;\n    options.macros = options.macros || MACROS;\n    AutoRender.renderMathInElement(getElement(element), options);\n}\n\nfunction validateNamespace(options): void {\n    if (options.namespace) {\n        if (!/^[a-z]+[-]?$/.test(options.namespace)) {\n            throw Error(\n                'options.namespace must be a string of lowercase characters only'\n            );\n        }\n        if (!/-$/.test(options.namespace)) {\n            options.namespace += '-';\n        }\n    }\n}\n\nfunction revertToOriginalContent(\n    element: string | HTMLElement | MathfieldPrivate,\n    options: AutoRenderOptionsPrivate\n): void {\n    if (element instanceof MathfieldPrivate) {\n        element.$revertToOriginalContent();\n    } else {\n        // element is a pair: accessible span, math -- set it to the math part\n        element = getElement(element).children[1] as HTMLElement;\n        options = options ?? {};\n        validateNamespace(options);\n        const html = element.getAttribute(\n            'data-' + (options.namespace ?? '') + 'original-content'\n        );\n        element.innerHTML = options.createHTML\n            ? options.createHTML(html)\n            : html;\n    }\n}\n\nfunction getOriginalContent(\n    element: string | HTMLElement,\n    options: AutoRenderOptionsPrivate\n): string {\n    if (element instanceof MathfieldPrivate) {\n        return element.originalContent;\n    }\n    // element is a pair: accessible span, math -- set it to the math part\n    element = getElement(element).children[1] as HTMLElement;\n    options = options ?? {};\n    validateNamespace(options);\n    return element.getAttribute(\n        'data-' + (options.namespace ?? '') + 'original-content'\n    );\n}\n\n// This SDK_VERSION variable will be replaced during the build process.\nconst version = '{{SDK_VERSION}}';\n\nexport default {\n    version,\n    latexToMarkup,\n    latexToMathML,\n    latexToSpeakableText,\n    latexToAST,\n    astToLatex,\n    makeMathField,\n    renderMathInDocument,\n    renderMathInElement,\n    revertToOriginalContent,\n    getOriginalContent,\n\n    readAloud: defaultReadAloudHook,\n    readAloudStatus,\n    pauseReadAloud,\n    resumeReadAloud,\n    playReadAloud,\n\n    debug: {\n        getStyle: MathLiveDebug.getStyle,\n        getType: MathLiveDebug.getType,\n        spanToString: MathLiveDebug.spanToString,\n        hasClass: MathLiveDebug.hasClass,\n        latexToAsciiMath: MathLiveDebug.latexToAsciiMath,\n        asciiMathToLatex: MathLiveDebug.asciiMathToLatex,\n        FUNCTIONS: MathLiveDebug.FUNCTIONS,\n        MATH_SYMBOLS: MathLiveDebug.MATH_SYMBOLS,\n        TEXT_SYMBOLS: MathLiveDebug.TEXT_SYMBOLS,\n        ENVIRONMENTS: MathLiveDebug.ENVIRONMENTS,\n        MACROS: MathLiveDebug.MACROS,\n        DEFAULT_KEYBINDINGS: MathLiveDebug.DEFAULT_KEYBINDINGS,\n        getKeybindingMarkup: MathLiveDebug.getKeybindingMarkup,\n    },\n};\n"],"names":["applyStyleForMode","emit","emitDefinition","spanHeight","spanDepth","FONTMETRICS","spanItalic","height","depth","skew","spanSkew","applyStyle","clonePath","register","makeID","toString","registerCommand","SPECIAL_OPERATORS","platform","applyStyleToModel","latexToMarkup","l10n","isFunction","isNumber","parse","updateConfig","getDefaultConfig","getConfig","scanText","renderMathInElement"],"mappings":"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AAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,O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E,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;KAC9B;IACD,WAAW,EAAE;QACT,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACtC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACvB,MAAM,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KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QAC7B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QAC7B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;KACnC;IACD,aAAa,EAAE;QACX,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACpC,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACpC,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACpC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACpC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC7B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QACnC,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC7B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACpC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;QAC7B,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC9B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAClC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC9B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC/B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;KAC7B;IACD,cAAc,EAAE;QACZ,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAClB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACnB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,C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,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC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QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QACpC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC9B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,C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AO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QAC3C,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QAC3C,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CA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AAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC7B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAA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AAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAClC,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,E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AE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;KACnC;IACD,mBAAmB,EAAE;QACjB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EA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C,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACnB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,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AG;IACN,CAAC,EAAE,GAAG;;IAGN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,GAAG;IACN,CAAC,EAAE,G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AAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,I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AI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC5B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC3B,KAAK,EAAE,CAAC,GAAG,EAAE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AC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,WAAW,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QACjC,YAAY,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAClC,SAAS,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC/B,SAAS,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC/B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,SAAS,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC/B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC;QAC7B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,YAAY,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAClC,cAAc,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QACpC,cAAc,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QACpC,SAAS,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC/B,aAAa,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QACnC,aAAa,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QACnC,WAAW,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;KACpC;CACJ,CAAC,CAAC;AAEHA,UAAQ,CAAC;IACL,EAAE,EAAE,cAAc;IAClB,MAAM,EAAE,IAAI;IACZ,WAAW,EAAE,QAAQ;IACrB,QAAQ,EAAE,OAAO;IACjB,KAAK,EAAE,CAAC;IACR,OAAO,EAAE;QACL,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,CAAC;QAC7B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EA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,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,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AAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,E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"}